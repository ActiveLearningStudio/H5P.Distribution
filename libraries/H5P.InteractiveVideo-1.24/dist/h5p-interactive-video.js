(()=>{var t={230:t=>{t.exports="object"==typeof self?self.FormData:window.FormData}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(()=>{"use strict";const t=function(t){const e=t.length;return function n(){const o=Array.prototype.slice.call(arguments,0);return o.length>=e?t.apply(null,o):function(){const t=Array.prototype.slice.call(arguments,0);return n.apply(null,o.concat(t))}}},e=t((function(t,e){e.forEach(t)})),o=(t((function(t,e){return e.map(t)})),t((function(t,e){return e.filter(t)}))),i=(t((function(t,e){return e.some(t)})),t((function(t,e){return-1!=e.indexOf(t)}))),r=t((function(t,e){return o((e=>!i(e,t)),e)})),s=t(((t,e)=>e.getAttribute(t))),a=t(((t,e,n)=>n.setAttribute(t,e))),c=t(((t,e)=>e.removeAttribute(t))),l=t(((t,e)=>e.hasAttribute(t))),u=(t(((t,e,n)=>n.getAttribute(t)===e)),t(((t,e)=>{const n=s(t,e);a(t,("true"!==n).toString(),e)})),t(((t,e)=>t.appendChild(e))),t(((t,e)=>e.querySelector(t))),t(((t,e)=>{return n=e.querySelectorAll(t),Array.prototype.slice.call(n);var n})),t(((t,e)=>t.removeChild(e))),t(((t,e)=>e.classList.contains(t))),t(((t,e)=>e.classList.add(t)))),d=t(((t,e)=>e.classList.remove(t))),h=u("hidden"),p=d("hidden"),f=(t(((t,e)=>(t?p:h)(e))),t(((t,e,n)=>{n.classList[e?"add":"remove"](t)})),c("tabindex")),m=(e(f),a("tabindex","0")),v=a("tabindex","-1"),b=l("tabindex");class g{constructor(t){Object.assign(this,{listeners:{},on:function(t,e,n){const o={listener:e,scope:n};return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(o),this},fire:function(t,e){return(this.listeners[t]||[]).every((function(t){return!1!==t.listener.call(t.scope||this,e)}))},propagate:function(t,e){let n=this;t.forEach((t=>e.on(t,(e=>n.fire(t,e)))))}}),this.plugins=t||[],this.elements=[],this.negativeTabIndexAllowed=!1,this.on("nextElement",this.nextElement,this),this.on("previousElement",this.previousElement,this),this.on("firstElement",this.firstElement,this),this.on("lastElement",this.lastElement,this),this.initPlugins()}addElement(t){this.elements.push(t),this.firesEvent("addElement",t),1===this.elements.length&&this.setTabbable(t)}insertElementAt(t,e){this.elements.splice(e,0,t),this.firesEvent("addElement",t),1===this.elements.length&&this.setTabbable(t)}removeElement(t){this.elements=r([t],this.elements),b(t)&&(this.setUntabbable(t),this.elements[0]&&this.setTabbable(this.elements[0])),this.firesEvent("removeElement",t)}count(){return this.elements.length}firesEvent(t,e){const n=this.elements.indexOf(e);return this.fire(t,{element:e,index:n,elements:this.elements,oldElement:this.tabbableElement})}nextElement({index:t}){const e=t===this.elements.length-1,n=this.elements[e?0:t+1];this.setTabbable(n),n.focus()}firstElement(){const t=this.elements[0];this.setTabbable(t),t.focus()}lastElement(){const t=this.elements[this.elements.length-1];this.setTabbable(t),t.focus()}setTabbableByIndex(t){const e=this.elements[t];e&&this.setTabbable(e)}setTabbable(t){e(this.setUntabbable.bind(this),this.elements),m(t),this.tabbableElement=t}setUntabbable(t){t!==document.activeElement&&(this.negativeTabIndexAllowed?v(t):f(t))}previousElement({index:t}){const e=0===t,n=this.elements[e?this.elements.length-1:t-1];this.setTabbable(n),n.focus()}useNegativeTabIndex(){this.negativeTabIndexAllowed=!0,this.elements.forEach((t=>{t.hasAttribute("tabindex")||v(t)}))}initPlugins(){this.plugins.forEach((function(t){void 0!==t.init&&t.init(this)}),this)}}class y{constructor(){this.selectability=!0}init(t){this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.controls=t,this.controls.on("addElement",this.listenForKeyDown,this),this.controls.on("removeElement",this.removeKeyDownListener,this)}listenForKeyDown({element:t}){t.addEventListener("keydown",this.boundHandleKeyDown)}removeKeyDownListener({element:t}){t.removeEventListener("keydown",this.boundHandleKeyDown)}handleKeyDown(t){switch(t.which){case 27:this.close(t.target),t.preventDefault(),t.stopPropagation();break;case 35:this.lastElement(t.target),t.preventDefault(),t.stopPropagation();break;case 36:this.firstElement(t.target),t.preventDefault(),t.stopPropagation();break;case 13:case 32:this.select(t.target),t.preventDefault(),t.stopPropagation();break;case 37:case 38:this.hasChromevoxModifiers(t)||(this.previousElement(t.target),t.preventDefault(),t.stopPropagation());break;case 39:case 40:this.hasChromevoxModifiers(t)||(this.nextElement(t.target),t.preventDefault(),t.stopPropagation())}}hasChromevoxModifiers(t){return t.shiftKey||t.ctrlKey}previousElement(t){!1!==this.controls.firesEvent("beforePreviousElement",t)&&(this.controls.firesEvent("previousElement",t),this.controls.firesEvent("afterPreviousElement",t))}nextElement(t){!1!==this.controls.firesEvent("beforeNextElement",t)&&(this.controls.firesEvent("nextElement",t),this.controls.firesEvent("afterNextElement",t))}select(t){this.selectability&&!1!==this.controls.firesEvent("before-select",t)&&(this.controls.firesEvent("select",t),this.controls.firesEvent("after-select",t))}firstElement(t){!1!==this.controls.firesEvent("beforeFirstElement",t)&&(this.controls.firesEvent("firstElement",t),this.controls.firesEvent("afterFirstElement",t))}lastElement(t){!1!==this.controls.firesEvent("beforeLastElement",t)&&(this.controls.firesEvent("lastElement",t),this.controls.firesEvent("afterLastElement",t))}disableSelectability(){this.selectability=!1}enableSelectability(){this.selectability=!0}close(t){!1!==this.controls.firesEvent("before-close",t)&&(this.controls.firesEvent("close",t),this.controls.firesEvent("after-close",t))}}var S=0,k=1,w=function(t,e,n,o,i,r){var s=this,a="interactive-video-".concat(r,"-menu-").concat(t),c=new g([new y]);c.on("close",(function(){return d()}));var l,u=[];H5P.EventDispatcher.call(s);var d=function(){s.control.setAttribute("aria-expanded","false"),s.control.focus(),s.popup.classList.remove("h5p-show"),s.trigger("close")},h=function(){"true"===s.control.getAttribute("aria-expanded")?d():(s.control.setAttribute("aria-expanded","true"),s.popup.classList.add("h5p-show"),s.trigger("open"),s.popup.querySelector('li[tabindex="0"]').focus())},p=function(t){var e=t.value===n.value,i=T(null,k,t.label,(function(){!function(t,e){n=e,function(t,e,n){for(var o=0;o<t.length;o++)e.call(n,t[o],o)}(l.querySelectorAll('[aria-checked="true"]'),(function(t){return t.setAttribute("aria-checked","false")}),this),t.setAttribute("aria-checked","true"),d(),s.trigger("select",e)}(this,t)}),"li",o);return u.push({option:t,element:i}),i.setAttribute("aria-checked",e.toString()),i.setAttribute("aria-describedby",a),c.addElement(i),e?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex"),i};s.updateOptions=function(t){l&&l.parentNode.removeChild(l),(l=C(null,null,"ol")).setAttribute("role","menu");for(var e=0;e<t.length;e++)l.appendChild(p(t[e]));s.popup.appendChild(l)},s.popup=C("h5p-chooser h5p-"+t,'<h2 id="'.concat(a,'">').concat(i[t],"</h2>")),s.popup.setAttribute("role","dialog");var f=T("h5p-chooser-close-button",S,i.close,h,"div","button");s.popup.appendChild(f),s.control=T("h5p-control h5p-"+t,S,i[t],h,"div","button"),s.control.setAttribute("aria-haspopup","true"),s.overlayControl=T("h5p-minimal-button h5p-"+t,k,i[t],h,"div","menuitem"),s.overlayControl.tabIndex="-1",s.updateOptions(e)};(w.prototype=Object.create(H5P.EventDispatcher.prototype)).constructor=w;var C=function(t,e,n){var o=document.createElement(n||"div");return t&&(o.className=t),e&&(o.innerHTML=e),o},T=function(t,e,n,o,i,r){var s=C(t,e===k?n:"",i);return s.tabIndex=0,s.setAttribute("role",r),e===S&&(s.title=n),s.addEventListener("click",(function(t){o.call(s,t)}),!1),s.addEventListener("keydown",(function(t){32!==t.which&&13!==t.which||(t.preventDefault(),o.call(s,t))}),!1),s};const $=w,x={ENTER:13,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},E=(t,e,n={ctrl:!1,shift:!1})=>-1!==e.indexOf(t.which)&&(!(n.ctrl&&!t.ctrlKey)&&!(n.shift&&!t.shiftKey)),P=t=>-1!==[x.ENTER,x.SPACE].indexOf(t.which),A=(t,e,n)=>{t.on("keydown",(t=>{for(let o=0;o<e.length;o++){const i=e[o];if(E(t,[i.key],{ctrl:i.ctrl,shift:i.shift}))return i.preventDefault&&t.preventDefault(),n(t)}}))};function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function B(){return B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},B.apply(this,arguments)}var R=H5P.jQuery,O=function(t){return void 0!==t&&"string"==typeof t&&t.length>0},D=function(t){return O(t)?R("<div>".concat(t,"</div>")).text():void 0},M="timecode",H=function(t,e){return void 0!==t.goto&&t.goto.type===e},N=["H5P.Image","H5P.Nil","H5P.Table","H5P.Link","H5P.GoToQuestion","H5P.IVHotspot","H5P.Text"],L=["H5P.Text","H5P.Table"],V=function(t){return-1!==L.indexOf(t)};function F(t,e,n){var o,i,r,s,a=this;H5P.EventDispatcher.call(a);var c=t.action;n&&(c.userDatas={state:n});var l,u,d,h,p=c.library.split(" ")[0],f=e.l10n[function(t,e){return-1!==N.indexOf(t)||H(e,M)}(p,t)?"content":"interaction"],m="H5P.Nil"!==p&&"button"===t.displayType,v=[c.params.contentName,m?D(t.label):"","H5P.Link"===p&&void 0!==c.params.title?c.params.title:t.libraryTitle].filter(O)[0],b=!1,g=!1,y=!1,S=t.action.metadata;this.on("open-dialog",(function(){P()})),this.on("show-mask",(function(){j(this.getElement())}));var k=function(n){o=R("<div/>",{tabindex:0,role:"button",class:"h5p-interaction "+l+(n?"":" h5p-hidden"),"aria-popup":"true","aria-expanded":"false","aria-label":v,css:{left:t.x+"%",top:t.y+"%",width:"",height:""},on:{click:function(){a.dialogDisabled||(P(),o.attr("aria-expanded","true"))},keydown:function(t){13!==t.which&&32!==t.which||a.dialogDisabled||(P(),o.attr("aria-expanded","true"),t.preventDefault())}}}),a.getRequiresCompletion()&&void 0===e.editor&&e.currentState!==H5P.InteractiveVideo.SEEKING&&P(!0),R("<div/>",{class:"h5p-touch-area"}).appendTo(o),R("<div/>",{class:"h5p-interaction-button"}).appendTo(o),e.editor&&o.hover((function(){o.is(".focused")||o.is(":focus")||e.dnb&&(!e.dnb||e.dnb.newElement)?(e.editor.hideInteractionTitle(),b=!1):(e.editor.showInteractionTitle(v,o),b=!0)}),(function(){e.editor.hideInteractionTitle(),b=!1})).focus((function(){e.editor.hideInteractionTitle(),b=!1})).click((function(){e.editor.hideInteractionTitle()}));var r=O(D(t.label));t.label&&r&&(i=w(t.label,"h5p-interaction").appendTo(o)),a.trigger("display",o),setTimeout((function(){o&&o.removeClass("h5p-hidden")}),0)},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return R("<div/>",{class:"h5p-interaction-label ".concat(e),html:'<div class="h5p-interaction-label-text">'.concat(t,"</div>")})},C=function(){if((o=w(t.label,"h5p-interaction h5p-interaction-label-standalone")).css({left:"".concat(t.x,"%"),top:"".concat(t.y,"%"),width:"",height:"initial"}),a.trigger("display",o),void 0===e.editor){var n=H5P.jQuery(t.label).text();T(n)}return setTimeout((function(){o&&o.removeClass("h5p-hidden")}),0),o},T=function(t){var n=e.createXAPIEventTemplate({id:"http://activitystrea.ms/schema/1.0/consume",display:{"en-US":"consumed"}},{result:{completion:!0}});B(n.data.statement.object.definition,{name:{"en-US":t||"Label"}}),e.trigger(n)},$=function(e){if("timecode"===t.goto.type)e.click((function(e){1===e.which&&L({data:t.goto.time})})).keypress((function(e){32===e.which&&L({data:t.goto.time})})).attr("href","javascript:void(0)").attr("tabindex","0");else{var n=t.goto.url;e.keypress((function(t){32===t.which&&this.click()})).attr({href:("other"!==n.protocol?n.protocol:"")+n.url,target:"_blank"})}return e.addClass("goto-clickable")},x=function(t){var n=!e.hasUncompletedRequiredInteractions(t);u&&u.trigger("hide"),o&&a.trigger("hide",o),a.isButton()?n&&e.dnb.dialog.close():(e.isMobileView&&n&&e.dnb.dialog.close(),o&&o.detach()),a.trigger("remove",o),n&&q(o)},E=function(t){if("H5P.Questionnaire"===p){if(t.find(".h5p-interaction-continue-button").length)return;var n=function(){var t=document.createElement("button");return t.innerHTML=e.l10n.continueWithVideo,t.className="h5p-interaction-continue-button",t.addEventListener("click",(function(){x(),e.play()})),t}(),o=t.find(".h5p-questionnaire-success-center");o.length&&o.get(0).appendChild(n),u.on("noSuccessScreen",(function(){x(),e.play()}))}"H5P.FreeTextQuestion"===p&&u.on("continue",(function(){x(),e.play()}))},P=function(n){var i=e.$container.find(".h5p-dialog-wrapper"),r=i.find(".h5p-dialog-titlebar");"function"==typeof u.setActivityStarted&&"function"==typeof u.getScore&&u.setActivityStarted();var s=a.isGotoClickable(),l=i.find("[tabindex]"),d=R(s?"<a>":"<div>",{class:"h5p-dialog-interaction h5p-frame"});!s&&V(p)&&d.attr("tabindex","0"),void 0!==e.editor?d.attr("tabindex",-1):0===l.length&&d.attr("tabindex",0),a.getRequiresCompletion()&&i.keydown((function(t){!function(t,e){var n=function(t){return e.target===t.get(0)},o=9===e.which,i=t.first(),r=t.last();o&&e.shiftKey&&n(i)?(r.focus(),e.preventDefault()):o&&n(r)&&(i.focus(),e.preventDefault())}(i.find('[tabindex="0"], button, input').filter(":visible"),t)}));var h=s?$(d):d;if(u.attach(h),E(h),K(u)&&(a.score=u.getScore(),a.maxScore=u.getMaxScore()),a.hasFullScore()&&n){if(i.hasClass("h5p-hidden"))return}else a.getRequiresCompletion()&&!a.hasFullScore()&&(e.dnb.dialog.hideCloseButton(),e.dnb.dialog.disableOverlay=!0,i.click((function(){a.hasFullScore()||e.showWarningMask().find(".h5p-button-back").click((function(){return d.find("button").last().focus()}))})));e.dnb.dialog.open(d),e.disableTabIndexes(),e.dnb.dialog.addLibraryClass(p),e.dnb.dialog.toggleClass("goto-clickable-visualize",!(!s||!t.goto.visualize)),e.dnb.dialog.toggleClass("h5p-goto-timecode",H(t,M)),e.dnb.dialog.disableOverlay&&e.restorePosterTabIndexes();e.dnb.dialog.once("close",(function(){e.dnb.$dialogContainer.one("transitionend",(function(){d.is(".h5p-image")&&d.find("img").css({width:"",height:""})}));try{void 0!==u.pause&&(u.pause instanceof Function||"function"==typeof u.pause)&&u.pause()}catch(t){H5P.error(t)}o&&(o.focus(),o.attr("aria-expanded","false")),u&&u.trigger("hide");var t=i.find(".h5p-dialog-titlebar").find(".h5p-sc-sound-control");t.length&&i.find(".h5p-sc-set-wrapper").append(t)}));if(e.dnb.dialog.on("close",(function t(){a.dialogWidth=e.dnb.dialog.getDialogWidth(),e.dnb.dialog.off("close",t)})),"H5P.Image"===p){var f=e.dnb.dialog.getMaxSize(o),m=d.find("img");c.params.file.width&&c.params.file.height?A(m,f,{width:c.params.file.width,height:c.params.file.height},!e.isMobileView):(m.on("load",(function(){m.is(":visible")&&A(m,f,{width:this.width,height:this.height},!e.isMobileView)})),e.dnb.dialog.position(o))}else if(!e.isMobileView){var v=null;"H5P.FreeTextQuestion"===p?v="big":"H5P.Text"!==p&&"H5P.Table"!==p&&(v="medium"),e.dnb.dialog.position(o,{width:a.dialogWidth/16},v)}if("H5P.Summary"===p){var b=0;H5P.on(u,"resize",(function(){var t=d.height();(b>t+10||b<t-10)&&setTimeout((function(){e.dnb.dialog.scroll(t,300)}),500),b=t}))}if(r.find(".h5p-sc-sound-control").remove(),i.find(".h5p-sc-sound-control").length){var g=i.find(".h5p-sc-sound-control"),y=i.find(".h5p-dialog-close");if(y.length&&"none"!==y.css("display")){var S=2*parseFloat(y.css("right"))+2*parseFloat(y.css("padding-right"));g.css({right:S+"px"})}r.append(g)}setTimeout((function(){H5P.trigger(u,"resize")}),0)},A=function(t,n,i,r){i.width/=16,i.height/=16,i.height>n.height&&(i.width=i.width*n.height/i.height,i.height=n.height),i.width>n.width&&(i.height=i.height*n.width/i.width,i.width=n.width);var s=16/Number(t.css("fontSize").replace("px",""));t.css({width:i.width*s+"em",height:i.height*s+"em"}),r&&e.dnb.dialog.position(o,i)},L=function(n){a.isButton()&&e.dnb.dialog.close(),e.currentState!==H5P.Video.PAUSED&&e.currentState!==H5P.Video.ENDED||e.play();var o=n.data;o===t.duration.from&&(o+=.2),e.seek(o)},F=function(){var n=t.height||10,o=t.width||10,i=e.width/e.fontSize;return{height:n/(i/(e.$videoWrapper.width()/e.$videoWrapper.height()))*100+"%",width:o/i*100+"%"}},j=function(t){t.css("zIndex",52),e.showOverlayMask()},q=function(t){t&&t.css("zIndex",""),e.hideOverlayMask()},U=function(){var n=a.isGotoClickable(),i=F(),c=R.extend({},{backgroundColor:"rgb(255,255,255)",boxShadow:!0},t.visuals);if(o=R("<div/>",{"aria-label":e.l10n.interaction,tabindex:"-1",class:"h5p-interaction h5p-poster "+l+(n&&t.goto.visualize?" goto-clickable-visualize":""),css:{left:t.x+"%",top:t.y+"%",width:i.width,height:i.height}}),"H5P.IVHotspot"!==p){o.css("background",c.backgroundColor);var d=c.backgroundColor.split(",");if(d[3])0===parseFloat(d[3].replace(")",""))&&o.addClass("h5p-transparent-interaction")}!1===c.boxShadow&&o.addClass("h5p-box-shadow-disabled"),"H5P.Link"===p&&(o.css("height","auto"),o.css("width","auto"),void 0===e.editor&&o.click((function(){return window.open(u.getUrl()),e.pause(),!1}))),s=R("<div>",{class:"h5p-interaction-outer"}).appendTo(o),r=R(n?"<a>":"<div>",{class:"h5p-interaction-inner h5p-frame"}).appendTo(s),!n&&V(p)&&r.attr("tabindex","0"),void 0!==e.editor&&u.disableAutoPlay&&u.disableAutoPlay();var h=n?$(r):r;u.attach(h),E(h),a.trigger("display",o),a.getRequiresCompletion()&&e.currentState!==H5P.InteractiveVideo.SEEKING&&void 0===e.editor&&!a.hasFullScore()&&(j(o),o.focus()),setTimeout((function(){H5P.trigger(u,"resize")}),0),"function"==typeof u.setActivityStarted&&"function"==typeof u.getScore&&u.setActivityStarted()},z=function(){var n,i,r=!0;if(t.adaptivity&&(i=a.hasFullScore(),r=!a.getRequiresCompletion()||i,i?n=t.adaptivity.correct:i||(n=t.adaptivity.wrong)),n&&void 0!==n.seekTo){e.pause(),!n.allowOptOut&&o&&(a.isButton()?(e.dnb.dialog.disableOverlay=!0,e.dnb.dialog.hideCloseButton()):j(o));var s=i?"correct":"wrong",c=n.seekLabel?n.seekLabel:e.l10n.defaultAdaptivitySeekLabel;u.hideButton("iv-continue").addButton("iv-adaptivity-"+s,c,(function(){x(n.seekTo),!i&&u.resetTask&&(u.resetTask(),u.hideButton("iv-adaptivity-"+s)),a.remove(),W(n.seekTo)})).showButton("iv-adaptivity-"+s,1).hideButton("iv-adaptivity-"+(i?"wrong":"correct"),1).hideButton("check-answer",1).hideButton("show-solution",1).hideButton("try-again",1),void 0!==u.disableInput&&(u.disableInput instanceof Function||"function"==typeof u.disableInput)&&u.disableInput(),setTimeout((function(){var t=n.message.replace("<p>","").replace("</p>","");u.updateFeedbackContent(t,!0),u.read(t)}),0)}else void 0!==u.hasButton&&(u.hasButton("iv-continue")||u.addButton("iv-continue",e.l10n.defaultAdaptivitySeekLabel,(function(){x(),W()})),u[r?"showButton":"hideButton"]("iv-continue"))},W=function(t){var n=_(),o=n.filter((function(t){return!t.isButton()}));if(o.length?n=o:n.length&&e.$container.find(".h5p-dialog-wrapper .h5p-dialog").show(),n.length){var i=n[0];return i.isButton()?i.trigger("open-dialog"):i.trigger("show-mask"),void e.pause()}e.currentState!==H5P.Video.ENDED&&(void 0!==t&&(e.pause(),e.seek(t)),e.play(),e.controls.$play.focus())},_=function(){return e.getVisibleInteractions().filter((function(t){return t!==a})).filter((function(t){return t.getRequiresCompletion()&&!t.hasFullScore()}))};a.isGotoClickable=function(){return-1!==["H5P.Text","H5P.Image"].indexOf(p)&&t.goto&&-1!==["timecode","url"].indexOf(t.goto.type)},a.getCurrentState=function(){if(u&&(u.getCurrentState instanceof Function||"function"==typeof u.getCurrentState))return u.getCurrentState()},a.getDuration=function(){return{from:t.duration.from,to:t.duration.to+1}},a.getRequiresCompletion=function(){return!!t.adaptivity&&!!t.adaptivity.requireCompletion},a.pause=function(){return t.pause},a.isButton=function(){return"button"===t.displayType||!(!e.isMobileView||"H5P.IVHotspot"===p)&&("H5P.Image"!==p||!1!==t.buttonOnMobile)},a.isStandaloneLabel=function(){return"H5P.Nil"===p},a.isMainSummary=function(){return!0===t.mainSummary},a.selectDot=function(){e.preventSkipping||(e.seekingTo=!0,Math.floor(10*e.video.getCurrentTime())!==Math.floor(10*t.duration.from)&&(e.currentState===H5P.Video.VIDEO_CUED?(e.play(),e.seek(t.duration.from)):e.currentState===H5P.Video.PLAYING?e.seek(t.duration.from):(e.play(),e.seek(t.duration.from),e.pause())))},a.addDot=function(){if("H5P.Nil"===p)return R("<div/>",{class:n});var n="h5p-seekbar-interaction "+l,o=R("<div/>",{role:"menuitem",class:n,"aria-label":"".concat(f,". ").concat(v),title:v,css:{left:t.duration.from*e.oneSecondInPercentage+"%"},on:{click:a.selectDot,keydown:function(t){if(13===t.which||32===t.which)return a.selectDot(),!1}}});return e.preventSkipping&&o.attr("aria-disabled","true").attr("tabindex","-1"),a.$menuitem=o,o},a.isVisible=function(){return y},a.visibleAt=function(e){return!(e<t.duration.from||e>=t.duration.to+1)},a.toggle=function(n,i){return a.visibleAt(n)?o?void 0:(y=!0,a.isStandaloneLabel()?C():a.isButton()?k(i):U(),void 0===e.editor?h=e.dnb.add(o,void 0,{dnbElement:h,disableContextMenu:!0}):(a.fit&&(e.editor.fit(o,t),a.fit=!1),o.focus((function(){e.pause()}))),o):(y=!1,void(o&&(h&&(h.hideContextMenu(),h===e.dnb.focusedElement&&(h.blur(),delete e.dnb.focusedElement)),e.editor&&b&&(e.editor.hideInteractionTitle(),b=!1),a.remove())))},a.setTitle=function(t){o&&o.attr("aria-label",t),v=t},a.reCreateInteraction=function(){"H5P.IVHotspot"!==p&&o&&(u&&u.trigger("hide"),a.trigger("hide",o),o.detach(),a.isStandaloneLabel()?C():a.isButton()?k(!0):U())},a.resizeInteraction=function(){a.isStandaloneLabel()||H5P.trigger(u,"resize")},a.positionLabel=function(t){o&&a.isButton()&&i&&!a.isStandaloneLabel()&&(i.removeClass("h5p-left-label"),parseInt(o.css("left"))+i.position().left+i.outerWidth()>t&&i.addClass("h5p-left-label"))},a.setPosition=function(e,n){t.x=e,t.y=n,o.css({left:e+"%",top:n+"%"})},a.setSize=function(e,n){e&&(t.width=e),n&&(t.height=n),H5P.trigger(u,"resize")},a.remove=function(){o&&(a.trigger("domHidden",{$dom:o,key:"videoProgressedPast"},{bubbles:!0,external:!0}),u&&u.trigger("hide"),a.trigger("hide",o),o.detach(),o=void 0)},a.reCreate=function(){l=function(){var e=t.className;if(void 0===e){var n=c.library.split(" ")[0].toLowerCase().split(".");e=n[0]+"-"+n[1]+"-interaction"}return t.goto&&"timecode"===t.goto.type&&(e+=" h5p-goto-timecode"),e}(),a.isStandaloneLabel()||(c.params=c.params||{},u=H5P.newRunnable(c,e.contentId,void 0,void 0,{parent:e,editing:void 0!==e.editor}),void 0===a.maxScore&&u.getMaxScore&&(a.maxScore=u.getMaxScore()),c.userDatas&&K(u)&&(a.score=u.getScore()),e.isTask||void 0===e.options.assets.endscreens||(u.isTask||void 0===u.isTask&&void 0!==u.showSolutions)&&(e.isTask=!0),u.on&&(u.on("xAPI",(function(t){var n=t.getVerifiedStatementValue(["context","contextActivities","parent"])||[],o=t.getContentXAPIId(e),i="completed"===t.getVerb()||"answered"===t.getVerb(),r=n.some((function(t){return t.id===o}));u.getScore&&(a.score=u.getScore()),u.getMaxScore&&(a.maxScore=u.getMaxScore()),r&&i&&t.getMaxScore()&&(a.score=null==t.getScore()?0:t.getScore(),a.maxScore=a.maxScore?a.maxScore:t.getMaxScore(),z()),a.setLastXAPIVerb(t.getVerb()),a.trigger(t)})),u.on("question-finished",(function(){z()})),u.on("resize",(function(){delete a.dialogWidth,e&&e.dnb&&e.dnb.dialog.removeStaticWidth()})),"H5P.IVHotspot"===p&&u.on("goto",L),"H5P.GoToQuestion"===p&&u.on("chosen",L)))};var K=function(t){return"undefined"!==I(t)&&"function"==typeof t.getScore&&"function"==typeof t.getMaxScore};a.setDnbElement=function(t){return h!==t&&(h=t,!0)},a.hasFullScore=function(){return a.score>=a.maxScore},a.getLibraryName=function(){return p},a.getMetadata=function(){return S},a.getTitle=function(){return v},a.isAnswerable=function(){return-1===N.indexOf(a.getLibraryName())&&!a.isStandaloneLabel()},a.setProgress=function(t){this.progress=t},a.getProgress=function(){return this.progress},a.setLastXAPIVerb=function(t){d=t},a.getLastXAPIVerb=function(){return d},a.getClass=function(){return l},a.getCopyrights=function(){if(!a.isStandaloneLabel()){var n=H5P.newRunnable(c,e.contentId);if(void 0!==n){var o=new H5P.ContentCopyrights;return o.addContent(H5P.getCopyrights(n,t,e.contentId)),o.setLabel(v+" "+H5P.InteractiveVideo.humanizeTime(t.duration.from)+" - "+H5P.InteractiveVideo.humanizeTime(t.duration.to)),o}}},a.getXAPIData=function(){if(u&&(u.getXAPIData instanceof Function||"function"==typeof u.getXAPIData))return u.getXAPIData()},a.getSubcontentId=function(){return c.subContentId},a.getElement=function(){return o},a.focusOnFirstTabbableElement=function(){if(o){var t=R(o.get(0)).find("[tabindex]");t&&t.length?t.get(0).focus():a.focus()}},a.focus=function(){o&&o.focus()},a.getClipboardData=function(){return H5P.DragNBar.clipboardify(H5PEditor.InteractiveVideo.clipboardKey,t,"action")},a.repositionToWrapper=function(e){if(o&&"H5P.IVHotspot"!==p&&"H5P.FreeTextQuestion"!==p){if(g&&(o.css({top:t.y+"%",left:t.x+"%"}),o.css(a.isButton()?{height:"",width:""}:F()),g=!1),o.position().top+o.height()>e.height()){var n=(e.height()-o.height())/e.height()*100;if(n<0){n=0;var i=e.height()/parseFloat(o.css("font-size"));o.css("height",i+"em")}o.css("top",n+"%"),g=!0}if(o.position().left+o.width()>e.width()){var r=(e.width()-o.width())/e.width()*100;if(r<0){r=0;var s=e.width()/parseFloat(o.css("font-size"));o.css("width",s+"em")}o.css("left",r+"%"),g=!0}}},a.resetTask=function(){void 0!==c.userDatas&&void 0!==c.userDatas.state&&delete c.userDatas.state,delete a.score,delete a.maxScore,a.reCreate()},a.getInstance=function(){return u},a.reCreate()}F.prototype=Object.create(H5P.EventDispatcher.prototype),F.prototype.constructor=F,F.PROGRESS_INTERACTED=0,F.PROGRESS_ANSWERED=1;const j=F;var q=function(){function t(t){this.l10n=t;var e=document.createElement("div");e.classList.add("h5p-iv-interactions-announcer"),e.setAttribute("aria-live","polite"),this.interactionsAnnouncer=e}var e=t.prototype;return e.getInteractionAnnouncer=function(){return this.interactionsAnnouncer},e.announceInteractions=function(t){t.length>0&&(this.interactionsAnnouncer.textContent="",this.interactionsAnnouncer.textContent="\n        ".concat(this.getAnnouncementMessage(t.length),"\n        ").concat(this.getTitleAnnouncement(t.length,t[0]),"\n        ").concat(this.getPauseAnnouncement(t)))},e.getAnnouncementMessage=function(t){return 0===t?"":1===t?this.l10n.singleInteractionAnnouncement:this.l10n.multipleInteractionsAnnouncement},e.getTitleAnnouncement=function(t,e){return 1===t?e.getTitle():""},e.getPauseAnnouncement=function(t){return t.some((function(t){return t.pause()}))?". ".concat(this.l10n.videoPausedAnnouncement):""},t}(),U=H5P.jQuery,z=!!navigator.userAgent.match(/iPod|iPhone|iPad/g),W=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{content:"",maxWidth:"auto",style:"h5p-interactive-video-bubble",mode:"centered",focus:function(){}};this.$reference=t,this.maxWidth=e.maxWidth,this.style=e.style,this.mode=e.mode,this.focus=e.focus,this.$tail=U("<div/>",{class:"".concat(this.style,"-tail")}),this.$innerTail=U("<div/>",{class:"".concat(this.style,"-inner-tail")}),this.$content=U("<div/>",{class:"".concat(this.style,"-text")}),"string"==typeof e.content?this.$content.html(e.content):this.$content.append(e.content),this.$innerBubble=U("<div/>",{class:"".concat(this.style,"-inner")}).append(this.$content).prepend(this.$innerTail),this.$h5pContainer=this.$reference.closest(".h5p-interactive-video"),this.$bubble=U("<div/>",{class:this.style,"aria-live":"polite"}).append([this.$tail,this.$innerBubble]).addClass("".concat(this.style,"-inactive")).appendTo(this.$h5pContainer),z&&H5P.$body.css("cursor","pointer"),"centered"===this.mode&&this.$bubble.css({width:"auto"===this.maxWidth?"auto":"".concat(this.maxWidth,"px")}),this.update()}var e=t.prototype;return e.update=function(){var t=this,e=this.getOffsetBetween(this.$h5pContainer,this.$reference),n="full"===this.mode?this.$bubble.outerWidth():Math.min(.9*e.outerWidth,"auto"===this.maxWidth?this.$bubble.outerWidth():this.maxWidth),o=this.getBubblePosition(n,e,this.mode);"centered"===this.mode&&this.$bubble.css({bottom:void 0===o.bottom?void 0:"".concat(o.bottom,"px"),left:"".concat(o.left,"px")}),setTimeout((function(){var e=t.getTailPosition(t.$reference),n={bottom:"".concat(e.bottom,"px"),left:"string"==typeof e.left?e.left:"".concat(e.left,"px")};t.$tail.css(n),t.$innerTail.css(n)}),75)},e.animate=function(){var t=this;this.$bubble.hasClass("".concat(this.style,"-inactive"))&&(this.$bubble.removeClass("".concat(this.style,"-inactive")).addClass("".concat(this.style,"-active")),setTimeout((function(){t.$bubble.removeClass("".concat(t.style,"-active")).addClass("".concat(t.style,"-inactive"))}),2e3))},e.setContent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$content.html(t),this.update()},e.getContent=function(){return this.$content.get(0).outerHTML},e.isActive=function(){return this.$bubble.hasClass("".concat(this.style,"-active"))},e.toggle=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t=void 0===t?!this.isActive():t)&&n?(setTimeout((function(){e.$bubble.removeClass("".concat(e.style,"-preparing")).addClass("".concat(e.style,"-active")),setTimeout((function(){return e.focus()}),400)}),100),this.$bubble.removeClass("".concat(this.style,"-inactive")).addClass("".concat(this.style,"-preparing"))):this.$bubble.toggleClass("".concat(this.style,"-inactive"),!t).toggleClass("".concat(this.style,"-active"),t),this.update()},e.getBubblePosition=function(t,e,n){var o=t/2;return{bottom:"full"===n?void 0:e.bottom+e.innerHeight+4,left:"full"===n?(e.outerWidth-t)/2:e.left-o+16}},e.getTailPosition=function(t){return{left:t.offset().left-this.$tail.parent().offset().left+8,top:-6,bottom:-6}},e.getOffsetBetween=function(t,e){var n=t[0].getBoundingClientRect(),o=e[0].getBoundingClientRect();return{top:o.top-n.top,right:n.right-o.right,bottom:n.bottom-o.bottom,left:o.left-n.left+parseInt(e.css("marginLeft")),innerWidth:o.width,innerHeight:o.height,outerWidth:n.width,outerHeight:n.height}},e.fullscreen=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this.isMobilePhone(),i=t&&!o&&void 0!==e&&void 0!==n,r={maxHeight:"",top:""};i&&(r.maxHeight="calc(".concat(n,"px - 1em - 9px)"),r.top="calc(((".concat(e-n,"px + 1em) / 2) - 9px)")),this.$bubble.toggleClass("mobile-fullscreen",o&&t),this.$bubble.css(r)},e.isMobilePhone=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.substr(0,4))},t}();const _=W,K=(t,e,{ignoreKeyboard:n=!1,preventDefaultForKeys:o=!0}={})=>{const i=t=>{"click"!==t.type&&o&&t.preventDefault(),e(t)};t.click(i),!0!==n&&A(t,[{key:x.SPACE},{key:x.ENTER}],i)};function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function G(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t,e){return J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},J(t,e)}var Z=H5P.jQuery,tt="h5p-interactive-video-endscreen",et="h5p-interactive-video-endscreen-submit-button-hidden",nt=function(t){return null!=t};const ot=function(t){var e,n;function o(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n=t.call(this)||this).parent=e,n.l10n=Z.extend({title:"@answered Questions answered",information:"You have answered @answered questions, click below to submit your answers.",informationOnSubmitButtonDisabled:"You have answered @answered questions.",informationNoAnswers:"You have not answered any questions.",informationMustHaveAnswer:"You have to answer at least one question before you can submit your answers.",submitButton:"Submit Answers",submitMessage:"Your answers have been submitted!",tableRowAnswered:"Answered questions",tableRowScore:"Score",answeredScore:"answered",tableRowSummaryWithScore:"You got @score out of @total points for the @question that appeared after @minutes minutes and @seconds seconds.",tableRowSummaryWithoutScore:"You have answered the @question that appeared after @minutes minutes and @seconds seconds."},o.l10n),n.isSubmitButtonEnabled=n.parent.isSubmitButtonEnabled,n.buildDOM(),n.registerTurnInCancelled(e,Y(n)),n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,J(e,n);var i=o.prototype;return i.buildDOM=function(){var t=this;this.$endscreenIntroductionTitleText=Z("<div/>",{class:"".concat(tt,"-introduction-title-text"),id:"".concat(tt,"-introduction-title-text")}),this.$closeButton=Z("<div>",{role:"button",class:"".concat(tt,"-close-button"),tabindex:"0","aria-label":this.parent.l10n.close}),K(this.$closeButton,(function(){return t.parent.toggleEndscreen(!1)}));var e=Z("<div/>",{class:"".concat(tt,"-introduction-title")}).append([this.$endscreenIntroductionTitleText,this.$closeButton]);this.$endscreenIntroductionText=Z("<div/>",{class:"".concat(tt,"-introduction-text"),id:"".concat(tt,"-introduction-text")}),this.isSubmitButtonEnabled&&(this.$submitButtonContainer=Z("<div/>",{class:"".concat(tt,"-submit-button-container ").concat(et)}),this.$submitButton=H5P.JoubelUI.createButton({class:"".concat(tt,"-submit-button"),html:this.l10n.submitButton,appendTo:this.$submitButtonContainer,click:function(){return t.handleSubmit()}})),this.$endscreenOverviewTitle=Z("<div/>",{class:"".concat(tt,"-overview-title")}).append(Z("<div/>",{class:"".concat(tt,"-overview-title-answered-questions"),html:this.l10n.tableRowAnswered})).append(Z("<div/>",{class:"".concat(tt,"-overview-title-score"),html:this.l10n.tableRowScore})),this.$endscreenBottomTable=Z("<div/>",{class:"".concat(tt,"-overview-table")}),this.$endscreen=Z("<div/>",{class:tt,role:"dialog","aria-labelledby":"".concat(tt,"-introduction-title-text"),"aria-describedby":"".concat(tt,"-introduction-text")}).append(Z("<div/>",{class:"".concat(tt,"-introduction")}).append(Z("<div/>",{class:"".concat(tt,"-star-symbol")})).append(Z("<div/>",{class:"".concat(tt,"-introduction-container")}).append([e,this.$endscreenIntroductionText]))).append(Z("<div/>",{class:"".concat(tt,"-overview")}).append(this.$endscreenOverviewTitle).append([this.$endscreenBottomTable,this.$submitButtonContainer]))},i.handleSubmit=function(){var t=this;if(!this.$submitButtonContainer.hasClass(et)){this.$submitButtonContainer.addClass(et),this.$endscreenIntroductionText.html('<div class="'.concat(tt,'-introduction-text-submitted">').concat(this.l10n.submitMessage,"</div>")),this.answered.forEach((function(e){if("completed"!==e.getLastXAPIVerb()&&"answered"!==e.getLastXAPIVerb()){var n=new H5P.XAPIEvent;n.data.statement=e.getXAPIData().statement,e.setLastXAPIVerb(n.getVerb()),t.trigger(n)}}));var e=this.getScoreDetails();this.parent.triggerXAPIScored(e.score,e.maxScore,"completed");var n,o=G(this.parent.interactions);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(void 0!==i.getLastXAPIVerb());else{var r=this.parent.createXAPIEventTemplate("skipped"),s=i.getMetadata();r.data.statement.object&&(r.data.statement.object.definition.name={"en-US":s.title},this.parent.trigger(r))}}}catch(t){o.e(t)}finally{o.f()}void 0!==Q(this.parent.contentData.standalone)&&this.parent.contentData.standalone&&this.parent.triggerXAPIScored(e.score,e.maxScore,"submitted-curriki")}},i.getDOM=function(){return this.$endscreen},i.buildTableRow=function(t,e,n,o){var i=this,r=nt(n)&&nt(o),s=r?this.l10n.tableRowSummaryWithScore:this.l10n.tableRowSummaryWithoutScore,a=this.parent.skippingPrevented()?" ".concat(tt,"-no-link"):"",c=Z("<div/>",{class:"".concat(tt,"-overview-table-row").concat(a),role:"row",tabIndex:0,"aria-label":s.replace("@score",n).replace("@total",o).replace("@question",e).replace("@minutes",Math.floor(t/60)).replace("@seconds",t%60)});return K(c,(function(){return i.jump(t)})),Z("<div/>",{class:"".concat(tt,"-overview-table-row-time"),html:H5P.InteractiveVideo.humanizeTime(t),appendTo:c,"aria-hidden":!0}),Z("<div/>",{class:"".concat(tt,"-overview-table-row-title"),html:e,appendTo:c,"aria-hidden":!0}),Z("<div/>",{class:"".concat(tt,"-overview-table-row-score"),html:r?"".concat(n," / ").concat(o):this.l10n.answeredScore,appendTo:c,"aria-hidden":!0}),c},i.jump=function(t){this.parent.skippingPrevented()||(this.parent.seek(t),this.parent.toggleEndscreen(!1))},i.update=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.answered=e.filter((function(t){return void 0!==t.getProgress()})).sort((function(t,e){return t.getDuration().from-e.getDuration().from})),this.$endscreenBottomTable.empty(),this.answered.forEach((function(e,n){var o=e.getDuration().from,i=t.getDescription(e),r=e.getInstance(),s=r.getScore?r.getScore():void 0,a=r.getMaxScore?r.getMaxScore():void 0;"H5P.TrueFalse"!==r.libraryInfo.machineName&&void 0!==t.parent.previousState&&void 0!==t.parent.previousState.score&&null!==t.parent.previousState.score[n]&&0===s&&t.parent.previousState.score[n]>s&&(s=t.parent.previousState.score[n]),void 0!==t.parent.previousState&&void 0!==t.parent.previousState.maxScore&&null!==t.parent.previousState.maxScore[n]&&t.parent.previousState.maxScore[n]>a&&(a=t.parent.previousState.maxScore[n]),t.$endscreenBottomTable.append(t.buildTableRow(o,i,s,a))}));var n=this.answered.length;this.$endscreenIntroductionTitleText.html(this.l10n.title.replace("@answered",n)),0===n?this.$endscreenIntroductionText.html('<div class="'.concat(tt,'-bold-text">').concat(this.l10n.informationNoAnswers,"</div>\n      ").concat(this.isSubmitButtonEnabled?"<div>".concat(this.l10n.informationMustHaveAnswer,"<div>"):"")):this.$endscreenIntroductionText.html(this.isSubmitButtonEnabled?this.l10n.information.replace("@answered",n):this.l10n.informationOnSubmitButtonDisabled.replace("@answered",n)),this.isSubmitButtonEnabled&&n>0&&this.$submitButtonContainer.removeClass(et)},i.getDescription=function(t){return"function"==typeof t.getInstance&&"function"==typeof t.getInstance().getTitle?t.getInstance().getTitle():t.getTitle()},i.focus=function(){!this.isSubmitButtonEnabled||this.$submitButtonContainer.hasClass(et)?this.$closeButton.focus():this.$submitButton.focus()},i.getScoreDetails=function(){var t=this,e=0,n=0;return this.answered.forEach((function(o,i){var r=o.getInstance(),s=r.getScore?r.getScore():0,a=r.getMaxScore?r.getMaxScore():0,c=r.getCurrentState();c&&void 0!==c.length&&0!==c.length||(void 0!==t.parent.previousState&&void 0!==t.parent.previousState.score&&null!==t.parent.previousState.score[i]&&t.parent.previousState.score[i]>s&&(s=t.parent.previousState.score[i]),void 0!==t.parent.previousState&&void 0!==t.parent.previousState.maxScore&&null!==t.parent.previousState.maxScore[i]&&t.parent.previousState.maxScore[i]>a&&(a=t.parent.previousState.maxScore[i])),e+=s,n+=a})),{score:e,maxScore:n}},i.registerTurnInCancelled=function(t,e){t.on("turnInCancelled",(function(){e.$submitButtonContainer.hasClass(et)&&e.$submitButtonContainer.removeClass(et),e.$endscreenIntroductionText.html("")}))},o}(H5P.EventDispatcher);function it(t,e){return function(){return t.apply(e,arguments)}}const{toString:rt}=Object.prototype,{getPrototypeOf:st}=Object,at=(ct=Object.create(null),t=>{const e=rt.call(t);return ct[e]||(ct[e]=e.slice(8,-1).toLowerCase())});var ct;const lt=t=>(t=t.toLowerCase(),e=>at(e)===t),ut=t=>e=>typeof e===t,{isArray:dt}=Array,ht=ut("undefined");const pt=lt("ArrayBuffer");const ft=ut("string"),mt=ut("function"),vt=ut("number"),bt=t=>null!==t&&"object"==typeof t,gt=t=>{if("object"!==at(t))return!1;const e=st(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},yt=lt("Date"),St=lt("File"),kt=lt("Blob"),wt=lt("FileList"),Ct=lt("URLSearchParams");function Tt(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let o,i;if("object"!=typeof t&&(t=[t]),dt(t))for(o=0,i=t.length;o<i;o++)e.call(null,t[o],o,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),r=i.length;let s;for(o=0;o<r;o++)s=i[o],e.call(null,t[s],s,t)}}const $t=(xt="undefined"!=typeof Uint8Array&&st(Uint8Array),t=>xt&&t instanceof xt);var xt;const Et=lt("HTMLFormElement"),Pt=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),At=lt("RegExp"),It=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};Tt(n,((n,i)=>{!1!==e(n,i,t)&&(o[i]=n)})),Object.defineProperties(t,o)},Bt={isArray:dt,isArrayBuffer:pt,isBuffer:function(t){return null!==t&&!ht(t)&&null!==t.constructor&&!ht(t.constructor)&&mt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{const e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||rt.call(t)===e||mt(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&pt(t.buffer),e},isString:ft,isNumber:vt,isBoolean:t=>!0===t||!1===t,isObject:bt,isPlainObject:gt,isUndefined:ht,isDate:yt,isFile:St,isBlob:kt,isRegExp:At,isFunction:mt,isStream:t=>bt(t)&&mt(t.pipe),isURLSearchParams:Ct,isTypedArray:$t,isFileList:wt,forEach:Tt,merge:function t(){const e={},n=(n,o)=>{gt(e[o])&&gt(n)?e[o]=t(e[o],n):gt(n)?e[o]=t({},n):dt(n)?e[o]=n.slice():e[o]=n};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&Tt(arguments[t],n);return e},extend:(t,e,n,{allOwnKeys:o}={})=>(Tt(e,((e,o)=>{n&&mt(e)?t[o]=it(e,n):t[o]=e}),{allOwnKeys:o}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,o)=>{let i,r,s;const a={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)s=i[r],o&&!o(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&st(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:at,kindOfTest:lt,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return-1!==o&&o===n},toArray:t=>{if(!t)return null;if(dt(t))return t;let e=t.length;if(!vt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const n=o.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const o=[];for(;null!==(n=t.exec(e));)o.push(n);return o},isHTMLForm:Et,hasOwnProperty:Pt,hasOwnProp:Pt,reduceDescriptors:It,freezeMethods:t=>{It(t,((e,n)=>{const o=t[n];mt(o)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},o=t=>{t.forEach((t=>{n[t]=!0}))};return dt(t)?o(t):o(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e)};function Rt(t,e,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}Bt.inherits(Rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ot=Rt.prototype,Dt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Dt[t]={value:t}})),Object.defineProperties(Rt,Dt),Object.defineProperty(Ot,"isAxiosError",{value:!0}),Rt.from=(t,e,n,o,i,r)=>{const s=Object.create(Ot);return Bt.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),Rt.call(s,t.message,e,n,o,i),s.cause=t,s.name=t.name,r&&Object.assign(s,r),s};const Mt=Rt;const Ht=n(230);function Nt(t){return Bt.isPlainObject(t)||Bt.isArray(t)}function Lt(t){return Bt.endsWith(t,"[]")?t.slice(0,-2):t}function Vt(t,e,n){return t?t.concat(e).map((function(t,e){return t=Lt(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const Ft=Bt.toFlatObject(Bt,{},null,(function(t){return/^is[A-Z]/.test(t)}));const jt=function(t,e,n){if(!Bt.isObject(t))throw new TypeError("target must be an object");e=e||new(Ht||FormData);const o=(n=Bt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!Bt.isUndefined(e[t])}))).metaTokens,i=n.visitor||u,r=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&((c=e)&&Bt.isFunction(c.append)&&"FormData"===c[Symbol.toStringTag]&&c[Symbol.iterator]);var c;if(!Bt.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(Bt.isDate(t))return t.toISOString();if(!a&&Bt.isBlob(t))throw new Mt("Blob is not supported. Use a Buffer instead.");return Bt.isArrayBuffer(t)||Bt.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,i){let a=t;if(t&&!i&&"object"==typeof t)if(Bt.endsWith(n,"{}"))n=o?n:n.slice(0,-2),t=JSON.stringify(t);else if(Bt.isArray(t)&&function(t){return Bt.isArray(t)&&!t.some(Nt)}(t)||Bt.isFileList(t)||Bt.endsWith(n,"[]")&&(a=Bt.toArray(t)))return n=Lt(n),a.forEach((function(t,o){!Bt.isUndefined(t)&&null!==t&&e.append(!0===s?Vt([n],o,r):null===s?n:n+"[]",l(t))})),!1;return!!Nt(t)||(e.append(Vt(i,n,r),l(t)),!1)}const d=[],h=Object.assign(Ft,{defaultVisitor:u,convertValue:l,isVisitable:Nt});if(!Bt.isObject(t))throw new TypeError("data must be an object");return function t(n,o){if(!Bt.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+o.join("."));d.push(n),Bt.forEach(n,(function(n,r){!0===(!(Bt.isUndefined(n)||null===n)&&i.call(e,n,Bt.isString(r)?r.trim():r,o,h))&&t(n,o?o.concat(r):[r])})),d.pop()}}(t),e};function qt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Ut(t,e){this._pairs=[],t&&jt(t,this,e)}const zt=Ut.prototype;zt.append=function(t,e){this._pairs.push([t,e])},zt.toString=function(t){const e=t?function(e){return t.call(this,e,qt)}:qt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const Wt=Ut;function _t(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kt(t,e,n){if(!e)return t;const o=n&&n.encode||_t,i=n&&n.serialize;let r;if(r=i?i(e,n):Bt.isURLSearchParams(e)?e.toString():new Wt(e,n).toString(o),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}const Qt=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Bt.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},Gt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xt="undefined"!=typeof URLSearchParams?URLSearchParams:Wt,Yt=FormData,Jt=(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),Zt={isBrowser:!0,classes:{URLSearchParams:Xt,FormData:Yt,Blob},isStandardBrowserEnv:Jt,protocols:["http","https","file","blob","url","data"]};const te=function(t){function e(t,n,o,i){let r=t[i++];const s=Number.isFinite(+r),a=i>=t.length;if(r=!r&&Bt.isArray(o)?o.length:r,a)return Bt.hasOwnProp(o,r)?o[r]=[o[r],n]:o[r]=n,!s;o[r]&&Bt.isObject(o[r])||(o[r]=[]);return e(t,n,o[r],i)&&Bt.isArray(o[r])&&(o[r]=function(t){const e={},n=Object.keys(t);let o;const i=n.length;let r;for(o=0;o<i;o++)r=n[o],e[r]=t[r];return e}(o[r])),!s}if(Bt.isFormData(t)&&Bt.isFunction(t.entries)){const n={};return Bt.forEachEntry(t,((t,o)=>{e(function(t){return Bt.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),o,n,0)})),n}return null};const ee=Zt.isStandardBrowserEnv?{write:function(t,e,n,o,i,r){const s=[];s.push(t+"="+encodeURIComponent(e)),Bt.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Bt.isString(o)&&s.push("path="+o),Bt.isString(i)&&s.push("domain="+i),!0===r&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function ne(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const oe=Zt.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(n){let o=n;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(t){const e=Bt.isString(t)?o(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};function ie(t,e,n){Mt.call(this,null==t?"canceled":t,Mt.ERR_CANCELED,e,n),this.name="CanceledError"}Bt.inherits(ie,Mt,{__CANCEL__:!0});const re=ie;const se=Bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ae=Symbol("internals"),ce=Symbol("defaults");function le(t){return t&&String(t).trim().toLowerCase()}function ue(t){return!1===t||null==t?t:Bt.isArray(t)?t.map(ue):String(t)}function de(t,e,n,o){return Bt.isFunction(o)?o.call(this,e,n):Bt.isString(e)?Bt.isString(o)?-1!==e.indexOf(o):Bt.isRegExp(o)?o.test(e):void 0:void 0}function he(t,e){e=e.toLowerCase();const n=Object.keys(t);let o,i=n.length;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}function pe(t,e){t&&this.set(t),this[ce]=e||null}Object.assign(pe.prototype,{set:function(t,e,n){const o=this;function i(t,e,n){const i=le(e);if(!i)throw new Error("header name must be a non-empty string");const r=he(o,i);(!r||!0===n||!1!==o[r]&&!1!==n)&&(o[r||e]=ue(t))}return Bt.isPlainObject(t)?Bt.forEach(t,((t,n)=>{i(t,n,e)})):i(e,t,n),this},get:function(t,e){if(!(t=le(t)))return;const n=he(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}(t);if(Bt.isFunction(e))return e.call(this,t,n);if(Bt.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}},has:function(t,e){if(t=le(t)){const n=he(this,t);return!(!n||e&&!de(0,this[n],n,e))}return!1},delete:function(t,e){const n=this;let o=!1;function i(t){if(t=le(t)){const i=he(n,t);!i||e&&!de(0,n[i],i,e)||(delete n[i],o=!0)}}return Bt.isArray(t)?t.forEach(i):i(t),o},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(t){const e=this,n={};return Bt.forEach(this,((o,i)=>{const r=he(n,i);if(r)return e[r]=ue(o),void delete e[i];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete e[i],e[s]=ue(o),n[s]=!0})),this},toJSON:function(t){const e=Object.create(null);return Bt.forEach(Object.assign({},this[ce]||null,this),((n,o)=>{null!=n&&!1!==n&&(e[o]=t&&Bt.isArray(n)?n.join(", "):n)})),e}}),Object.assign(pe,{from:function(t){return Bt.isString(t)?new this((t=>{const e={};let n,o,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),o=t.substring(i+1).trim(),!n||e[n]&&se[n]||("set-cookie"===n?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)})),e})(t)):t instanceof this?t:new this(t)},accessor:function(t){const e=(this[ae]=this[ae]={accessors:{}}).accessors,n=this.prototype;function o(t){const o=le(t);e[o]||(!function(t,e){const n=Bt.toCamelCase(" "+e);["get","set","has"].forEach((o=>{Object.defineProperty(t,o+n,{value:function(t,n,i){return this[o].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[o]=!0)}return Bt.isArray(t)?t.forEach(o):o(t),this}}),pe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),Bt.freezeMethods(pe.prototype),Bt.freezeMethods(pe);const fe=pe;const me=function(t,e){t=t||10;const n=new Array(t),o=new Array(t);let i,r=0,s=0;return e=void 0!==e?e:1e3,function(a){const c=Date.now(),l=o[s];i||(i=c),n[r]=a,o[r]=c;let u=s,d=0;for(;u!==r;)d+=n[u++],u%=t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),c-i<e)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}};function ve(t,e){let n=0;const o=me(50,250);return i=>{const r=i.loaded,s=i.lengthComputable?i.total:void 0,a=r-n,c=o(a);n=r;const l={loaded:r,total:s,progress:s?r/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&r<=s?(s-r)/c:void 0};l[e?"download":"upload"]=!0,t(l)}}function be(t){return new Promise((function(e,n){let o=t.data;const i=fe.from(t.headers).normalize(),r=t.responseType;let s;function a(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}Bt.isFormData(o)&&Zt.isStandardBrowserEnv&&i.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const l=ne(t.baseURL,t.url);function u(){if(!c)return;const o=fe.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(t,e,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(new Mt("Request failed with status code "+n.status,[Mt.ERR_BAD_REQUEST,Mt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),a()}),(function(t){n(t),a()}),{data:r&&"text"!==r&&"json"!==r?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:o,config:t,request:c}),c=null}if(c.open(t.method.toUpperCase(),Kt(l,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(u)},c.onabort=function(){c&&(n(new Mt("Request aborted",Mt.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new Mt("Network Error",Mt.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const o=t.transitional||Gt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new Mt(e,o.clarifyTimeoutError?Mt.ETIMEDOUT:Mt.ECONNABORTED,t,c)),c=null},Zt.isStandardBrowserEnv){const e=(t.withCredentials||oe(l))&&t.xsrfCookieName&&ee.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===o&&i.setContentType(null),"setRequestHeader"in c&&Bt.forEach(i.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),Bt.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),r&&"json"!==r&&(c.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&c.addEventListener("progress",ve(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",ve(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{c&&(n(!e||e.type?new re(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const d=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(l);d&&-1===Zt.protocols.indexOf(d)?n(new Mt("Unsupported protocol "+d+":",Mt.ERR_BAD_REQUEST,t)):c.send(o||null)}))}const ge={http:be,xhr:be},ye=t=>{if(Bt.isString(t)){const e=ge[t];if(!t)throw Error(Bt.hasOwnProp(t)?`Adapter '${t}' is not available in the build`:`Can not resolve adapter '${t}'`);return e}if(!Bt.isFunction(t))throw new TypeError("adapter is not a function");return t},Se={"Content-Type":"application/x-www-form-urlencoded"};const ke={transitional:Gt,adapter:function(){let t;return"undefined"!=typeof XMLHttpRequest?t=ye("xhr"):"undefined"!=typeof process&&"process"===Bt.kindOf(process)&&(t=ye("http")),t}(),transformRequest:[function(t,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,i=Bt.isObject(t);i&&Bt.isHTMLForm(t)&&(t=new FormData(t));if(Bt.isFormData(t))return o&&o?JSON.stringify(te(t)):t;if(Bt.isArrayBuffer(t)||Bt.isBuffer(t)||Bt.isStream(t)||Bt.isFile(t)||Bt.isBlob(t))return t;if(Bt.isArrayBufferView(t))return t.buffer;if(Bt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return jt(t,new Zt.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,o){return Zt.isNode&&Bt.isBuffer(t)?(this.append(e,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((r=Bt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return jt(r?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||o?(e.setContentType("application/json",!1),function(t,e,n){if(Bt.isString(t))try{return(e||JSON.parse)(t),Bt.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||ke.transitional,n=e&&e.forcedJSONParsing,o="json"===this.responseType;if(t&&Bt.isString(t)&&(n&&!this.responseType||o)){const n=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw Mt.from(t,Mt.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zt.classes.FormData,Blob:Zt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Bt.forEach(["delete","get","head"],(function(t){ke.headers[t]={}})),Bt.forEach(["post","put","patch"],(function(t){ke.headers[t]=Bt.merge(Se)}));const we=ke;function Ce(t,e){const n=this||we,o=e||n,i=fe.from(o.headers);let r=o.data;return Bt.forEach(t,(function(t){r=t.call(n,r,i.normalize(),e?e.status:void 0)})),i.normalize(),r}function Te(t){return!(!t||!t.__CANCEL__)}function $e(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new re}function xe(t){$e(t),t.headers=fe.from(t.headers),t.data=Ce.call(t,t.transformRequest);return(t.adapter||we.adapter)(t).then((function(e){return $e(t),e.data=Ce.call(t,t.transformResponse,e),e.headers=fe.from(e.headers),e}),(function(e){return Te(e)||($e(t),e&&e.response&&(e.response.data=Ce.call(t,t.transformResponse,e.response),e.response.headers=fe.from(e.response.headers))),Promise.reject(e)}))}function Ee(t,e){e=e||{};const n={};function o(t,e){return Bt.isPlainObject(t)&&Bt.isPlainObject(e)?Bt.merge(t,e):Bt.isPlainObject(e)?Bt.merge({},e):Bt.isArray(e)?e.slice():e}function i(n){return Bt.isUndefined(e[n])?Bt.isUndefined(t[n])?void 0:o(void 0,t[n]):o(t[n],e[n])}function r(t){if(!Bt.isUndefined(e[t]))return o(void 0,e[t])}function s(n){return Bt.isUndefined(e[n])?Bt.isUndefined(t[n])?void 0:o(void 0,t[n]):o(void 0,e[n])}function a(n){return n in e?o(t[n],e[n]):n in t?o(void 0,t[n]):void 0}const c={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return Bt.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){const e=c[t]||i,o=e(t);Bt.isUndefined(o)&&e!==a||(n[t]=o)})),n}const Pe="1.1.3",Ae={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Ae[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const Ie={};Ae.transitional=function(t,e,n){return(o,i,r)=>{if(!1===t)throw new Mt(function(t,e){return"[Axios v1.1.3] Transitional option '"+t+"'"+e+(n?". "+n:"")}(i," has been removed"+(e?" in "+e:"")),Mt.ERR_DEPRECATED);return e&&!Ie[i]&&(Ie[i]=!0),!t||t(o,i,r)}};const Be={assertOptions:function(t,e,n){if("object"!=typeof t)throw new Mt("options must be an object",Mt.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let i=o.length;for(;i-- >0;){const r=o[i],s=e[r];if(s){const e=t[r],n=void 0===e||s(e,r,t);if(!0!==n)throw new Mt("option "+r+" must be "+n,Mt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Mt("Unknown option "+r,Mt.ERR_BAD_OPTION)}},validators:Ae},Re=Be.validators;class Oe{constructor(t){this.defaults=t,this.interceptors={request:new Qt,response:new Qt}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=Ee(this.defaults,e);const{transitional:n,paramsSerializer:o}=e;void 0!==n&&Be.assertOptions(n,{silentJSONParsing:Re.transitional(Re.boolean),forcedJSONParsing:Re.transitional(Re.boolean),clarifyTimeoutError:Re.transitional(Re.boolean)},!1),void 0!==o&&Be.assertOptions(o,{encode:Re.function,serialize:Re.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();const i=e.headers&&Bt.merge(e.headers.common,e.headers[e.method]);i&&Bt.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),e.headers=new fe(e.headers,i);const r=[];let s=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));const a=[];let c;this.interceptors.response.forEach((function(t){a.push(t.fulfilled,t.rejected)}));let l,u=0;if(!s){const t=[xe.bind(this),void 0];for(t.unshift.apply(t,r),t.push.apply(t,a),l=t.length,c=Promise.resolve(e);u<l;)c=c.then(t[u++],t[u++]);return c}l=r.length;let d=e;for(u=0;u<l;){const t=r[u++],e=r[u++];try{d=t(d)}catch(t){e.call(this,t);break}}try{c=xe.call(this,d)}catch(t){return Promise.reject(t)}for(u=0,l=a.length;u<l;)c=c.then(a[u++],a[u++]);return c}getUri(t){return Kt(ne((t=Ee(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}Bt.forEach(["delete","get","head","options"],(function(t){Oe.prototype[t]=function(e,n){return this.request(Ee(n||{},{method:t,url:e,data:(n||{}).data}))}})),Bt.forEach(["post","put","patch"],(function(t){function e(e){return function(n,o,i){return this.request(Ee(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Oe.prototype[t]=e(),Oe.prototype[t+"Form"]=e(!0)}));const De=Oe;class Me{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const o=new Promise((t=>{n.subscribe(t),e=t})).then(t);return o.cancel=function(){n.unsubscribe(e)},o},t((function(t,o,i){n.reason||(n.reason=new re(t,o,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new Me((function(e){t=e})),cancel:t}}}const He=Me;const Ne=function t(e){const n=new De(e),o=it(De.prototype.request,n);return Bt.extend(o,De.prototype,n,{allOwnKeys:!0}),Bt.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return t(Ee(e,n))},o}(we);Ne.Axios=De,Ne.CanceledError=re,Ne.CancelToken=He,Ne.isCancel=Te,Ne.VERSION=Pe,Ne.toFormData=jt,Ne.AxiosError=Mt,Ne.Cancel=Ne.CanceledError,Ne.all=function(t){return Promise.all(t)},Ne.spread=function(t){return function(e){return t.apply(null,e)}},Ne.isAxiosError=function(t){return Bt.isObject(t)&&!0===t.isAxiosError},Ne.formToJSON=t=>te(Bt.isHTMLForm(t)?new FormData(t):t);const Le=Ne,{Axios:Ve,AxiosError:Fe,CanceledError:je,isCancel:qe,CancelToken:Ue,VERSION:ze,all:We,Cancel:_e,isAxiosError:Ke,spread:Qe,toFormData:Ge}=Le,Xe=Le;var Ye=H5P.jQuery;function Je(t,e,n){var o,i,r=this;H5P.EventDispatcher.call(r),r.contentId=e,r.contentData=n,r.instanceIndex=nn(),r.isSubmitButtonEnabled=void 0===n||void 0===n.isScoringEnabled||void 0===n.isReportingEnabled||n.isScoringEnabled||n.isReportingEnabled,r.bookmarksMenuId="interactive-video-"+this.contentId+"-bookmarks-chooser",r.endscreensMenuId="interactive-video-"+this.contentId+"-endscreens-chooser",r.qualityMenuId="interactive-video-"+this.contentId+"-quality-chooser",r.captionsMenuId="interactive-video-"+this.contentId+"-captions-chooser",r.playbackRateMenuId="interactive-video-"+this.contentId+"-playback-rate-chooser",r.popupMenuButtons=[],r.popupMenuChoosers=[],this.visibleInteractions=[],r.isMinimal=!1,r.options=Ye.extend({video:{textTracks:{videoTrack:[]}},assets:{}},t.interactiveVideo),r.options.video.startScreenOptions=r.options.video.startScreenOptions||{},r.qualities=void 0,r.options.video.startScreenOptions.title||(r.options.video.startScreenOptions.title="Interactive Video"),r.startScreenOptions=Ye.extend({hideStartTitle:!1,shortStartDescription:""},r.options.video.startScreenOptions),t.override&&(t.override.showSolutionButton||t.override.retryButton)&&(r.override={},t.override.showSolutionButton&&(r.override.enableSolutionsButton="on"===t.override.showSolutionButton),t.override.retryButton&&(r.override.enableRetry="on"===t.override.retryButton)),void 0!==t.override&&(r.showRewind10=void 0!==t.override.showRewind10&&t.override.showRewind10,r.showBookmarksmenuOnLoad=void 0!==t.override.showBookmarksmenuOnLoad&&t.override.showBookmarksmenuOnLoad,r.preventSkipping=t.override.preventSkipping||!1,r.deactivateSound=t.override.deactivateSound||!1),r.l10n=Ye.extend({interaction:"Interaction",play:"Play",pause:"Pause",mute:"Mute, currently unmuted",unmute:"Unmute, currently muted",quality:"Video quality",captions:"Captions",close:"Close",fullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",summary:"Open summary dialog",bookmarks:"Bookmarks",endscreen:"Submit Screen",endscreens:"Submit Screens",defaultAdaptivitySeekLabel:"Continue",continueWithVideo:"Continue with video",more:"More player options",playbackRate:"Playback rate",rewind10:"Rewind 10 seconds",navDisabled:"Navigation is disabled",sndDisabled:"Sound is disabled",requiresCompletionWarning:"You need to answer all the questions correctly before continuing.",back:"Back",hours:"Hours",minutes:"Minutes",seconds:"Seconds",currentTime:"Current time:",totalTime:"Total time:",singleInteractionAnnouncement:"Interaction appeared:",multipleInteractionsAnnouncement:"Multiple interactions appeared:",videoPausedAnnouncement:"Video was paused",content:"Content",answered:"@answered answered!"},t.l10n),r.l10n.play+=" (k)",r.l10n.pause+=" (k)",r.l10n.mute+=" (m)",r.l10n.unmute+=" (m)",n&&void 0!==n.previousState&&void 0!==n.previousState.progress&&void 0!==n.previousState.answers&&(r.previousState=n.previousState),r.menuitems=[],r.lastState=H5P.Video.ENDED,r.justVideo=!1;var s=navigator.userAgent.match(/(iPhone|iPod) OS (\d*)_/i);null!==s&&3===s.length&&(r.justVideo=s[2]<10),0===(o=r.previousState&&r.previousState.progress?Math.floor(r.previousState.progress):0)&&t.override&&t.override.startVideoAt&&(o=t.override.startVideoAt),r.interactionsProgress=[],r.previousState&&r.previousState.interactionsProgress&&(r.interactionsProgress=r.previousState.interactionsProgress),i=t.override&&!!t.override.loop,this.autoplay=t.override&&!!t.override.autoplay,r.$videoWrapper=Ye("<div>",{class:"h5p-video-wrapper"}),r.$controls=Ye("<div>",{role:"toolbar",class:"h5p-controls hidden"}),r.$read=Ye("<div/>",{"aria-live":"polite",class:"hidden-but-read"}),this.fontSize=16,this.width=640;var a=!1,c=!0,l=!1;if(r.isTask=!1,r.interactions=[],r.options.assets.interactions)for(var u=0;u<r.options.assets.interactions.length;u++)this.initInteraction(u);r.initialize=function(){if(!l){l=!0,r.on("resize",(function(){r.resize()}));var e=this.editor?[]:r.options.video.textTracks&&r.options.video.textTracks.videoTrack?r.options.video.textTracks.videoTrack:[];r.video=H5P.newRunnable({library:"H5P.Video 1.3",params:{sources:r.options.video.files,visuals:{poster:r.options.video.startScreenOptions.poster,controls:r.justVideo,fit:!1,disableRemotePlayback:!0},startAt:o,a11y:e}},r.contentId,void 0,void 0,{parent:r}),r.justVideo?r.video.on("loaded",(function(){r.trigger("resize")})):(r.video.on("containerLoaded",(function(){r.trigger("resize")})),r.video.on("loaded",(function(){a=!0,r.loaded()})),r.video.on("canplay",(function(){r.trigger("resize")})),r.video.on("error",(function(){r.removeSplash()})),r.video.on("stateChange",(function(e){!r.controls&&a&&(r.addControls(),r.trigger("resize"));var n=e.data;if(r.currentState!==Je.SEEKING)switch(n){case H5P.Video.ENDED:r.currentState=H5P.Video.ENDED,r.controls.$play.addClass("h5p-pause").attr("aria-label",r.l10n.play),r.timeUpdate(r.video.getCurrentTime()),r.updateCurrentTime(r.getDuration());var o=r.interactions.map((function(t){return t.getProgress()||0})).reduce((function(t,e){return t+e}),0);if(r.endscreensMap[r.getDuration()]&&o>0&&r.toggleEndscreen(!0),i){r.video.play();var s=t.override&&t.override.startVideoAt?t.override.startVideoAt:0;r.seek(s)}r.isTask||this.parent.triggerXAPIScored(1,1,"completed");break;case H5P.Video.PLAYING:if(c){r.addQualityChooser(),r.addPlaybackRateChooser(),r.removeSplash(),r.startUpdatingBufferBar(),r.toggleBookmarksChooser(!1,{firstPlay:c}),r.toggleEndscreensChooser(!1,{firstPlay:c}),c=!1;var l=r.options.video.startScreenOptions.poster;l&&void 0!==l.path&&setTimeout((function(){r.trigger("resize")}),400)}r.currentState=H5P.Video.PLAYING,r.controls.$play.removeClass("h5p-pause").attr("aria-label",r.l10n.pause),r.controls.$play.is(":focus")&&(r.controls.$play.blur(),r.controls.$play.focus()),r.timeUpdate(r.video.getCurrentTime());break;case H5P.Video.PAUSED:r.currentState=H5P.Video.PAUSED,r.controls.$play.addClass("h5p-pause").attr("aria-label",r.l10n.play),r.focusInteraction?(r.focusInteraction.focusOnFirstTabbableElement(),delete r.focusInteraction):r.controls.$play.is(":focus")&&(r.controls.$play.blur(),r.controls.$play.focus()),r.timeUpdate(r.video.getCurrentTime());break;case H5P.Video.BUFFERING:r.currentState=H5P.Video.BUFFERING,r.removeSplash(),r.startUpdatingBufferBar()}})),r.video.on("qualityChange",(function(t){var e=t.data;if(r.controls&&r.controls.$qualityChooser){if("YouTube"===this.getHandlerName()){if(!r.qualities)return;var n=r.qualities.filter((function(e){return e.name===t.data}))[0];return void r.controls.$qualityChooser.find("li").attr("data-quality",t.data).html(n.label)}r.controls.$qualityChooser.find("li").attr("aria-checked","false").filter('[data-quality="'+e+'"]').attr("aria-checked","true")}})),r.video.on("playbackRateChange",(function(t){var e=t.data;r.controls&&r.controls.$playbackRateChooser&&r.controls.$playbackRateChooser.find("li").attr("aria-checked","false").filter('[playback-rate="'+e+'"]').attr("aria-checked","true")})),r.on("enterFullScreen",(function(){var t=this;r.hasFullScreen=!0,r.$container.parent(".h5p-content").css("height","100%"),r.controls.$fullscreen.addClass("h5p-exit").attr("aria-label",r.l10n.exitFullscreen),r.controls.$fullscreen.blur(),r.controls.$fullscreen.focus(),r.resizeInteractions(),setTimeout((function(){void 0!==t.bubbleEndscreen&&t.bubbleEndscreen.update()}),225)})),r.on("exitFullScreen",(function(){r.$container.hasClass("h5p-standalone")&&r.$container.hasClass("h5p-minimal")&&r.pause(),r.hasFullScreen=!1,r.$container.parent(".h5p-content").css("height",""),r.controls.$fullscreen.removeClass("h5p-exit").attr("aria-label",r.l10n.fullscreen),r.controls.$fullscreen.blur(),r.controls.$fullscreen.focus(),r.resizeInteractions(),r.dnb&&r.dnb.dialog&&!r.hasUncompletedRequiredInteractions()&&r.dnb.dialog.close()})),r.video.on("captions",(function(t){r.controls||(r.addControls(),r.trigger("resize")),r.setCaptionTracks(t.data)})),r.accessibility=new q(r.l10n))}},r.togglePlayPause=function(){var t=r.isDisabled(r.controls.$play);if(r.controls.$play.hasClass("h5p-pause")&&!t){var e=!screen||Math.min(screen.width,screen.height)<=r.width;H5P.fullscreenSupported&&!r.hasFullScreen&&e&&r.$container.hasClass("h5p-standalone")&&r.$container.hasClass("h5p-minimal")&&r.toggleFullScreen(),r.video.play(),r.toggleEndscreen(!1),r.closePopupMenus()}else r.video.pause();r.handleAnswered()},r.toggleMute=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=r.controls.$volume;r.deactivateSound||(e.hasClass("h5p-muted")?(e.removeClass("h5p-muted").attr("aria-label",r.l10n.mute),r.video.unMute()):(e.addClass("h5p-muted").attr("aria-label",r.l10n.unmute),r.video.mute()),t&&(e.blur(),e.focus()))}}Je.prototype=Object.create(H5P.EventDispatcher.prototype),Je.prototype.constructor=Je,Je.prototype.setCaptionTracks=function(t){var e=this;if(t.unshift(new H5P.Video.LabelValue("Off","off")),e.captionsTrackSelector)e.captionsTrackSelector.updateOptions(t);else{var n=this.editor?void 0:e.options.video.textTracks.defaultTrackLabel,o=t.reduce((function(t,e){return void 0===t&&n&&e.label===n?e:t}),void 0)||e.video.getCaptionsTrack();o||(o=t[0]),e.captionsTrackSelector=new $("captions",t,o,"menuitemradio",e.l10n,e.contentId),e.controls.$captionsButton=Ye(e.captionsTrackSelector.control),e.popupMenuButtons.push(e.controls.$captionsButton),e.controls.$volume?Ye(e.captionsTrackSelector.control).insertAfter(e.controls.$volume):Ye(e.captionsTrackSelector.control).insertAfter(e.controls.$qualityButton),Ye(e.captionsTrackSelector.popup).css(e.controlsCss).insertAfter(Ye(e.captionsTrackSelector.control)),e.popupMenuChoosers.push(Ye(e.captionsTrackSelector.popup)),Ye(e.captionsTrackSelector.overlayControl).insertAfter(e.controls.$qualityButtonMinimal),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.captionsTrackSelector.overlayControl),e.captionsTrackSelector.on("select",(function(t){e.video.setCaptionsTrack("off"===t.data.value?null:t.data)})),e.captionsTrackSelector.on("close",(function(){e.controls.$overlayButtons.removeClass("h5p-hide"),"true"===e.controls.$more.attr("aria-expanded")&&e.controls.$more.click(),e.resumeVideo()})),e.captionsTrackSelector.on("open",(function(){e.controls.$overlayButtons.addClass("h5p-hide"),e.closePopupMenus(e.controls.$captionsButton)})),e.minimalMenuKeyboardControls.insertElementAt(e.captionsTrackSelector.overlayControl,2)}},Je.prototype.getCurrentState=function(){var t=this;if(t.video&&t.video.play){var e={progress:t.video.getCurrentTime(),answers:[],score:[],maxScore:[],interactionsProgress:t.interactions.slice().sort((function(t,e){return t.getDuration().from-e.getDuration().from})).map((function(t){return t.getProgress()}))};if(void 0!==t.interactions)for(var n=0;n<t.interactions.length;n++){e.answers[n]=t.interactions[n].getCurrentState();var o=t.interactions[n].getInstance(),i=o.getScore?o.getScore():void 0,r=o.getMaxScore?o.getMaxScore():void 0;void 0!==t.interactions[n].getProgress()&&(e.score[n]=i,e.maxScore[n]=r)}return e.progress&&e.progress>0?e:t.previousState&&t.previousState.progress?t.previousState:void 0}},Je.prototype.removeSplash=function(){void 0!==this.$splash&&(this.$splash.remove(),delete this.$splash)},Je.prototype.attach=function(t){var e=this;this.$container=t,this.initialize(),void 0!==this.isRoot&&this.isRoot()&&this.setActivityStarted(),t.addClass("h5p-interactive-video").html(""),this.$videoWrapper.appendTo(t),this.$controls.appendTo(t);var n=this.hasMainSummary();if(this.interactions&&this.interactions.forEach((function(t){t.reCreate(),t.isAnswerable()&&(n=!0)})),this.hasStar=this.editor||void 0!==this.options.assets.endscreens&&this.options.assets.endscreens.length&&n,this.attachVideo(this.$videoWrapper),this.justVideo)return this.$videoWrapper.find("video").css("minHeight","200px"),void t.children(":not(.h5p-video-wrapper)").remove();this.$read.appendTo(t),this.readText=null,void 0===this.editor?(this.dnb=new H5P.DragNBar([],this.$videoWrapper,this.$container,{disableEditor:!0}),this.dnb.dialog.on("open",(function(){e.lastState=e.currentState,e.currentState!==H5P.Video.PAUSED&&e.currentState!==H5P.Video.ENDED&&e.video.pause()})),this.dnb.dialog.on("close",(function(){e.restoreTabIndexes(),e.lastState!==H5P.Video.PAUSED&&e.lastState!==H5P.Video.ENDED&&e.video.play(),e.handleAnswered()}))):e.on("dnbEditorReady",(function(){e.dnb=e.editor.dnb,e.dnb.dialog.disableOverlay=!0})),this.video.pressToPlay||(this.currentState===Je.LOADED?this.addControls():this.addSplash()),t.attr("tabindex","-1");var o=function(t,n){var o=e.controls&&e.controls[n]?e.controls[n]:void 0;return!(void 0!==o&&"-1"!==o.attr("tabindex"))||"INPUT"===t.target.nodeName};A(t,[{key:x.M}],(function(t){o(t,"$volume")||e.toggleMute(!1)})),A(t,[{key:x.K}],(function(t){if(!o(t,"$play"))if(e.hasUncompletedRequiredInteractions()){var n=Ye(document.activeElement);e.showWarningMask().find(".h5p-button-back").click((function(){return n.focus()}))}else e.togglePlayPause()})),this.$container.append(Ye(this.accessibility.getInteractionAnnouncer())),this.currentState=Je.ATTACHED,this.autoplay&&e.video.play(),e.video.pause(),e.showOverlayMask(),e.showWaitingMask(),setInterval((function(){e.checkTeacherResponse()}),1e4)},Je.prototype.attachVideo=function(t){this.video.attach(t),this.justVideo||(this.$overlay=Ye('<div class="h5p-overlay h5p-ie-transparent-background"></div>').appendTo(t))},Je.prototype.addSplash=function(){var t=this;void 0!==this.editor||this.video.pressToPlay||!this.video.play||this.$splash||(this.$splash=Ye('<div class="h5p-splash-wrapper"><div class="h5p-splash-outer"><div class="h5p-splash" role="button" tabindex="0"><div class="h5p-splash-main"><div class="h5p-splash-main-outer"><div class="h5p-splash-main-inner"><div class="h5p-splash-play-icon" aria-label="'+this.l10n.play+'"></div><div class="h5p-splash-title">'+this.options.video.startScreenOptions.title+'</div></div></div></div><div class="h5p-splash-footer"><div class="h5p-splash-footer-holder"><div class="h5p-splash-description">'+t.startScreenOptions.shortStartDescription+"</div></div></div></div></div></div>").click((function(){t.video.play()})).appendTo(this.$overlay).find(".h5p-interaction-button").click((function(){return!1})).end(),Ye(".h5p-splash",this.$splash).keydown((function(e){P(e)&&(t.video.play(),e.preventDefault(),t.$controls.find(".h5p-play").focus())})),void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||this.$splash.addClass("no-description"),this.startScreenOptions.hideStartTitle&&this.$splash.addClass("no-title"))},Je.prototype.getDuration=function(){return void 0===this.duration&&(this.duration=this.video.getDuration()),this.duration},Je.prototype.addControls=function(){var t=this;this.addSplash(),this.attachControls(this.$controls.removeClass("hidden"));var e=this.getDuration(),n=Je.humanizeTime(e),o=Je.formatTimeForA11y(e,this.l10n);if(this.controls.$totalTime.find(".human-time").html(n),this.controls.$totalTime.find(".hidden-but-read").html("".concat(this.l10n.totalTime," ").concat(o)),this.controls.$slider.slider("option","max",e),this.bookmarkMenuKeyboardControls=new g([new y]),this.bookmarkMenuKeyboardControls.on("close",(function(){return t.toggleBookmarksChooser(!1)})),this.endscreenMenuKeyboardControls=new g([new y]),this.endscreenMenuKeyboardControls.on("close",(function(){return t.toggleEndscreensChooser(!1)})),this.addSliderInteractions(),this.addBookmarks(),this.options.assets.endscreens&&this.options.assets.endscreens.length>0)for(var i=!1,r=this.getDuration(),s=this.options.assets.endscreens.length-1;s>=0;s--){this.options.assets.endscreens[s].time>r&&(i?(this.options.assets.endscreens.splice(s,1),this.trigger("endscreensChanged",{index:s,number:-1})):(this.options.assets.endscreens[s].time=r,this.options.assets.endscreens[s].label=Je.humanizeTime(r)+" "+this.l10n.endscreen,this.trigger("endscreensChanged",{index:s,number:1}),i=!0))}this.addEndscreenMarkers(),this.addBubbles(),this.trigger("controls")},Je.prototype.loaded=function(){var t=this.getDuration();if(this.oneSecondInPercentage=100/t,t=Math.floor(t),void 0!==this.editor){var e=tn("interactions",this.editor.field.fields),n=tn("duration",e.field.fields).fields;n[0].max=n[1].max=t,n[0].min=n[1].min=0;for(var o=tn("adaptivity",e.field.fields).fields,i=0;i<o.length;i++)o[i].fields&&(tn("seekTo",o[i].fields).max=t)}if(this.options.assets.interactions&&this.options.assets.interactions.length>0)for(i=this.options.assets.interactions.length-1;i>=0;i--)if(this.options.assets.interactions[i].duration.to>t){var r=this.options.assets.interactions[i].duration.to-this.options.assets.interactions[i].duration.from,s=t-r<=0?0:t-r;this.options.assets.interactions[i].duration.from=s,this.options.assets.interactions[i].duration.to=t}if(this.hasMainSummary()){var a=t-this.options.summary.displayAt;a<0&&(a=0),void 0===this.options.assets.interactions&&(this.options.assets.interactions=[]),this.options.assets.interactions.push({action:this.options.summary.task,x:80,y:80,duration:{from:a,to:t},displayType:"button",bigDialog:!0,className:"h5p-summary-interaction h5p-end-summary",label:"<p>"+this.l10n.summary+"</p>",mainSummary:!0}),this.initInteraction(this.options.assets.interactions.length-1)}this.currentState===Je.ATTACHED&&(this.video.pressToPlay||this.addControls(),this.trigger("resize")),this.currentState=Je.LOADED},Je.prototype.initInteraction=function(t){var e,n=this,o=n.options.assets.interactions[t];if(n.override){var i={};o.adaptivity&&o.adaptivity.requireCompletion&&(i.enableRetry=!0),H5P.jQuery.extend(o.action.params.behaviour,n.override,i)}void 0!==n.previousState&&void 0!==n.previousState.answers&&null!==n.previousState.answers[t]&&(e=n.previousState.answers[t]);var r=new j(o,n,e);return r.on("display",(function(t){var e=t.data;e.appendTo(n.$overlay),r.repositionToWrapper(n.$videoWrapper);var o=void 0!==n.video.pressToPlay;en(o?100:null,(function(){(n.currentState===H5P.Video.PLAYING||n.currentState===H5P.Video.BUFFERING)&&r.pause()&&(n.focusInteraction||(n.focusInteraction=r),n.video.pause())})),n.seekingTo&&(n.seekingTo=void 0,e.focus()),setTimeout((function(){r.positionLabel(n.$videoWrapper.width())}),0),n.toggleEndscreen(!1)})),r.on("hide",(function(){n.handleAnswered()})),r.on("xAPI",(function(t){var e=t.getVerb();"interacted"===e&&this.setProgress(j.PROGRESS_INTERACTED),-1!==Ye.inArray(e,["completed","answered"])&&t.setVerb("answered"),void 0===t.data.statement.context.extensions&&(t.data.statement.context.extensions={}),t.data.statement.context.extensions["http://id.tincanapi.com/extension/ending-point"]="PT"+Math.floor(n.video.getCurrentTime())+"S"})),n.interactions.push(r),r},Je.prototype.handleAnswered=function(){var t=this;t.interactions.forEach((function(e){e.getProgress()===j.PROGRESS_INTERACTED&&(e.setProgress(j.PROGRESS_ANSWERED),e.$menuitem.addClass("h5p-interaction-answered"),t.hasStar&&(t.playStarAnimation(),t.playBubbleAnimation(t.l10n.answered.replace("@answered","<strong>"+t.getAnsweredTotal()+"</strong>")),t.endscreen.update(t.interactions)))}))},Je.prototype.getAnsweredTotal=function(){return this.interactions.filter((function(t){return t.getProgress()===j.PROGRESS_ANSWERED})).length},Je.prototype.hasMainSummary=function(){var t=this.options.summary;return!(void 0===t||void 0===t.displayAt||void 0===t.task||void 0===t.task.params||void 0===t.task.params.summaries||!t.task.params.summaries.length||void 0===t.task.params.summaries[0].summary||!t.task.params.summaries[0].summary.length)},Je.prototype.addSliderInteractions=function(){var t=this,e=this;this.controls.$interactionsContainer.children().remove(),this.interactionKeyboardControls.elements=[],H5P.jQuery.extend([],this.interactions).sort((function(t,e){return t.getDuration().from-e.getDuration().from})).forEach((function(n){var o=n.addDot();e.menuitems.push(o),void 0===e.previousState&&e.interactionsProgress.push(void 0),null!=e.previousState&&null!=e.interactionsProgress[e.menuitems.length-1]&&(n.setProgress(e.interactionsProgress[e.menuitems.length-1]),n.$menuitem.addClass("h5p-interaction-answered")),e.interactionsProgress[e.menuitems.length-1]===j.PROGRESS_ANSWERED&&(n.setProgress(e.interactionsProgress[e.menuitems.length-1]),o.addClass("h5p-interaction-answered")),void 0!==o&&(o.appendTo(t.controls.$interactionsContainer),t.preventSkipping||t.interactionKeyboardControls.addElement(o.get(0)))})),e.interactionKeyboardControls.on("afterNextElement",(function(e){return t.handleInteractionTabIndex(e)})),e.interactionKeyboardControls.on("afterPreviousElement",(function(e){return t.handleInteractionTabIndex(e)}))},Je.prototype.handleInteractionTabIndex=function(t){t.element.removeAttribute("tabindex")},Je.prototype.closePopupMenus=function(t){this.popupMenuButtons.forEach((function(e){void 0!==e&&e!==t&&void 0===e.attr("aria-disabled")&&"true"===e.attr("aria-expanded")&&e.click()}))},Je.prototype.displayBookmarks=function(){return this.options.assets.bookmarks&&this.options.assets.bookmarks.length&&!this.preventSkipping},Je.prototype.addBookmarks=function(){if(this.bookmarksMap={},void 0!==this.options.assets.bookmarks&&!this.preventSkipping)for(var t=0;t<this.options.assets.bookmarks.length;t++)this.addBookmark(t)},Je.prototype.addEndscreenMarkers=function(){if(this.endscreensMap={},void 0!==this.options.assets.endscreens)for(var t=0;t<this.options.assets.endscreens.length;t++)this.addEndscreen(t);this.editor&&this.editor.freshVideo&&(this.endscreensMap[this.getDuration()]||this.editor.addEndscreen(this.getDuration(),!0))},Je.prototype.addBubbles=function(){var t=this;!this.editor&&this.hasStar&&(this.bubbleScore=new _(this.$star),this.endscreen=new ot(this,{l10n:{title:this.l10n.endcardTitle,information:this.l10n.endcardInformation,informationOnSubmitButtonDisabled:this.l10n.endcardInformationOnSubmitButtonDisabled,informationNoAnswers:this.l10n.endcardInformationNoAnswers,informationMustHaveAnswer:this.l10n.endcardInformationMustHaveAnswer,submitButton:this.l10n.endcardSubmitButton,submitMessage:this.l10n.endcardSubmitMessage,tableRowAnswered:this.l10n.endcardTableRowAnswered,tableRowScore:this.l10n.endcardTableRowScore,answeredScore:this.l10n.endcardAnsweredScore,tableRowSummary:this.l10n.endCardTableRowSummary,tableRowSummaryWithoutScore:this.l10n.endCardTableRowSummaryWithoutScore}}),this.endscreen.update(this.interactions),this.bubbleEndscreen=new _(this.$star,{content:this.endscreen.getDOM(),focus:function(){return t.endscreen.focus()},maxWidth:"auto",style:"h5p-interactive-video-bubble-endscreen",mode:"full"}))},Je.prototype.toggleBookmarksChooser=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialLoad:!1,keepStopped:!1,firstPlay:!1};if(this.controls.$bookmarksButton){t=void 0===t?!this.controls.$bookmarksChooser.hasClass("h5p-show"):t;var n=this.controls.$bookmarksChooser.hasClass("h5p-show");this.controls.$minimalOverlay.toggleClass("h5p-show",t),this.controls.$minimalOverlay.find(".h5p-minimal-button").toggleClass("h5p-hide",t),this.controls.$bookmarksButton.attr("aria-expanded",!!t&&"true"),this.controls.$more.attr("aria-expanded",t?"true":"false"),this.controls.$bookmarksChooser.css({maxHeight:t?this.controlsCss.maxHeight:"32px"}).toggleClass("h5p-show",t).toggleClass("h5p-transitioning",t||n)}t?(this.closePopupMenus(this.controls.$bookmarksButton),this.showBookmarksmenuOnLoad&&e.initialLoad||this.controls.$bookmarksChooser.find('[tabindex="0"]').first().focus(),this.editor&&(this.interruptVideo(),this.updateChooserTime(this.controls.$bookmarksChooser,".h5p-add-bookmark"))):e.firstPlay||(this.editor&&!e.keepStopped&&this.resumeVideo(),this.controls.$bookmarksChooser.hasClass("h5p-show")||this.controls.$bookmarksButton.focus())},Je.prototype.toggleEndscreensChooser=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keepStopped:!1,firstPlay:!1};if(this.editor&&this.controls.$endscreensButton){t=void 0===t?!this.controls.$endscreensChooser.hasClass("h5p-show"):t;var n=this.controls.$endscreensChooser.hasClass("h5p-show");this.controls.$minimalOverlay.toggleClass("h5p-show",t),this.controls.$minimalOverlay.find(".h5p-minimal-button").toggleClass("h5p-hide",t),this.controls.$endscreensButton.attr("aria-expanded",t?"true":"false").toggleClass("h5p-star-active-editor",t),this.controls.$more.attr("aria-expanded",t?"true":"false");var o=-10+Math.min(0,this.$container.outerWidth()-this.controls.$endscreensChooser.parent().offset().left-this.controls.$endscreensChooser.outerWidth())+"px";this.controls.$endscreensChooser.css({maxHeight:t?this.controlsCss.maxHeight:"32px"}).css({left:o}).toggleClass("h5p-show",t).toggleClass("h5p-transitioning",t||n)}t?(this.closePopupMenus(this.controls.$endscreensButton),this.editor&&(this.interruptVideo(),this.updateChooserTime(this.controls.$endscreensChooser,".h5p-add-endscreen")),this.controls.$endscreensChooser.find('[tabindex="0"]').first().focus()):e.firstPlay||(this.editor&&!e.keepStopped&&this.resumeVideo(),this.controls.$endscreensChooser.hasClass("h5p-show")||this.controls.$endscreensButton.focus())},Je.prototype.updateChooserTime=function(t,e){var n=t.find(e);n.html(n.data("default").replace("@timecode",Je.humanizeTime(this.video.getCurrentTime())))},Je.prototype.interruptVideo=function(){this.currentState===H5P.Video.PLAYING&&(this.interruptedTemporarily=!0,this.video.pause())},Je.prototype.resumeVideo=function(t){if(!t){if(!this.interruptedTemporarily)return;if(this.popupMenuChoosers.some((function(t){return t.hasClass("h5p-show")})))return}this.interruptedTemporarily=!1,this.video.play()},Je.prototype.toggleEndscreen=function(t){!this.editor&&this.hasStar&&t!==this.bubbleEndscreen.isActive()&&((t=void 0===t?!this.bubbleEndscreen.isActive():t)?(this.disableTabIndexes(".h5p-interactive-video-endscreen"),this.stateBeforeEndscreen=this.currentState,this.video.pause()):(this.restoreTabIndexes(),this.controls.$endscreensButton.focus(),this.stateBeforeEndscreen===H5P.Video.PLAYING&&(this.video.play(),this.stateBeforeEndscreen=void 0)),this.controls.$endscreensButton.toggleClass("h5p-star-active",t),this.bubbleEndscreen.toggle(t,!0))},Je.prototype.showPreventSkippingMessage=function(t){var e=this;e.preventSkippingWarningTimeout||(e.$preventSkippingMessage||(e.$preventSkippingMessage=Ye("<div>",{class:"h5p-prevent-skipping-message",appendTo:e.controls.$bookmarksContainer}),e.$preventSkippingMessage=Ye("<div>",{class:"h5p-prevent-skipping-message",appendTo:e.controls.$endscreensContainer}),e.$preventSkippingMessageText=Ye("<div>",{class:"h5p-prevent-skipping-message-text",html:e.l10n.navDisabled,appendTo:e.$preventSkippingMessage}),e.$preventSkippingMessageTextA11y=Ye("<div>",{class:"hidden-but-read",html:e.l10n.navDisabled,appendTo:e.controls.$slider})),e.$preventSkippingMessage.css("left",t),setTimeout((function(){e.$preventSkippingMessage.addClass("h5p-show").attr("aria-hidden","false")}),0),e.preventSkippingWarningTimeout=setTimeout((function(){e.$preventSkippingMessage.removeClass("h5p-show").attr("aria-hidden","true"),setTimeout((function(){e.preventSkippingWarningTimeout=void 0}),500)}),2e3))},Je.prototype.onBookmarkSelect=function(t,e){var n=this;n.currentState!==H5P.Video.PLAYING&&(t.mouseover().mouseout(),setTimeout((function(){n.timeUpdate(n.video.getCurrentTime())}),0)),"true"===n.controls.$more.attr("aria-expanded")&&n.$container.hasClass("h5p-minimal")?n.controls.$more.click():n.toggleBookmarksChooser(!1),n.video.play(),n.seek(e.time);var o=Je.formatTimeForA11y(e.time,n.l10n);setTimeout((function(){return n.read("".concat(n.l10n.currentTime," ").concat(o))}),150)},Je.prototype.onEndscreenSelect=function(t,e){var n=this;n.currentState!==H5P.Video.PLAYING&&(t.mouseover().mouseout(),setTimeout((function(){n.timeUpdate(n.video.getCurrentTime())}),0)),"true"===n.controls.$more.attr("aria-expanded")&&n.$container.hasClass("h5p-minimal")?n.controls.$more.click():n.toggleEndscreensChooser(!1),n.video.play(),n.seek(e.time);var o=Je.formatTimeForA11y(e.time,n.l10n);setTimeout((function(){return n.read("".concat(n.l10n.currentTime," ").concat(o))}),150)},Je.prototype.addBookmark=function(t,e){var n=this,o=n.options.assets.bookmarks[t];void 0===e&&(e=Math.floor(10*o.time)/10);var i=n.bookmarksMap[e]=Ye('<div class="h5p-bookmark" style="left:'+o.time*n.oneSecondInPercentage+'%"><div class="h5p-bookmark-label"><div class="h5p-bookmark-text">'+o.label+"</div></div></div>").appendTo(n.controls.$bookmarksContainer).data("id",t).hover((function(){void 0!==n.bookmarkTimeout&&clearTimeout(n.bookmarkTimeout),n.controls.$bookmarksContainer.children(".h5p-show").removeClass("h5p-show"),i.addClass("h5p-show")}),(function(){n.bookmarkTimeout=setTimeout((function(){i.removeClass("h5p-show")}),n.editor?1e3:2e3)}));i.find(".h5p-bookmark-label").css("maxWidth",parseInt(n.controls.$slider.parent().css("marginRight"))-35),void 0===n.controls.$bookmarksList&&(n.controls.$bookmarksList=Ye('<ul role="menu"></ul>').insertAfter(n.controls.$bookmarksChooser.find("h2")));var r=Ye('<li role="menuitem" aria-describedby="'.concat(n.bookmarksMenuId,'">').concat(o.label,"</li>")).click((function(){return n.onBookmarkSelect(i,o)})).keydown((function(t){P(t)&&n.onBookmarkSelect(i,o),t.stopPropagation()}));n.bookmarkMenuKeyboardControls.addElement(r.get(0));var s=n.controls.$bookmarksList.children(":eq("+t+")");return 0!==s.length?r.insertBefore(s):r.appendTo(n.controls.$bookmarksList),n.on("bookmarksChanged",(function(o){var s=o.data.index,a=o.data.number;s===t&&a<0?(r.remove(),delete n.bookmarksMap[e]):t>=s&&(t+=a,i.data("id",t))})),n.trigger("bookmarkAdded",{bookmark:i}),i},Je.prototype.addEndscreen=function(t,e){if(void 0!==this.parent||null!==this.parent)return!1;var n,o=this,i=o.options.assets.endscreens[t];if(void 0===e&&(e=Math.floor(10*i.time)/10),!this.editor)return o.getDuration()-e<1&&(e=o.getDuration()),void(n=o.endscreensMap[e]=!0);n=o.endscreensMap[e]=Ye('<div class="h5p-endscreen" style="left:'+i.time*o.oneSecondInPercentage+'%"><div class="h5p-endscreen-label"><div class="h5p-endscreen-text">'+i.label+"</div></div></div>").appendTo(o.controls.$endscreensContainer).data("id",t).hover((function(){void 0!==o.endscreenTimeout&&clearTimeout(o.endscreenTimeout),o.controls.$endscreensContainer.children(".h5p-show").removeClass("h5p-show"),n.addClass("h5p-show")}),(function(){o.endscreenTimeout=setTimeout((function(){n.removeClass("h5p-show")}),o.editor?1e3:2e3)})),o.editor&&(o.endscreenTimeout=setTimeout((function(){n.removeClass("h5p-show")}),1e3)),n.find(".h5p-endscreen-label").css("maxWidth",parseInt(o.controls.$slider.parent().css("marginRight"))-35),void 0===o.controls.$endscreensList&&(o.controls.$endscreensList=Ye('<ul role="menu"></ul>').insertAfter(o.controls.$endscreensChooser.find("h2")));var r=Ye('<li role="menuitem" aria-describedby="'.concat(o.endscreensMenuId,'">').concat(i.label,"</li>")).click((function(){return o.onEndscreenSelect(n,i)})).keydown((function(t){P(t)&&o.onEndscreenSelect(n,i),t.stopPropagation()}));o.endscreenMenuKeyboardControls.addElement(r.get(0));var s=o.controls.$endscreensList.children(":eq("+t+")");return 0!==s.length?r.insertBefore(s):r.appendTo(o.controls.$endscreensList),o.on("endscreensChanged",(function(i){var s=i.data.index,a=i.data.number;s===t&&a<0?(r.remove(),delete o.endscreensMap[e]):t>=s&&(t+=a,n.data("id",t))})),o.trigger("endscreenAdded",{endscreen:n}),n},Je.prototype.attachControls=function(t){var e=this,n=Ye("<div/>",{class:"h5p-controls-left",appendTo:t}),o=Ye("<div/>",{class:"h5p-control h5p-slider",appendTo:t});e.hasStar&&(e.$star=Ye("<div/>",{class:"h5p-control h5p-star",appendTo:t}),e.$starBar=Ye("<div/>",{class:"h5p-control h5p-star h5p-star-bar",appendTo:e.$star}),Ye("<div/>",{class:"h5p-control h5p-star h5p-star-background",appendTo:e.$star}),e.$starAnimation=Ye("<div/>",{class:"h5p-control h5p-star h5p-star-animation h5p-star-animation-inactive",appendTo:e.$star}));var i=Ye("<div/>",{class:"h5p-controls-right",appendTo:t});e.preventSkipping&&e.setDisabled(o),e.controls={},e.controls.$play=e.createButton("play","h5p-control h5p-pause",n,e.togglePlayPause),e.showRewind10&&(e.controls.$rewind10=e.createButton("rewind10","h5p-control",n,(function(){if(e.video.getCurrentTime()>0){var t=Math.max(e.video.getCurrentTime()-10,0);e.seek(t),e.currentState===H5P.Video.PAUSED&&e.timeUpdate(t),e.currentState===H5P.Video.ENDED&&e.video.play()}})));var r=function(t,n){return function(){var o=e.controls[t],i=e.controls[n],r="true"===o.attr("aria-disabled"),s="true"===o.attr("aria-expanded");r||(s?(o.attr("aria-expanded","false"),i.hasClass("h5p-show")||o.focus(),i.removeClass("h5p-show"),function(){var t=e.$container.hasClass("h5p-minimal")&&"true"===e.controls.$more.attr("aria-expanded");t&&e.controls.$more.click()}(),e.resumeVideo()):(o.attr("aria-expanded","true"),i.addClass("h5p-show"),i.find('[tabindex="0"]').focus(),e.closePopupMenus(o)))}},s=e.editor||e.displayBookmarks();if(s&&(e.controls.$bookmarksChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-bookmarks",role:"dialog",html:'<h2 id="'.concat(e.bookmarksMenuId,'">').concat(e.l10n.bookmarks,"</h2>")}),e.popupMenuChoosers.push(e.controls.$bookmarksChooser),e.controls.$bookmarksChooser.append(Ye("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":e.l10n.close,click:function(){return e.toggleBookmarksChooser()},keydown:function(t){P(t)&&(e.toggleBookmarksChooser(),t.preventDefault())}})),e.showRewind10&&e.controls.$bookmarksChooser.addClass("h5p-rewind-displacement"),e.controls.$bookmarksButton=e.createButton("bookmarks","h5p-control",n,(function(){e.toggleBookmarksChooser()})),e.controls.$bookmarksButton.attr("aria-haspopup","true"),e.controls.$bookmarksButton.attr("aria-expanded","false"),e.controls.$bookmarksChooser.insertAfter(e.controls.$bookmarksButton),e.controls.$bookmarksChooser.bind("transitionend",(function(){e.controls.$bookmarksChooser.removeClass("h5p-transitioning")})),e.popupMenuButtons.push(e.controls.$bookmarksButton)),e.hasStar){var a=e.editor?"star h5p-star-foreground-editor":"star h5p-star-foreground",c=e.editor?function(){return e.toggleEndscreensChooser()}:function(){return e.toggleEndscreen()};e.controls.$endscreensButton=e.createButton(a,"h5p-control",e.$star,c),e.controls.$endscreensButton.attr("aria-label",e.l10n.summary),e.popupMenuButtons.push(e.controls.$endscreensButton)}e.editor&&(e.controls.$endscreensChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-endscreens",role:"dialog",html:'<h2 id="'.concat(e.endscreensMenuId,'">').concat(e.l10n.endscreens,"</h2>")}),e.popupMenuChoosers.push(e.controls.$endscreensChooser),e.controls.$endscreensChooser.append(Ye("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":e.l10n.close,click:function(){return e.toggleEndscreensChooser()},keydown:function(t){P(t)&&(e.toggleEndscreensChooser(),t.preventDefault())}})),e.hasStar&&(e.controls.$endscreensButton.attr("aria-haspopup","true").attr("aria-expanded","false"),e.controls.$endscreensChooser.insertAfter(e.controls.$endscreensButton).bind("transitionend",(function(){e.controls.$endscreensChooser.removeClass("h5p-transitioning")}))));var l='<time class="h5p-current">\n      <span class="hidden-but-read"></span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>',u=Ye('<div class="h5p-control h5p-simple-time">'.concat(l,"</div>")).appendTo(n);e.controls.$currentTimeSimple=u.find(".human-time"),e.controls.$currentTimeA11ySimple=u.find(".hidden-but-read");var d=Je.formatTimeForA11y(0,e.l10n),h=Ye('<div class="h5p-control h5p-time">\n    '.concat(l,'\n    <span aria-hidden="true"> / </span>\n    <time class="h5p-total">\n      <span class="hidden-but-read">').concat(e.l10n.totalTime," ").concat(d,'</span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>\n  </div>')).appendTo(i),p=h.find(".h5p-current");e.controls.$currentTime=p.find(".human-time"),e.controls.$currentTimeA11y=p.find(".hidden-but-read"),e.controls.$totalTime=h.find(".h5p-total"),e.updateCurrentTime(0);var f=function(){e.controls.$minimalOverlay.removeClass("h5p-show"),e.controls.$more.attr("aria-expanded","false"),e.controls.$more.focus(),setTimeout((function(){e.controls.$overlayButtons.removeClass("h5p-hide")}),150)};e.controls.$more=e.createButton("more","h5p-control",i,(function(){"true"===e.controls.$more.attr("aria-expanded")?f():(e.controls.$minimalOverlay.addClass("h5p-show"),e.controls.$more.attr("aria-expanded","true"),e.removeSplash(),setTimeout((function(){e.controls.$minimalOverlay.find('[tabindex="0"]').focus()}),150)),e.closePopupMenus()})),e.controls.$playbackRateChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-playbackRate",role:"dialog",html:'<h2 id="'.concat(e.playbackRateMenuId,'">').concat(e.l10n.playbackRate,"</h2>")}),e.popupMenuChoosers.push(e.controls.$playbackRateChooser);var m=function(){e.isMinimal?e.controls.$more.click():e.controls.$playbackRateButton.click(),e.resumeVideo()};e.controls.$playbackRateChooser.append(Ye("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":e.l10n.close,click:function(){return m()},keydown:function(t){P(t)&&(m(),t.preventDefault())}})),e.controls.$playbackRateButton=e.createButton("playbackRate","h5p-control",i,r("$playbackRateButton","$playbackRateChooser")),e.popupMenuButtons.push(e.controls.$playbackRateButton),e.setDisabled(e.controls.$playbackRateButton),e.controls.$playbackRateButton.attr("aria-haspopup","true"),e.controls.$playbackRateButton.attr("aria-expanded","false"),e.controls.$playbackRateChooser.insertAfter(e.controls.$playbackRateButton),-1===navigator.userAgent.indexOf("Android")&&-1===navigator.userAgent.indexOf("iPad")&&(e.controls.$volume=e.createButton("mute","h5p-control",i,e.toggleMute),e.deactivateSound&&(e.controls.$volume.addClass("h5p-muted").attr("aria-label",e.l10n.sndDisabled),e.setDisabled(e.controls.$volume))),e.deactivateSound&&e.video.mute(),e.video.isMuted()&&e.controls.$volume.addClass("h5p-muted").attr("aria-label",e.l10n.sndDisabled),e.controls.$qualityChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-quality",role:"dialog",html:'<h2 id="'.concat(e.qualityMenuId,'">').concat(e.l10n.quality,"</h2>")}),e.popupMenuChoosers.push(e.controls.$qualityChooser);var v=function(){e.isMinimal?e.controls.$more.click():e.controls.$qualityButton.click(),e.resumeVideo()};e.controls.$qualityChooser.append(Ye("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":e.l10n.close,click:function(){return v()},keydown:function(t){P(t)&&(v(),t.preventDefault())}})),e.controls.$qualityButton=e.createButton("quality","h5p-control",i,r("$qualityButton","$qualityChooser")),e.popupMenuButtons.push(e.controls.$qualityButton),e.setDisabled(e.controls.$qualityButton),e.controls.$qualityButton.attr("aria-haspopup","true"),e.controls.$qualityButton.attr("aria-expanded","false"),e.controls.$qualityChooser.insertAfter(e.controls.$qualityButton),e.editor||!1===H5P.fullscreenSupported||(e.controls.$fullscreen=e.createButton("fullscreen","h5p-control",i,(function(){e.toggleFullScreen()}))),e.controls.$minimalOverlay=H5P.jQuery("<div/>",{class:"h5p-minimal-overlay",appendTo:e.$container});var b=H5P.jQuery("<div/>",{role:"menu",class:"h5p-minimal-wrap",appendTo:e.controls.$minimalOverlay});e.minimalMenuKeyboardControls=new g([new y]),e.minimalMenuKeyboardControls.on("close",(function(){return f()})),e.controls.$overlayButtons=H5P.jQuery([]),s&&(e.controls.$bookmarkButtonMinimal=e.createButton("bookmarks","h5p-minimal-button",b,(function(){e.controls.$overlayButtons.addClass("h5p-hide"),e.toggleBookmarksChooser(!0)}),!0),e.controls.$bookmarkButtonMinimal.attr("role","menuitem"),e.controls.$bookmarkButtonMinimal.attr("tabindex","-1"),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.controls.$bookmarkButtonMinimal),e.minimalMenuKeyboardControls.addElement(e.controls.$bookmarkButtonMinimal.get(0))),e.controls.$qualityButtonMinimal=e.createButton("quality","h5p-minimal-button",b,(function(){e.isDisabled(e.controls.$qualityButton)||(e.controls.$overlayButtons.addClass("h5p-hide"),e.controls.$qualityButton.click())}),!0),e.setDisabled(e.controls.$qualityButtonMinimal),e.controls.$qualityButtonMinimal.attr("role","menuitem"),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.controls.$qualityButtonMinimal),e.minimalMenuKeyboardControls.addElement(e.controls.$qualityButtonMinimal.get(0)),e.controls.$playbackRateButtonMinimal=e.createButton("playbackRate","h5p-minimal-button",b,(function(){e.isDisabled(e.controls.$playbackRateButton)||(e.controls.$overlayButtons.addClass("h5p-hide"),e.controls.$playbackRateButton.click())}),!0),e.controls.$playbackRateButtonMinimal.attr("role","menuitem"),e.setDisabled(e.controls.$playbackRateButtonMinimal),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.controls.$playbackRateButtonMinimal),e.minimalMenuKeyboardControls.addElement(e.controls.$playbackRateButtonMinimal.get(0)),e.addQualityChooser(),e.addPlaybackRateChooser(),e.interactionKeyboardControls=new g([new y]),e.controls.$interactionsContainer=Ye("<div/>",{role:"menu",class:"h5p-interactions-container","aria-label":e.l10n.interaction}),e.controls.$bookmarksContainer=Ye("<div/>",{class:"h5p-bookmarks-container",appendTo:o}),e.controls.$endscreensContainer=Ye("<div/>",{class:"h5p-endscreens-container",appendTo:o}),e.hasPlayPromise=!1,e.hasQueuedPause=!1,e.delayed=!1,e.controls.$slider=Ye("<div/>",{appendTo:o}).slider({value:0,step:.01,orientation:"horizontal",range:"min",max:0,create:function(t){var n=Ye(t.target).find(".ui-slider-handle");n.attr("role","slider").attr("aria-valuemin","0").attr("aria-valuemax",e.getDuration().toString()).attr("aria-valuetext",Je.formatTimeForA11y(0,e.l10n)).attr("aria-valuenow","0"),e.preventSkipping&&e.setDisabled(n).attr("aria-hidden","true")},start:function(){e.currentState!==Je.SEEKING&&(e.toggleEndscreen(!1),e.delayedState||(e.currentState===H5P.Video.ENDED?e.lastState=H5P.Video.PLAYING:e.currentState===H5P.Video.BUFFERING&&e.lastState||(e.lastState=e.currentState)),e.delayedState=!0,clearTimeout(e.delayTimeout),e.delayTimeout=setTimeout((function(){e.delayedState=!1}),200),e.hasPlayPromise?e.hasQueuedPause=!0:e.video.pause(),e.currentState=Je.SEEKING,e.removeSplash(),e.$overlay.addClass("h5p-visible"))},slide:function(t,n){var o=E(t,[x.ARROW_LEFT,x.ARROW_RIGHT]),i=n.value;if(o){var r=E(t,[x.ARROW_RIGHT]),s=e.getDuration();i=r?Math.min(i+5,s):Math.max(i-5,0),e.timeUpdate(i,!0)}return e.seek(i),e.updateInteractions(i),e.updateCurrentTime(i),!o},stop:function(t,n){e.currentState=e.lastState,e.seek(n.value),e.recreateCurrentInteractions();var o=e.lastState===H5P.Video.PLAYING||e.lastState===H5P.Video.VIDEO_CUED||e.hasQueuedPause;if(e.hasPlayPromise)e.hasQueuedPause=!1;else if(o){e.hasQueuedPause=!1;var i=e.video.play();e.hasQueuedPause=!1,i&&i.then?(e.hasPlayPromise=!0,i.then((function(){setTimeout((function(){(e.hasQueuedPause||e.hasActivePauseInteraction())&&e.video.pause(),e.hasPlayPromise=!1}),0)}))):e.hasActivePauseInteraction()&&(e.video.play(),setTimeout((function(){e.video.pause()}),50))}else e.timeUpdate(n.value);e.$overlay.removeClass("h5p-visible"),e.editor&&(e.updateChooserTime(e.controls.$bookmarksChooser,".h5p-add-bookmark"),e.updateChooserTime(e.controls.$endscreensChooser,".h5p-add-endscreen"))}}),e.controls.$interactionsContainer.appendTo(o),e.preventSkipping&&(e.controls.$slider.slider("disable"),e.controls.$slider.click((function(t){return e.showPreventSkippingMessage(t.offsetX),!1}))),e.displayBookmarks()&&e.showBookmarksmenuOnLoad&&!1===e.video.pressToPlay&&e.toggleBookmarksChooser(!0,{initialLoad:!0}),e.controls.$buffered=Ye("<div/>",{class:"h5p-buffered",prependTo:e.controls.$slider})},Je.prototype.playStarAnimation=function(){var t=this;this.$starAnimation.hasClass("h5p-star-animation-inactive")&&(this.$starAnimation.removeClass("h5p-star-animation-inactive").addClass("h5p-star-animation-active"),setTimeout((function(){t.$starAnimation.removeClass("h5p-star-animation-active").addClass("h5p-star-animation-inactive")}),1e3))},Je.prototype.playBubbleAnimation=function(t){this.bubbleScore.setContent(t),this.bubbleScore.animate()},Je.prototype.hasActivePauseInteraction=function(){var t=!1;return this.interactions.forEach((function(e){e.getElement()&&e.pause()&&(t=!0)})),t},Je.prototype.createButton=function(t,e,n,o,i){var r={role:"button",tabindex:0,class:(void 0===e?"":e+" ")+"h5p-"+t,on:{click:function(){o.call(this)},keydown:function(t){P(t)&&(o.call(this),t.preventDefault(),t.stopPropagation())}},appendTo:n};return r[i?"text":"aria-label"]=this.l10n[t],H5P.jQuery("<div/>",r)},Je.prototype.addQualityChooser=function(){var t=this;if(t.qualityMenuKeyboardControls=new g([new y]),t.qualityMenuKeyboardControls.on("close",(function(){return t.controls.$qualityButton.click()})),this.video.getQualities&&(t.qualities=this.video.getQualities(),t.qualities&&void 0!==this.controls.$qualityButton&&t.isDisabled(t.controls.$qualityButton))){var e=this.video.getQuality(),n=t.qualities;"YouTube"===this.video.getHandlerName()&&(n=n.filter((function(t){return t.name===e})));for(var o="",i=0;i<n.length;i++){var r=n[i],s=r.name===e;o+='<li role="menuitemradio" data-quality="'.concat(r.name,'" aria-checked="').concat(s,'" aria-describedby="').concat(t.qualityMenuId,'">').concat(r.label,"</li>")}var a=Ye('<ul role="menu">'.concat(o,"</ul>")).appendTo(this.controls.$qualityChooser);a.children().click((function(){var e=Ye(this).attr("data-quality");t.updateQuality(e)})).keydown((function(e){if(P(e)){var n=Ye(this).attr("data-quality");t.updateQuality(n)}e.stopPropagation()})),a.find("li").get().forEach((function(e){t.qualityMenuKeyboardControls.addElement(e);var n="true"===e.getAttribute("aria-checked");Ze(e,n)})),t.removeDisabled(this.controls.$qualityButton.add(this.controls.$qualityButtonMinimal))}},Je.prototype.updateQuality=function(t){var e=this;e.video.setQuality(t),"true"===e.controls.$more.attr("aria-expanded")?e.controls.$more.click():(e.controls.$qualityButton.click(),e.controls.$qualityButton.focus())},Je.prototype.addPlaybackRateChooser=function(){var t=this,e=this;if(this.playbackRateMenuKeyboardControls=new g([new y]),this.playbackRateMenuKeyboardControls.on("close",(function(){return e.controls.$playbackRateButton.click()})),this.video.getPlaybackRates){var n=this.video.getPlaybackRates();if(!(n.length<2)&&n&&void 0!==this.controls.$playbackRateButton&&e.isDisabled(this.controls.$playbackRateButton)){for(var o=this.video.getPlaybackRate(),i="",r=0;r<n.length;r++){var s=n[r],a=s===o;i+='<li role="menuitemradio" playback-rate="'.concat(s,'" aria-checked="').concat(a,'" aria-describedby="').concat(e.playbackRateMenuId,'">').concat(s,"</li>")}var c=Ye('<ul role="menu">'+i+"</ul>").appendTo(this.controls.$playbackRateChooser);c.children().click((function(){var t=Ye(this).attr("playback-rate");e.updatePlaybackRate(t)})).keydown((function(t){if(P(t)){var n=Ye(this).attr("playback-rate");e.updatePlaybackRate(n)}t.stopPropagation()})),c.find("li").get().forEach((function(e){t.playbackRateMenuKeyboardControls.addElement(e);var n="true"===e.getAttribute("aria-checked");Ze(e,n)})),e.removeDisabled(this.controls.$playbackRateButton.add(this.controls.$playbackRateButtonMinimal))}}},Je.prototype.updatePlaybackRate=function(t){var e=this;e.video.setPlaybackRate(t),"true"===e.controls.$more.attr("aria-expanded")?e.controls.$more.click():e.controls.$playbackRateButton.click()},Je.prototype.startUpdatingBufferBar=function(){var t=this;if(!t.bufferLoop){!function e(){var n=t.video.getBuffered();n&&t.controls.$buffered&&(t.controls.$buffered.css("width",n+"%"),t.hasStar&&(n>99?t.$starBar.addClass("h5p-star-bar-buffered"):t.$starBar.removeClass("h5p-star-bar-buffered"))),t.bufferLoop=setTimeout(e,500)}()}},Je.prototype.resize=function(){if(this.$container){var t,e,n=this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen");this.$videoWrapper.css({marginTop:"",marginLeft:"",width:"",height:""}),this.video.trigger("resize");var o=this.justVideo?0:this.$controls.height(),i=this.$container.height();if(n){if((e=this.$videoWrapper.height())+o<=i)this.$videoWrapper.css("marginTop",(i-o-e)/2),t=this.$videoWrapper.width(),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen(!0,i,e);else{var r=i-o;t=r*(this.$videoWrapper.width()/e),this.$videoWrapper.css({marginLeft:(this.$container.width()-t)/2,width:t,height:r}),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen(!0)}this.video.trigger("resize")}else t=this.$container.width(),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen();this.scaledFontSize=t>this.width?this.fontSize*(t/this.width):this.fontSize,this.$container.css("fontSize",this.scaledFontSize+"px"),this.editor||(t<this.width?this.$container.hasClass("h5p-minimal")||this.$container.addClass("h5p-minimal"):this.$container.hasClass("h5p-minimal")&&this.$container.removeClass("h5p-minimal")),this.isMinimal=this.$container.hasClass("h5p-minimal");var s=this.$videoWrapper.height();if(this.controlsCss={bottom:"",maxHeight:s+"px"},n){var a=o;e+o<=i&&(a=o+(i-o-e)/2),this.controlsCss.bottom=a+"px"}this.controls&&this.controls.$minimalOverlay&&this.controls.$minimalOverlay.css(this.controlsCss),this.$container.find(".h5p-chooser").css(this.controlsCss),this.editor?this.editor.dnb&&this.editor.dnb.dnr.setContainerEm(this.scaledFontSize):(this.resizeMobileView(),void 0!==this.$splash&&this.resizeStartScreen()),this.bubbleScore&&(this.bubbleScore.update(),this.bubbleEndscreen.update([])),this.resizeInteractions()}},Je.prototype.resizeMobileView=function(){if(!isNaN(this.currentState)){if(this.$container.width()/parseInt(this.$container.css("font-size"),10)<30){if(this.resizeInteractions(),!this.isMobileView){if(this.$container.addClass("mobile"),this.isMobileView=!0,this.hasUncompletedRequiredInteractions())Ye(".h5p-dialog",this.$container).show();else this.restoreTabIndexes(),this.dnb.dialog.closeOverlay();this.recreateCurrentInteractions()}}else if(this.isMobileView){if(this.dnb&&this.dnb.dialog&&!this.hasUncompletedRequiredInteractions())this.dnb.dialog.close(!0),this.$container.find(".h5p-dialog .h5p-image img").css({width:"",height:""});this.$container.removeClass("mobile"),this.isMobileView=!1,this.recreateCurrentInteractions()}}},Je.prototype.resizeInteractions=function(){if(!isNaN(this.currentState)){var t=this;this.interactions.forEach((function(e){e.resizeInteraction(),e.repositionToWrapper(t.$videoWrapper),e.positionLabel(t.$videoWrapper.width())}))}},Je.prototype.recreateCurrentInteractions=function(){void 0!==this.dnb&&this.dnb.blurAll(),this.interactions.forEach((function(t){t.reCreateInteraction()}))},Je.prototype.resizeStartScreen=function(){var t=50,e=!0,n=!0;void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||(e=!1,this.startScreenOptions.hideStartTitle&&(n=!1,t=45));var o=Ye(".h5p-splash-description",this.$splash),i=Ye(".h5p-splash-title",this.$splash),r=o.clone().css("position","absolute").addClass("minimum-font-size").appendTo(o.parent()),s=i.clone().css("position","absolute").addClass("minimum-font-size").appendTo(i.parent()),a=parseInt(r.css("font-size"),10),c=parseInt(s.css("font-size"),10),l=this.$container.width(),u=parseInt(l/t,10);e||(n&&u<a?u=a:u<10&&(u=10)),l<510?this.$splash.addClass("mobile"):this.$splash.removeClass("mobile"),.8*u<a?o.addClass("minimum-font-size"):o.removeClass("minimum-font-size"),1.5*u<c?i.addClass("minimum-font-size"):i.removeClass("minimum-font-size"),this.$splash.css("font-size",u),r.remove(),s.remove()},Je.prototype.toggleFullScreen=function(){H5P.isFullscreen||this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen")?void 0!==H5P.exitFullScreen&&void 0!==H5P.fullScreenBrowserPrefix?H5P.exitFullScreen():(void 0===H5P.fullScreenBrowserPrefix?Ye(".h5p-disable-fullscreen").click():""===H5P.fullScreenBrowserPrefix?window.top.document.exitFullScreen():"ms"===H5P.fullScreenBrowserPrefix?window.top.document.msExitFullscreen():window.top.document[H5P.fullScreenBrowserPrefix+"CancelFullScreen"](),this.trigger("exitFullScreen")):(H5P.fullScreen(this.$container,this),void 0===H5P.exitFullScreen&&this.trigger("enterFullScreen")),this.resizeInteractions()},Je.prototype.timeUpdate=function(t,e){var n=this;if(t>=0)try{var o=n.controls.$slider.find(".ui-slider-handle"),i=Je.formatTimeForA11y(t,n.l10n);n.controls.$slider.slider("option","value",t),o.attr("aria-valuetext",i),o.attr("aria-valuenow",t.toString())}catch(t){return}n.updateInteractions(t),e||setTimeout((function(){(n.currentState===H5P.Video.PLAYING||n.currentState===H5P.Video.BUFFERING&&n.lastState===H5P.Video.PLAYING)&&n.timeUpdate(n.video.getCurrentTime())}),40)},Je.prototype.updateInteractions=function(t){var e=this,n=Math.floor(10*t)/10;if(n!==e.lastTenth){void 0!==e.bookmarksMap&&void 0!==e.bookmarksMap[n]&&e.bookmarksMap[n].mouseover().mouseout();void 0!==e.endscreensMap&&void 0!==e.endscreensMap[n]&&e.currentState!==Je.SEEKING&&e.getAnsweredTotal()>0&&e.toggleEndscreen(!0)}e.lastTenth=n,e.toggleInteractions(t);var o=Math.floor(t);o!==e.lastSecond&&(e.currentState!==H5P.Video.PLAYING&&e.currentState!==H5P.Video.PAUSED||e.updateCurrentTime(o)),e.lastSecond=o},Je.prototype.updateCurrentTime=function(t){var e=this;t=Math.max(t,0);var n=Je.humanizeTime(t),o=Je.formatTimeForA11y(t,e.l10n);e.controls.$currentTime.html(n),e.controls.$currentTimeA11y.html("".concat(e.l10n.currentTime," ").concat(o)),e.controls.$currentTimeSimple.html(n),e.controls.$currentTimeA11ySimple.html("".concat(e.l10n.currentTime," ").concat(o))},Je.prototype.getUsersScore=function(){for(var t=0,e=0;e<this.interactions.length;e++){var n=!0;null!=this.interactions[e].$menuitem&&this.interactions[e].$menuitem[0]&&this.interactions[e].$menuitem[0].ariaLabel&&"Interaction. Open summary dialog"==this.interactions[e].$menuitem[0].ariaLabel&&(n=!1),this.interactions[e].score&&n&&0==(t+=this.interactions[e].score)&&void 0!==this.previousState&&void 0!==this.previousState.score&&null!==this.parent.previousState.score[e]&&(t+=this.previousState.score[e])}return t},Je.prototype.getUsersMaxScore=function(){for(var t=0,e=0;e<this.interactions.length;e++){var n=!0;null!=this.interactions[e].$menuitem&&this.interactions[e].$menuitem[0]&&this.interactions[e].$menuitem[0].ariaLabel&&"Interaction. Open summary dialog"==this.interactions[e].$menuitem[0].ariaLabel&&(n=!1),this.interactions[e].maxScore&&n&&(t+=this.interactions[e].maxScore)}return t},Je.prototype.getScore=function(){return this.getUsersScore()},Je.prototype.getMaxScore=function(){return this.getUsersMaxScore()},Je.prototype.showOverlayMask=function(){var t=this;t.$videoWrapper.addClass("h5p-disable-opt-out"),t.disableTabIndexes(),t.dnb.dialog.openOverlay(),t.restorePosterTabIndexes(),t.$container.find(".h5p-dialog-wrapper").click((function(){t.hasUncompletedRequiredInteractions()&&t.showWarningMask()})),t.toggleFocusTrap()},Je.prototype.restorePosterTabIndexes=function(){var t=this;t.$overlay.find(".h5p-interaction.h5p-poster").each((function(){t.restoreTabIndexes(Ye(this))}))},Je.prototype.disableTabIndexes=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".h5p-dialog-wrapper",e=this,n=e.$container.find(t);e.$tabbables=e.$container.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter((function(){var t=Ye(this),e=Ye.contains(n.get(0),t.get(0));if(t.data("tabindex"))return!0;if(!e){var o=t.attr("tabindex");return t.data("tabindex",o),t.attr("tabindex","-1"),!0}return!1}))},Je.prototype.restoreTabIndexes=function(t){var e=this;e.$tabbables&&(e.$tabbables.each((function(){var e=Ye(this),n=e.data("tabindex");if(t&&!Ye.contains(t.get(0),e.get(0)))return!0;e.hasClass("ui-slider-handle")?(e.attr("tabindex",0),e.removeData("tabindex")):void 0!==n?(e.attr("tabindex",n),e.removeData("tabindex")):e.removeAttr("tabindex")})),t||(e.$tabbables=void 0))},Je.prototype.toggleFocusTrap=function(){var t=this,e=this.getVisibleInteractions().filter((function(t){return t.getRequiresCompletion()&&!t.hasFullScore()}));e.length>0?this.$container.off("focusin").on("focusin",(function(n){return t.trapFocusInInteractions(e,Ye(n.target))})):this.$container.off("focusin","**")},Je.prototype.trapFocusInInteractions=function(t,e){var n=t.some((function(t){var n=t.getElement();return sn(n,e)})),o=!!this.$mask&&sn(this.$mask,e);if(!n&&!o){var i=t[0].getElement();i&&i.focus()}},Je.prototype.hideOverlayMask=function(){var t=this;return t.restoreTabIndexes(),t.dnb.dialog.closeOverlay(),t.$videoWrapper.removeClass("h5p-disable-opt-out"),t.toggleFocusTrap(),t.$container.find(".h5p-dialog-wrapper")},Je.prototype.showWarningMask=function(){var t=this,e="interactive-video-".concat(t.contentId,"-").concat(t.instanceIndex,"-completion-warning-text");return t.$mask||(t.$mask=Ye('<div class="h5p-warning-mask" role="alertdialog" aria-describedby="'.concat(e,'">\n        <div class="h5p-warning-mask-wrapper">\n          <div id="').concat(e,'" class="h5p-warning-mask-content">').concat(t.l10n.requiresCompletionWarning,'</div>\n          <button type="button" class="h5p-joubelui-button h5p-button-back">').concat(t.l10n.back,"</button>\n        </div>\n      </div>")).click((function(){t.$mask.hide()})).appendTo(t.$container)),t.$mask.show(),t.$mask.find(".h5p-button-back").focus(),t.$mask},Je.prototype.showWaitingMask=function(){var t=this,e="interactive-video-".concat(t.contentId,"-").concat(t.instanceIndex,"-completion-warning-text");return t.$mask||(t.$mask=Ye('<div class="h5p-warning-mask" role="alertdialog" aria-describedby="'.concat(e,'">\n        <div class="h5p-warning-mask-wrapper">\n          <div id="').concat(e,'" class="h5p-warning-mask-content">Please Wait </div>\n        </div>\n      </div>')).click((function(){t.$mask.hide()})).appendTo(t.$container)),t.$mask.show(),t.$mask.find(".h5p-button-back").focus(),t.$mask},Je.prototype.checkTeacherResponse=function(){var t=this;Xe.get("https://jsonplaceholder.typicode.com/users/1").then((function(e){1===Math.floor(10*Math.random())?(t.video.play(),t.hideOverlayMask()):(t.video.pause(),t.showOverlayMask())})).catch((function(e){t.video.pause(),t.showOverlayMask()}))},Je.prototype.setDisabled=function(t){return t.attr("aria-disabled","true").attr("tabindex","-1")},Je.prototype.isDisabled=function(t){return"true"===t.attr("aria-disabled")},Je.prototype.removeDisabled=function(t){return t.removeAttr("aria-disabled").attr("tabindex","0")},Je.prototype.hasUncompletedRequiredInteractions=function(t){return(void 0!==t?this.getVisibleInteractionsAt(t):this.getVisibleInteractions()).some((function(t){return t.getRequiresCompletion()&&!t.hasFullScore()}))},Je.prototype.getVisibleInteractions=function(){return this.interactions.filter((function(t){return t.isVisible()}))},Je.prototype.getVisibleInteractionsAt=function(t){return this.interactions.filter((function(e){return e.visibleAt(t)}))},Je.prototype.showSolutions=function(){},Je.prototype.getTitle=function(){return H5P.createTitle(this.contentData&&this.contentData.metadata&&this.contentData.metadata.title?this.contentData.metadata.title:"Interactive Video")},Je.prototype.findNextInteractionToShow=function(t,e){for(var n,o=0;o<this.interactions.length;o++){var i=this.interactions[o].getDuration();if(this.interactions[o].visibleAt(t)&&!this.interactions[o].isVisible()){n=o;break}(i.from>t||i.from==t&&(void 0===e||o>e))&&(void 0===n||i.from<this.interactions[n].getDuration().from)&&(n=o)}return n},Je.prototype.findNextInteractionToHide=function(t){for(var e,n=0;n<this.visibleInteractions.length;n++){if(void 0===this.interactions[this.visibleInteractions[n]])return e;var o=this.interactions[this.visibleInteractions[n]].getDuration();(void 0===e||o.to<this.interactions[this.visibleInteractions[e]].getDuration().to)&&(e=n)}return e},Je.prototype.hideInteractions=function(t){void 0===this.nextInteractionToHide&&(this.nextInteractionToHide=this.findNextInteractionToHide(t));for(var e=void 0!==this.nextInteractionToHide?this.interactions[this.visibleInteractions[this.nextInteractionToHide]]:null;e&&!e.visibleAt(t);)e.toggle(t),this.visibleInteractions.splice(this.nextInteractionToHide,1),this.nextInteractionToHide=this.findNextInteractionToHide(t),e=void 0!==this.nextInteractionToHide?this.interactions[this.visibleInteractions[this.nextInteractionToHide]]:null},Je.prototype.showInteractions=function(t){void 0===this.nextInteractionToShow&&(this.nextInteractionToShow=this.findNextInteractionToShow(t));for(var e=[],n=void 0!==this.nextInteractionToShow?this.interactions[this.nextInteractionToShow]:null;n&&n.getDuration().from<=t;)n.toggle(t),n.repositionToWrapper(this.$videoWrapper),this.visibleInteractions.push(this.nextInteractionToShow),this.nextInteractionToHide=void 0,e.push(n),this.nextInteractionToShow=this.findNextInteractionToShow(t,this.nextInteractionToShow),n=void 0!==this.nextInteractionToShow?this.interactions[this.nextInteractionToShow]:null;this.accessibility.announceInteractions(e)},Je.prototype.toggleInteractions=function(t){this.hideInteractions(t),this.showInteractions(t)},Je.prototype.play=function(){this.video.play()},Je.prototype.seek=function(t){this.nextInteractionToShow=this.nextInteractionToHide=void 0,this.video.seek(t)},Je.prototype.pause=function(){this.video&&this.video.pause&&this.video.pause()},Je.prototype.resetTask=function(){this.interactionsProgress=[];for(var t=0;t<this.interactions.length;t++)this.interactions[t].resetTask();void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.toggle(!1,!1),void 0!==this.controls&&(this.addSliderInteractions(),this.video.getCurrentTime&&0===this.video.getCurrentTime()||this.seek(0),this.timeUpdate(-1),this.controls.$slider.slider("option","value",0))},Je.prototype.read=function(t){var e=this;e.$read&&(e.readText?e.readText+=("."===e.readText.substr(-1,1)?" ":". ")+t:e.readText=t,e.$read.html(e.readText),setTimeout((function(){e.readText=null,e.$read.html("")}),100))},Je.prototype.getCopyrights=function(){var t=this,e=new H5P.ContentCopyrights;void 0!==t.options.video.files&&void 0!==t.options.video.files[0]&&e.addMedia(new H5P.MediaCopyright(t.options.video.files[0].copyright,t.l10n)),void 0!==t.options.video.startScreenOptions.copyright&&e.addMedia(t.options.video.startScreenOptions.copyright);var n=t.options.video.startScreenOptions.poster;if(n&&void 0!==n.copyright){var o=new H5P.MediaCopyright(n.copyright,t.l10n),i=H5P.getPath(n.path,t.contentId);o.setThumbnail(new H5P.Thumbnail(i,n.width,n.height)),e.addMedia(o)}for(var r=0;r<t.interactions.length;r++){var s=t.interactions[r].getCopyrights();s&&e.addContent(s)}if(t.hasMainSummary()){var a=H5P.newRunnable(t.options.summary.task,t.contentId);if(void 0!==a){var c=new H5P.ContentCopyrights;c.addContent(H5P.getCopyrights(a,{action:t.options.summary.task},t.contentId)),c.setLabel(t.l10n.summary),e.addContent(c)}}return e},Je.prototype.skippingPrevented=function(){return this.preventSkipping},Je.SEEKING=4,Je.LOADED=5,Je.ATTACHED=6,Je.humanizeTime=function(t){var e=Je.secondsToMinutesAndHours(t),n="";return 0!==e.hours&&(n+=e.hours+":",e.minutes<10&&(n+="0")),n+=e.minutes+":",e.seconds<10&&(n+="0"),n+=e.seconds},Je.formatTimeForA11y=function(t,e){var n=Je.secondsToMinutesAndHours(t),o=n.hours>0?"".concat(n.hours," ").concat(e.hours,", "):"";return"".concat(o).concat(n.minutes," ").concat(e.minutes,", ").concat(n.seconds," ").concat(e.seconds)},Je.secondsToMinutesAndHours=function(t){var e=Math.floor(t/60);return{seconds:Math.floor(t%60),minutes:e%60,hours:Math.floor(e/60)}};var Ze=function(t,e){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")},tn=function(t,e){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n]},en=function(t,e){null===t?e():setTimeout(e,t)},nn=function(){return void 0===window.interactiveVideoCounter&&(window.interactiveVideoCounter=0),window.interactiveVideoCounter++};Je.prototype.getXAPIData=function(){var t=this,e=this.createXAPIEventTemplate("answered");on(e),e.setScoredResult(t.getScore(),t.getMaxScore(),t,!0,t.getScore()===t.getMaxScore());var n=an(t.interactions);return{statement:e.data.statement,children:n}},Je.prototype.getContext=function(){var t=this.video.getCurrentTime();return void 0===t?{}:{type:"time",value:t}},Je.prototype.getAnswerGiven=function(){return this.interactions.map((function(t){return t.getProgress()||0})).reduce((function(t,e){return t+e}),0)};var on=function(t){var e=t.getVerifiedStatementValue(["object","definition"]);H5P.jQuery.extend(e,rn())},rn=function(){var t={interactionType:"compound",type:"http://adlnet.gov/expapi/activities/cmi.interaction",description:{"en-US":""}};return t},sn=function(t,e){return void 0!==t&&void 0!==e&&(t.is(e)||Ye.contains(t.get(0),e.get(0)))},an=function(t){return t.map((function(t){return t.getXAPIData()})).filter((function(t){return!!t}))};const cn=Je;H5P=H5P||{},H5P.InteractiveVideo=cn})()})();