/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/entries/dist.js":
/*!*****************************!*\
  !*** ./src/entries/dist.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _styles_cp_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../styles/cp.css */ \"./src/styles/cp.css\");\n/* harmony import */ var _styles_go_to_slide_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/go-to-slide.scss */ \"./src/styles/go-to-slide.scss\");\n/* harmony import */ var _styles_keyword_menu_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/keyword-menu.css */ \"./src/styles/keyword-menu.css\");\n/* harmony import */ var _styles_summary_slide_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/summary-slide.css */ \"./src/styles/summary-slide.css\");\n/* harmony import */ var _styles_navigation_line_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/navigation-line.css */ \"./src/styles/navigation-line.css\");\n/* harmony import */ var _styles_slide_background_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/slide-background.css */ \"./src/styles/slide-background.css\");\n/* harmony import */ var _styles_print_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/print.css */ \"./src/styles/print.css\");\n/* harmony import */ var _scripts_cp__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../scripts/cp */ \"./src/scripts/cp.js\");\n\n\n\n\n\n\n\n // Load library\n\nH5P = H5P || {};\nH5P.CoursePresentation = _scripts_cp__WEBPACK_IMPORTED_MODULE_7__[\"default\"];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZW50cmllcy9kaXN0LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL2VudHJpZXMvZGlzdC5qcz84NmFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4uL3N0eWxlcy9jcC5jc3NcIjtcbmltcG9ydCBcIi4uL3N0eWxlcy9nby10by1zbGlkZS5zY3NzXCI7XG5pbXBvcnQgXCIuLi9zdHlsZXMva2V5d29yZC1tZW51LmNzc1wiO1xuaW1wb3J0IFwiLi4vc3R5bGVzL3N1bW1hcnktc2xpZGUuY3NzXCI7XG5pbXBvcnQgXCIuLi9zdHlsZXMvbmF2aWdhdGlvbi1saW5lLmNzc1wiO1xuaW1wb3J0IFwiLi4vc3R5bGVzL3NsaWRlLWJhY2tncm91bmQuY3NzXCI7XG5pbXBvcnQgXCIuLi9zdHlsZXMvcHJpbnQuY3NzXCI7XG5pbXBvcnQgQ291cnNlUHJlc2VudGF0aW9uIGZyb20gXCIuLi9zY3JpcHRzL2NwXCI7XG5cbi8vIExvYWQgbGlicmFyeVxuSDVQID0gSDVQIHx8IHt9O1xuSDVQLkNvdXJzZVByZXNlbnRhdGlvbiA9IENvdXJzZVByZXNlbnRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/entries/dist.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/confirmation-dialog.js":
    /*!********************************************!*\
      !*** ./src/scripts/confirmation-dialog.js ***!
      \********************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * Confirmation dialog\n * \n */\nvar ConfirmationDialog = function ConfirmationDialog(options, offset) {\n  var confirmationDialog = new H5P.ConfirmationDialog(options).appendTo(document.body);\n  var element = confirmationDialog.getElement();\n  element.classList.add('h5p-cp-confirmation-dialog');\n  confirmationDialog.show();\n  return confirmationDialog;\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConfirmationDialog);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jb25maXJtYXRpb24tZGlhbG9nLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9zcmMvc2NyaXB0cy9jb25maXJtYXRpb24tZGlhbG9nLmpzP2YxN2IiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIENvbmZpcm1hdGlvbiBkaWFsb2dcbiAqIFxuICovXG5jb25zdCBDb25maXJtYXRpb25EaWFsb2cgPSBmdW5jdGlvbiAob3B0aW9ucywgb2Zmc2V0KSB7XG4gIGNvbnN0IGNvbmZpcm1hdGlvbkRpYWxvZyA9IG5ldyBINVAuQ29uZmlybWF0aW9uRGlhbG9nKG9wdGlvbnMpXG4gICAgLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuICBcbiAgbGV0IGVsZW1lbnQgPSBjb25maXJtYXRpb25EaWFsb2cuZ2V0RWxlbWVudCgpO1xuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2g1cC1jcC1jb25maXJtYXRpb24tZGlhbG9nJyk7XG4gIFxuICBjb25maXJtYXRpb25EaWFsb2cuc2hvdygpO1xuICByZXR1cm4gY29uZmlybWF0aW9uRGlhbG9nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29uZmlybWF0aW9uRGlhbG9nOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/confirmation-dialog.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/cp.js":
    /*!***************************!*\
      !*** ./src/scripts/cp.js ***!
      \***************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var h5p_parent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! h5p-parent */ \"./node_modules/h5p-parent/src/parent.js\");\n/* harmony import */ var h5p_parent__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(h5p_parent__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _summary_slide__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./summary-slide */ \"./src/scripts/summary-slide.js\");\n/* harmony import */ var _navigation_line__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./navigation-line */ \"./src/scripts/navigation-line.js\");\n/* harmony import */ var _slide_backgrounds__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./slide-backgrounds */ \"./src/scripts/slide-backgrounds.js\");\n/* harmony import */ var _keyword_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./keyword-menu */ \"./src/scripts/keyword-menu.js\");\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./globals */ \"./src/scripts/globals.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils */ \"./src/scripts/utils.js\");\n/* harmony import */ var _slide_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./slide.js */ \"./src/scripts/slide.js\");\n/* harmony import */ var _confirmation_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./confirmation-dialog */ \"./src/scripts/confirmation-dialog.js\");\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\n\n\n\n\n\n\n\n\n\n/**\n * @const {string}\n */\n\nvar KEYWORD_TITLE_SKIP = null;\n/**\n * Constructor.\n *\n * @param {object} params Start paramteres.\n * @param {int} id Content identifier\n * @param {function} editor\n *  Set if an editor is initiating this library\n * @returns {undefined} Nothing.\n */\n\nvar CoursePresentation = function CoursePresentation(params, id, extras) {\n  var that = this;\n  this.presentation = params.presentation;\n  this.slides = this.presentation.slides;\n  this.contentId = id;\n  this.elementInstances = []; // elementInstances holds the instances for elements in an array.\n\n  this.elementsAttached = []; // Map to keep track of which slide has attached elements\n\n  this.slidesWithSolutions = [];\n  this.showCommentsAfterSolution = [];\n  this.hasAnswerElements = false;\n  this.ignoreResize = false;\n  this.isTask = false;\n  this.standalone = true;\n  this.isReportingEnabled = false;\n  this.popups = {};\n\n  if (extras.cpEditor) {\n    this.editor = extras.cpEditor;\n  }\n\n  if (extras) {\n    this.previousState = extras.previousState;\n    this.standalone = extras.standalone;\n    this.isReportingEnabled = extras.isReportingEnabled || extras.isScoringEnabled;\n    this.title = extras.metadata && extras.metadata.title ? extras.metadata.title : 'Course Presentation';\n  }\n\n  this.currentSlideIndex = this.previousState && this.previousState.progress ? this.previousState.progress : 0;\n  this.presentation.keywordListEnabled = params.presentation.keywordListEnabled === undefined ? true : params.presentation.keywordListEnabled;\n  this.l10n = _globals__WEBPACK_IMPORTED_MODULE_5__.jQuery.extend({\n    slide: 'Slide',\n    score: 'Score',\n    yourScore: 'Your score',\n    maxScore: 'Max score',\n    total: 'Total',\n    totalScore: 'Total Score',\n    showSolutions: 'Show solutions',\n    summary: 'summary',\n    retry: 'Retry',\n    exportAnswers: 'Export text',\n    close: 'Close',\n    hideKeywords: 'Hide sidebar navigation menu',\n    showKeywords: 'Show sidebar navigation menu',\n    fullscreen: 'Fullscreen',\n    exitFullscreen: 'Exit fullscreen',\n    prevSlide: 'Previous slide',\n    nextSlide: 'Next slide',\n    currentSlide: 'Current slide',\n    lastSlide: 'Last slide',\n    solutionModeTitle: 'Exit solution mode',\n    solutionModeText: 'Solution Mode',\n    summaryMultipleTaskText: 'Multiple tasks',\n    scoreMessage: 'You achieved:',\n    shareFacebook: 'Share on Facebook',\n    shareTwitter: 'Share on Twitter',\n    shareGoogle: 'Share on Google+',\n    submitResult: 'Submit Answers',\n    goToSlide: 'Go to slide :num',\n    solutionsButtonTitle: 'Show comments',\n    printTitle: 'Print',\n    printIngress: 'How would you like to print this presentation?',\n    printAllSlides: 'Print all slides',\n    printCurrentSlide: 'Print current slide',\n    noTitle: 'No title',\n    accessibilitySlideNavigationExplanation: 'Use left and right arrow to change slide in that direction whenever canvas is selected.',\n    containsNotCompleted: '@slideName contains not completed interaction',\n    containsCompleted: '@slideName contains completed interaction',\n    slideCount: 'Slide @index of @total',\n    accessibilityCanvasLabel: 'Presentation canvas. Use left and right arrow to move between slides.',\n    containsOnlyCorrect: \"@slideName only has correct answers\",\n    containsIncorrectAnswers: '@slideName has incorrect answers',\n    shareResult: 'Share Result',\n    accessibilityTotalScore: 'You got @score of @maxScore points in total',\n    accessibilityEnteredFullscreen: 'Entered fullscreen',\n    accessibilityExitedFullscreen: 'Exited fullscreen',\n    confirmDialogHeader: 'Submit your answers',\n    confirmDialogText: 'This will submit your results, do you want to continue?',\n    confirmDialogConfirmText: 'Submit and see results'\n  }, params.l10n !== undefined ? params.l10n : {});\n\n  if (!!params.override) {\n    this.activeSurface = !!params.override.activeSurface;\n    this.hideSummarySlide = !!params.override.hideSummarySlide;\n    this.enablePrintButton = !!params.override.enablePrintButton;\n    this.showSummarySlideSolutionButton = params.override.summarySlideSolutionButton !== undefined ? params.override.summarySlideSolutionButton : true;\n    this.showSummarySlideRetryButton = params.override.summarySlideRetryButton !== undefined ? params.override.summarySlideRetryButton : true;\n\n    if (!!params.override.social) {\n      this.enableTwitterShare = !!params.override.social.showTwitterShare;\n      this.enableFacebookShare = !!params.override.social.showFacebookShare;\n      this.enableGoogleShare = !!params.override.social.showGoogleShare;\n      this.twitterShareStatement = params.override.social.twitterShare.statement;\n      this.twitterShareHashtags = params.override.social.twitterShare.hashtags;\n      this.twitterShareUrl = params.override.social.twitterShare.url;\n      this.facebookShareUrl = params.override.social.facebookShare.url;\n      this.facebookShareQuote = params.override.social.facebookShare.quote;\n      this.googleShareUrl = params.override.social.googleShareUrl;\n    }\n  }\n\n  this.keywordMenu = new _keyword_menu__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n    l10n: this.l10n,\n    currentIndex: this.previousState !== undefined ? this.previousState.progress : 0\n  }); // Set override for all actions\n\n  this.setElementsOverride(params.override); // Inheritance\n\n  h5p_parent__WEBPACK_IMPORTED_MODULE_0___default().call(this, _slide_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"], params.presentation.slides);\n  this.on('resize', this.resize, this);\n  this.on('printing', function (event) {\n    that.ignoreResize = !event.data.finished;\n\n    if (event.data.finished) {\n      that.resize();\n    } else if (event.data.allSlides) {\n      that.attachAllElements();\n    }\n  });\n};\n\nCoursePresentation.prototype = Object.create((h5p_parent__WEBPACK_IMPORTED_MODULE_0___default().prototype));\nCoursePresentation.prototype.constructor = CoursePresentation;\n/**\n * @public\n * @return {object}\n */\n\nCoursePresentation.prototype.getCurrentState = function () {\n  var _this = this;\n\n  var state = this.previousState ? this.previousState : {};\n  state.progress = this.getCurrentSlideIndex();\n\n  if (!state.answers) {\n    state.answers = [];\n  }\n\n  state.answered = this.elementInstances.map(function (interaction, index) {\n    return _this.slideHasAnsweredTask(index);\n  }); // Get answers and answered\n\n  for (var slide = 0; slide < this.elementInstances.length; slide++) {\n    if (this.elementInstances[slide]) {\n      for (var element = 0; element < this.elementInstances[slide].length; element++) {\n        var instance = this.elementInstances[slide][element];\n\n        if (instance.getCurrentState instanceof Function || typeof instance.getCurrentState === 'function') {\n          if (!state.answers[slide]) {\n            state.answers[slide] = [];\n          }\n\n          state.answers[slide][element] = instance.getCurrentState();\n        }\n      }\n    }\n  }\n\n  return state;\n};\n/**\n * Returns true if a slide has answered interactions\n *\n * @param {number} index\n * @return {boolean}\n */\n\n\nCoursePresentation.prototype.slideHasAnsweredTask = function (index) {\n  var tasks = this.slidesWithSolutions[index] || [];\n  return tasks.filter(function (task) {\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_6__.isFunction)(task.getAnswerGiven);\n  }).some(function (task) {\n    return task.getAnswerGiven();\n  });\n};\n/**\n * Render the presentation inside the given container.\n *\n * @param {H5P.jQuery} $container Container for this presentation.\n * @returns {undefined} Nothing.\n */\n\n\nCoursePresentation.prototype.attach = function ($container) {\n  var _this2 = this;\n\n  var that = this; // isRoot is undefined in the editor\n\n  if (this.isRoot !== undefined && this.isRoot()) {\n    this.setActivityStarted();\n  }\n\n  var html = '<div class=\"h5p-keymap-explanation hidden-but-read\">' + this.l10n.accessibilitySlideNavigationExplanation + '</div>' + '<div class=\"h5p-fullscreen-announcer hidden-but-read\" aria-live=\"polite\"></div>' + '<div class=\"h5p-wrapper\" tabindex=\"0\" aria-label=\"' + this.l10n.accessibilityCanvasLabel + '\">' + '  <div class=\"h5p-current-slide-announcer hidden-but-read\" aria-live=\"polite\"></div>' + '  <div tabindex=\"-1\"></div>' + '  <div class=\"h5p-box-wrapper\">' + '    <div class=\"h5p-presentation-wrapper\">' + '      <div class=\"h5p-keywords-wrapper\"></div>' + '     <div class=\"h5p-slides-wrapper\" aria-live=\"polite\"></div>' + '    </div>' + '  </div>' + '  <nav class=\"h5p-cp-navigation\">' + '    <ol class=\"h5p-progressbar list-unstyled\"></ol>' + '  </nav>' + '  <div class=\"h5p-footer\"></div>' + '</div>';\n  $container.attr('role', 'application').addClass('h5p-course-presentation').html(html);\n  this.$container = $container;\n  this.$slideAnnouncer = $container.find('.h5p-current-slide-announcer');\n  this.$fullscreenAnnouncer = $container.find('.h5p-fullscreen-announcer');\n  this.$slideTop = this.$slideAnnouncer.next();\n  this.$wrapper = $container.children('.h5p-wrapper').focus(function () {\n    that.initKeyEvents();\n  }).blur(function () {\n    if (that.keydown !== undefined) {\n      H5P.jQuery('body').unbind('keydown', that.keydown);\n      delete that.keydown;\n    }\n  }).click(function (event) {\n    var $target = H5P.jQuery(event.target);\n    /*\n     * Add focus to the wrapper so that it may capture keyboard events unless\n     * the target or one of its parents should handle focus themselves.\n     */\n\n    var isFocusableElement = that.belongsToTagName(event.target, ['input', 'textarea', 'a', 'button'], event.currentTarget); // Does the target element have a tabIndex set?\n\n    var hasTabIndex = event.target.tabIndex !== -1; // The dialog container (if within a dialog)\n\n    var $dialogParent = $target.closest('.h5p-popup-container'); // Is target within a dialog\n\n    var isWithinDialog = $dialogParent.length !== 0;\n\n    if (!isFocusableElement && !hasTabIndex && !that.editor) {\n      if (!isWithinDialog) {\n        // We're not within a dialog, so we can seafely put focus on wrapper\n        that.$wrapper.focus();\n      } else {\n        // Find the closest tabbable parent element\n        var $tabbable = $target.closest('[tabindex]'); // Is the parent tabbable element inside the popup?\n\n        if ($tabbable.closest('.h5p-popup-container').length === 1) {\n          // We'll set focus here\n          $tabbable.focus();\n        } else {\n          // Fallback: set focus on close button\n          $dialogParent.find('.h5p-close-popup').focus();\n        }\n      }\n    }\n\n    if (that.presentation.keywordListEnabled && !that.presentation.keywordListAlwaysShow && that.presentation.keywordListAutoHide && !$target.is('textarea, .h5p-icon-pencil, span')) {\n      that.hideKeywords(); // Auto-hide keywords\n    }\n  });\n  this.on('exitFullScreen', function () {\n    _this2.$footer.removeClass('footer-full-screen');\n\n    _this2.$fullScreenButton.attr('title', _this2.l10n.fullscreen);\n\n    _this2.$fullscreenAnnouncer.html(_this2.l10n.accessibilityExitedFullscreen);\n  });\n  this.on('enterFullScreen', function () {\n    _this2.$fullscreenAnnouncer.html(_this2.l10n.accessibilityEnteredFullscreen);\n  }); // Get intended base width from CSS.\n\n  var wrapperWidth = parseInt(this.$wrapper.css('width'));\n  this.width = wrapperWidth !== 0 ? wrapperWidth : 640;\n  var wrapperHeight = parseInt(this.$wrapper.css('height'));\n  this.height = wrapperHeight !== 0 ? wrapperHeight : 400;\n  this.ratio = 16 / 9; // Intended base font size cannot be read from CSS, as it might be modified\n  // by mobile browsers already. (The Android native browser does this.)\n\n  this.fontSize = 16;\n  this.$boxWrapper = this.$wrapper.children('.h5p-box-wrapper');\n  var $presentationWrapper = this.$boxWrapper.children('.h5p-presentation-wrapper');\n  this.$slidesWrapper = $presentationWrapper.children('.h5p-slides-wrapper');\n  this.$keywordsWrapper = $presentationWrapper.children('.h5p-keywords-wrapper');\n  this.$progressbar = this.$wrapper.find('.h5p-progressbar');\n  this.$footer = this.$wrapper.children('.h5p-footer'); // Determine if keywords pane should be initialized\n\n  this.initKeywords = this.presentation.keywordListEnabled === undefined || this.presentation.keywordListEnabled === true || this.editor !== undefined;\n\n  if (this.activeSurface && this.editor === undefined) {\n    this.initKeywords = false;\n    this.$boxWrapper.css('height', '100%');\n  }\n\n  this.isSolutionMode = false; // Create slides and retrieve keyword title details\n\n  this.createSlides(); // We have always attached all elements on current slide\n\n  this.elementsAttached[this.currentSlideIndex] = true; // Determine if summary slide should be added\n\n  var $summarySlide;\n  this.showSummarySlide = false;\n\n  if (this.hideSummarySlide) {\n    // Always hide\n    this.showSummarySlide = !this.hideSummarySlide;\n  } else {\n    // Determine by checking for slides with tasks\n    this.slidesWithSolutions.forEach(function (slide) {\n      that.showSummarySlide = slide.length;\n    });\n  }\n\n  if (this.editor === undefined && (this.showSummarySlide || this.hasAnswerElements)) {\n    // Create the summary slide\n    var summarySlideParams = {\n      elements: [],\n      keywords: []\n    };\n    this.slides.push(summarySlideParams);\n    $summarySlide = H5P.jQuery(_slide_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].createHTML(summarySlideParams)).appendTo(this.$slidesWrapper);\n    $summarySlide.addClass('h5p-summary-slide');\n\n    if (this.isCurrentSlide(this.slides.length - 1)) {\n      this.$current = $summarySlide;\n    }\n  }\n\n  var keywordMenuConfig = this.getKeywordMenuConfig(); // Do not show keywords pane if it's empty and there's no editor!\n\n  if (keywordMenuConfig.length > 0 || this.isEditor()) {\n    // Initialize keyword titles\n    this.keywordMenu.init(keywordMenuConfig);\n    this.keywordMenu.on('select', function (event) {\n      return _this2.keywordClick(event.data.index);\n    });\n    this.keywordMenu.on('close', function () {\n      return _this2.hideKeywords();\n    });\n    this.keywordMenu.on('select', function () {\n      _this2.$currentKeyword = _this2.$keywords.children('.h5p-current');\n    });\n    this.$keywords = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)(this.keywordMenu.getElement()).appendTo(this.$keywordsWrapper);\n    this.$currentKeyword = this.$keywords.children('.h5p-current');\n    this.setKeywordsOpacity(this.presentation.keywordListOpacity === undefined ? 90 : this.presentation.keywordListOpacity);\n\n    if (this.presentation.keywordListAlwaysShow) {\n      this.showKeywords();\n    }\n  } else {\n    // Remove keyword titles completely\n    this.$keywordsWrapper.remove(); // Do not show keywords pane if it's empty and there's no editor!\n\n    this.initKeywords = false;\n  }\n\n  if (this.editor !== undefined || !this.activeSurface) {\n    // Initialize touch events\n    this.initTouchEvents(); // init navigation line\n\n    this.navigationLine = new _navigation_line__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this); // Set slide title if initing on slide 0\n\n    if (!this.previousState || !this.previousState.progress) {\n      this.setSlideNumberAnnouncer(0, false);\n    }\n\n    this.summarySlideObject = new _summary_slide__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this, $summarySlide);\n  } else {\n    this.$progressbar.add(this.$footer).remove();\n\n    if (H5P.fullscreenSupported) {\n      // Create full screen button\n      this.$fullScreenButton = H5P.jQuery('<div/>', {\n        'class': 'h5p-toggle-full-screen',\n        title: this.l10n.fullscreen,\n        role: 'button',\n        tabindex: 0,\n        appendTo: this.$wrapper\n      });\n      (0,_utils__WEBPACK_IMPORTED_MODULE_6__.addClickAndKeyboardListeners)(this.$fullScreenButton, function () {\n        return that.toggleFullScreen();\n      });\n    }\n  }\n\n  new _slide_backgrounds__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this);\n\n  if (this.previousState && this.previousState.progress) {\n    this.jumpToSlide(this.previousState.progress, false, null, false, true);\n  }\n};\n/**\n * Check if a node or one of its parents has a particular tag name.\n *\n * @param {HTMLElement} node Node to check.\n * @param {string|string[]} tagNames Tag name(s).\n * @param {HTMLElement} [stop] Optional node to stop. Defaults to body node.\n * @return {boolean} True, if node belongs to a node with one of the tag names.\n */\n\n\nCoursePresentation.prototype.belongsToTagName = function (node, tagNames, stop) {\n  if (!node) {\n    return false;\n  } // Stop check at DOM tree root\n\n\n  stop = stop || document.body;\n\n  if (typeof tagNames === 'string') {\n    tagNames = [tagNames];\n  }\n\n  tagNames = tagNames.map(function (tagName) {\n    return tagName.toLowerCase();\n  });\n  var tagName = node.tagName.toLowerCase();\n\n  if (tagNames.indexOf(tagName) !== -1) {\n    return true;\n  } // Having stop can prevent always parsing DOM tree to root\n\n\n  if (stop === node) {\n    return false;\n  }\n\n  return this.belongsToTagName(node.parentNode, tagNames, stop);\n};\n/**\n * Removes old menu items, and create new ones from slides.\n * Returns menu items as jQuery\n *\n * @return {jQuery}\n */\n\n\nCoursePresentation.prototype.updateKeywordMenuFromSlides = function () {\n  this.keywordMenu.removeAllMenuItemElements();\n  var config = this.getKeywordMenuConfig();\n  return (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)(this.keywordMenu.init(config));\n};\n/**\n * Creates a keyword menu config based on the slides parameters\n *\n * @return {KeywordMenuItemConfig[]}\n */\n\n\nCoursePresentation.prototype.getKeywordMenuConfig = function () {\n  var _this3 = this;\n\n  return this.slides.map(function (slide, index) {\n    return {\n      title: _this3.createSlideTitle(slide),\n      subtitle: \"\".concat(_this3.l10n.slide, \" \").concat(index + 1),\n      index: index\n    };\n  }).filter(function (config) {\n    return config.title !== KEYWORD_TITLE_SKIP;\n  });\n};\n/**\n * Returns the slide title, or \"No title\" if inside editor without title\n *\n * @return {string|null}\n */\n\n\nCoursePresentation.prototype.createSlideTitle = function (slide) {\n  var fallbackTitleForEditor = this.isEditor() ? this.l10n.noTitle : KEYWORD_TITLE_SKIP;\n  return this.hasKeywords(slide) ? slide.keywords[0].main : fallbackTitleForEditor;\n};\n/**\n * Returns true if inside the editor\n *\n * @return {boolean}\n */\n\n\nCoursePresentation.prototype.isEditor = function () {\n  return this.editor !== undefined;\n};\n/**\n * Returns true if a slide has keywords\n *\n * @param {object} slide\n * @return {boolean}\n */\n\n\nCoursePresentation.prototype.hasKeywords = function (slide) {\n  return slide.keywords !== undefined && slide.keywords.length > 0;\n};\n/**\n * Create slides\n * Slides are directly attached to the slides wrapper.\n *\n * @param {Array} slidesParams\n */\n\n\nCoursePresentation.prototype.createSlides = function () {\n  var self = this;\n\n  for (var i = 0; i < self.children.length; i++) {\n    var isCurrentSlide = i === self.currentSlideIndex; // Create and append DOM Elements\n\n    self.children[i].getElement().appendTo(self.$slidesWrapper);\n\n    if (isCurrentSlide) {\n      self.children[i].setCurrent();\n    }\n\n    if (self.isEditor() || i === 0 || i === 1 || isCurrentSlide) {\n      self.children[i].appendElements();\n    }\n  }\n};\n/**\n * Does an object have functions to determine the score\n *\n * @public\n * @param obj The object to investigate\n * @returns {boolean}\n */\n\n\nCoursePresentation.prototype.hasScoreData = function (obj) {\n  return _typeof(obj) !== ( true ? \"undefined\" : 0) && typeof obj.getScore === 'function' && typeof obj.getMaxScore === 'function';\n};\n/**\n * Return the combined score of all children\n *\n * @public\n * @returns {Number}\n */\n\n\nCoursePresentation.prototype.getScore = function () {\n  var self = this;\n  return (0,_utils__WEBPACK_IMPORTED_MODULE_6__.flattenArray)(self.slidesWithSolutions).reduce(function (sum, slide) {\n    return sum + (self.hasScoreData(slide) ? slide.getScore() : 0);\n  }, 0);\n};\n/**\n * Return the combined maxScore of all children\n *\n * @public\n * @returns {Number}\n */\n\n\nCoursePresentation.prototype.getMaxScore = function () {\n  var self = this;\n  return (0,_utils__WEBPACK_IMPORTED_MODULE_6__.flattenArray)(self.slidesWithSolutions).reduce(function (sum, slide) {\n    return sum + (self.hasScoreData(slide) ? slide.getMaxScore() : 0);\n  }, 0);\n};\n/**\n * Updates the feedback icons for the progres bar.\n *\n * @param {array} [slideScores]\n */\n\n\nCoursePresentation.prototype.setProgressBarFeedback = function (slideScores) {\n  var _this4 = this;\n\n  if (slideScores !== undefined && slideScores) {\n    // Set feedback icons for progress bar.\n    slideScores.forEach(function (singleSlide) {\n      var $indicator = _this4.progressbarParts[singleSlide.slide - 1].find('.h5p-progressbar-part-has-task');\n\n      if ($indicator.hasClass('h5p-answered')) {\n        var isCorrect = singleSlide.score >= singleSlide.maxScore;\n        $indicator.addClass(isCorrect ? 'h5p-is-correct' : 'h5p-is-wrong');\n\n        _this4.navigationLine.updateSlideTitle(singleSlide.slide - 1);\n      }\n    });\n  } else {\n    // Remove all feedback icons.\n    this.progressbarParts.forEach(function (pbPart) {\n      pbPart.find('.h5p-progressbar-part-has-task').removeClass('h5p-is-correct').removeClass('h5p-is-wrong');\n    });\n  }\n};\n/**\n * Toggle keywords list on/off depending on current state\n */\n\n\nCoursePresentation.prototype.toggleKeywords = function () {\n  var keywordsAreShowing = this.$keywordsWrapper.hasClass('h5p-open');\n  this[keywordsAreShowing ? 'hideKeywords' : 'showKeywords']();\n};\n/**\n * Hide keywords\n */\n\n\nCoursePresentation.prototype.hideKeywords = function () {\n  if (this.$keywordsWrapper.hasClass('h5p-open')) {\n    if (this.$keywordsButton !== undefined) {\n      this.$keywordsButton.attr('title', this.l10n.showKeywords);\n      this.$keywordsButton.attr('aria-label', this.l10n.showKeywords);\n      this.$keywordsButton.attr('aria-expanded', 'false');\n      this.$keywordsButton.focus();\n    }\n\n    this.$keywordsWrapper.removeClass('h5p-open');\n  }\n};\n/**\n * Show keywords\n */\n\n\nCoursePresentation.prototype.showKeywords = function () {\n  if (this.$keywordsWrapper.hasClass('h5p-open')) {\n    // Already showing\n    return;\n  }\n\n  if (this.$keywordsButton !== undefined) {\n    this.$keywordsButton.attr('title', this.l10n.hideKeywords);\n    this.$keywordsButton.attr('aria-label', this.l10n.hideKeywords);\n    this.$keywordsButton.attr('aria-expanded', 'true');\n  }\n\n  this.$keywordsWrapper.addClass('h5p-open'); // Do not focus if always showing\n\n  if (!this.presentation.keywordListAlwaysShow) {\n    this.$keywordsWrapper.find('li[tabindex=\"0\"]').focus();\n  }\n};\n/**\n * Change the background opacity of the keywords list.\n *\n * @param {number} value 0 - 100\n */\n\n\nCoursePresentation.prototype.setKeywordsOpacity = function (value) {\n  var _ref = this.$keywordsWrapper.css('background-color').match(/\\d+/g) || '',\n      _ref2 = _slicedToArray(_ref, 3),\n      red = _ref2[0],\n      green = _ref2[1],\n      blue = _ref2[2];\n\n  this.$keywordsWrapper.css('background-color', \"rgba(\".concat(red, \", \").concat(green, \", \").concat(blue, \", \").concat(value / 100, \")\"));\n};\n/**\n * Makes continuous text smaller if it does not fit inside its container.\n * Only works in view mode.\n *\n * @returns {undefined}\n */\n\n\nCoursePresentation.prototype.fitCT = function () {\n  if (this.editor !== undefined) {\n    return;\n  }\n\n  this.$current.find('.h5p-ct').each(function () {\n    var percent = 100;\n    var $ct = H5P.jQuery(this);\n    var parentHeight = $ct.parent().height();\n\n    while ($ct.outerHeight() > parentHeight) {\n      percent--;\n      $ct.css({\n        fontSize: percent + '%',\n        lineHeight: percent + 65 + '%'\n      });\n\n      if (percent < 0) {\n        break; // Just in case.\n      }\n    }\n  });\n};\n/**\n * Resize handling.\n *\n * @param {Boolean} fullscreen\n * @returns {undefined}\n */\n\n\nCoursePresentation.prototype.resize = function () {\n  var fullscreenOn = this.$container.hasClass('h5p-fullscreen') || this.$container.hasClass('h5p-semi-fullscreen');\n\n  if (this.ignoreResize) {\n    return; // When printing.\n  } // Fill up all available width\n\n\n  this.$wrapper.css('width', 'auto');\n  var width = this.$container.width();\n  var style = {};\n\n  if (fullscreenOn) {\n    var maxHeight = this.$container.height();\n\n    if (width / maxHeight > this.ratio) {\n      // Top and bottom would be cut off so scale down.\n      width = maxHeight * this.ratio;\n      style.width = width + 'px';\n    }\n  } // TODO: Add support for -16 when content conversion script is created?\n\n\n  var widthRatio = width / this.width;\n  style.height = width / this.ratio + 'px';\n  style.fontSize = this.fontSize * widthRatio + 'px';\n\n  if (this.editor !== undefined) {\n    this.editor.setContainerEm(this.fontSize * widthRatio * 0.75);\n  }\n\n  this.$wrapper.css(style);\n  this.swipeThreshold = widthRatio * 100; // Default swipe threshold is 50px.\n  // Resize elements\n\n  var instances = this.elementInstances[this.$current.index()];\n\n  if (instances !== undefined) {\n    var slideElements = this.slides[this.$current.index()].elements;\n\n    for (var i = 0; i < instances.length; i++) {\n      var instance = instances[i];\n\n      if ((instance.preventResize === undefined || instance.preventResize === false) && instance.$ !== undefined && !slideElements[i].displayAsButton) {\n        H5P.trigger(instance, 'resize');\n      }\n    }\n  }\n\n  this.fitCT();\n};\n/**\n * Enter/exit full screen mode.\n */\n\n\nCoursePresentation.prototype.toggleFullScreen = function () {\n  if (H5P.isFullscreen || this.$container.hasClass('h5p-fullscreen') || this.$container.hasClass('h5p-semi-fullscreen')) {\n    // Cancel fullscreen\n    if (H5P.exitFullScreen !== undefined && H5P.fullScreenBrowserPrefix !== undefined) {\n      H5P.exitFullScreen();\n    } else {\n      // Use old system\n      if (H5P.fullScreenBrowserPrefix === undefined) {\n        // Click button to disable fullscreen\n        H5P.jQuery('.h5p-disable-fullscreen').click();\n      } else {\n        if (H5P.fullScreenBrowserPrefix === '') {\n          window.top.document.exitFullScreen();\n        } else if (H5P.fullScreenBrowserPrefix === 'ms') {\n          window.top.document.msExitFullscreen();\n        } else {\n          window.top.document[H5P.fullScreenBrowserPrefix + 'CancelFullScreen']();\n        }\n      }\n    }\n  } else {\n    // Rescale footer buttons\n    this.$footer.addClass('footer-full-screen');\n    this.$fullScreenButton.attr('title', this.l10n.exitFullscreen);\n    H5P.fullScreen(this.$container, this);\n\n    if (H5P.fullScreenBrowserPrefix === undefined) {\n      // Hide disable full screen button. We have our own!\n      H5P.jQuery('.h5p-disable-fullscreen').hide();\n    }\n  }\n};\n/**\n * Set focus.\n */\n\n\nCoursePresentation.prototype.focus = function () {\n  this.$wrapper.focus();\n};\n/**\n * Handles click on keyword\n *\n * @param {number} index\n */\n\n\nCoursePresentation.prototype.keywordClick = function (index) {\n  if (this.shouldHideKeywordsAfterSelect()) {\n    // Auto-hide keywords list\n    this.hideKeywords();\n  }\n\n  this.jumpToSlide(index, true);\n};\n\nCoursePresentation.prototype.shouldHideKeywordsAfterSelect = function () {\n  return this.presentation.keywordListEnabled && !this.presentation.keywordListAlwaysShow && this.presentation.keywordListAutoHide && this.editor === undefined;\n};\n/**\n * Set the default behaviour override for all actions.\n *\n * @param {Object} override\n */\n\n\nCoursePresentation.prototype.setElementsOverride = function (override) {\n  // Create default object\n  this.elementsOverride = {\n    params: {}\n  };\n\n  if (override) {\n    // Create behaviour object for overriding\n    this.elementsOverride.params.behaviour = {};\n\n    if (override.showSolutionButton) {\n      // Override show solutions button\n      this.elementsOverride.params.behaviour.enableSolutionsButton = override.showSolutionButton === 'on' ? true : false;\n    }\n\n    if (override.retryButton) {\n      // Override retry button\n      this.elementsOverride.params.behaviour.enableRetry = override.retryButton === 'on' ? true : false;\n    }\n  }\n};\n/**\n * Attach all element instances to slide.\n *\n * @param {jQuery} $slide\n * @param {Number} index\n */\n\n\nCoursePresentation.prototype.attachElements = function ($slide, index) {\n  if (this.elementsAttached[index] !== undefined) {\n    return; // Already attached\n  }\n\n  var slide = this.slides[index];\n  var instances = this.elementInstances[index];\n\n  if (slide.elements !== undefined) {\n    for (var i = 0; i < slide.elements.length; i++) {\n      this.attachElement(slide.elements[i], instances[i], $slide, index);\n    }\n  }\n\n  this.trigger('domChanged', {\n    '$target': $slide,\n    'library': 'CoursePresentation',\n    'key': 'newSlide'\n  }, {\n    'bubbles': true,\n    'external': true\n  });\n  this.elementsAttached[index] = true;\n};\n/**\n * Attach element to slide container.\n *\n * @param {Object} element\n * @param {Object} instance\n * @param {jQuery} $slide\n * @param {Number} index\n * @returns {jQuery}\n */\n\n\nCoursePresentation.prototype.attachElement = function (element, instance, $slide, index) {\n  var displayAsButton = element.displayAsButton !== undefined && element.displayAsButton;\n  var buttonSizeClass = element.buttonSize !== undefined ? \"h5p-element-button-\" + element.buttonSize : \"\";\n  var classes = 'h5p-element' + (displayAsButton ? ' h5p-element-button-wrapper' : '') + (buttonSizeClass.length ? ' ' + buttonSizeClass : '');\n  var $elementContainer = H5P.jQuery('<div>', {\n    'class': classes\n  }).css({\n    left: element.x + '%',\n    top: element.y + '%',\n    width: element.width + '%',\n    height: element.height + '%'\n  }).appendTo($slide);\n  var isTransparent = element.backgroundOpacity === undefined || element.backgroundOpacity === 0;\n  $elementContainer.toggleClass('h5p-transparent', isTransparent);\n\n  if (displayAsButton) {\n    var $button = this.createInteractionButton(element, instance);\n    $button.appendTo($elementContainer);\n  } else {\n    var hasLibrary = element.action && element.action.library;\n    var libTypePmz = hasLibrary ? this.getLibraryTypePmz(element.action.library) : 'other';\n    var $outerElementContainer = H5P.jQuery('<div>', {\n      'class': \"h5p-element-outer \".concat(libTypePmz, \"-outer-element\")\n    }).css({\n      background: 'rgba(255,255,255,' + (element.backgroundOpacity === undefined ? 0 : element.backgroundOpacity / 100) + ')'\n    }).appendTo($elementContainer);\n    var $innerElementContainer = H5P.jQuery('<div>', {\n      'class': 'h5p-element-inner'\n    }).appendTo($outerElementContainer); // H5P.Shape sets it's own size when line in selected\n\n    instance.on('set-size', function (event) {\n      for (var property in event.data) {\n        $elementContainer.get(0).style[property] = event.data[property];\n      }\n    });\n    instance.attach($innerElementContainer);\n\n    if (element.action !== undefined && element.action.library.substr(0, 20) === 'H5P.InteractiveVideo') {\n      var handleIV = function handleIV() {\n        instance.$container.addClass('h5p-fullscreen');\n\n        if (instance.controls.$fullscreen) {\n          instance.controls.$fullscreen.remove();\n        }\n\n        instance.hasFullScreen = true;\n\n        if (instance.controls.$play.hasClass('h5p-pause')) {\n          instance.$controls.addClass('h5p-autohide');\n        } else {\n          instance.enableAutoHide();\n        }\n      };\n\n      if (instance.controls !== undefined) {\n        handleIV();\n      } else {\n        instance.on('controls', handleIV);\n      }\n    } // Set first slide's tabindex for better accessibility if there are no interactions\n\n\n    if (index == 0 && this.slidesWithSolutions.indexOf(index) < 0) {\n      $innerElementContainer.attr('tabindex', '0');\n    } // For first slide\n\n\n    this.setOverflowTabIndex();\n  }\n\n  if (this.editor !== undefined) {\n    // If we're in the H5P editor, allow it to manipulate the elementInstances\n    this.editor.processElement(element, $elementContainer, index, instance);\n  } else {\n    if (element.solution) {\n      this.addElementSolutionButton(element, instance, $elementContainer);\n    }\n    /* When in view mode, we need to know if there are any answer elements,\n     * so that we can display the export answers button on the last slide */\n\n\n    this.hasAnswerElements = this.hasAnswerElements || instance.exportAnswers !== undefined;\n  }\n\n  return $elementContainer;\n};\n/**\n * Disables tab indexes behind a popup container\n */\n\n\nCoursePresentation.prototype.disableTabIndexes = function () {\n  var $popupContainer = this.$container.find('.h5p-popup-container');\n  this.$tabbables = this.$container.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]').filter(function () {\n    var $tabbable = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)(this);\n    var insideContainer = _globals__WEBPACK_IMPORTED_MODULE_5__.jQuery.contains($popupContainer.get(0), $tabbable.get(0)); // tabIndex has already been modified, keep it in the set.\n\n    if ($tabbable.data('tabindex')) {\n      return true;\n    }\n\n    if (!insideContainer) {\n      // Store current tabindex, so we can set it back when dialog closes\n      var tabIndex = $tabbable.attr('tabindex');\n      $tabbable.data('tabindex', tabIndex); // Make it non tabbable\n\n      $tabbable.attr('tabindex', '-1');\n      return true;\n    } // If element is part of dialog wrapper, just ignore it\n\n\n    return false;\n  });\n};\n/**\n * Re-enables tab indexes after a popup container is closed\n */\n\n\nCoursePresentation.prototype.restoreTabIndexes = function () {\n  if (this.$tabbables) {\n    this.$tabbables.each(function () {\n      var $element = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)(this);\n      var tabindex = $element.data('tabindex'); // Specifically handle jquery ui slider, since it overwrites data in an inconsistent way\n\n      if ($element.hasClass('ui-slider-handle')) {\n        $element.attr('tabindex', 0);\n        $element.removeData('tabindex');\n      } else if (tabindex !== undefined) {\n        $element.attr('tabindex', tabindex);\n        $element.removeData('tabindex');\n      } else {\n        $element.removeAttr('tabindex');\n      }\n    });\n  }\n};\n/**\n * Creates the interaction button\n *\n * @param {Object} element\n * @param {Object} instance\n *\n * @return {jQuery}\n */\n\n\nCoursePresentation.prototype.createInteractionButton = function (element, instance) {\n  var _this5 = this;\n\n  var label = element.action.metadata ? element.action.metadata.title : '';\n\n  if (label === '') {\n    label = element.action.params && element.action.params.contentName || element.action.library.split(' ')[0].split('.')[1];\n  }\n\n  var libTypePmz = this.getLibraryTypePmz(element.action.library);\n  var libName = this.getLibraryName(element.action.library);\n  /**\n   * Returns a function that will set [aria-expanded=\"false\"] on the $btn element\n   *\n   * @param {jQuery} $btn\n   * @return {Function}\n   */\n\n  var setAriaExpandedFalse = function setAriaExpandedFalse($btn) {\n    return function () {\n      return $btn.attr('aria-expanded', 'false');\n    };\n  };\n\n  var $button = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)('<div>', {\n    role: 'button',\n    tabindex: 0,\n    'aria-label': label,\n    'aria-popup': true,\n    'aria-expanded': false,\n    'class': \"h5p-element-button h5p-element-button-\".concat(element.buttonSize, \" \").concat(libTypePmz, \"-button\")\n  });\n  var $buttonElement = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)('<div class=\"h5p-button-element\"></div>');\n  instance.attach($buttonElement);\n  var parentPosition = libTypePmz === 'h5p-advancedtext' ? {\n    x: element.x,\n    y: element.y\n  } : null;\n  (0,_utils__WEBPACK_IMPORTED_MODULE_6__.addClickAndKeyboardListeners)($button, function () {\n    $button.attr('aria-expanded', 'true');\n\n    _this5.showInteractionPopup(instance, $button, $buttonElement, libTypePmz, setAriaExpandedFalse($button), parentPosition);\n\n    _this5.disableTabIndexes(); // Disable tabs behind overlay\n\n\n    _this5.triggerConsumedEventForReadOnly(libName, instance);\n  });\n\n  if (element.action !== undefined && element.action.library.substr(0, 20) === 'H5P.InteractiveVideo') {\n    instance.on('controls', function () {\n      if (instance.controls.$fullscreen) {\n        instance.controls.$fullscreen.remove();\n      }\n    });\n  }\n\n  return $button;\n};\n/**\n * Shows the interaction popup on button press\n *\n * @param {object} instance\n * @param {string} libTypePmz\n * @param {function} closeCallback\n * @param {Object} [popupPosition] X and Y position of popup\n */\n\n\nCoursePresentation.prototype.showInteractionPopup = function (instance, $button, $buttonElement, libTypePmz, closeCallback) {\n  var _this6 = this;\n\n  var popupPosition = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n\n  // Handle exit fullscreen\n  var exitFullScreen = function exitFullScreen() {\n    instance.trigger('resize');\n  };\n\n  if (!this.isEditor()) {\n    // Listen for exit fullscreens not triggered by button, for instance using 'esc'\n    this.on('exitFullScreen', exitFullScreen);\n    this.showPopup($buttonElement, $button, popupPosition, function () {\n      var keepInDOM = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!keepInDOM) {\n        $buttonElement.detach();\n      } // Remove listener, we only need it for active popups\n\n\n      _this6.off('exitFullScreen', exitFullScreen);\n\n      closeCallback();\n    }, libTypePmz, instance, libTypePmz === 'h5p-interactivevideo');\n    H5P.trigger(instance, 'resize'); // Resize images to fit popup dialog\n\n    if (libTypePmz === 'h5p-image') {\n      this.resizePopupImage($buttonElement);\n    } // Focus directly on content when popup is opened\n\n\n    setTimeout(function () {\n      var $tabbables = $buttonElement.find(':input').add($buttonElement.find('[tabindex]'));\n\n      if ($tabbables.length) {\n        $tabbables[0].focus();\n      } else {\n        $buttonElement.attr('tabindex', 0);\n        $buttonElement.focus();\n      }\n    }, 200); // start activity\n\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_6__.isFunction)(instance.setActivityStarted) && (0,_utils__WEBPACK_IMPORTED_MODULE_6__.isFunction)(instance.getScore)) {\n      instance.setActivityStarted();\n    }\n  }\n};\n/**\n * Returns the name part of a library string\n *\n * @param {string} library\n * @return {string}\n */\n\n\nCoursePresentation.prototype.getLibraryTypePmz = function (library) {\n  return (0,_utils__WEBPACK_IMPORTED_MODULE_6__.kebabCase)(library.split(' ')[0]).toLowerCase();\n};\n/**\n * Returns the name part of a library string\n *\n * @param {string} library\n * @return {string}\n */\n\n\nCoursePresentation.prototype.getLibraryName = function (library) {\n  return library.split(' ')[0];\n};\n/**\n * Resize image inside popup dialog.\n *\n * @public\n * @param {H5P.jQuery} $wrapper\n */\n\n\nCoursePresentation.prototype.resizePopupImage = function ($wrapper) {\n  // Get fontsize, needed for scale\n  var fontSize = Number($wrapper.css('fontSize').replace('px', ''));\n  var $img = $wrapper.find('img');\n  /**\n   * Resize image to fit inside popup.\n   *\n   * @private\n   * @param {Number} width\n   * @param {Number} height\n   */\n\n  var resize = function resize(width, height) {\n    if (height / fontSize < 18.5) {\n      return;\n    }\n\n    var ratio = width / height;\n    height = 18.5 * fontSize;\n    $wrapper.css({\n      width: height * ratio,\n      height: height\n    });\n  };\n\n  if (!$img.height()) {\n    // Wait for image to load\n    $img.one('load', function () {\n      resize(this.width, this.height);\n    });\n  } else {\n    // Image already loaded, resize!\n    resize($img.width(), $img.height());\n  }\n};\n/**\n * Adds a info button\n *\n * @param {Object} element Properties from params.\n * @param {Object} elementInstance Instance of the element.\n * @param {jQuery} $elementContainer Wrapper for the element.\n */\n\n\nCoursePresentation.prototype.addElementSolutionButton = function (element, elementInstance, $elementContainer) {\n  var _this7 = this;\n\n  elementInstance.showCPComments = function () {\n    if ($elementContainer.children('.h5p-element-solution').length === 0 && (0,_utils__WEBPACK_IMPORTED_MODULE_6__.stripHTML)(element.solution).length > 0) {\n      var $commentButton = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)('<div/>', {\n        role: 'button',\n        tabindex: 0,\n        title: _this7.l10n.solutionsButtonTitle,\n        'aria-popup': true,\n        'aria-expanded': false,\n        'class': 'h5p-element-solution'\n      }).append('<span class=\"joubel-icon-comment-normal\"><span class=\"h5p-icon-shadow\"></span><span class=\"h5p-icon-speech-bubble\"></span><span class=\"h5p-icon-question\"></span></span>').appendTo($elementContainer);\n      var parentPosition = {\n        x: element.x,\n        y: element.y\n      };\n\n      if (!element.displayAsButton) {\n        parentPosition.x += element.width - 4;\n        parentPosition.y += element.height - 12;\n      }\n\n      (0,_utils__WEBPACK_IMPORTED_MODULE_6__.addClickAndKeyboardListeners)($commentButton, function () {\n        return _this7.showPopup(element.solution, $commentButton, parentPosition);\n      });\n    }\n  };\n\n  if (element.alwaysDisplayComments !== undefined && element.alwaysDisplayComments) {\n    elementInstance.showCPComments();\n  }\n};\n/**\n * Displays a popup.\n *\n * @param {string|jQuery} popupContent\n * @param {jQuery} $focusOnClose Prevents losing focus when dialog closes\n * @param {object} [parentPosition] x and y coordinates of parent\n * @param {Function} [remove] Gets called before the popup is removed.\n * @param {string} [classes]\n * @param {object} [instance] H5P library instance\n * @param {boolean} [keepInDOM] Hide the popup instead of removing it when it gets closed\n */\n\n\nCoursePresentation.prototype.showPopup = function (popupContent, $focusOnClose) {\n  var _this8 = this;\n\n  var parentPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var remove = arguments.length > 3 ? arguments[3] : undefined;\n  var classes = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'h5p-popup-comment-field';\n  var instance = arguments.length > 5 ? arguments[5] : undefined;\n  var keepInDOM = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n  var self = this;\n  var doNotClose;\n  /** @private */\n\n  var close = function close(event) {\n    if (doNotClose) {\n      // Prevent closing the popup\n      doNotClose = false;\n      return;\n    } // Remove popup\n\n\n    if (remove !== undefined) {\n      setTimeout(function () {\n        remove(keepInDOM);\n        self.restoreTabIndexes();\n      }, 100);\n    }\n\n    event.preventDefault();\n    $popup.addClass('h5p-animate');\n    $popup.find('.h5p-popup-container').addClass('h5p-animate');\n    setTimeout(function () {\n      if (keepInDOM) {\n        $popup.hide();\n      } else {\n        $popup.remove();\n      }\n    }, 100);\n    $focusOnClose.focus();\n  };\n\n  var $popup;\n\n  if (keepInDOM && instance && self.popups[instance.subContentId]) {\n    // The popup already exists in the DOM, but is hidden\n    $popup = self.popups[instance.subContentId];\n  }\n\n  if ($popup === undefined) {\n    // The popup must be created and added to the DOM\n    $popup = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)('<div class=\"h5p-popup-overlay ' + classes + '\">' + '<div class=\"h5p-popup-container\" role=\"dialog\">' + '<div class=\"h5p-cp-dialog-titlebar\">' + '<div class=\"h5p-dialog-title\"></div>' + '<div role=\"button\" tabindex=\"0\" class=\"h5p-close-popup\" title=\"' + this.l10n.close + '\"></div>' + '</div>' + '<div class=\"h5p-popup-wrapper\" role=\"document\"></div>' + '</div>' + '</div>');\n    var $popupWrapper = $popup.find('.h5p-popup-wrapper');\n\n    if (popupContent instanceof H5P.jQuery) {\n      $popupWrapper.append(popupContent);\n    } else {\n      $popupWrapper.html(popupContent);\n    }\n\n    if (instance && instance.subContentId) {\n      // Keep a reference to this popup\n      self.popups[instance.subContentId] = $popup;\n    }\n  }\n\n  var $popupContainer = $popup.find('.h5p-popup-container');\n\n  var resizePopup = function resizePopup($popup, $popupContainer, parentPosition) {\n    if (!parentPosition) {\n      return;\n    } // Do not show until we have finished calculating position\n\n\n    $popupContainer.css({\n      visibility: 'hidden'\n    });\n    $popup.prependTo(_this8.$wrapper);\n    var popupHeight = $popupContainer.height();\n    var popupWidth = $popupContainer.width();\n    var overlayHeight = $popup.height();\n    var overlayWidth = $popup.width();\n    var widthPercentage = popupWidth * (100 / overlayWidth);\n    var heightPercentage = popupHeight * (100 / overlayHeight); // Skip sufficiently big popups\n\n    var skipThreshold = 50;\n\n    if (widthPercentage > skipThreshold && heightPercentage > skipThreshold) {\n      $popup.detach();\n      return;\n    } // Only resize boxes that are disproportionally wide\n\n\n    var heightThreshold = 45;\n\n    if (widthPercentage > heightPercentage && heightPercentage < heightThreshold) {\n      // Make the popup quadratic\n      widthPercentage = Math.sqrt(widthPercentage * heightPercentage);\n      $popupContainer.css({\n        width: widthPercentage + '%'\n      });\n    } // Account for overflowing edges, use consistent percentage padding as css\n\n\n    var widthPaddingPercentage = 5; // Width percentage is capped at min 22 and max 90% in css\n\n    if (widthPercentage > 90) {\n      widthPercentage = 90;\n    } else if (widthPercentage < 22) {\n      widthPercentage = 22;\n    }\n\n    var overflowRightSideThreshold = 100 - widthPercentage - widthPaddingPercentage;\n    var leftPos = parentPosition.x;\n\n    if (parentPosition.x > overflowRightSideThreshold) {\n      leftPos = overflowRightSideThreshold;\n    } else if (parentPosition.x < widthPaddingPercentage) {\n      leftPos = widthPaddingPercentage;\n    }\n\n    heightPercentage = $popupContainer.height() * (100 / overlayHeight);\n    var heightPadding = 20 / 2;\n    var topPosThreshold = 100 - heightPercentage - heightPadding;\n    var topPos = parentPosition.y;\n\n    if (parentPosition.y > topPosThreshold) {\n      topPos = topPosThreshold;\n    } else if (parentPosition.y < heightPadding) {\n      topPos = heightPadding;\n    } // Reset and prepare to animate in\n\n\n    $popup.detach();\n    $popupContainer.css({\n      left: leftPos + '%',\n      top: topPos + '%'\n    });\n  };\n\n  resizePopup($popup, $popupContainer, parentPosition);\n  $popup.addClass('h5p-animate');\n  $popupContainer.css({\n    'visibility': ''\n  }).addClass('h5p-animate');\n\n  if ($popup.parent().length === 0) {\n    // Having no parent means the popup has not yet been added to the DOM\n    $popup.prependTo(this.$wrapper);\n  } else {\n    $popup.show();\n  } // Insert popup ready for use\n\n\n  $popup.focus().removeClass('h5p-animate').click(close).find('.h5p-popup-container').removeClass('h5p-animate').click(function () {\n    doNotClose = true;\n  }).keydown(function (event) {\n    if (event.which === _utils__WEBPACK_IMPORTED_MODULE_6__.keyCode.ESC) {\n      close(event);\n    }\n  }).end();\n  (0,_utils__WEBPACK_IMPORTED_MODULE_6__.addClickAndKeyboardListeners)($popup.find('.h5p-close-popup'), function (event) {\n    return close(event);\n  });\n  return $popup;\n};\n/**\n * Checks if an element has a solution\n *\n * @param {H5P library instance} elementInstance\n * @returns {Boolean}\n *  true if the element has a solution\n *  false otherwise\n */\n\n\nCoursePresentation.prototype.checkForSolutions = function (elementInstance) {\n  return elementInstance.showSolutions !== undefined || elementInstance.showCPComments !== undefined;\n};\n/**\n * Initialize key press events.\n *\n * @returns {undefined} Nothing.\n */\n\n\nCoursePresentation.prototype.initKeyEvents = function () {\n  if (this.keydown !== undefined || this.activeSurface) {\n    return;\n  }\n\n  var that = this;\n  var wait = false;\n\n  this.keydown = function (event) {\n    if (wait) {\n      return;\n    } // Left\n\n\n    if ((event.keyCode === 37 || event.keyCode === 33) && that.previousSlide(undefined, false)) {\n      event.preventDefault();\n      wait = true;\n    } // Right\n    else if ((event.keyCode === 39 || event.keyCode === 34) && that.nextSlide(undefined, false)) {\n      event.preventDefault();\n      wait = true;\n    }\n\n    if (wait) {\n      // Make sure we only change slide every 300ms.\n      setTimeout(function () {\n        wait = false;\n      }, 300);\n    }\n  };\n\n  H5P.jQuery('body').keydown(this.keydown);\n};\n/**\n * Initialize touch events\n *\n * @returns {undefined} Nothing.\n */\n\n\nCoursePresentation.prototype.initTouchEvents = function () {\n  var that = this;\n  var startX, startY, lastX, prevX, nextX, scroll;\n  var touchStarted = false; // var containerWidth = this.$slidesWrapper.width();\n  // var containerPercentageForScrolling = 0.6; // 60% of container width used to reach endpoints with touch\n  // var slidesNumbers = this.slides.length;\n  // var pixelsPerSlide = (containerWidth * containerPercentageForScrolling) / slidesNumbers;\n  // var startTime;\n  // var currentTime;\n  // var navigateTimer = 500; // 500ms before navigation popup starts.\n\n  var isTouchJump = false; // var nextSlide;\n\n  var transform = function transform(value) {\n    return {\n      '-webkit-transform': value,\n      '-moz-transform': value,\n      '-ms-transform': value,\n      'transform': value\n    };\n  };\n\n  var reset = transform('');\n  this.$slidesWrapper.bind('touchstart', function (event) {\n    isTouchJump = false; // Set start positions\n\n    lastX = startX = event.originalEvent.touches[0].pageX;\n    startY = event.originalEvent.touches[0].pageY;\n    var slideWidth = that.$slidesWrapper.width(); // Set classes for slide movement and remember how much they move\n\n    prevX = that.currentSlideIndex === 0 ? 0 : -slideWidth;\n    nextX = that.currentSlideIndex + 1 >= that.slides.length ? 0 : slideWidth; // containerWidth = H5P.jQuery(this).width();\n    // startTime = new Date().getTime();\n\n    scroll = null;\n    touchStarted = true;\n  }).bind('touchmove', function (event) {\n    var touches = event.originalEvent.touches;\n\n    if (touchStarted) {\n      that.$current.prev().addClass('h5p-touch-move');\n      that.$current.next().addClass('h5p-touch-move');\n      touchStarted = false;\n    } // Determine horizontal movement\n\n\n    lastX = touches[0].pageX;\n    var movedX = startX - lastX;\n\n    if (scroll === null) {\n      // Detemine if we're scrolling horizontally or changing slide\n      scroll = Math.abs(startY - event.originalEvent.touches[0].pageY) > Math.abs(movedX);\n    }\n\n    if (touches.length !== 1 || scroll) {\n      // Do nothing if we're scrolling, zooming etc.\n      return;\n    } // Disable horizontal scrolling when changing slide\n\n\n    event.preventDefault(); // Create popup longer time than navigateTimer has passed\n\n    if (!isTouchJump) {\n      /*currentTime = new Date().getTime();\n      var timeLapsed = currentTime - startTime;\n      if (timeLapsed > navigateTimer) {\n        isTouchJump = true;\n      }*/\n      // Fast swipe to next slide\n      if (movedX < 0) {\n        // Move previous slide\n        that.$current.prev().css(transform('translateX(' + (prevX - movedX) + 'px'));\n      } else {\n        // Move next slide\n        that.$current.next().css(transform('translateX(' + (nextX - movedX) + 'px)'));\n      } // Move current slide\n\n\n      that.$current.css(transform('translateX(' + -movedX + 'px)'));\n    } // TODO: Jumping over multiple slides disabled until redesigned.\n\n    /* else {\n      that.$current.css(reset);\n      // Update slider popup.\n      nextSlide = parseInt(that.currentSlideIndex + (movedX / pixelsPerSlide), 10);\n      if (nextSlide >= that.slides.length -1) {\n        nextSlide = that.slides.length -1;\n      } else if (nextSlide < 0) {\n        nextSlide = 0;\n      }\n      // Create popup at initial touch point\n      that.updateTouchPopup(that.$slidesWrapper, nextSlide, startX, startY);\n    }*/\n\n  }).bind('touchend', function () {\n    if (!scroll) {\n      /*if (isTouchJump) {\n        that.jumpToSlide(nextSlide);\n        that.updateTouchPopup();\n        return;\n      }*/\n      // If we're not scrolling detemine if we're changing slide\n      var moved = startX - lastX;\n\n      if (moved > that.swipeThreshold && that.nextSlide(undefined, false) || moved < -that.swipeThreshold && that.previousSlide(undefined, false)) {\n        return;\n      }\n    } // Reset.\n\n\n    that.$slidesWrapper.children().css(reset).removeClass('h5p-touch-move');\n  });\n};\n/**\n *\n * @param $container\n * @param slideNumber\n * @param xPos\n * @param yPos\n */\n\n\nCoursePresentation.prototype.updateTouchPopup = function ($container, slideNumber, xPos, yPos) {\n  // Remove popup on no arguments\n  if (arguments.length <= 0) {\n    if (this.touchPopup !== undefined) {\n      this.touchPopup.remove();\n    }\n\n    return;\n  }\n\n  var keyword = '';\n  var yPosAdjustment = 0.15; // Adjust y-position 15% higher for visibility\n\n  if (this.$keywords !== undefined && this.$keywords.children(':eq(' + slideNumber + ')').find('span').html() !== undefined) {\n    keyword += this.$keywords.children(':eq(' + slideNumber + ')').find('span').html();\n  } else {\n    var slideIndexToNumber = slideNumber + 1;\n    keyword += this.l10n.slide + ' ' + slideIndexToNumber;\n  } // Summary slide keyword\n\n\n  if (this.editor === undefined) {\n    if (slideNumber >= this.slides.length - 1) {\n      keyword = this.l10n.showSolutions;\n    }\n  }\n\n  if (this.touchPopup === undefined) {\n    this.touchPopup = H5P.jQuery('<div/>', {\n      'class': 'h5p-touch-popup'\n    }).insertAfter($container);\n  } else {\n    this.touchPopup.insertAfter($container);\n  } // Adjust yPos above finger.\n\n\n  if (yPos - $container.parent().height() * yPosAdjustment < 0) {\n    yPos = 0;\n  } else {\n    yPos -= $container.parent().height() * yPosAdjustment;\n  }\n\n  this.touchPopup.css({\n    'max-width': $container.width() - xPos,\n    'left': xPos,\n    'top': yPos\n  });\n  this.touchPopup.html(keyword);\n};\n/**\n * Switch to previous slide\n *\n * @param {Boolean} [noScroll] Skip UI scrolling.\n * @returns {Boolean} Indicates if the move was made.\n */\n\n\nCoursePresentation.prototype.previousSlide = function (noScroll) {\n  var old = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var $prev = this.$current.prev();\n\n  if (!$prev.length) {\n    return false;\n  }\n\n  if (old) {\n    return this.processJumpToSlide($prev.index(), noScroll, false);\n  } else {\n    return this.jumpToSlide($prev.index(), noScroll, null, false);\n  }\n};\n/**\n * Switch to next slide.\n *\n * @param {Boolean} noScroll Skip UI scrolling.\n * @returns {Boolean} Indicates if the move was made.\n */\n\n\nCoursePresentation.prototype.nextSlide = function (noScroll) {\n  var old = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var $next = this.$current.next();\n\n  if (!$next.length) {\n    return false;\n  }\n\n  if (old) {\n    return this.processJumpToSlide($next.index(), noScroll, false);\n  } else {\n    return this.jumpToSlide($next.index(), noScroll, null, false);\n  }\n};\n/**\n * Returns true when the element is the current slide\n *\n * @param {number} index\n * @return {boolean}\n */\n\n\nCoursePresentation.prototype.isCurrentSlide = function (index) {\n  return this.currentSlideIndex === index;\n};\n/**\n * Returns the current slide index\n *\n * @return {number}\n */\n\n\nCoursePresentation.prototype.getCurrentSlideIndex = function () {\n  return this.currentSlideIndex;\n};\n/**\n * Loads all slides (Needed by print)\n * @method attachAllElements\n */\n\n\nCoursePresentation.prototype.attachAllElements = function () {\n  var $slides = this.$slidesWrapper.children();\n\n  for (var i = 0; i < this.slides.length; i++) {\n    this.attachElements($slides.eq(i), i);\n  } // Need to force updating summary slide! This is normally done\n  // only when summary slide is about to be viewed\n\n\n  if (this.summarySlideObject !== undefined) {\n    this.summarySlideObject.updateSummarySlide(this.slides.length - 1, true);\n  }\n};\n/**\n * Process the jump to slide.\n *\n * @param {number} slideNumber The slide number to jump to.\n * @param {Boolean} [noScroll] Skip UI scrolling.\n * @returns {Boolean} Always true.\n */\n\n\nCoursePresentation.prototype.processJumpToSlide = function (slideNumber, noScroll, handleFocus) {\n  var that = this;\n\n  if (this.editor === undefined && this.contentId) {\n    // Content ID avoids crash when previewing in editor before saving\n    var progressedEvent = this.createXAPIEventTemplate('progressed');\n    progressedEvent.data.statement.object.definition.extensions['http://id.tincanapi.com/extension/ending-point'] = slideNumber + 1;\n    this.trigger(progressedEvent);\n  }\n\n  if (this.$current.hasClass('h5p-animate')) {\n    return;\n  } // Jump to given slide and enable animation.\n\n\n  var $old = this.$current.addClass('h5p-animate');\n  var $slides = that.$slidesWrapper.children();\n  var $prevs = $slides.filter(':lt(' + slideNumber + ')');\n  this.$current = $slides.eq(slideNumber).addClass('h5p-animate');\n  var previousSlideIndex = this.currentSlideIndex;\n  this.currentSlideIndex = slideNumber; // Attach elements for this slide\n\n  this.attachElements(this.$current, slideNumber); // Attach elements for next slide\n\n  var $nextSlide = this.$current.next();\n\n  if ($nextSlide.length) {\n    this.attachElements($nextSlide, slideNumber + 1);\n  } // For new slide\n\n\n  this.setOverflowTabIndex();\n  setTimeout(function () {\n    // Play animations\n    $old.removeClass('h5p-current');\n    $old.find('.h5p-element-inner').attr('tabindex', '-1');\n    $slides.css({\n      '-webkit-transform': '',\n      '-moz-transform': '',\n      '-ms-transform': '',\n      'transform': ''\n    }).removeClass('h5p-touch-move').removeClass('h5p-previous');\n    $prevs.addClass('h5p-previous');\n    that.$current.addClass('h5p-current'); // Set tabindex for better accessibility if there are no interactions\n\n    if (typeof that.slidesWithSolutions[that.getCurrentSlideIndex()] === 'undefined') {\n      that.$current.find('.h5p-element-inner').attr('tabindex', '0');\n    }\n\n    that.trigger('changedSlide', that.$current.index()); // trigger consumed event for read only libraries to record xapi in that library\n\n    var currentIndex = that.$current.index();\n    that.handleConsumedEventForReadOnly(currentIndex);\n  }, 1);\n  setTimeout(function () {\n    // Done animating\n    that.$slidesWrapper.children().removeClass('h5p-animate');\n\n    if (that.editor !== undefined) {\n      return;\n    } // Set activity started\n\n\n    var instances = that.elementInstances[that.currentSlideIndex];\n    var instanceParams = that.slides[that.currentSlideIndex].elements;\n\n    if (instances !== undefined) {\n      for (var i = 0; i < instances.length; i++) {\n        if (!instanceParams[i].displayAsButton && typeof instances[i].setActivityStarted === 'function' && typeof instances[i].getScore === 'function') {\n          instances[i].setActivityStarted();\n        }\n      }\n    }\n  }, 250); // Jump keywords\n\n  if (this.$keywords !== undefined) {\n    this.keywordMenu.setCurrentSlideIndex(slideNumber);\n    this.$currentKeyword = this.$keywords.find('.h5p-current');\n\n    if (!noScroll) {\n      this.keywordMenu.scrollToKeywords(slideNumber);\n    }\n  } // Show keywords if they should always show\n\n\n  if (that.presentation.keywordListEnabled && that.presentation.keywordListAlwaysShow) {\n    that.showKeywords();\n  }\n\n  if (that.navigationLine) {\n    // Update progress bar\n    that.navigationLine.updateProgressBar(slideNumber, previousSlideIndex, this.isSolutionMode); // Update footer\n\n    that.navigationLine.updateFooter(slideNumber); // Announce slide change\n\n    this.setSlideNumberAnnouncer(slideNumber, handleFocus);\n  }\n\n  if (that.summarySlideObject) {\n    // Update summary slide if on last slide, do not jump\n    that.summarySlideObject.updateSummarySlide(slideNumber, true);\n  } // Editor specific settings\n\n\n  if (this.editor !== undefined && this.editor.dnb !== undefined) {\n    // Update drag and drop menu bar container\n    this.editor.dnb.setContainer(this.$current);\n    this.editor.dnb.blurAll();\n  }\n\n  this.trigger('resize'); // Triggered to resize elements.\n\n  this.fitCT();\n\n  if (this.hideSummarySlide && slideNumber === this.slides.length - 1) {\n    this.triggerComplete();\n  }\n\n  return true;\n};\n\nCoursePresentation.prototype.handleConsumedEventForReadOnly = function (currentIndex) {\n  var slide = this.slides[currentIndex];\n  var instances = this.elementInstances[currentIndex];\n\n  if (instances !== undefined) {\n    for (var i = 0; i < instances.length; i++) {\n      if (!slide.elements[i].displayAsButton) {\n        var element = slide.elements[i];\n        var hasLibrary = element.action && element.action.library;\n        var libName = hasLibrary ? this.getLibraryName(element.action.library) : 'other';\n        this.triggerConsumedEventForReadOnly(libName, instances[i]);\n      }\n    }\n  }\n};\n/**\n * Jump to the given slide.\n *\n * @param {number} slideNumber The slide number to jump to.\n * @param {Boolean} [noScroll] Skip UI scrolling.\n * @param {Function|null} [callback] Callback to execute on successfull navigation\n * @param {Boolean} [ignoreConfirmationDialog] Will not show confirmation dialog for summary slide\n * @returns {Boolean}\n */\n\n\nCoursePresentation.prototype.jumpToSlide = function (slideNumber) {\n  var _this9 = this;\n\n  var noScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var handleFocus = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var ignoreConfirmationDialog = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  if (this.standalone && this.showSummarySlide && slideNumber === this.slides.length - 1 && !this.isSolutionMode && this.isReportingEnabled && !ignoreConfirmationDialog) {\n    // Currently in the summary slide\n    if (this.currentSlideIndex === this.slides.length - 1) {\n      return false;\n    }\n\n    var confirmationDialog = (0,_confirmation_dialog__WEBPACK_IMPORTED_MODULE_8__[\"default\"])({\n      headerText: this.l10n.confirmDialogHeader,\n      dialogText: this.l10n.confirmDialogText,\n      confirmText: this.l10n.confirmDialogConfirmationText\n    });\n    confirmationDialog.on('canceled', function () {\n      return false;\n    });\n    confirmationDialog.on('confirmed', function () {\n      _this9.processJumpToSlide(slideNumber, noScroll, handleFocus);\n\n      if (callback) {\n        callback();\n      }\n    });\n  } else {\n    this.processJumpToSlide(slideNumber, noScroll, handleFocus);\n\n    if (callback) {\n      callback();\n    }\n  }\n};\n/**\n * Set tab index for text containers that overflow with a scrollbar\n */\n\n\nCoursePresentation.prototype.setOverflowTabIndex = function () {\n  // On resume, this is not set yet, but it will be iovoked later\n  if (this.$current === undefined) {\n    return;\n  }\n\n  this.$current.find('.h5p-element-inner').each(function () {\n    var $inner = (0,_globals__WEBPACK_IMPORTED_MODULE_5__.jQuery)(this); // Currently, this rule is for tables only\n\n    var innerHeight;\n\n    if (this.classList.contains('h5p-table')) {\n      innerHeight = $inner.find('.h5p-table').outerHeight();\n    } // Add tabindex if there's an overflow (scrollbar depending on CSS)\n\n\n    var outerHeight = $inner.closest('.h5p-element-outer').innerHeight();\n\n    if (innerHeight !== undefined && outerHeight !== null && innerHeight > outerHeight) {\n      $inner.attr('tabindex', 0);\n    }\n  });\n};\n/**\n * Set slide number so it can be announced to assistive technologies\n * @param {number} slideNumber Index of slide that should have its' title announced\n * @param {boolean} [handleFocus=false] Moves focus to the top of the slide\n */\n\n\nCoursePresentation.prototype.setSlideNumberAnnouncer = function (slideNumber) {\n  var handleFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var slideTitle = '';\n\n  if (!this.navigationLine) {\n    return slideTitle;\n  } // Add slide number\n\n\n  var slide = this.slides[slideNumber];\n  var hasKeywords = slide.keywords && slide.keywords.length > 0;\n\n  if (hasKeywords && !this.navigationLine.isSummarySlide(slideNumber)) {\n    slideTitle += this.l10n.slide + ' ' + (slideNumber + 1) + ': ';\n  }\n\n  slideTitle += this.navigationLine.createSlideTitle(slideNumber);\n  this.$slideAnnouncer.html(slideTitle);\n\n  if (handleFocus) {\n    this.$slideTop.focus();\n  }\n};\n/**\n * Reset the content for all slides.\n * @public\n */\n\n\nCoursePresentation.prototype.resetTask = function () {\n  this.summarySlideObject.toggleSolutionMode(false);\n\n  for (var i = 0; i < this.slidesWithSolutions.length; i++) {\n    if (this.slidesWithSolutions[i] !== undefined) {\n      for (var j = 0; j < this.slidesWithSolutions[i].length; j++) {\n        var elementInstance = this.slidesWithSolutions[i][j];\n\n        if (elementInstance.resetTask) {\n          elementInstance.resetTask();\n        } //H5P.jQuery('.h5p-show-solutions').show(); \n        //H5P.jQuery(\".h5p-summary-footer\").removeClass(\"h5p-custom-summary-msg\");\n\n      }\n    }\n  }\n\n  this.navigationLine.updateProgressBar(0);\n  this.jumpToSlide(0, false);\n  this.$container.find('.h5p-popup-overlay').remove();\n};\n/**\n * Show solutions for all slides that have solutions\n *\n * @returns {undefined}\n */\n\n\nCoursePresentation.prototype.showSolutions = function () {\n  var jumpedToFirst = false;\n  var slideScores = [];\n  var hasScores = false;\n\n  for (var i = 0; i < this.slidesWithSolutions.length; i++) {\n    if (this.slidesWithSolutions[i] !== undefined) {\n      if (!this.elementsAttached[i]) {\n        // Attach elements before showing solutions\n        this.attachElements(this.$slidesWrapper.children(':eq(' + i + ')'), i);\n      }\n\n      if (!jumpedToFirst) {\n        this.jumpToSlide(i, false);\n        jumpedToFirst = true; // TODO: Explain what this really does.\n      }\n\n      var slideScore = 0;\n      var slideMaxScore = 0;\n      var indexes = [];\n\n      for (var j = 0; j < this.slidesWithSolutions[i].length; j++) {\n        var elementInstance = this.slidesWithSolutions[i][j];\n\n        if (elementInstance.addSolutionButton !== undefined) {\n          elementInstance.addSolutionButton();\n        }\n\n        if (elementInstance.showSolutions) {\n          elementInstance.showSolutions();\n        }\n\n        if (elementInstance.showCPComments) {\n          elementInstance.showCPComments();\n        }\n\n        if (elementInstance.getMaxScore !== undefined) {\n          slideMaxScore += elementInstance.getMaxScore();\n          slideScore += elementInstance.getScore();\n          hasScores = true;\n          indexes.push(elementInstance.coursePresentationIndexOnSlide);\n        }\n      }\n\n      slideScores.push({\n        indexes: indexes,\n        slide: i + 1,\n        score: slideScore,\n        maxScore: slideMaxScore\n      });\n    } // Show comments of non graded contents\n\n\n    if (this.showCommentsAfterSolution[i]) {\n      for (var j = 0; j < this.showCommentsAfterSolution[i].length; j++) {\n        if (typeof this.showCommentsAfterSolution[i][j].showCPComments === 'function') {\n          this.showCommentsAfterSolution[i][j].showCPComments();\n        }\n      }\n    }\n  }\n\n  if (hasScores) {\n    return slideScores;\n  }\n};\n/**\n * Gets slides scores for whole cp\n * @returns {Array} slideScores Array containing scores for all slides.\n */\n\n\nCoursePresentation.prototype.getSlideScores = function (noJump) {\n  var jumpedToFirst = noJump === true;\n  var slideScores = [];\n  var hasScores = false;\n\n  for (var i = 0; i < this.slidesWithSolutions.length; i++) {\n    if (this.slidesWithSolutions[i] !== undefined) {\n      if (!this.elementsAttached[i]) {\n        // Attach elements before showing solutions\n        this.attachElements(this.$slidesWrapper.children(':eq(' + i + ')'), i);\n      }\n\n      if (!jumpedToFirst) {\n        this.jumpToSlide(i, false);\n        jumpedToFirst = true; // TODO: Explain what this really does.\n      }\n\n      var slideScore = 0;\n      var slideMaxScore = 0;\n      var indexes = [];\n\n      for (var j = 0; j < this.slidesWithSolutions[i].length; j++) {\n        var elementInstance = this.slidesWithSolutions[i][j];\n\n        if (elementInstance.getMaxScore !== undefined) {\n          // console.log(elementInstance);\n          slideMaxScore += elementInstance.getMaxScore();\n          slideScore += elementInstance.getScore();\n          hasScores = true;\n          indexes.push(elementInstance.coursePresentationIndexOnSlide); ////customization\n          // console.log(elementInstance.getMaxScore());\n\n          if (this.previousState && this.previousState != undefined) {\n            if (this.previousState.answers) {\n              //const scores_list = this.previousState.answers;\n              //for (var k = 0; k < scores_list.length; k++) {\n              if (this.previousState.answers[i][0] != undefined && slideScore == 0 && this.previousState.answers[i][0]['score']) {\n                for (var l = 0; l < this.previousState.answers[i][0]['score'].length; l++) {\n                  //console.log(this.previousState.answers);\n                  slideScore += this.previousState.answers[i][0]['score'][l];\n                  slideMaxScore += this.previousState.answers[i][0]['maxScore'][l];\n                }\n              } //}\n\n            }\n          } /////////\n          //console.log(slideMaxScore);\n\n        }\n      }\n\n      slideScores.push({\n        indexes: indexes,\n        slide: i + 1,\n        score: slideScore,\n        maxScore: slideMaxScore\n      });\n    }\n  }\n\n  if (hasScores) {\n    console.log(slideScores);\n    return slideScores;\n  }\n};\n/**\n * Gather copyright information for the current content.\n *\n * @returns {H5P.ContentCopyrights}\n */\n\n\nCoursePresentation.prototype.getCopyrights = function () {\n  var info = new H5P.ContentCopyrights();\n  var elementCopyrights; // Check for a common background image shared by all slides\n\n  if (this.presentation && this.presentation.globalBackgroundSelector && this.presentation.globalBackgroundSelector.imageGlobalBackground) {\n    // Add image copyrights to the presentation scope\n    var globalBackgroundImageParams = this.presentation.globalBackgroundSelector.imageGlobalBackground;\n    var globalBackgroundImageCopyright = new H5P.MediaCopyright(globalBackgroundImageParams.copyright);\n    globalBackgroundImageCopyright.setThumbnail(new H5P.Thumbnail(H5P.getPath(globalBackgroundImageParams.path, this.contentId), globalBackgroundImageParams.width, globalBackgroundImageParams.height));\n    info.addMedia(globalBackgroundImageCopyright);\n  }\n\n  for (var slide = 0; slide < this.slides.length; slide++) {\n    var slideInfo = new H5P.ContentCopyrights();\n    slideInfo.setLabel(this.l10n.slide + ' ' + (slide + 1)); // Check for a slide specific background image\n\n    if (this.slides[slide] && this.slides[slide].slideBackgroundSelector && this.slides[slide].slideBackgroundSelector.imageSlideBackground) {\n      // Add image copyrights to the slide scope\n      var slideBackgroundImageParams = this.slides[slide].slideBackgroundSelector.imageSlideBackground;\n      var slideBackgroundImageCopyright = new H5P.MediaCopyright(slideBackgroundImageParams.copyright);\n      slideBackgroundImageCopyright.setThumbnail(new H5P.Thumbnail(H5P.getPath(slideBackgroundImageParams.path, this.contentId), slideBackgroundImageParams.width, slideBackgroundImageParams.height));\n      slideInfo.addMedia(slideBackgroundImageCopyright);\n    } // If the slide has elements, add the ones with copyright info to this slides copyright\n\n\n    if (this.elementInstances[slide] !== undefined) {\n      for (var element = 0; element < this.elementInstances[slide].length; element++) {\n        var instance = this.elementInstances[slide][element];\n\n        if (!this.slides[slide].elements[element].action) {\n          continue;\n        }\n\n        var params = this.slides[slide].elements[element].action.params;\n        var metadata = this.slides[slide].elements[element].action.metadata;\n        elementCopyrights = undefined;\n\n        if (instance.getCopyrights !== undefined) {\n          // Use the instance's own copyright generator\n          elementCopyrights = instance.getCopyrights();\n        }\n\n        if (elementCopyrights === undefined) {\n          // Create a generic flat copyright list\n          elementCopyrights = new H5P.ContentCopyrights(); // In metadata alone there's no way of knowing what the machineName is.\n\n          H5P.findCopyrights(elementCopyrights, params, this.contentId, {\n            metadata: metadata,\n            machineName: instance.libraryInfo.machineName\n          });\n        }\n\n        var label = element + 1;\n\n        if (params.contentName !== undefined) {\n          label += ': ' + params.contentName;\n        } else if (instance.getTitle !== undefined) {\n          label += ': ' + instance.getTitle();\n        } else if (params.l10n && params.l10n.name) {\n          label += ': ' + params.l10n.name;\n        }\n\n        elementCopyrights.setLabel(label);\n        slideInfo.addContent(elementCopyrights);\n      }\n    }\n\n    info.addContent(slideInfo);\n  }\n\n  return info;\n};\n/**\n * Get xAPI data.\n * Contract used by report rendering engine.\n *\n * @see contract at {@link https://h5p.org/documentation/developers/contracts#guides-header-6}\n */\n\n\nCoursePresentation.prototype.getXAPIData = function () {\n  var xAPIEvent = this.createXAPIEventTemplate('answered'); // console.log(\"dabc abc\");\n  // Extend definition\n\n  var definition = xAPIEvent.getVerifiedStatementValue(['object', 'definition']);\n  H5P.jQuery.extend(definition, {\n    interactionType: 'compound',\n    type: 'http://adlnet.gov/expapi/activities/cmi.interaction'\n  });\n  var score = this.getScore();\n  var maxScore = this.getMaxScore();\n  xAPIEvent.setScoredResult(score, maxScore, this, true, score === maxScore);\n  var childrenXAPIData = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.flattenArray)(this.slidesWithSolutions).map(function (child) {\n    if (child && child.getXAPIData) {\n      return child.getXAPIData();\n    }\n  }).filter(function (data) {\n    return !!data;\n  });\n  return {\n    statement: xAPIEvent.data.statement,\n    children: childrenXAPIData\n  };\n};\n/**\n * Trigger completed statement for the presentation\n */\n\n\nCoursePresentation.prototype.triggerComplete = function () {\n  var scores = this.getSlideScores();\n  var totalScore = 0;\n  var totalMaxScore = 0;\n\n  if (scores) {\n    for (var i = 0; i < scores.length; i += 1) {\n      totalScore += scores[i].score;\n      totalMaxScore += scores[i].maxScore;\n    }\n  }\n\n  this.triggerXAPICompleted(totalScore, totalMaxScore);\n};\n\nCoursePresentation.prototype.triggerConsumedEventForReadOnly = function (library, instance) {\n  var readOnlyLibraries = ['H5P.AdvancedText', 'H5P.Image', 'H5P.Shape', 'H5P.Table', 'H5P.Video', 'H5P.ContinuousText', 'H5P.ExportableTextArea', 'H5P.TwitterUserFeed'];\n\n  if (this.editor === undefined && readOnlyLibraries.includes(library)) {\n    instance.trigger('trigger-consumed');\n  }\n};\n/**\n * Get context data.\n * Contract used for confusion report.\n */\n\n\nCoursePresentation.prototype.getContext = function () {\n  var self = this; // Get current slide number here it starts with zero\n\n  var slide = self.currentSlideIndex + 1;\n  return {\n    type: 'slide',\n    value: slide\n  };\n};\n/**\n * Get title, e.g. for xAPI\n *\n * @return {string} Title.\n */\n\n\nCoursePresentation.prototype.getTitle = function () {\n  return H5P.createTitle(this.title);\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CoursePresentation);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9jcC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaERBOztBQW1EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUZBOztBQU1BOztBQUdBO0FBRUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQ0E7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBa0JBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFHQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUdBOztBQUdBOztBQUdBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUdBOztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFBQTtBQUFBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBRUE7QUFFQTs7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBOztBQUlBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBSUE7QUFDQTtBQURBOztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOztBQUNBOztBQUNBOzs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBOztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFDQTtBQUNBO0FBRUE7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFVQTtBQUNBO0FBQ0E7QUFGQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFZQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBR0E7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFHQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOztBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUdBOztBQUVBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTs7QUFHQTs7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFFQTs7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUdBOztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUdBOztBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3NjcmlwdHMvY3AuanM/NzdjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGFyZW50IGZyb20gJ2g1cC1wYXJlbnQnO1xuaW1wb3J0IFN1bW1hcnlTbGlkZSBmcm9tICcuL3N1bW1hcnktc2xpZGUnO1xuaW1wb3J0IE5hdmlnYXRpb25MaW5lIGZyb20gJy4vbmF2aWdhdGlvbi1saW5lJztcbmltcG9ydCBTbGlkZUJhY2tncm91bmQgZnJvbSAnLi9zbGlkZS1iYWNrZ3JvdW5kcyc7XG5pbXBvcnQgS2V5d29yZHNNZW51IGZyb20gJy4va2V5d29yZC1tZW51JztcbmltcG9ydCB7IGpRdWVyeSBhcyAkIH0gZnJvbSAnLi9nbG9iYWxzJztcbmltcG9ydCB7IGZsYXR0ZW5BcnJheSwgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycywgaXNGdW5jdGlvbiwga2ViYWJDYXNlLCBzdHJpcEhUTUwsIGtleUNvZGUgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBTbGlkZSBmcm9tICcuL3NsaWRlLmpzJztcbmltcG9ydCBDb25maXJtYXRpb25EaWFsb2cgZnJvbSAnLi9jb25maXJtYXRpb24tZGlhbG9nJztcblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgS0VZV09SRF9USVRMRV9TS0lQID0gbnVsbDtcblxuLyoqXG4gKiBDb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zIFN0YXJ0IHBhcmFtdGVyZXMuXG4gKiBAcGFyYW0ge2ludH0gaWQgQ29udGVudCBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBlZGl0b3JcbiAqICBTZXQgaWYgYW4gZWRpdG9yIGlzIGluaXRpYXRpbmcgdGhpcyBsaWJyYXJ5XG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfSBOb3RoaW5nLlxuICovXG5sZXQgQ291cnNlUHJlc2VudGF0aW9uID0gZnVuY3Rpb24gKHBhcmFtcywgaWQsIGV4dHJhcykge1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHRoaXMucHJlc2VudGF0aW9uID0gcGFyYW1zLnByZXNlbnRhdGlvbjtcbiAgdGhpcy5zbGlkZXMgPSB0aGlzLnByZXNlbnRhdGlvbi5zbGlkZXM7XG4gIHRoaXMuY29udGVudElkID0gaWQ7XG4gIHRoaXMuZWxlbWVudEluc3RhbmNlcyA9IFtdOyAvLyBlbGVtZW50SW5zdGFuY2VzIGhvbGRzIHRoZSBpbnN0YW5jZXMgZm9yIGVsZW1lbnRzIGluIGFuIGFycmF5LlxuICB0aGlzLmVsZW1lbnRzQXR0YWNoZWQgPSBbXTsgLy8gTWFwIHRvIGtlZXAgdHJhY2sgb2Ygd2hpY2ggc2xpZGUgaGFzIGF0dGFjaGVkIGVsZW1lbnRzXG4gIHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9ucyA9IFtdO1xuICB0aGlzLnNob3dDb21tZW50c0FmdGVyU29sdXRpb24gPSBbXTtcbiAgdGhpcy5oYXNBbnN3ZXJFbGVtZW50cyA9IGZhbHNlO1xuICB0aGlzLmlnbm9yZVJlc2l6ZSA9IGZhbHNlO1xuICB0aGlzLmlzVGFzayA9IGZhbHNlO1xuICB0aGlzLnN0YW5kYWxvbmUgPSB0cnVlO1xuICB0aGlzLmlzUmVwb3J0aW5nRW5hYmxlZCA9IGZhbHNlO1xuICB0aGlzLnBvcHVwcyA9IHt9O1xuXG4gIGlmIChleHRyYXMuY3BFZGl0b3IpIHtcbiAgICB0aGlzLmVkaXRvciA9IGV4dHJhcy5jcEVkaXRvcjtcbiAgfVxuXG4gIGlmIChleHRyYXMpIHtcbiAgICB0aGlzLnByZXZpb3VzU3RhdGUgPSBleHRyYXMucHJldmlvdXNTdGF0ZTtcbiAgICB0aGlzLnN0YW5kYWxvbmUgPSBleHRyYXMuc3RhbmRhbG9uZTtcbiAgICB0aGlzLmlzUmVwb3J0aW5nRW5hYmxlZCA9IGV4dHJhcy5pc1JlcG9ydGluZ0VuYWJsZWQgfHwgZXh0cmFzLmlzU2NvcmluZ0VuYWJsZWQ7XG4gICAgdGhpcy50aXRsZSA9IChleHRyYXMubWV0YWRhdGEgJiYgZXh0cmFzLm1ldGFkYXRhLnRpdGxlKSA/IGV4dHJhcy5tZXRhZGF0YS50aXRsZSA6ICdDb3Vyc2UgUHJlc2VudGF0aW9uJztcbiAgfVxuXG4gIHRoaXMuY3VycmVudFNsaWRlSW5kZXggPSAodGhpcy5wcmV2aW91c1N0YXRlICYmIHRoaXMucHJldmlvdXNTdGF0ZS5wcm9ncmVzcykgPyB0aGlzLnByZXZpb3VzU3RhdGUucHJvZ3Jlc3MgOiAwO1xuXG4gIHRoaXMucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0RW5hYmxlZCA9IChwYXJhbXMucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0RW5hYmxlZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IHBhcmFtcy5wcmVzZW50YXRpb24ua2V5d29yZExpc3RFbmFibGVkKTtcblxuICB0aGlzLmwxMG4gPSAkLmV4dGVuZCh7XG4gICAgc2xpZGU6ICdTbGlkZScsXG4gICAgc2NvcmU6ICdTY29yZScsXG4gICAgeW91clNjb3JlOiAnWW91ciBzY29yZScsXG4gICAgbWF4U2NvcmU6ICdNYXggc2NvcmUnLFxuICAgIHRvdGFsOiAnVG90YWwnLFxuICAgIHRvdGFsU2NvcmU6ICdUb3RhbCBTY29yZScsXG4gICAgc2hvd1NvbHV0aW9uczogJ1Nob3cgc29sdXRpb25zJyxcbiAgICBzdW1tYXJ5OiAnc3VtbWFyeScsXG4gICAgcmV0cnk6ICdSZXRyeScsXG4gICAgZXhwb3J0QW5zd2VyczogJ0V4cG9ydCB0ZXh0JyxcbiAgICBjbG9zZTogJ0Nsb3NlJyxcbiAgICBoaWRlS2V5d29yZHM6ICdIaWRlIHNpZGViYXIgbmF2aWdhdGlvbiBtZW51JyxcbiAgICBzaG93S2V5d29yZHM6ICdTaG93IHNpZGViYXIgbmF2aWdhdGlvbiBtZW51JyxcbiAgICBmdWxsc2NyZWVuOiAnRnVsbHNjcmVlbicsXG4gICAgZXhpdEZ1bGxzY3JlZW46ICdFeGl0IGZ1bGxzY3JlZW4nLFxuICAgIHByZXZTbGlkZTogJ1ByZXZpb3VzIHNsaWRlJyxcbiAgICBuZXh0U2xpZGU6ICdOZXh0IHNsaWRlJyxcbiAgICBjdXJyZW50U2xpZGU6ICdDdXJyZW50IHNsaWRlJyxcbiAgICBsYXN0U2xpZGU6ICdMYXN0IHNsaWRlJyxcbiAgICBzb2x1dGlvbk1vZGVUaXRsZTogJ0V4aXQgc29sdXRpb24gbW9kZScsXG4gICAgc29sdXRpb25Nb2RlVGV4dDogJ1NvbHV0aW9uIE1vZGUnLFxuICAgIHN1bW1hcnlNdWx0aXBsZVRhc2tUZXh0OiAnTXVsdGlwbGUgdGFza3MnLFxuICAgIHNjb3JlTWVzc2FnZTogJ1lvdSBhY2hpZXZlZDonLFxuICAgIHNoYXJlRmFjZWJvb2s6ICdTaGFyZSBvbiBGYWNlYm9vaycsXG4gICAgc2hhcmVUd2l0dGVyOiAnU2hhcmUgb24gVHdpdHRlcicsXG4gICAgc2hhcmVHb29nbGU6ICdTaGFyZSBvbiBHb29nbGUrJyxcbiAgICBzdWJtaXRSZXN1bHQgOiAnU3VibWl0IEFuc3dlcnMnLFxuICAgIGdvVG9TbGlkZTogJ0dvIHRvIHNsaWRlIDpudW0nLFxuICAgIHNvbHV0aW9uc0J1dHRvblRpdGxlOiAnU2hvdyBjb21tZW50cycsXG4gICAgcHJpbnRUaXRsZTogJ1ByaW50JyxcbiAgICBwcmludEluZ3Jlc3M6ICdIb3cgd291bGQgeW91IGxpa2UgdG8gcHJpbnQgdGhpcyBwcmVzZW50YXRpb24/JyxcbiAgICBwcmludEFsbFNsaWRlczogJ1ByaW50IGFsbCBzbGlkZXMnLFxuICAgIHByaW50Q3VycmVudFNsaWRlOiAnUHJpbnQgY3VycmVudCBzbGlkZScsXG4gICAgbm9UaXRsZTogJ05vIHRpdGxlJyxcbiAgICBhY2Nlc3NpYmlsaXR5U2xpZGVOYXZpZ2F0aW9uRXhwbGFuYXRpb246ICdVc2UgbGVmdCBhbmQgcmlnaHQgYXJyb3cgdG8gY2hhbmdlIHNsaWRlIGluIHRoYXQgZGlyZWN0aW9uIHdoZW5ldmVyIGNhbnZhcyBpcyBzZWxlY3RlZC4nLFxuICAgIGNvbnRhaW5zTm90Q29tcGxldGVkOiAnQHNsaWRlTmFtZSBjb250YWlucyBub3QgY29tcGxldGVkIGludGVyYWN0aW9uJyxcbiAgICBjb250YWluc0NvbXBsZXRlZDogJ0BzbGlkZU5hbWUgY29udGFpbnMgY29tcGxldGVkIGludGVyYWN0aW9uJyxcbiAgICBzbGlkZUNvdW50OiAnU2xpZGUgQGluZGV4IG9mIEB0b3RhbCcsXG4gICAgYWNjZXNzaWJpbGl0eUNhbnZhc0xhYmVsOiAnUHJlc2VudGF0aW9uIGNhbnZhcy4gVXNlIGxlZnQgYW5kIHJpZ2h0IGFycm93IHRvIG1vdmUgYmV0d2VlbiBzbGlkZXMuJyxcbiAgICBjb250YWluc09ubHlDb3JyZWN0OiBcIkBzbGlkZU5hbWUgb25seSBoYXMgY29ycmVjdCBhbnN3ZXJzXCIsXG4gICAgY29udGFpbnNJbmNvcnJlY3RBbnN3ZXJzOiAnQHNsaWRlTmFtZSBoYXMgaW5jb3JyZWN0IGFuc3dlcnMnLFxuICAgIHNoYXJlUmVzdWx0OiAnU2hhcmUgUmVzdWx0JyxcbiAgICBhY2Nlc3NpYmlsaXR5VG90YWxTY29yZTogJ1lvdSBnb3QgQHNjb3JlIG9mIEBtYXhTY29yZSBwb2ludHMgaW4gdG90YWwnLFxuICAgIGFjY2Vzc2liaWxpdHlFbnRlcmVkRnVsbHNjcmVlbjogJ0VudGVyZWQgZnVsbHNjcmVlbicsXG4gICAgYWNjZXNzaWJpbGl0eUV4aXRlZEZ1bGxzY3JlZW46ICdFeGl0ZWQgZnVsbHNjcmVlbicsXG4gICAgY29uZmlybURpYWxvZ0hlYWRlcjogJ1N1Ym1pdCB5b3VyIGFuc3dlcnMnLFxuICAgIGNvbmZpcm1EaWFsb2dUZXh0OiAnVGhpcyB3aWxsIHN1Ym1pdCB5b3VyIHJlc3VsdHMsIGRvIHlvdSB3YW50IHRvIGNvbnRpbnVlPycsXG4gICAgY29uZmlybURpYWxvZ0NvbmZpcm1UZXh0OiAnU3VibWl0IGFuZCBzZWUgcmVzdWx0cycsXG4gIH0sIHBhcmFtcy5sMTBuICE9PSB1bmRlZmluZWQgPyBwYXJhbXMubDEwbiA6IHt9KTtcblxuICBpZiAoISFwYXJhbXMub3ZlcnJpZGUpIHtcbiAgICB0aGlzLmFjdGl2ZVN1cmZhY2UgPSAhIXBhcmFtcy5vdmVycmlkZS5hY3RpdmVTdXJmYWNlO1xuICAgIHRoaXMuaGlkZVN1bW1hcnlTbGlkZSA9ICEhcGFyYW1zLm92ZXJyaWRlLmhpZGVTdW1tYXJ5U2xpZGU7XG4gICAgdGhpcy5lbmFibGVQcmludEJ1dHRvbiA9ICEhcGFyYW1zLm92ZXJyaWRlLmVuYWJsZVByaW50QnV0dG9uO1xuICAgIHRoaXMuc2hvd1N1bW1hcnlTbGlkZVNvbHV0aW9uQnV0dG9uID0gcGFyYW1zLm92ZXJyaWRlLnN1bW1hcnlTbGlkZVNvbHV0aW9uQnV0dG9uICE9PSB1bmRlZmluZWRcbiAgICAgID8gcGFyYW1zLm92ZXJyaWRlLnN1bW1hcnlTbGlkZVNvbHV0aW9uQnV0dG9uIDogdHJ1ZTtcbiAgICB0aGlzLnNob3dTdW1tYXJ5U2xpZGVSZXRyeUJ1dHRvbiA9IHBhcmFtcy5vdmVycmlkZS5zdW1tYXJ5U2xpZGVSZXRyeUJ1dHRvbiAhPT0gdW5kZWZpbmVkXG4gICAgICA/IHBhcmFtcy5vdmVycmlkZS5zdW1tYXJ5U2xpZGVSZXRyeUJ1dHRvbiA6IHRydWU7XG5cbiAgICBpZiAoISFwYXJhbXMub3ZlcnJpZGUuc29jaWFsKSB7XG4gICAgICB0aGlzLmVuYWJsZVR3aXR0ZXJTaGFyZSA9ICEhcGFyYW1zLm92ZXJyaWRlLnNvY2lhbC5zaG93VHdpdHRlclNoYXJlO1xuICAgICAgdGhpcy5lbmFibGVGYWNlYm9va1NoYXJlID0gISFwYXJhbXMub3ZlcnJpZGUuc29jaWFsLnNob3dGYWNlYm9va1NoYXJlO1xuICAgICAgdGhpcy5lbmFibGVHb29nbGVTaGFyZSA9ICEhcGFyYW1zLm92ZXJyaWRlLnNvY2lhbC5zaG93R29vZ2xlU2hhcmU7XG5cbiAgICAgIHRoaXMudHdpdHRlclNoYXJlU3RhdGVtZW50ID0gcGFyYW1zLm92ZXJyaWRlLnNvY2lhbC50d2l0dGVyU2hhcmUuc3RhdGVtZW50O1xuICAgICAgdGhpcy50d2l0dGVyU2hhcmVIYXNodGFncyA9IHBhcmFtcy5vdmVycmlkZS5zb2NpYWwudHdpdHRlclNoYXJlLmhhc2h0YWdzO1xuICAgICAgdGhpcy50d2l0dGVyU2hhcmVVcmwgPSBwYXJhbXMub3ZlcnJpZGUuc29jaWFsLnR3aXR0ZXJTaGFyZS51cmw7XG5cbiAgICAgIHRoaXMuZmFjZWJvb2tTaGFyZVVybCA9IHBhcmFtcy5vdmVycmlkZS5zb2NpYWwuZmFjZWJvb2tTaGFyZS51cmw7XG4gICAgICB0aGlzLmZhY2Vib29rU2hhcmVRdW90ZSA9IHBhcmFtcy5vdmVycmlkZS5zb2NpYWwuZmFjZWJvb2tTaGFyZS5xdW90ZTtcblxuICAgICAgdGhpcy5nb29nbGVTaGFyZVVybCA9IHBhcmFtcy5vdmVycmlkZS5zb2NpYWwuZ29vZ2xlU2hhcmVVcmw7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5rZXl3b3JkTWVudSA9IG5ldyBLZXl3b3Jkc01lbnUoe1xuICAgIGwxMG4gOiB0aGlzLmwxMG4sXG4gICAgY3VycmVudEluZGV4OiB0aGlzLnByZXZpb3VzU3RhdGUgIT09IHVuZGVmaW5lZCA/IHRoaXMucHJldmlvdXNTdGF0ZS5wcm9ncmVzcyA6IDBcbiAgfSk7XG5cbiAgLy8gU2V0IG92ZXJyaWRlIGZvciBhbGwgYWN0aW9uc1xuICB0aGlzLnNldEVsZW1lbnRzT3ZlcnJpZGUocGFyYW1zLm92ZXJyaWRlKTtcblxuICAvLyBJbmhlcml0YW5jZVxuICBQYXJlbnQuY2FsbCh0aGlzLCBTbGlkZSwgcGFyYW1zLnByZXNlbnRhdGlvbi5zbGlkZXMpO1xuXG4gIHRoaXMub24oJ3Jlc2l6ZScsIHRoaXMucmVzaXplLCB0aGlzKTtcblxuICB0aGlzLm9uKCdwcmludGluZycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHRoYXQuaWdub3JlUmVzaXplID0gIWV2ZW50LmRhdGEuZmluaXNoZWQ7XG5cbiAgICBpZiAoZXZlbnQuZGF0YS5maW5pc2hlZCkge1xuICAgICAgdGhhdC5yZXNpemUoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnQuZGF0YS5hbGxTbGlkZXMpIHtcbiAgICAgIHRoYXQuYXR0YWNoQWxsRWxlbWVudHMoKTtcbiAgICB9XG4gIH0pO1xufTtcblxuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGFyZW50LnByb3RvdHlwZSk7XG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ291cnNlUHJlc2VudGF0aW9uO1xuXG4vKipcbiAqIEBwdWJsaWNcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5nZXRDdXJyZW50U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMucHJldmlvdXNTdGF0ZSA/IHRoaXMucHJldmlvdXNTdGF0ZSA6IHt9O1xuICBzdGF0ZS5wcm9ncmVzcyA9IHRoaXMuZ2V0Q3VycmVudFNsaWRlSW5kZXgoKTtcbiAgaWYgKCFzdGF0ZS5hbnN3ZXJzKSB7XG4gICAgc3RhdGUuYW5zd2VycyA9IFtdO1xuICB9XG5cbiAgc3RhdGUuYW5zd2VyZWQgPSB0aGlzLmVsZW1lbnRJbnN0YW5jZXNcbiAgICAubWFwKChpbnRlcmFjdGlvbiwgaW5kZXgpID0+IHRoaXMuc2xpZGVIYXNBbnN3ZXJlZFRhc2soaW5kZXgpKTtcblxuICAvLyBHZXQgYW5zd2VycyBhbmQgYW5zd2VyZWRcbiAgZm9yICh2YXIgc2xpZGUgPSAwOyBzbGlkZSA8IHRoaXMuZWxlbWVudEluc3RhbmNlcy5sZW5ndGg7IHNsaWRlKyspIHtcbiAgICBpZiAodGhpcy5lbGVtZW50SW5zdGFuY2VzW3NsaWRlXSkge1xuICAgICAgZm9yICh2YXIgZWxlbWVudCA9IDA7IGVsZW1lbnQgPCB0aGlzLmVsZW1lbnRJbnN0YW5jZXNbc2xpZGVdLmxlbmd0aDsgZWxlbWVudCsrKSB7XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZWxlbWVudEluc3RhbmNlc1tzbGlkZV1bZWxlbWVudF07XG4gICAgICAgIGlmIChpbnN0YW5jZS5nZXRDdXJyZW50U3RhdGUgaW5zdGFuY2VvZiBGdW5jdGlvbiB8fFxuICAgICAgICAgICAgdHlwZW9mIGluc3RhbmNlLmdldEN1cnJlbnRTdGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGlmICghc3RhdGUuYW5zd2Vyc1tzbGlkZV0pIHtcbiAgICAgICAgICAgIHN0YXRlLmFuc3dlcnNbc2xpZGVdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXRlLmFuc3dlcnNbc2xpZGVdW2VsZW1lbnRdID0gaW5zdGFuY2UuZ2V0Q3VycmVudFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIHNsaWRlIGhhcyBhbnN3ZXJlZCBpbnRlcmFjdGlvbnNcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuc2xpZGVIYXNBbnN3ZXJlZFRhc2sgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgY29uc3QgdGFza3MgPSB0aGlzLnNsaWRlc1dpdGhTb2x1dGlvbnNbaW5kZXhdIHx8IFtdO1xuXG4gIHJldHVybiB0YXNrc1xuICAgIC5maWx0ZXIodGFzayA9PiBpc0Z1bmN0aW9uKHRhc2suZ2V0QW5zd2VyR2l2ZW4pKVxuICAgIC5zb21lKHRhc2sgPT4gdGFzay5nZXRBbnN3ZXJHaXZlbigpKTtcbn07XG5cbi8qKlxuICogUmVuZGVyIHRoZSBwcmVzZW50YXRpb24gaW5zaWRlIHRoZSBnaXZlbiBjb250YWluZXIuXG4gKlxuICogQHBhcmFtIHtINVAualF1ZXJ5fSAkY29udGFpbmVyIENvbnRhaW5lciBmb3IgdGhpcyBwcmVzZW50YXRpb24uXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfSBOb3RoaW5nLlxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uICgkY29udGFpbmVyKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcblxuICAvLyBpc1Jvb3QgaXMgdW5kZWZpbmVkIGluIHRoZSBlZGl0b3JcbiAgaWYgKHRoaXMuaXNSb290ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5pc1Jvb3QoKSkge1xuICAgIHRoaXMuc2V0QWN0aXZpdHlTdGFydGVkKCk7XG4gIH1cblxuICB2YXIgaHRtbCA9XG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJoNXAta2V5bWFwLWV4cGxhbmF0aW9uIGhpZGRlbi1idXQtcmVhZFwiPicgKyB0aGlzLmwxMG4uYWNjZXNzaWJpbGl0eVNsaWRlTmF2aWdhdGlvbkV4cGxhbmF0aW9uICsgJzwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaDVwLWZ1bGxzY3JlZW4tYW5ub3VuY2VyIGhpZGRlbi1idXQtcmVhZFwiIGFyaWEtbGl2ZT1cInBvbGl0ZVwiPjwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaDVwLXdyYXBwZXJcIiB0YWJpbmRleD1cIjBcIiBhcmlhLWxhYmVsPVwiJyArIHRoaXMubDEwbi5hY2Nlc3NpYmlsaXR5Q2FudmFzTGFiZWwgKyAnXCI+JyArXG4gICAgICAgICAgJyAgPGRpdiBjbGFzcz1cImg1cC1jdXJyZW50LXNsaWRlLWFubm91bmNlciBoaWRkZW4tYnV0LXJlYWRcIiBhcmlhLWxpdmU9XCJwb2xpdGVcIj48L2Rpdj4nICtcbiAgICAgICAgICAnICA8ZGl2IHRhYmluZGV4PVwiLTFcIj48L2Rpdj4nICtcbiAgICAgICAgICAnICA8ZGl2IGNsYXNzPVwiaDVwLWJveC13cmFwcGVyXCI+JyArXG4gICAgICAgICAgJyAgICA8ZGl2IGNsYXNzPVwiaDVwLXByZXNlbnRhdGlvbi13cmFwcGVyXCI+JyArXG4gICAgICAgICAgJyAgICAgIDxkaXYgY2xhc3M9XCJoNXAta2V5d29yZHMtd3JhcHBlclwiPjwvZGl2PicgK1xuICAgICAgICAgICcgICAgIDxkaXYgY2xhc3M9XCJoNXAtc2xpZGVzLXdyYXBwZXJcIiBhcmlhLWxpdmU9XCJwb2xpdGVcIj48L2Rpdj4nICtcbiAgICAgICAgICAnICAgIDwvZGl2PicgK1xuICAgICAgICAgICcgIDwvZGl2PicgK1xuICAgICAgICAgICcgIDxuYXYgY2xhc3M9XCJoNXAtY3AtbmF2aWdhdGlvblwiPicgK1xuICAgICAgICAgICcgICAgPG9sIGNsYXNzPVwiaDVwLXByb2dyZXNzYmFyIGxpc3QtdW5zdHlsZWRcIj48L29sPicgK1xuICAgICAgICAgICcgIDwvbmF2PicgK1xuICAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJoNXAtZm9vdGVyXCI+PC9kaXY+JyArXG4gICAgICAgICAgJzwvZGl2Pic7XG5cbiAgJGNvbnRhaW5lclxuICAgIC5hdHRyKCdyb2xlJywgJ2FwcGxpY2F0aW9uJylcbiAgICAuYWRkQ2xhc3MoJ2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uJylcbiAgICAuaHRtbChodG1sKTtcblxuICB0aGlzLiRjb250YWluZXIgPSAkY29udGFpbmVyO1xuICB0aGlzLiRzbGlkZUFubm91bmNlciA9ICRjb250YWluZXIuZmluZCgnLmg1cC1jdXJyZW50LXNsaWRlLWFubm91bmNlcicpO1xuICB0aGlzLiRmdWxsc2NyZWVuQW5ub3VuY2VyID0gJGNvbnRhaW5lci5maW5kKCcuaDVwLWZ1bGxzY3JlZW4tYW5ub3VuY2VyJyk7XG4gIHRoaXMuJHNsaWRlVG9wID0gdGhpcy4kc2xpZGVBbm5vdW5jZXIubmV4dCgpO1xuICB0aGlzLiR3cmFwcGVyID0gJGNvbnRhaW5lci5jaGlsZHJlbignLmg1cC13cmFwcGVyJykuZm9jdXMoZnVuY3Rpb24gKCkge1xuICAgIHRoYXQuaW5pdEtleUV2ZW50cygpO1xuICB9KS5ibHVyKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhhdC5rZXlkb3duICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIEg1UC5qUXVlcnkoJ2JvZHknKS51bmJpbmQoJ2tleWRvd24nLCB0aGF0LmtleWRvd24pO1xuICAgICAgZGVsZXRlIHRoYXQua2V5ZG93bjtcbiAgICB9XG4gIH0pLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciAkdGFyZ2V0ID0gSDVQLmpRdWVyeShldmVudC50YXJnZXQpO1xuXG4gICAgLypcbiAgICAgKiBBZGQgZm9jdXMgdG8gdGhlIHdyYXBwZXIgc28gdGhhdCBpdCBtYXkgY2FwdHVyZSBrZXlib2FyZCBldmVudHMgdW5sZXNzXG4gICAgICogdGhlIHRhcmdldCBvciBvbmUgb2YgaXRzIHBhcmVudHMgc2hvdWxkIGhhbmRsZSBmb2N1cyB0aGVtc2VsdmVzLlxuICAgICAqL1xuICAgIGNvbnN0IGlzRm9jdXNhYmxlRWxlbWVudCA9IHRoYXQuYmVsb25nc1RvVGFnTmFtZShcbiAgICAgIGV2ZW50LnRhcmdldCwgWydpbnB1dCcsICd0ZXh0YXJlYScsICdhJywgJ2J1dHRvbiddLCBldmVudC5jdXJyZW50VGFyZ2V0KTtcbiAgICAvLyBEb2VzIHRoZSB0YXJnZXQgZWxlbWVudCBoYXZlIGEgdGFiSW5kZXggc2V0P1xuICAgIGNvbnN0IGhhc1RhYkluZGV4ID0gKGV2ZW50LnRhcmdldC50YWJJbmRleCAhPT0gLTEpO1xuICAgIC8vIFRoZSBkaWFsb2cgY29udGFpbmVyIChpZiB3aXRoaW4gYSBkaWFsb2cpXG4gICAgY29uc3QgJGRpYWxvZ1BhcmVudCA9ICR0YXJnZXQuY2xvc2VzdCgnLmg1cC1wb3B1cC1jb250YWluZXInKTtcbiAgICAvLyBJcyB0YXJnZXQgd2l0aGluIGEgZGlhbG9nXG4gICAgY29uc3QgaXNXaXRoaW5EaWFsb2cgPSAkZGlhbG9nUGFyZW50Lmxlbmd0aCAhPT0gMDtcblxuICAgIGlmICghaXNGb2N1c2FibGVFbGVtZW50ICYmICFoYXNUYWJJbmRleCAmJiAhdGhhdC5lZGl0b3IpIHtcbiAgICAgIGlmICghaXNXaXRoaW5EaWFsb2cpIHtcbiAgICAgICAgLy8gV2UncmUgbm90IHdpdGhpbiBhIGRpYWxvZywgc28gd2UgY2FuIHNlYWZlbHkgcHV0IGZvY3VzIG9uIHdyYXBwZXJcbiAgICAgICAgdGhhdC4kd3JhcHBlci5mb2N1cygpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGNsb3Nlc3QgdGFiYmFibGUgcGFyZW50IGVsZW1lbnRcbiAgICAgICAgY29uc3QgJHRhYmJhYmxlID0gJHRhcmdldC5jbG9zZXN0KCdbdGFiaW5kZXhdJyk7XG4gICAgICAgIC8vIElzIHRoZSBwYXJlbnQgdGFiYmFibGUgZWxlbWVudCBpbnNpZGUgdGhlIHBvcHVwP1xuICAgICAgICBpZiAoJHRhYmJhYmxlLmNsb3Nlc3QoJy5oNXAtcG9wdXAtY29udGFpbmVyJykubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgLy8gV2UnbGwgc2V0IGZvY3VzIGhlcmVcbiAgICAgICAgICAkdGFiYmFibGUuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBGYWxsYmFjazogc2V0IGZvY3VzIG9uIGNsb3NlIGJ1dHRvblxuICAgICAgICAgICRkaWFsb2dQYXJlbnQuZmluZCgnLmg1cC1jbG9zZS1wb3B1cCcpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhhdC5wcmVzZW50YXRpb24ua2V5d29yZExpc3RFbmFibGVkICYmXG4gICAgICAgICF0aGF0LnByZXNlbnRhdGlvbi5rZXl3b3JkTGlzdEFsd2F5c1Nob3cgJiZcbiAgICAgICAgdGhhdC5wcmVzZW50YXRpb24ua2V5d29yZExpc3RBdXRvSGlkZSAmJlxuICAgICAgICAhJHRhcmdldC5pcygndGV4dGFyZWEsIC5oNXAtaWNvbi1wZW5jaWwsIHNwYW4nKSkge1xuICAgICAgdGhhdC5oaWRlS2V5d29yZHMoKTsgLy8gQXV0by1oaWRlIGtleXdvcmRzXG4gICAgfVxuICB9KTtcblxuICB0aGlzLm9uKCdleGl0RnVsbFNjcmVlbicsICgpID0+IHtcbiAgICB0aGlzLiRmb290ZXIucmVtb3ZlQ2xhc3MoJ2Zvb3Rlci1mdWxsLXNjcmVlbicpO1xuICAgIHRoaXMuJGZ1bGxTY3JlZW5CdXR0b24uYXR0cigndGl0bGUnLCB0aGlzLmwxMG4uZnVsbHNjcmVlbik7XG4gICAgdGhpcy4kZnVsbHNjcmVlbkFubm91bmNlci5odG1sKHRoaXMubDEwbi5hY2Nlc3NpYmlsaXR5RXhpdGVkRnVsbHNjcmVlbik7XG4gIH0pO1xuXG4gIHRoaXMub24oJ2VudGVyRnVsbFNjcmVlbicsICgpID0+IHtcbiAgICB0aGlzLiRmdWxsc2NyZWVuQW5ub3VuY2VyLmh0bWwodGhpcy5sMTBuLmFjY2Vzc2liaWxpdHlFbnRlcmVkRnVsbHNjcmVlbik7XG4gIH0pO1xuXG4gIC8vIEdldCBpbnRlbmRlZCBiYXNlIHdpZHRoIGZyb20gQ1NTLlxuICB2YXIgd3JhcHBlcldpZHRoID0gcGFyc2VJbnQodGhpcy4kd3JhcHBlci5jc3MoJ3dpZHRoJykpO1xuICB0aGlzLndpZHRoID0gd3JhcHBlcldpZHRoICE9PSAwID8gd3JhcHBlcldpZHRoIDogNjQwO1xuXG4gIHZhciB3cmFwcGVySGVpZ2h0ID0gcGFyc2VJbnQodGhpcy4kd3JhcHBlci5jc3MoJ2hlaWdodCcpKTtcbiAgdGhpcy5oZWlnaHQgPSB3cmFwcGVySGVpZ2h0ICE9PSAwID8gd3JhcHBlckhlaWdodCA6IDQwMDtcblxuICB0aGlzLnJhdGlvID0gMTYvOTtcbiAgLy8gSW50ZW5kZWQgYmFzZSBmb250IHNpemUgY2Fubm90IGJlIHJlYWQgZnJvbSBDU1MsIGFzIGl0IG1pZ2h0IGJlIG1vZGlmaWVkXG4gIC8vIGJ5IG1vYmlsZSBicm93c2VycyBhbHJlYWR5LiAoVGhlIEFuZHJvaWQgbmF0aXZlIGJyb3dzZXIgZG9lcyB0aGlzLilcbiAgdGhpcy5mb250U2l6ZSA9IDE2O1xuXG4gIHRoaXMuJGJveFdyYXBwZXIgPSB0aGlzLiR3cmFwcGVyLmNoaWxkcmVuKCcuaDVwLWJveC13cmFwcGVyJyk7XG4gIHZhciAkcHJlc2VudGF0aW9uV3JhcHBlciA9IHRoaXMuJGJveFdyYXBwZXIuY2hpbGRyZW4oJy5oNXAtcHJlc2VudGF0aW9uLXdyYXBwZXInKTtcbiAgdGhpcy4kc2xpZGVzV3JhcHBlciA9ICRwcmVzZW50YXRpb25XcmFwcGVyLmNoaWxkcmVuKCcuaDVwLXNsaWRlcy13cmFwcGVyJyk7XG4gIHRoaXMuJGtleXdvcmRzV3JhcHBlciA9ICRwcmVzZW50YXRpb25XcmFwcGVyLmNoaWxkcmVuKCcuaDVwLWtleXdvcmRzLXdyYXBwZXInKTtcbiAgdGhpcy4kcHJvZ3Jlc3NiYXIgPSB0aGlzLiR3cmFwcGVyLmZpbmQoJy5oNXAtcHJvZ3Jlc3NiYXInKTtcbiAgdGhpcy4kZm9vdGVyID0gdGhpcy4kd3JhcHBlci5jaGlsZHJlbignLmg1cC1mb290ZXInKTtcblxuICAvLyBEZXRlcm1pbmUgaWYga2V5d29yZHMgcGFuZSBzaG91bGQgYmUgaW5pdGlhbGl6ZWRcbiAgdGhpcy5pbml0S2V5d29yZHMgPSAodGhpcy5wcmVzZW50YXRpb24ua2V5d29yZExpc3RFbmFibGVkID09PSB1bmRlZmluZWQgfHwgdGhpcy5wcmVzZW50YXRpb24ua2V5d29yZExpc3RFbmFibGVkID09PSB0cnVlIHx8IHRoaXMuZWRpdG9yICE9PSB1bmRlZmluZWQpO1xuICBpZiAodGhpcy5hY3RpdmVTdXJmYWNlICYmIHRoaXMuZWRpdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmluaXRLZXl3b3JkcyA9IGZhbHNlO1xuICAgIHRoaXMuJGJveFdyYXBwZXIuY3NzKCdoZWlnaHQnLCAnMTAwJScpO1xuICB9XG4gIHRoaXMuaXNTb2x1dGlvbk1vZGUgPSBmYWxzZTtcblxuICAvLyBDcmVhdGUgc2xpZGVzIGFuZCByZXRyaWV2ZSBrZXl3b3JkIHRpdGxlIGRldGFpbHNcbiAgdGhpcy5jcmVhdGVTbGlkZXMoKTtcblxuICAvLyBXZSBoYXZlIGFsd2F5cyBhdHRhY2hlZCBhbGwgZWxlbWVudHMgb24gY3VycmVudCBzbGlkZVxuICB0aGlzLmVsZW1lbnRzQXR0YWNoZWRbdGhpcy5jdXJyZW50U2xpZGVJbmRleF0gPSB0cnVlO1xuXG4gIC8vIERldGVybWluZSBpZiBzdW1tYXJ5IHNsaWRlIHNob3VsZCBiZSBhZGRlZFxuICB2YXIgJHN1bW1hcnlTbGlkZTtcbiAgdGhpcy5zaG93U3VtbWFyeVNsaWRlID0gZmFsc2U7XG4gIGlmICh0aGlzLmhpZGVTdW1tYXJ5U2xpZGUpIHtcbiAgICAvLyBBbHdheXMgaGlkZVxuICAgIHRoaXMuc2hvd1N1bW1hcnlTbGlkZSA9ICF0aGlzLmhpZGVTdW1tYXJ5U2xpZGU7XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gRGV0ZXJtaW5lIGJ5IGNoZWNraW5nIGZvciBzbGlkZXMgd2l0aCB0YXNrc1xuICAgIHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzbGlkZSkge1xuICAgICAgdGhhdC5zaG93U3VtbWFyeVNsaWRlID0gc2xpZGUubGVuZ3RoO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKCh0aGlzLmVkaXRvciA9PT0gdW5kZWZpbmVkKSAmJiAodGhpcy5zaG93U3VtbWFyeVNsaWRlIHx8IHRoaXMuaGFzQW5zd2VyRWxlbWVudHMpKSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBzdW1tYXJ5IHNsaWRlXG4gICAgdmFyIHN1bW1hcnlTbGlkZVBhcmFtcyA9IHtcbiAgICAgIGVsZW1lbnRzOiBbXSxcbiAgICAgIGtleXdvcmRzOiBbXVxuICAgIH07XG4gICAgdGhpcy5zbGlkZXMucHVzaChzdW1tYXJ5U2xpZGVQYXJhbXMpO1xuXG4gICAgJHN1bW1hcnlTbGlkZSA9IEg1UC5qUXVlcnkoU2xpZGUuY3JlYXRlSFRNTChzdW1tYXJ5U2xpZGVQYXJhbXMpKS5hcHBlbmRUbyh0aGlzLiRzbGlkZXNXcmFwcGVyKTtcbiAgICAkc3VtbWFyeVNsaWRlLmFkZENsYXNzKCdoNXAtc3VtbWFyeS1zbGlkZScpO1xuXG4gICAgaWYgKHRoaXMuaXNDdXJyZW50U2xpZGUodGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkpIHtcbiAgICAgIHRoaXMuJGN1cnJlbnQgPSAkc3VtbWFyeVNsaWRlO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGtleXdvcmRNZW51Q29uZmlnID0gdGhpcy5nZXRLZXl3b3JkTWVudUNvbmZpZygpO1xuXG4gIC8vIERvIG5vdCBzaG93IGtleXdvcmRzIHBhbmUgaWYgaXQncyBlbXB0eSBhbmQgdGhlcmUncyBubyBlZGl0b3IhXG4gIGlmIChrZXl3b3JkTWVudUNvbmZpZy5sZW5ndGggPiAwIHx8IHRoaXMuaXNFZGl0b3IoKSkge1xuICAgIC8vIEluaXRpYWxpemUga2V5d29yZCB0aXRsZXNcbiAgICB0aGlzLmtleXdvcmRNZW51LmluaXQoa2V5d29yZE1lbnVDb25maWcpO1xuICAgIHRoaXMua2V5d29yZE1lbnUub24oJ3NlbGVjdCcsIGV2ZW50ID0+IHRoaXMua2V5d29yZENsaWNrKGV2ZW50LmRhdGEuaW5kZXgpKTtcbiAgICB0aGlzLmtleXdvcmRNZW51Lm9uKCdjbG9zZScsICgpID0+IHRoaXMuaGlkZUtleXdvcmRzKCkpO1xuICAgIHRoaXMua2V5d29yZE1lbnUub24oJ3NlbGVjdCcsICgpID0+IHtcbiAgICAgIHRoaXMuJGN1cnJlbnRLZXl3b3JkID0gdGhpcy4ka2V5d29yZHMuY2hpbGRyZW4oJy5oNXAtY3VycmVudCcpO1xuICAgIH0pO1xuXG4gICAgdGhpcy4ka2V5d29yZHMgPSAkKHRoaXMua2V5d29yZE1lbnUuZ2V0RWxlbWVudCgpKS5hcHBlbmRUbyh0aGlzLiRrZXl3b3Jkc1dyYXBwZXIpO1xuICAgIHRoaXMuJGN1cnJlbnRLZXl3b3JkID0gdGhpcy4ka2V5d29yZHMuY2hpbGRyZW4oJy5oNXAtY3VycmVudCcpO1xuXG4gICAgdGhpcy5zZXRLZXl3b3Jkc09wYWNpdHkodGhpcy5wcmVzZW50YXRpb24ua2V5d29yZExpc3RPcGFjaXR5ID09PSB1bmRlZmluZWQgPyA5MCA6IHRoaXMucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0T3BhY2l0eSk7XG5cbiAgICBpZiAodGhpcy5wcmVzZW50YXRpb24ua2V5d29yZExpc3RBbHdheXNTaG93KSB7XG4gICAgICB0aGlzLnNob3dLZXl3b3JkcygpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICAvLyBSZW1vdmUga2V5d29yZCB0aXRsZXMgY29tcGxldGVseVxuICAgIHRoaXMuJGtleXdvcmRzV3JhcHBlci5yZW1vdmUoKTtcblxuICAgIC8vIERvIG5vdCBzaG93IGtleXdvcmRzIHBhbmUgaWYgaXQncyBlbXB0eSBhbmQgdGhlcmUncyBubyBlZGl0b3IhXG4gICAgdGhpcy5pbml0S2V5d29yZHMgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICh0aGlzLmVkaXRvciAhPT0gdW5kZWZpbmVkIHx8ICF0aGlzLmFjdGl2ZVN1cmZhY2UpIHtcbiAgICAvLyBJbml0aWFsaXplIHRvdWNoIGV2ZW50c1xuICAgIHRoaXMuaW5pdFRvdWNoRXZlbnRzKCk7XG5cbiAgICAvLyBpbml0IG5hdmlnYXRpb24gbGluZVxuICAgIHRoaXMubmF2aWdhdGlvbkxpbmUgPSBuZXcgTmF2aWdhdGlvbkxpbmUodGhpcyk7XG5cbiAgICAvLyBTZXQgc2xpZGUgdGl0bGUgaWYgaW5pdGluZyBvbiBzbGlkZSAwXG4gICAgaWYgKCF0aGlzLnByZXZpb3VzU3RhdGUgfHwgIXRoaXMucHJldmlvdXNTdGF0ZS5wcm9ncmVzcykge1xuICAgICAgdGhpcy5zZXRTbGlkZU51bWJlckFubm91bmNlcigwLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgdGhpcy5zdW1tYXJ5U2xpZGVPYmplY3QgPSBuZXcgU3VtbWFyeVNsaWRlKHRoaXMsICRzdW1tYXJ5U2xpZGUpO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMuJHByb2dyZXNzYmFyLmFkZCh0aGlzLiRmb290ZXIpLnJlbW92ZSgpO1xuXG4gICAgaWYgKEg1UC5mdWxsc2NyZWVuU3VwcG9ydGVkKSB7XG4gICAgICAvLyBDcmVhdGUgZnVsbCBzY3JlZW4gYnV0dG9uXG4gICAgICB0aGlzLiRmdWxsU2NyZWVuQnV0dG9uID0gSDVQLmpRdWVyeSgnPGRpdi8+Jywge1xuICAgICAgICAnY2xhc3MnOiAnaDVwLXRvZ2dsZS1mdWxsLXNjcmVlbicsXG4gICAgICAgIHRpdGxlOiB0aGlzLmwxMG4uZnVsbHNjcmVlbixcbiAgICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgICAgIHRhYmluZGV4OiAwLFxuICAgICAgICBhcHBlbmRUbzogdGhpcy4kd3JhcHBlclxuICAgICAgfSk7XG5cbiAgICAgIGFkZENsaWNrQW5kS2V5Ym9hcmRMaXN0ZW5lcnModGhpcy4kZnVsbFNjcmVlbkJ1dHRvbiwgKCkgPT4gdGhhdC50b2dnbGVGdWxsU2NyZWVuKCkpO1xuICAgIH1cbiAgfVxuXG4gIG5ldyBTbGlkZUJhY2tncm91bmQodGhpcyk7XG5cbiAgaWYgKHRoaXMucHJldmlvdXNTdGF0ZSAmJiB0aGlzLnByZXZpb3VzU3RhdGUucHJvZ3Jlc3MpIHtcbiAgICB0aGlzLmp1bXBUb1NsaWRlKHRoaXMucHJldmlvdXNTdGF0ZS5wcm9ncmVzcywgZmFsc2UsIG51bGwsIGZhbHNlLCB0cnVlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgb3Igb25lIG9mIGl0cyBwYXJlbnRzIGhhcyBhIHBhcnRpY3VsYXIgdGFnIG5hbWUuXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZSBOb2RlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHRhZ05hbWVzIFRhZyBuYW1lKHMpLlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW3N0b3BdIE9wdGlvbmFsIG5vZGUgdG8gc3RvcC4gRGVmYXVsdHMgdG8gYm9keSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSwgaWYgbm9kZSBiZWxvbmdzIHRvIGEgbm9kZSB3aXRoIG9uZSBvZiB0aGUgdGFnIG5hbWVzLlxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmJlbG9uZ3NUb1RhZ05hbWUgPSBmdW5jdGlvbiAobm9kZSwgdGFnTmFtZXMsIHN0b3ApIHtcbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gU3RvcCBjaGVjayBhdCBET00gdHJlZSByb290XG4gIHN0b3AgPSBzdG9wIHx8IGRvY3VtZW50LmJvZHk7XG5cbiAgaWYgKHR5cGVvZiB0YWdOYW1lcyA9PT0gJ3N0cmluZycpIHtcbiAgICB0YWdOYW1lcyA9IFt0YWdOYW1lc107XG4gIH1cbiAgdGFnTmFtZXMgPSB0YWdOYW1lcy5tYXAodGFnTmFtZSA9PiB0YWdOYW1lLnRvTG93ZXJDYXNlKCkpO1xuXG4gIGNvbnN0IHRhZ05hbWUgPSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKHRhZ05hbWVzLmluZGV4T2YodGFnTmFtZSkgIT09IC0xKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBIYXZpbmcgc3RvcCBjYW4gcHJldmVudCBhbHdheXMgcGFyc2luZyBET00gdHJlZSB0byByb290XG4gIGlmIChzdG9wID09PSBub2RlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuYmVsb25nc1RvVGFnTmFtZShub2RlLnBhcmVudE5vZGUsIHRhZ05hbWVzLCBzdG9wKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyBvbGQgbWVudSBpdGVtcywgYW5kIGNyZWF0ZSBuZXcgb25lcyBmcm9tIHNsaWRlcy5cbiAqIFJldHVybnMgbWVudSBpdGVtcyBhcyBqUXVlcnlcbiAqXG4gKiBAcmV0dXJuIHtqUXVlcnl9XG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUudXBkYXRlS2V5d29yZE1lbnVGcm9tU2xpZGVzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmtleXdvcmRNZW51LnJlbW92ZUFsbE1lbnVJdGVtRWxlbWVudHMoKTtcbiAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRLZXl3b3JkTWVudUNvbmZpZygpO1xuICByZXR1cm4gJCh0aGlzLmtleXdvcmRNZW51LmluaXQoY29uZmlnKSk7XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlcyBhIGtleXdvcmQgbWVudSBjb25maWcgYmFzZWQgb24gdGhlIHNsaWRlcyBwYXJhbWV0ZXJzXG4gKlxuICogQHJldHVybiB7S2V5d29yZE1lbnVJdGVtQ29uZmlnW119XG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuZ2V0S2V5d29yZE1lbnVDb25maWcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnNsaWRlc1xuICAgIC5tYXAoKHNsaWRlLCBpbmRleCkgPT4gKHtcbiAgICAgIHRpdGxlOiB0aGlzLmNyZWF0ZVNsaWRlVGl0bGUoc2xpZGUpLFxuICAgICAgc3VidGl0bGU6IGAke3RoaXMubDEwbi5zbGlkZX0gJHtpbmRleCArIDF9YCxcbiAgICAgIGluZGV4XG4gICAgfSkpXG4gICAgLmZpbHRlcihjb25maWcgPT4gY29uZmlnLnRpdGxlICE9PSBLRVlXT1JEX1RJVExFX1NLSVApO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzbGlkZSB0aXRsZSwgb3IgXCJObyB0aXRsZVwiIGlmIGluc2lkZSBlZGl0b3Igd2l0aG91dCB0aXRsZVxuICpcbiAqIEByZXR1cm4ge3N0cmluZ3xudWxsfVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmNyZWF0ZVNsaWRlVGl0bGUgPSBmdW5jdGlvbiAoc2xpZGUpIHtcbiAgY29uc3QgZmFsbGJhY2tUaXRsZUZvckVkaXRvciA9IHRoaXMuaXNFZGl0b3IoKSA/IHRoaXMubDEwbi5ub1RpdGxlIDogS0VZV09SRF9USVRMRV9TS0lQO1xuICByZXR1cm4gdGhpcy5oYXNLZXl3b3JkcyhzbGlkZSkgPyBzbGlkZS5rZXl3b3Jkc1swXS5tYWluIDogZmFsbGJhY2tUaXRsZUZvckVkaXRvcjtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGluc2lkZSB0aGUgZWRpdG9yXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5pc0VkaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZWRpdG9yICE9PSB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIHNsaWRlIGhhcyBrZXl3b3Jkc1xuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBzbGlkZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5oYXNLZXl3b3JkcyA9IGZ1bmN0aW9uIChzbGlkZSkge1xuICByZXR1cm4gc2xpZGUua2V5d29yZHMgIT09IHVuZGVmaW5lZCAmJiBzbGlkZS5rZXl3b3Jkcy5sZW5ndGggPiAwO1xufTtcblxuXG4vKipcbiAqIENyZWF0ZSBzbGlkZXNcbiAqIFNsaWRlcyBhcmUgZGlyZWN0bHkgYXR0YWNoZWQgdG8gdGhlIHNsaWRlcyB3cmFwcGVyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHNsaWRlc1BhcmFtc1xuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmNyZWF0ZVNsaWRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGYuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpc0N1cnJlbnRTbGlkZSA9IChpID09PSBzZWxmLmN1cnJlbnRTbGlkZUluZGV4KTtcblxuICAgIC8vIENyZWF0ZSBhbmQgYXBwZW5kIERPTSBFbGVtZW50c1xuICAgIHNlbGYuY2hpbGRyZW5baV0uZ2V0RWxlbWVudCgpLmFwcGVuZFRvKHNlbGYuJHNsaWRlc1dyYXBwZXIpO1xuXG4gICAgaWYgKGlzQ3VycmVudFNsaWRlKSB7XG4gICAgICBzZWxmLmNoaWxkcmVuW2ldLnNldEN1cnJlbnQoKTtcbiAgICB9XG5cbiAgICBpZiAoc2VsZi5pc0VkaXRvcigpIHx8IGkgPT09IDAgfHwgaSA9PT0gMSB8fCBpc0N1cnJlbnRTbGlkZSkge1xuICAgICAgc2VsZi5jaGlsZHJlbltpXS5hcHBlbmRFbGVtZW50cygpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBEb2VzIGFuIG9iamVjdCBoYXZlIGZ1bmN0aW9ucyB0byBkZXRlcm1pbmUgdGhlIHNjb3JlXG4gKlxuICogQHB1YmxpY1xuICogQHBhcmFtIG9iaiBUaGUgb2JqZWN0IHRvIGludmVzdGlnYXRlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5oYXNTY29yZURhdGEgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiAoXG4gICAgKHR5cGVvZiBvYmogIT09IHR5cGVvZiB1bmRlZmluZWQpICYmXG4gICAgKHR5cGVvZiBvYmouZ2V0U2NvcmUgPT09ICdmdW5jdGlvbicpICYmXG4gICAgKHR5cGVvZiBvYmouZ2V0TWF4U2NvcmUgPT09ICdmdW5jdGlvbicpXG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgY29tYmluZWQgc2NvcmUgb2YgYWxsIGNoaWxkcmVuXG4gKlxuICogQHB1YmxpY1xuICogQHJldHVybnMge051bWJlcn1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5nZXRTY29yZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHJldHVybiBmbGF0dGVuQXJyYXkoc2VsZi5zbGlkZXNXaXRoU29sdXRpb25zKS5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgc2xpZGUpIHtcbiAgICByZXR1cm4gc3VtICsgKHNlbGYuaGFzU2NvcmVEYXRhKHNsaWRlKSA/IHNsaWRlLmdldFNjb3JlKCkgOiAwKTtcbiAgfSwgMCk7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgY29tYmluZWQgbWF4U2NvcmUgb2YgYWxsIGNoaWxkcmVuXG4gKlxuICogQHB1YmxpY1xuICogQHJldHVybnMge051bWJlcn1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5nZXRNYXhTY29yZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHJldHVybiBmbGF0dGVuQXJyYXkoc2VsZi5zbGlkZXNXaXRoU29sdXRpb25zKS5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgc2xpZGUpIHtcbiAgICByZXR1cm4gc3VtICsgKHNlbGYuaGFzU2NvcmVEYXRhKHNsaWRlKSA/IHNsaWRlLmdldE1heFNjb3JlKCkgOiAwKTtcbiAgfSwgMCk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGZlZWRiYWNrIGljb25zIGZvciB0aGUgcHJvZ3JlcyBiYXIuXG4gKlxuICogQHBhcmFtIHthcnJheX0gW3NsaWRlU2NvcmVzXVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnNldFByb2dyZXNzQmFyRmVlZGJhY2sgPSBmdW5jdGlvbiAoc2xpZGVTY29yZXMpIHtcbiAgaWYgKHNsaWRlU2NvcmVzICE9PSB1bmRlZmluZWQgJiYgc2xpZGVTY29yZXMpIHtcbiAgICAvLyBTZXQgZmVlZGJhY2sgaWNvbnMgZm9yIHByb2dyZXNzIGJhci5cbiAgICBzbGlkZVNjb3Jlcy5mb3JFYWNoKHNpbmdsZVNsaWRlID0+IHtcbiAgICAgIGNvbnN0ICRpbmRpY2F0b3IgPSB0aGlzLnByb2dyZXNzYmFyUGFydHNbc2luZ2xlU2xpZGUuc2xpZGUtMV1cbiAgICAgICAgLmZpbmQoJy5oNXAtcHJvZ3Jlc3NiYXItcGFydC1oYXMtdGFzaycpO1xuXG4gICAgICBpZiAoJGluZGljYXRvci5oYXNDbGFzcygnaDVwLWFuc3dlcmVkJykpIHtcbiAgICAgICAgY29uc3QgaXNDb3JyZWN0ID0gc2luZ2xlU2xpZGUuc2NvcmUgPj0gc2luZ2xlU2xpZGUubWF4U2NvcmU7XG4gICAgICAgICRpbmRpY2F0b3IuYWRkQ2xhc3MoaXNDb3JyZWN0ID8gJ2g1cC1pcy1jb3JyZWN0JyA6ICdoNXAtaXMtd3JvbmcnKTtcblxuICAgICAgICB0aGlzLm5hdmlnYXRpb25MaW5lLnVwZGF0ZVNsaWRlVGl0bGUoc2luZ2xlU2xpZGUuc2xpZGUgLSAxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBSZW1vdmUgYWxsIGZlZWRiYWNrIGljb25zLlxuICAgIHRoaXMucHJvZ3Jlc3NiYXJQYXJ0cy5mb3JFYWNoKHBiUGFydCA9PiB7XG4gICAgICBwYlBhcnQuZmluZCgnLmg1cC1wcm9ncmVzc2Jhci1wYXJ0LWhhcy10YXNrJylcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdoNXAtaXMtY29ycmVjdCcpXG4gICAgICAgIC5yZW1vdmVDbGFzcygnaDVwLWlzLXdyb25nJyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogVG9nZ2xlIGtleXdvcmRzIGxpc3Qgb24vb2ZmIGRlcGVuZGluZyBvbiBjdXJyZW50IHN0YXRlXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUudG9nZ2xlS2V5d29yZHMgPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGtleXdvcmRzQXJlU2hvd2luZyA9IHRoaXMuJGtleXdvcmRzV3JhcHBlci5oYXNDbGFzcygnaDVwLW9wZW4nKTtcbiAgdGhpc1trZXl3b3Jkc0FyZVNob3dpbmcgPyAnaGlkZUtleXdvcmRzJyA6ICdzaG93S2V5d29yZHMnXSgpO1xufTtcblxuLyoqXG4gKiBIaWRlIGtleXdvcmRzXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuaGlkZUtleXdvcmRzID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy4ka2V5d29yZHNXcmFwcGVyLmhhc0NsYXNzKCdoNXAtb3BlbicpKSB7XG4gICAgaWYgKHRoaXMuJGtleXdvcmRzQnV0dG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuJGtleXdvcmRzQnV0dG9uLmF0dHIoJ3RpdGxlJywgdGhpcy5sMTBuLnNob3dLZXl3b3Jkcyk7XG4gICAgICB0aGlzLiRrZXl3b3Jkc0J1dHRvbi5hdHRyKCdhcmlhLWxhYmVsJywgdGhpcy5sMTBuLnNob3dLZXl3b3Jkcyk7XG4gICAgICB0aGlzLiRrZXl3b3Jkc0J1dHRvbi5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICB0aGlzLiRrZXl3b3Jkc0J1dHRvbi5mb2N1cygpO1xuICAgIH1cbiAgICB0aGlzLiRrZXl3b3Jkc1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2g1cC1vcGVuJyk7XG4gIH1cbn07XG5cbi8qKlxuICogU2hvdyBrZXl3b3Jkc1xuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnNob3dLZXl3b3JkcyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuJGtleXdvcmRzV3JhcHBlci5oYXNDbGFzcygnaDVwLW9wZW4nKSkge1xuICAgIC8vIEFscmVhZHkgc2hvd2luZ1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLiRrZXl3b3Jkc0J1dHRvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy4ka2V5d29yZHNCdXR0b24uYXR0cigndGl0bGUnLCB0aGlzLmwxMG4uaGlkZUtleXdvcmRzKTtcbiAgICB0aGlzLiRrZXl3b3Jkc0J1dHRvbi5hdHRyKCdhcmlhLWxhYmVsJywgdGhpcy5sMTBuLmhpZGVLZXl3b3Jkcyk7XG4gICAgdGhpcy4ka2V5d29yZHNCdXR0b24uYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gIH1cbiAgdGhpcy4ka2V5d29yZHNXcmFwcGVyLmFkZENsYXNzKCdoNXAtb3BlbicpO1xuXG4gIC8vIERvIG5vdCBmb2N1cyBpZiBhbHdheXMgc2hvd2luZ1xuICBpZiAoIXRoaXMucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0QWx3YXlzU2hvdykge1xuICAgIHRoaXMuJGtleXdvcmRzV3JhcHBlci5maW5kKCdsaVt0YWJpbmRleD1cIjBcIl0nKS5mb2N1cygpO1xuICB9XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgYmFja2dyb3VuZCBvcGFjaXR5IG9mIHRoZSBrZXl3b3JkcyBsaXN0LlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAwIC0gMTAwXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuc2V0S2V5d29yZHNPcGFjaXR5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGNvbnN0IFtyZWQsIGdyZWVuLCBibHVlXSA9IHRoaXMuJGtleXdvcmRzV3JhcHBlci5jc3MoJ2JhY2tncm91bmQtY29sb3InKS5tYXRjaCgvXFxkKy9nKSB8fCAnJztcbiAgdGhpcy4ka2V5d29yZHNXcmFwcGVyLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGByZ2JhKCR7cmVkfSwgJHtncmVlbn0sICR7Ymx1ZX0sICR7dmFsdWUgLyAxMDB9KWApO1xufTtcblxuLyoqXG4gKiBNYWtlcyBjb250aW51b3VzIHRleHQgc21hbGxlciBpZiBpdCBkb2VzIG5vdCBmaXQgaW5zaWRlIGl0cyBjb250YWluZXIuXG4gKiBPbmx5IHdvcmtzIGluIHZpZXcgbW9kZS5cbiAqXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmZpdENUID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5lZGl0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuJGN1cnJlbnQuZmluZCgnLmg1cC1jdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHZhciBwZXJjZW50ID0gMTAwO1xuICAgIHZhciAkY3QgPSBINVAualF1ZXJ5KHRoaXMpO1xuICAgIHZhciBwYXJlbnRIZWlnaHQgPSAkY3QucGFyZW50KCkuaGVpZ2h0KCk7XG4gICAgd2hpbGUgKCRjdC5vdXRlckhlaWdodCgpID4gcGFyZW50SGVpZ2h0KSB7XG4gICAgICBwZXJjZW50LS07XG4gICAgICAkY3QuY3NzKHtcbiAgICAgICAgZm9udFNpemU6IHBlcmNlbnQgKyAnJScsXG4gICAgICAgIGxpbmVIZWlnaHQ6IChwZXJjZW50ICsgNjUpICsgJyUnXG4gICAgICB9KTtcblxuICAgICAgaWYgKHBlcmNlbnQgPCAwKSB7XG4gICAgICAgIGJyZWFrOyAvLyBKdXN0IGluIGNhc2UuXG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogUmVzaXplIGhhbmRsaW5nLlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZnVsbHNjcmVlblxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBmdWxsc2NyZWVuT24gPSB0aGlzLiRjb250YWluZXIuaGFzQ2xhc3MoJ2g1cC1mdWxsc2NyZWVuJykgfHwgdGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKCdoNXAtc2VtaS1mdWxsc2NyZWVuJyk7XG5cbiAgaWYgKHRoaXMuaWdub3JlUmVzaXplKSB7XG4gICAgcmV0dXJuOyAvLyBXaGVuIHByaW50aW5nLlxuICB9XG5cbiAgLy8gRmlsbCB1cCBhbGwgYXZhaWxhYmxlIHdpZHRoXG4gIHRoaXMuJHdyYXBwZXIuY3NzKCd3aWR0aCcsICdhdXRvJyk7XG4gIHZhciB3aWR0aCA9IHRoaXMuJGNvbnRhaW5lci53aWR0aCgpO1xuICB2YXIgc3R5bGUgPSB7fTtcblxuICBpZiAoZnVsbHNjcmVlbk9uKSB7XG4gICAgdmFyIG1heEhlaWdodCA9IHRoaXMuJGNvbnRhaW5lci5oZWlnaHQoKTtcbiAgICBpZiAod2lkdGggLyBtYXhIZWlnaHQgPiB0aGlzLnJhdGlvKSB7XG4gICAgICAvLyBUb3AgYW5kIGJvdHRvbSB3b3VsZCBiZSBjdXQgb2ZmIHNvIHNjYWxlIGRvd24uXG4gICAgICB3aWR0aCA9IG1heEhlaWdodCAqIHRoaXMucmF0aW87XG4gICAgICBzdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICB9XG4gIH1cblxuICAvLyBUT0RPOiBBZGQgc3VwcG9ydCBmb3IgLTE2IHdoZW4gY29udGVudCBjb252ZXJzaW9uIHNjcmlwdCBpcyBjcmVhdGVkP1xuICB2YXIgd2lkdGhSYXRpbyA9IHdpZHRoIC8gdGhpcy53aWR0aDtcbiAgc3R5bGUuaGVpZ2h0ID0gKHdpZHRoIC8gdGhpcy5yYXRpbykgKyAncHgnO1xuICBzdHlsZS5mb250U2l6ZSA9ICh0aGlzLmZvbnRTaXplICogd2lkdGhSYXRpbykgKyAncHgnO1xuXG4gIGlmICh0aGlzLmVkaXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5lZGl0b3Iuc2V0Q29udGFpbmVyRW0odGhpcy5mb250U2l6ZSAqIHdpZHRoUmF0aW8gKiAwLjc1KTtcbiAgfVxuXG4gIHRoaXMuJHdyYXBwZXIuY3NzKHN0eWxlKTtcblxuICB0aGlzLnN3aXBlVGhyZXNob2xkID0gd2lkdGhSYXRpbyAqIDEwMDsgLy8gRGVmYXVsdCBzd2lwZSB0aHJlc2hvbGQgaXMgNTBweC5cblxuICAvLyBSZXNpemUgZWxlbWVudHNcbiAgdmFyIGluc3RhbmNlcyA9IHRoaXMuZWxlbWVudEluc3RhbmNlc1t0aGlzLiRjdXJyZW50LmluZGV4KCldO1xuICBpZiAoaW5zdGFuY2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgc2xpZGVFbGVtZW50cyA9IHRoaXMuc2xpZGVzW3RoaXMuJGN1cnJlbnQuaW5kZXgoKV0uZWxlbWVudHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IGluc3RhbmNlc1tpXTtcbiAgICAgIGlmICgoaW5zdGFuY2UucHJldmVudFJlc2l6ZSA9PT0gdW5kZWZpbmVkIHx8IGluc3RhbmNlLnByZXZlbnRSZXNpemUgPT09IGZhbHNlKSAmJiBpbnN0YW5jZS4kICE9PSB1bmRlZmluZWQgJiYgIXNsaWRlRWxlbWVudHNbaV0uZGlzcGxheUFzQnV0dG9uKSB7XG4gICAgICAgIEg1UC50cmlnZ2VyKGluc3RhbmNlLCAncmVzaXplJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdGhpcy5maXRDVCgpO1xufTtcblxuLyoqXG4gKiBFbnRlci9leGl0IGZ1bGwgc2NyZWVuIG1vZGUuXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUudG9nZ2xlRnVsbFNjcmVlbiA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKEg1UC5pc0Z1bGxzY3JlZW4gfHwgdGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKCdoNXAtZnVsbHNjcmVlbicpIHx8IHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcygnaDVwLXNlbWktZnVsbHNjcmVlbicpKSB7XG4gICAgLy8gQ2FuY2VsIGZ1bGxzY3JlZW5cbiAgICBpZiAoSDVQLmV4aXRGdWxsU2NyZWVuICE9PSB1bmRlZmluZWQgJiYgSDVQLmZ1bGxTY3JlZW5Ccm93c2VyUHJlZml4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIEg1UC5leGl0RnVsbFNjcmVlbigpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIFVzZSBvbGQgc3lzdGVtXG4gICAgICBpZiAoSDVQLmZ1bGxTY3JlZW5Ccm93c2VyUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gQ2xpY2sgYnV0dG9uIHRvIGRpc2FibGUgZnVsbHNjcmVlblxuICAgICAgICBINVAualF1ZXJ5KCcuaDVwLWRpc2FibGUtZnVsbHNjcmVlbicpLmNsaWNrKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKEg1UC5mdWxsU2NyZWVuQnJvd3NlclByZWZpeCA9PT0gJycpIHtcbiAgICAgICAgICB3aW5kb3cudG9wLmRvY3VtZW50LmV4aXRGdWxsU2NyZWVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoSDVQLmZ1bGxTY3JlZW5Ccm93c2VyUHJlZml4ID09PSAnbXMnKSB7XG4gICAgICAgICAgd2luZG93LnRvcC5kb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgd2luZG93LnRvcC5kb2N1bWVudFtINVAuZnVsbFNjcmVlbkJyb3dzZXJQcmVmaXggKyAnQ2FuY2VsRnVsbFNjcmVlbiddKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gUmVzY2FsZSBmb290ZXIgYnV0dG9uc1xuICAgIHRoaXMuJGZvb3Rlci5hZGRDbGFzcygnZm9vdGVyLWZ1bGwtc2NyZWVuJyk7XG5cbiAgICB0aGlzLiRmdWxsU2NyZWVuQnV0dG9uLmF0dHIoJ3RpdGxlJywgdGhpcy5sMTBuLmV4aXRGdWxsc2NyZWVuKTtcbiAgICBINVAuZnVsbFNjcmVlbih0aGlzLiRjb250YWluZXIsIHRoaXMpO1xuICAgIGlmIChINVAuZnVsbFNjcmVlbkJyb3dzZXJQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gSGlkZSBkaXNhYmxlIGZ1bGwgc2NyZWVuIGJ1dHRvbi4gV2UgaGF2ZSBvdXIgb3duIVxuICAgICAgSDVQLmpRdWVyeSgnLmg1cC1kaXNhYmxlLWZ1bGxzY3JlZW4nKS5oaWRlKCk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNldCBmb2N1cy5cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy4kd3JhcHBlci5mb2N1cygpO1xufTtcblxuLyoqXG4gKiBIYW5kbGVzIGNsaWNrIG9uIGtleXdvcmRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5rZXl3b3JkQ2xpY2sgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgaWYgKHRoaXMuc2hvdWxkSGlkZUtleXdvcmRzQWZ0ZXJTZWxlY3QoKSkge1xuICAgIC8vIEF1dG8taGlkZSBrZXl3b3JkcyBsaXN0XG4gICAgdGhpcy5oaWRlS2V5d29yZHMoKTtcbiAgfVxuICB0aGlzLmp1bXBUb1NsaWRlKGluZGV4LCB0cnVlKTtcbn07XG5cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuc2hvdWxkSGlkZUtleXdvcmRzQWZ0ZXJTZWxlY3QgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnByZXNlbnRhdGlvbi5rZXl3b3JkTGlzdEVuYWJsZWQgJiZcbiAgICAhdGhpcy5wcmVzZW50YXRpb24ua2V5d29yZExpc3RBbHdheXNTaG93ICYmXG4gICAgdGhpcy5wcmVzZW50YXRpb24ua2V5d29yZExpc3RBdXRvSGlkZSAmJlxuICAgIHRoaXMuZWRpdG9yID09PSB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgb3ZlcnJpZGUgZm9yIGFsbCBhY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnNldEVsZW1lbnRzT3ZlcnJpZGUgPSBmdW5jdGlvbiAob3ZlcnJpZGUpIHtcbiAgLy8gQ3JlYXRlIGRlZmF1bHQgb2JqZWN0XG4gIHRoaXMuZWxlbWVudHNPdmVycmlkZSA9IHtcbiAgICBwYXJhbXM6IHt9XG4gIH07XG5cbiAgaWYgKG92ZXJyaWRlKSB7XG4gICAgLy8gQ3JlYXRlIGJlaGF2aW91ciBvYmplY3QgZm9yIG92ZXJyaWRpbmdcbiAgICB0aGlzLmVsZW1lbnRzT3ZlcnJpZGUucGFyYW1zLmJlaGF2aW91ciA9IHt9O1xuXG4gICAgaWYgKG92ZXJyaWRlLnNob3dTb2x1dGlvbkJ1dHRvbikge1xuICAgICAgLy8gT3ZlcnJpZGUgc2hvdyBzb2x1dGlvbnMgYnV0dG9uXG4gICAgICB0aGlzLmVsZW1lbnRzT3ZlcnJpZGUucGFyYW1zLmJlaGF2aW91ci5lbmFibGVTb2x1dGlvbnNCdXR0b24gPVxuICAgICAgICAgIChvdmVycmlkZS5zaG93U29sdXRpb25CdXR0b24gPT09ICdvbicgPyB0cnVlIDogZmFsc2UpO1xuICAgIH1cblxuICAgIGlmIChvdmVycmlkZS5yZXRyeUJ1dHRvbikge1xuICAgICAgLy8gT3ZlcnJpZGUgcmV0cnkgYnV0dG9uXG4gICAgICB0aGlzLmVsZW1lbnRzT3ZlcnJpZGUucGFyYW1zLmJlaGF2aW91ci5lbmFibGVSZXRyeSA9XG4gICAgICAgICAgKG92ZXJyaWRlLnJldHJ5QnV0dG9uID09PSAnb24nID8gdHJ1ZSA6IGZhbHNlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQXR0YWNoIGFsbCBlbGVtZW50IGluc3RhbmNlcyB0byBzbGlkZS5cbiAqXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHNsaWRlXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5hdHRhY2hFbGVtZW50cyA9IGZ1bmN0aW9uICgkc2xpZGUsIGluZGV4KSB7XG4gIGlmICh0aGlzLmVsZW1lbnRzQXR0YWNoZWRbaW5kZXhdICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47IC8vIEFscmVhZHkgYXR0YWNoZWRcbiAgfVxuXG4gIHZhciBzbGlkZSA9IHRoaXMuc2xpZGVzW2luZGV4XTtcbiAgdmFyIGluc3RhbmNlcyA9IHRoaXMuZWxlbWVudEluc3RhbmNlc1tpbmRleF07XG4gIGlmIChzbGlkZS5lbGVtZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGlkZS5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hdHRhY2hFbGVtZW50KHNsaWRlLmVsZW1lbnRzW2ldLCBpbnN0YW5jZXNbaV0sICRzbGlkZSwgaW5kZXgpO1xuICAgIH1cbiAgfVxuICB0aGlzLnRyaWdnZXIoJ2RvbUNoYW5nZWQnLCB7XG4gICAgJyR0YXJnZXQnOiAkc2xpZGUsXG4gICAgJ2xpYnJhcnknOiAnQ291cnNlUHJlc2VudGF0aW9uJyxcbiAgICAna2V5JzogJ25ld1NsaWRlJ1xuICB9LCB7J2J1YmJsZXMnOiB0cnVlLCAnZXh0ZXJuYWwnOiB0cnVlfSk7XG5cbiAgdGhpcy5lbGVtZW50c0F0dGFjaGVkW2luZGV4XSA9IHRydWU7XG59O1xuXG4vKipcbiAqIEF0dGFjaCBlbGVtZW50IHRvIHNsaWRlIGNvbnRhaW5lci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHNsaWRlXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEByZXR1cm5zIHtqUXVlcnl9XG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuYXR0YWNoRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBpbnN0YW5jZSwgJHNsaWRlLCBpbmRleCkge1xuICBjb25zdCBkaXNwbGF5QXNCdXR0b24gPSAoZWxlbWVudC5kaXNwbGF5QXNCdXR0b24gIT09IHVuZGVmaW5lZCAmJiBlbGVtZW50LmRpc3BsYXlBc0J1dHRvbik7XG4gIHZhciBidXR0b25TaXplQ2xhc3MgPSAoZWxlbWVudC5idXR0b25TaXplICE9PSB1bmRlZmluZWQgPyBcImg1cC1lbGVtZW50LWJ1dHRvbi1cIiArIGVsZW1lbnQuYnV0dG9uU2l6ZSA6IFwiXCIpO1xuICB2YXIgY2xhc3NlcyA9ICdoNXAtZWxlbWVudCcgK1xuICAgIChkaXNwbGF5QXNCdXR0b24gPyAnIGg1cC1lbGVtZW50LWJ1dHRvbi13cmFwcGVyJyA6ICcnKSArXG4gICAgKGJ1dHRvblNpemVDbGFzcy5sZW5ndGggPyAnICcgKyBidXR0b25TaXplQ2xhc3MgOiAnJyk7XG4gIHZhciAkZWxlbWVudENvbnRhaW5lciA9IEg1UC5qUXVlcnkoJzxkaXY+Jywge1xuICAgICdjbGFzcyc6IGNsYXNzZXMsXG4gIH0pLmNzcyh7XG4gICAgbGVmdDogZWxlbWVudC54ICsgJyUnLFxuICAgIHRvcDogZWxlbWVudC55ICsgJyUnLFxuICAgIHdpZHRoOiBlbGVtZW50LndpZHRoICsgJyUnLFxuICAgIGhlaWdodDogZWxlbWVudC5oZWlnaHQgKyAnJSdcbiAgfSkuYXBwZW5kVG8oJHNsaWRlKTtcblxuICBjb25zdCBpc1RyYW5zcGFyZW50ID0gZWxlbWVudC5iYWNrZ3JvdW5kT3BhY2l0eSA9PT0gdW5kZWZpbmVkIHx8IGVsZW1lbnQuYmFja2dyb3VuZE9wYWNpdHkgPT09IDA7XG4gICRlbGVtZW50Q29udGFpbmVyLnRvZ2dsZUNsYXNzKCdoNXAtdHJhbnNwYXJlbnQnLCBpc1RyYW5zcGFyZW50KTtcblxuICBpZiAoZGlzcGxheUFzQnV0dG9uKSB7XG4gICAgY29uc3QgJGJ1dHRvbiA9IHRoaXMuY3JlYXRlSW50ZXJhY3Rpb25CdXR0b24oZWxlbWVudCwgaW5zdGFuY2UpO1xuICAgICRidXR0b24uYXBwZW5kVG8oJGVsZW1lbnRDb250YWluZXIpO1xuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IGhhc0xpYnJhcnkgPSBlbGVtZW50LmFjdGlvbiAmJiBlbGVtZW50LmFjdGlvbi5saWJyYXJ5O1xuICAgIGNvbnN0IGxpYlR5cGVQbXogPSBoYXNMaWJyYXJ5ID8gdGhpcy5nZXRMaWJyYXJ5VHlwZVBteihlbGVtZW50LmFjdGlvbi5saWJyYXJ5KSA6ICdvdGhlcic7XG5cbiAgICB2YXIgJG91dGVyRWxlbWVudENvbnRhaW5lciA9IEg1UC5qUXVlcnkoJzxkaXY+Jywge1xuICAgICAgJ2NsYXNzJzogYGg1cC1lbGVtZW50LW91dGVyICR7bGliVHlwZVBten0tb3V0ZXItZWxlbWVudGBcbiAgICB9KS5jc3Moe1xuICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMjU1LDI1NSwyNTUsJyArIChlbGVtZW50LmJhY2tncm91bmRPcGFjaXR5ID09PSB1bmRlZmluZWQgPyAwIDogZWxlbWVudC5iYWNrZ3JvdW5kT3BhY2l0eSAvIDEwMCkgKyAnKSdcbiAgICB9KS5hcHBlbmRUbygkZWxlbWVudENvbnRhaW5lcik7XG5cbiAgICB2YXIgJGlubmVyRWxlbWVudENvbnRhaW5lciA9IEg1UC5qUXVlcnkoJzxkaXY+Jywge1xuICAgICAgJ2NsYXNzJzogJ2g1cC1lbGVtZW50LWlubmVyJ1xuICAgIH0pLmFwcGVuZFRvKCRvdXRlckVsZW1lbnRDb250YWluZXIpO1xuXG4gICAgLy8gSDVQLlNoYXBlIHNldHMgaXQncyBvd24gc2l6ZSB3aGVuIGxpbmUgaW4gc2VsZWN0ZWRcbiAgICBpbnN0YW5jZS5vbignc2V0LXNpemUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGZvciAobGV0IHByb3BlcnR5IGluIGV2ZW50LmRhdGEpIHtcbiAgICAgICAgJGVsZW1lbnRDb250YWluZXIuZ2V0KDApLnN0eWxlW3Byb3BlcnR5XSA9IGV2ZW50LmRhdGFbcHJvcGVydHldO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaW5zdGFuY2UuYXR0YWNoKCRpbm5lckVsZW1lbnRDb250YWluZXIpO1xuICAgIGlmIChlbGVtZW50LmFjdGlvbiAhPT0gdW5kZWZpbmVkICYmIGVsZW1lbnQuYWN0aW9uLmxpYnJhcnkuc3Vic3RyKDAsIDIwKSA9PT0gJ0g1UC5JbnRlcmFjdGl2ZVZpZGVvJykge1xuICAgICAgdmFyIGhhbmRsZUlWID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpbnN0YW5jZS4kY29udGFpbmVyLmFkZENsYXNzKCdoNXAtZnVsbHNjcmVlbicpO1xuICAgICAgICBpZiAoaW5zdGFuY2UuY29udHJvbHMuJGZ1bGxzY3JlZW4pIHtcbiAgICAgICAgICBpbnN0YW5jZS5jb250cm9scy4kZnVsbHNjcmVlbi5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5oYXNGdWxsU2NyZWVuID0gdHJ1ZTtcbiAgICAgICAgaWYgKGluc3RhbmNlLmNvbnRyb2xzLiRwbGF5Lmhhc0NsYXNzKCdoNXAtcGF1c2UnKSkge1xuICAgICAgICAgIGluc3RhbmNlLiRjb250cm9scy5hZGRDbGFzcygnaDVwLWF1dG9oaWRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaW5zdGFuY2UuZW5hYmxlQXV0b0hpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmIChpbnN0YW5jZS5jb250cm9scyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGhhbmRsZUlWKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaW5zdGFuY2Uub24oJ2NvbnRyb2xzJywgaGFuZGxlSVYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBmaXJzdCBzbGlkZSdzIHRhYmluZGV4IGZvciBiZXR0ZXIgYWNjZXNzaWJpbGl0eSBpZiB0aGVyZSBhcmUgbm8gaW50ZXJhY3Rpb25zXG4gICAgaWYgKGluZGV4ID09IDAgJiYgdGhpcy5zbGlkZXNXaXRoU29sdXRpb25zLmluZGV4T2YoaW5kZXgpIDwgMCkge1xuICAgICAgJGlubmVyRWxlbWVudENvbnRhaW5lci5hdHRyKCd0YWJpbmRleCcsICcwJyk7XG4gICAgfVxuXG4gICAgLy8gRm9yIGZpcnN0IHNsaWRlXG4gICAgdGhpcy5zZXRPdmVyZmxvd1RhYkluZGV4KCk7XG4gIH1cblxuICBpZiAodGhpcy5lZGl0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIElmIHdlJ3JlIGluIHRoZSBINVAgZWRpdG9yLCBhbGxvdyBpdCB0byBtYW5pcHVsYXRlIHRoZSBlbGVtZW50SW5zdGFuY2VzXG4gICAgdGhpcy5lZGl0b3IucHJvY2Vzc0VsZW1lbnQoZWxlbWVudCwgJGVsZW1lbnRDb250YWluZXIsIGluZGV4LCBpbnN0YW5jZSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKGVsZW1lbnQuc29sdXRpb24pIHtcbiAgICAgIHRoaXMuYWRkRWxlbWVudFNvbHV0aW9uQnV0dG9uKGVsZW1lbnQsIGluc3RhbmNlLCAkZWxlbWVudENvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgLyogV2hlbiBpbiB2aWV3IG1vZGUsIHdlIG5lZWQgdG8ga25vdyBpZiB0aGVyZSBhcmUgYW55IGFuc3dlciBlbGVtZW50cyxcbiAgICAgKiBzbyB0aGF0IHdlIGNhbiBkaXNwbGF5IHRoZSBleHBvcnQgYW5zd2VycyBidXR0b24gb24gdGhlIGxhc3Qgc2xpZGUgKi9cbiAgICB0aGlzLmhhc0Fuc3dlckVsZW1lbnRzID0gdGhpcy5oYXNBbnN3ZXJFbGVtZW50cyB8fCBpbnN0YW5jZS5leHBvcnRBbnN3ZXJzICE9PSB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gJGVsZW1lbnRDb250YWluZXI7XG59O1xuXG4vKipcbiAqIERpc2FibGVzIHRhYiBpbmRleGVzIGJlaGluZCBhIHBvcHVwIGNvbnRhaW5lclxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmRpc2FibGVUYWJJbmRleGVzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgJHBvcHVwQ29udGFpbmVyID0gdGhpcy4kY29udGFpbmVyLmZpbmQoJy5oNXAtcG9wdXAtY29udGFpbmVyJyk7XG5cbiAgdGhpcy4kdGFiYmFibGVzID0gdGhpcy4kY29udGFpbmVyLmZpbmQoJ2FbaHJlZl0sIGFyZWFbaHJlZl0sIGlucHV0Om5vdChbZGlzYWJsZWRdKSwgc2VsZWN0Om5vdChbZGlzYWJsZWRdKSwgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLCBidXR0b246bm90KFtkaXNhYmxlZF0pLCBpZnJhbWUsIG9iamVjdCwgZW1iZWQsICpbdGFiaW5kZXhdLCAqW2NvbnRlbnRlZGl0YWJsZV0nKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgIHZhciAkdGFiYmFibGUgPSAkKHRoaXMpO1xuICAgIHZhciBpbnNpZGVDb250YWluZXIgPSAkLmNvbnRhaW5zKCRwb3B1cENvbnRhaW5lci5nZXQoMCksICR0YWJiYWJsZS5nZXQoMCkpO1xuXG4gICAgLy8gdGFiSW5kZXggaGFzIGFscmVhZHkgYmVlbiBtb2RpZmllZCwga2VlcCBpdCBpbiB0aGUgc2V0LlxuICAgIGlmICgkdGFiYmFibGUuZGF0YSgndGFiaW5kZXgnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFpbnNpZGVDb250YWluZXIpIHtcbiAgICAgIC8vIFN0b3JlIGN1cnJlbnQgdGFiaW5kZXgsIHNvIHdlIGNhbiBzZXQgaXQgYmFjayB3aGVuIGRpYWxvZyBjbG9zZXNcbiAgICAgIHZhciB0YWJJbmRleCA9ICR0YWJiYWJsZS5hdHRyKCd0YWJpbmRleCcpO1xuICAgICAgJHRhYmJhYmxlLmRhdGEoJ3RhYmluZGV4JywgdGFiSW5kZXgpO1xuXG4gICAgICAvLyBNYWtlIGl0IG5vbiB0YWJiYWJsZVxuICAgICAgJHRhYmJhYmxlLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBJZiBlbGVtZW50IGlzIHBhcnQgb2YgZGlhbG9nIHdyYXBwZXIsIGp1c3QgaWdub3JlIGl0XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbn07XG5cblxuLyoqXG4gKiBSZS1lbmFibGVzIHRhYiBpbmRleGVzIGFmdGVyIGEgcG9wdXAgY29udGFpbmVyIGlzIGNsb3NlZFxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnJlc3RvcmVUYWJJbmRleGVzID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy4kdGFiYmFibGVzKSB7XG4gICAgdGhpcy4kdGFiYmFibGVzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRlbGVtZW50ID0gJCh0aGlzKTtcbiAgICAgIHZhciB0YWJpbmRleCA9ICRlbGVtZW50LmRhdGEoJ3RhYmluZGV4Jyk7XG5cbiAgICAgIC8vIFNwZWNpZmljYWxseSBoYW5kbGUganF1ZXJ5IHVpIHNsaWRlciwgc2luY2UgaXQgb3ZlcndyaXRlcyBkYXRhIGluIGFuIGluY29uc2lzdGVudCB3YXlcbiAgICAgIGlmICgkZWxlbWVudC5oYXNDbGFzcygndWktc2xpZGVyLWhhbmRsZScpKSB7XG4gICAgICAgICRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JywgMCk7XG4gICAgICAgICRlbGVtZW50LnJlbW92ZURhdGEoJ3RhYmluZGV4Jyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0YWJpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JywgdGFiaW5kZXgpO1xuICAgICAgICAkZWxlbWVudC5yZW1vdmVEYXRhKCd0YWJpbmRleCcpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICRlbGVtZW50LnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgaW50ZXJhY3Rpb24gYnV0dG9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZVxuICpcbiAqIEByZXR1cm4ge2pRdWVyeX1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5jcmVhdGVJbnRlcmFjdGlvbkJ1dHRvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBpbnN0YW5jZSkge1xuICBsZXQgbGFiZWwgPSBlbGVtZW50LmFjdGlvbi5tZXRhZGF0YSA/IGVsZW1lbnQuYWN0aW9uLm1ldGFkYXRhLnRpdGxlIDogJyc7XG4gIGlmIChsYWJlbCA9PT0gJycpIHtcbiAgICBsYWJlbCA9IChlbGVtZW50LmFjdGlvbi5wYXJhbXMgJiYgZWxlbWVudC5hY3Rpb24ucGFyYW1zLmNvbnRlbnROYW1lKSB8fCBlbGVtZW50LmFjdGlvbi5saWJyYXJ5LnNwbGl0KCcgJylbMF0uc3BsaXQoJy4nKVsxXTtcbiAgfVxuICBjb25zdCBsaWJUeXBlUG16ID0gdGhpcy5nZXRMaWJyYXJ5VHlwZVBteihlbGVtZW50LmFjdGlvbi5saWJyYXJ5KTtcbiAgY29uc3QgbGliTmFtZSA9IHRoaXMuZ2V0TGlicmFyeU5hbWUoZWxlbWVudC5hY3Rpb24ubGlicmFyeSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgc2V0IFthcmlhLWV4cGFuZGVkPVwiZmFsc2VcIl0gb24gdGhlICRidG4gZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0ge2pRdWVyeX0gJGJ0blxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IHNldEFyaWFFeHBhbmRlZEZhbHNlID0gJGJ0biA9PiAoKSA9PiAkYnRuLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcblxuICBjb25zdCAkYnV0dG9uID0gJCgnPGRpdj4nLCB7XG4gICAgcm9sZTogJ2J1dHRvbicsXG4gICAgdGFiaW5kZXg6IDAsXG4gICAgJ2FyaWEtbGFiZWwnOiBsYWJlbCxcbiAgICAnYXJpYS1wb3B1cCc6IHRydWUsXG4gICAgJ2FyaWEtZXhwYW5kZWQnOiBmYWxzZSxcbiAgICAnY2xhc3MnOiBgaDVwLWVsZW1lbnQtYnV0dG9uIGg1cC1lbGVtZW50LWJ1dHRvbi0ke2VsZW1lbnQuYnV0dG9uU2l6ZX0gJHtsaWJUeXBlUG16fS1idXR0b25gXG4gIH0pO1xuXG4gIGNvbnN0ICRidXR0b25FbGVtZW50ID0gJCgnPGRpdiBjbGFzcz1cImg1cC1idXR0b24tZWxlbWVudFwiPjwvZGl2PicpO1xuICBpbnN0YW5jZS5hdHRhY2goJGJ1dHRvbkVsZW1lbnQpO1xuXG4gIGNvbnN0IHBhcmVudFBvc2l0aW9uID0gbGliVHlwZVBteiA9PT0gJ2g1cC1hZHZhbmNlZHRleHQnID8ge1xuICAgIHg6IGVsZW1lbnQueCxcbiAgICB5OiBlbGVtZW50LnlcbiAgfSA6IG51bGw7XG4gIGFkZENsaWNrQW5kS2V5Ym9hcmRMaXN0ZW5lcnMoJGJ1dHRvbiwgKCkgPT4ge1xuICAgICRidXR0b24uYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG4gICAgdGhpcy5zaG93SW50ZXJhY3Rpb25Qb3B1cChpbnN0YW5jZSwgJGJ1dHRvbiwgJGJ1dHRvbkVsZW1lbnQsIGxpYlR5cGVQbXosIHNldEFyaWFFeHBhbmRlZEZhbHNlKCRidXR0b24pLCBwYXJlbnRQb3NpdGlvbik7XG4gICAgdGhpcy5kaXNhYmxlVGFiSW5kZXhlcygpOyAvLyBEaXNhYmxlIHRhYnMgYmVoaW5kIG92ZXJsYXlcbiAgICB0aGlzLnRyaWdnZXJDb25zdW1lZEV2ZW50Rm9yUmVhZE9ubHkobGliTmFtZSwgaW5zdGFuY2UpO1xuICB9KTtcblxuICBpZiAoZWxlbWVudC5hY3Rpb24gIT09IHVuZGVmaW5lZCAmJiBlbGVtZW50LmFjdGlvbi5saWJyYXJ5LnN1YnN0cigwLCAyMCkgPT09ICdINVAuSW50ZXJhY3RpdmVWaWRlbycpIHtcbiAgICBpbnN0YW5jZS5vbignY29udHJvbHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaW5zdGFuY2UuY29udHJvbHMuJGZ1bGxzY3JlZW4pIHtcbiAgICAgICAgaW5zdGFuY2UuY29udHJvbHMuJGZ1bGxzY3JlZW4ucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gJGJ1dHRvbjtcbn07XG5cbi8qKlxuICogU2hvd3MgdGhlIGludGVyYWN0aW9uIHBvcHVwIG9uIGJ1dHRvbiBwcmVzc1xuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBpbnN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IGxpYlR5cGVQbXpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNsb3NlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcG9wdXBQb3NpdGlvbl0gWCBhbmQgWSBwb3NpdGlvbiBvZiBwb3B1cFxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnNob3dJbnRlcmFjdGlvblBvcHVwID0gZnVuY3Rpb24gKGluc3RhbmNlLCAkYnV0dG9uLCAkYnV0dG9uRWxlbWVudCwgbGliVHlwZVBteiwgY2xvc2VDYWxsYmFjaywgcG9wdXBQb3NpdGlvbiA9IG51bGwpIHtcblxuICAvLyBIYW5kbGUgZXhpdCBmdWxsc2NyZWVuXG4gIGNvbnN0IGV4aXRGdWxsU2NyZWVuID0gKCkgPT4ge1xuICAgIGluc3RhbmNlLnRyaWdnZXIoJ3Jlc2l6ZScpO1xuICB9O1xuXG4gIGlmICghdGhpcy5pc0VkaXRvcigpKSB7XG4gICAgLy8gTGlzdGVuIGZvciBleGl0IGZ1bGxzY3JlZW5zIG5vdCB0cmlnZ2VyZWQgYnkgYnV0dG9uLCBmb3IgaW5zdGFuY2UgdXNpbmcgJ2VzYydcbiAgICB0aGlzLm9uKCdleGl0RnVsbFNjcmVlbicsIGV4aXRGdWxsU2NyZWVuKTtcblxuICAgIHRoaXMuc2hvd1BvcHVwKCRidXR0b25FbGVtZW50LCAkYnV0dG9uLCBwb3B1cFBvc2l0aW9uLCAoa2VlcEluRE9NID0gZmFsc2UpID0+IHtcbiAgICAgIGlmICgha2VlcEluRE9NKSB7XG4gICAgICAgICRidXR0b25FbGVtZW50LmRldGFjaCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgbGlzdGVuZXIsIHdlIG9ubHkgbmVlZCBpdCBmb3IgYWN0aXZlIHBvcHVwc1xuICAgICAgdGhpcy5vZmYoJ2V4aXRGdWxsU2NyZWVuJywgZXhpdEZ1bGxTY3JlZW4pO1xuICAgICAgY2xvc2VDYWxsYmFjaygpO1xuICAgIH0sIGxpYlR5cGVQbXosIGluc3RhbmNlLCBsaWJUeXBlUG16ID09PSAnaDVwLWludGVyYWN0aXZldmlkZW8nKTtcblxuICAgIEg1UC50cmlnZ2VyKGluc3RhbmNlLCAncmVzaXplJyk7XG5cbiAgICAvLyBSZXNpemUgaW1hZ2VzIHRvIGZpdCBwb3B1cCBkaWFsb2dcbiAgICBpZiAobGliVHlwZVBteiA9PT0gJ2g1cC1pbWFnZScpIHtcbiAgICAgIHRoaXMucmVzaXplUG9wdXBJbWFnZSgkYnV0dG9uRWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gRm9jdXMgZGlyZWN0bHkgb24gY29udGVudCB3aGVuIHBvcHVwIGlzIG9wZW5lZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdmFyICR0YWJiYWJsZXMgPSAkYnV0dG9uRWxlbWVudC5maW5kKCc6aW5wdXQnKS5hZGQoJGJ1dHRvbkVsZW1lbnQuZmluZCgnW3RhYmluZGV4XScpKTtcbiAgICAgIGlmICgkdGFiYmFibGVzLmxlbmd0aCkge1xuICAgICAgICAkdGFiYmFibGVzWzBdLmZvY3VzKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgJGJ1dHRvbkVsZW1lbnQuYXR0cigndGFiaW5kZXgnLCAwKTtcbiAgICAgICAgJGJ1dHRvbkVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9LCAyMDApO1xuXG4gICAgLy8gc3RhcnQgYWN0aXZpdHlcbiAgICBpZiAoaXNGdW5jdGlvbihpbnN0YW5jZS5zZXRBY3Rpdml0eVN0YXJ0ZWQpICYmIGlzRnVuY3Rpb24oaW5zdGFuY2UuZ2V0U2NvcmUpKSB7XG4gICAgICBpbnN0YW5jZS5zZXRBY3Rpdml0eVN0YXJ0ZWQoKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbmFtZSBwYXJ0IG9mIGEgbGlicmFyeSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbGlicmFyeVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmdldExpYnJhcnlUeXBlUG16ID0gbGlicmFyeSA9PiBrZWJhYkNhc2UobGlicmFyeS5zcGxpdCgnICcpWzBdKS50b0xvd2VyQ2FzZSgpO1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbmFtZSBwYXJ0IG9mIGEgbGlicmFyeSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbGlicmFyeVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmdldExpYnJhcnlOYW1lID0gbGlicmFyeSA9PiBsaWJyYXJ5LnNwbGl0KCcgJylbMF07XG5cbi8qKlxuICogUmVzaXplIGltYWdlIGluc2lkZSBwb3B1cCBkaWFsb2cuXG4gKlxuICogQHB1YmxpY1xuICogQHBhcmFtIHtINVAualF1ZXJ5fSAkd3JhcHBlclxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnJlc2l6ZVBvcHVwSW1hZ2UgPSBmdW5jdGlvbiAoJHdyYXBwZXIpIHtcbiAgLy8gR2V0IGZvbnRzaXplLCBuZWVkZWQgZm9yIHNjYWxlXG4gIHZhciBmb250U2l6ZSA9IE51bWJlcigkd3JhcHBlci5jc3MoJ2ZvbnRTaXplJykucmVwbGFjZSgncHgnLCAnJykpO1xuICB2YXIgJGltZyA9ICR3cmFwcGVyLmZpbmQoJ2ltZycpO1xuXG4gIC8qKlxuICAgKiBSZXNpemUgaW1hZ2UgdG8gZml0IGluc2lkZSBwb3B1cC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHRcbiAgICovXG4gIHZhciByZXNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgIGlmICgoaGVpZ2h0IC8gZm9udFNpemUpIDwgMTguNSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByYXRpbyA9ICh3aWR0aCAvIGhlaWdodCk7XG4gICAgaGVpZ2h0ID0gMTguNSAqIGZvbnRTaXplO1xuICAgICR3cmFwcGVyLmNzcyh7XG4gICAgICB3aWR0aDogaGVpZ2h0ICogcmF0aW8sXG4gICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH0pO1xuICB9O1xuXG4gIGlmICghJGltZy5oZWlnaHQoKSkge1xuICAgIC8vIFdhaXQgZm9yIGltYWdlIHRvIGxvYWRcbiAgICAkaW1nLm9uZSgnbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlc2l6ZSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgfSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gSW1hZ2UgYWxyZWFkeSBsb2FkZWQsIHJlc2l6ZSFcbiAgICByZXNpemUoJGltZy53aWR0aCgpLCAkaW1nLmhlaWdodCgpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBZGRzIGEgaW5mbyBidXR0b25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudCBQcm9wZXJ0aWVzIGZyb20gcGFyYW1zLlxuICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnRJbnN0YW5jZSBJbnN0YW5jZSBvZiB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7alF1ZXJ5fSAkZWxlbWVudENvbnRhaW5lciBXcmFwcGVyIGZvciB0aGUgZWxlbWVudC5cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5hZGRFbGVtZW50U29sdXRpb25CdXR0b24gPSBmdW5jdGlvbiAoZWxlbWVudCwgZWxlbWVudEluc3RhbmNlLCAkZWxlbWVudENvbnRhaW5lcikge1xuICBlbGVtZW50SW5zdGFuY2Uuc2hvd0NQQ29tbWVudHMgPSAoKSA9PiB7XG4gICAgaWYgKCRlbGVtZW50Q29udGFpbmVyLmNoaWxkcmVuKCcuaDVwLWVsZW1lbnQtc29sdXRpb24nKS5sZW5ndGggPT09IDAgJiYgc3RyaXBIVE1MKGVsZW1lbnQuc29sdXRpb24pLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0ICRjb21tZW50QnV0dG9uID0gJCgnPGRpdi8+Jywge1xuICAgICAgICByb2xlOiAnYnV0dG9uJyxcbiAgICAgICAgdGFiaW5kZXg6IDAsXG4gICAgICAgIHRpdGxlOiB0aGlzLmwxMG4uc29sdXRpb25zQnV0dG9uVGl0bGUsXG4gICAgICAgICdhcmlhLXBvcHVwJzogdHJ1ZSxcbiAgICAgICAgJ2FyaWEtZXhwYW5kZWQnOiBmYWxzZSxcbiAgICAgICAgJ2NsYXNzJzogJ2g1cC1lbGVtZW50LXNvbHV0aW9uJ1xuICAgICAgfSkuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImpvdWJlbC1pY29uLWNvbW1lbnQtbm9ybWFsXCI+PHNwYW4gY2xhc3M9XCJoNXAtaWNvbi1zaGFkb3dcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJoNXAtaWNvbi1zcGVlY2gtYnViYmxlXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiaDVwLWljb24tcXVlc3Rpb25cIj48L3NwYW4+PC9zcGFuPicpXG4gICAgICAgIC5hcHBlbmRUbygkZWxlbWVudENvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IHBhcmVudFBvc2l0aW9uID0ge1xuICAgICAgICB4OiBlbGVtZW50LngsXG4gICAgICAgIHk6IGVsZW1lbnQueVxuICAgICAgfTtcbiAgICAgIGlmICghZWxlbWVudC5kaXNwbGF5QXNCdXR0b24pIHtcbiAgICAgICAgcGFyZW50UG9zaXRpb24ueCArPSBlbGVtZW50LndpZHRoIC0gNDtcbiAgICAgICAgcGFyZW50UG9zaXRpb24ueSArPSBlbGVtZW50LmhlaWdodCAtIDEyO1xuICAgICAgfVxuXG4gICAgICBhZGRDbGlja0FuZEtleWJvYXJkTGlzdGVuZXJzKCRjb21tZW50QnV0dG9uLCAoKSA9PiB0aGlzLnNob3dQb3B1cChlbGVtZW50LnNvbHV0aW9uLCAkY29tbWVudEJ1dHRvbiwgcGFyZW50UG9zaXRpb24pKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKGVsZW1lbnQuYWx3YXlzRGlzcGxheUNvbW1lbnRzICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudC5hbHdheXNEaXNwbGF5Q29tbWVudHMpIHtcbiAgICBlbGVtZW50SW5zdGFuY2Uuc2hvd0NQQ29tbWVudHMoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEaXNwbGF5cyBhIHBvcHVwLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfGpRdWVyeX0gcG9wdXBDb250ZW50XG4gKiBAcGFyYW0ge2pRdWVyeX0gJGZvY3VzT25DbG9zZSBQcmV2ZW50cyBsb3NpbmcgZm9jdXMgd2hlbiBkaWFsb2cgY2xvc2VzXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmVudFBvc2l0aW9uXSB4IGFuZCB5IGNvb3JkaW5hdGVzIG9mIHBhcmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3JlbW92ZV0gR2V0cyBjYWxsZWQgYmVmb3JlIHRoZSBwb3B1cCBpcyByZW1vdmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjbGFzc2VzXVxuICogQHBhcmFtIHtvYmplY3R9IFtpbnN0YW5jZV0gSDVQIGxpYnJhcnkgaW5zdGFuY2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2tlZXBJbkRPTV0gSGlkZSB0aGUgcG9wdXAgaW5zdGVhZCBvZiByZW1vdmluZyBpdCB3aGVuIGl0IGdldHMgY2xvc2VkXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuc2hvd1BvcHVwID0gZnVuY3Rpb24gKHBvcHVwQ29udGVudCwgJGZvY3VzT25DbG9zZSwgcGFyZW50UG9zaXRpb24gPSBudWxsLCByZW1vdmUsIGNsYXNzZXMgPSAnaDVwLXBvcHVwLWNvbW1lbnQtZmllbGQnLCBpbnN0YW5jZSwga2VlcEluRE9NID0gZmFsc2UpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZG9Ob3RDbG9zZTtcblxuICAvKiogQHByaXZhdGUgKi9cbiAgdmFyIGNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgaWYgKGRvTm90Q2xvc2UpIHtcbiAgICAgIC8vIFByZXZlbnQgY2xvc2luZyB0aGUgcG9wdXBcbiAgICAgIGRvTm90Q2xvc2UgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgcG9wdXBcbiAgICBpZiAocmVtb3ZlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmUoa2VlcEluRE9NKTtcbiAgICAgICAgc2VsZi5yZXN0b3JlVGFiSW5kZXhlcygpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAkcG9wdXAuYWRkQ2xhc3MoJ2g1cC1hbmltYXRlJyk7XG4gICAgJHBvcHVwLmZpbmQoJy5oNXAtcG9wdXAtY29udGFpbmVyJykuYWRkQ2xhc3MoJ2g1cC1hbmltYXRlJyk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChrZWVwSW5ET00pIHtcbiAgICAgICAgJHBvcHVwLmhpZGUoKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAkcG9wdXAucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcblxuICAgICRmb2N1c09uQ2xvc2UuZm9jdXMoKTtcbiAgfTtcblxuICBsZXQgJHBvcHVwO1xuXG4gIGlmIChrZWVwSW5ET00gJiYgaW5zdGFuY2UgJiYgc2VsZi5wb3B1cHNbaW5zdGFuY2Uuc3ViQ29udGVudElkXSkge1xuICAgIC8vIFRoZSBwb3B1cCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgRE9NLCBidXQgaXMgaGlkZGVuXG4gICAgJHBvcHVwID0gc2VsZi5wb3B1cHNbaW5zdGFuY2Uuc3ViQ29udGVudElkXTtcbiAgfVxuXG4gIGlmICgkcG9wdXAgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIFRoZSBwb3B1cCBtdXN0IGJlIGNyZWF0ZWQgYW5kIGFkZGVkIHRvIHRoZSBET01cbiAgICAkcG9wdXAgPSAkKFxuICAgICAgJzxkaXYgY2xhc3M9XCJoNXAtcG9wdXAtb3ZlcmxheSAnICsgY2xhc3NlcyArICdcIj4nICtcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJoNXAtcG9wdXAtY29udGFpbmVyXCIgcm9sZT1cImRpYWxvZ1wiPicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaDVwLWNwLWRpYWxvZy10aXRsZWJhclwiPicgK1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJoNXAtZGlhbG9nLXRpdGxlXCI+PC9kaXY+JyArXG4gICAgICAgICAgICAnPGRpdiByb2xlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJoNXAtY2xvc2UtcG9wdXBcIiB0aXRsZT1cIicgKyB0aGlzLmwxMG4uY2xvc2UgKyAnXCI+PC9kaXY+JyArXG4gICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaDVwLXBvcHVwLXdyYXBwZXJcIiByb2xlPVwiZG9jdW1lbnRcIj48L2Rpdj4nICtcbiAgICAgICAgJzwvZGl2PicgK1xuICAgICAgJzwvZGl2PidcbiAgICApO1xuXG4gICAgY29uc3QgJHBvcHVwV3JhcHBlciA9ICRwb3B1cC5maW5kKCcuaDVwLXBvcHVwLXdyYXBwZXInKTtcbiAgICBpZiAocG9wdXBDb250ZW50IGluc3RhbmNlb2YgSDVQLmpRdWVyeSkge1xuICAgICAgJHBvcHVwV3JhcHBlci5hcHBlbmQocG9wdXBDb250ZW50KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAkcG9wdXBXcmFwcGVyLmh0bWwocG9wdXBDb250ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3ViQ29udGVudElkKSB7XG4gICAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoaXMgcG9wdXBcbiAgICAgIHNlbGYucG9wdXBzW2luc3RhbmNlLnN1YkNvbnRlbnRJZF0gPSAkcG9wdXA7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgJHBvcHVwQ29udGFpbmVyID0gJHBvcHVwLmZpbmQoJy5oNXAtcG9wdXAtY29udGFpbmVyJyk7XG5cbiAgY29uc3QgcmVzaXplUG9wdXAgPSAoJHBvcHVwLCAkcG9wdXBDb250YWluZXIsIHBhcmVudFBvc2l0aW9uKSA9PiB7XG4gICAgaWYgKCFwYXJlbnRQb3NpdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvIG5vdCBzaG93IHVudGlsIHdlIGhhdmUgZmluaXNoZWQgY2FsY3VsYXRpbmcgcG9zaXRpb25cbiAgICAkcG9wdXBDb250YWluZXIuY3NzKHsgdmlzaWJpbGl0eTogJ2hpZGRlbicgfSk7XG4gICAgJHBvcHVwLnByZXBlbmRUbyh0aGlzLiR3cmFwcGVyKTtcblxuICAgIGxldCBwb3B1cEhlaWdodCA9ICRwb3B1cENvbnRhaW5lci5oZWlnaHQoKTtcbiAgICBsZXQgcG9wdXBXaWR0aCA9ICRwb3B1cENvbnRhaW5lci53aWR0aCgpO1xuICAgIGNvbnN0IG92ZXJsYXlIZWlnaHQgPSAkcG9wdXAuaGVpZ2h0KCk7XG4gICAgY29uc3Qgb3ZlcmxheVdpZHRoID0gJHBvcHVwLndpZHRoKCk7XG4gICAgbGV0IHdpZHRoUGVyY2VudGFnZSA9IHBvcHVwV2lkdGggKiAoMTAwIC8gb3ZlcmxheVdpZHRoKTtcbiAgICBsZXQgaGVpZ2h0UGVyY2VudGFnZSA9IHBvcHVwSGVpZ2h0ICogKDEwMCAvIG92ZXJsYXlIZWlnaHQpO1xuXG4gICAgLy8gU2tpcCBzdWZmaWNpZW50bHkgYmlnIHBvcHVwc1xuICAgIGNvbnN0IHNraXBUaHJlc2hvbGQgPSA1MDtcbiAgICBpZiAod2lkdGhQZXJjZW50YWdlID4gc2tpcFRocmVzaG9sZCAmJiBoZWlnaHRQZXJjZW50YWdlID4gc2tpcFRocmVzaG9sZCkge1xuICAgICAgJHBvcHVwLmRldGFjaCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE9ubHkgcmVzaXplIGJveGVzIHRoYXQgYXJlIGRpc3Byb3BvcnRpb25hbGx5IHdpZGVcbiAgICBjb25zdCBoZWlnaHRUaHJlc2hvbGQgPSA0NTtcbiAgICBpZiAod2lkdGhQZXJjZW50YWdlID4gaGVpZ2h0UGVyY2VudGFnZSAmJiBoZWlnaHRQZXJjZW50YWdlIDwgaGVpZ2h0VGhyZXNob2xkKSB7XG4gICAgICAvLyBNYWtlIHRoZSBwb3B1cCBxdWFkcmF0aWNcbiAgICAgIHdpZHRoUGVyY2VudGFnZSA9IE1hdGguc3FydCh3aWR0aFBlcmNlbnRhZ2UgKiBoZWlnaHRQZXJjZW50YWdlKTtcbiAgICAgICRwb3B1cENvbnRhaW5lci5jc3Moe1xuICAgICAgICB3aWR0aDogd2lkdGhQZXJjZW50YWdlICsgJyUnLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWNjb3VudCBmb3Igb3ZlcmZsb3dpbmcgZWRnZXMsIHVzZSBjb25zaXN0ZW50IHBlcmNlbnRhZ2UgcGFkZGluZyBhcyBjc3NcbiAgICBjb25zdCB3aWR0aFBhZGRpbmdQZXJjZW50YWdlID0gNTtcblxuICAgIC8vIFdpZHRoIHBlcmNlbnRhZ2UgaXMgY2FwcGVkIGF0IG1pbiAyMiBhbmQgbWF4IDkwJSBpbiBjc3NcbiAgICBpZiAod2lkdGhQZXJjZW50YWdlID4gOTApIHtcbiAgICAgIHdpZHRoUGVyY2VudGFnZSA9IDkwO1xuICAgIH1cbiAgICBlbHNlIGlmICh3aWR0aFBlcmNlbnRhZ2UgPCAyMikge1xuICAgICAgd2lkdGhQZXJjZW50YWdlID0gMjI7XG4gICAgfVxuXG4gICAgY29uc3Qgb3ZlcmZsb3dSaWdodFNpZGVUaHJlc2hvbGQgPSAxMDAgLSB3aWR0aFBlcmNlbnRhZ2UgLSB3aWR0aFBhZGRpbmdQZXJjZW50YWdlO1xuICAgIGxldCBsZWZ0UG9zID0gcGFyZW50UG9zaXRpb24ueDtcbiAgICBpZiAocGFyZW50UG9zaXRpb24ueCA+IG92ZXJmbG93UmlnaHRTaWRlVGhyZXNob2xkKSB7XG4gICAgICBsZWZ0UG9zID0gb3ZlcmZsb3dSaWdodFNpZGVUaHJlc2hvbGQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBhcmVudFBvc2l0aW9uLnggPCB3aWR0aFBhZGRpbmdQZXJjZW50YWdlKSB7XG4gICAgICBsZWZ0UG9zID0gd2lkdGhQYWRkaW5nUGVyY2VudGFnZTtcbiAgICB9XG5cbiAgICBoZWlnaHRQZXJjZW50YWdlID0gJHBvcHVwQ29udGFpbmVyLmhlaWdodCgpICogKDEwMCAvIG92ZXJsYXlIZWlnaHQpO1xuICAgIGNvbnN0IGhlaWdodFBhZGRpbmcgPSAyMCAvIDI7XG4gICAgY29uc3QgdG9wUG9zVGhyZXNob2xkID0gMTAwIC0gaGVpZ2h0UGVyY2VudGFnZSAtIGhlaWdodFBhZGRpbmc7XG4gICAgbGV0IHRvcFBvcyA9IHBhcmVudFBvc2l0aW9uLnk7XG4gICAgaWYgKHBhcmVudFBvc2l0aW9uLnkgPiB0b3BQb3NUaHJlc2hvbGQpIHtcbiAgICAgIHRvcFBvcyA9IHRvcFBvc1RocmVzaG9sZDtcbiAgICB9XG4gICAgZWxzZSBpZiAocGFyZW50UG9zaXRpb24ueSA8IGhlaWdodFBhZGRpbmcpIHtcbiAgICAgIHRvcFBvcyA9IGhlaWdodFBhZGRpbmc7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgYW5kIHByZXBhcmUgdG8gYW5pbWF0ZSBpblxuICAgICRwb3B1cC5kZXRhY2goKTtcbiAgICAkcG9wdXBDb250YWluZXIuY3NzKHtcbiAgICAgIGxlZnQ6IGxlZnRQb3MgKyAnJScsXG4gICAgICB0b3A6IHRvcFBvcyArICclJyxcbiAgICB9KTtcbiAgfTtcblxuICByZXNpemVQb3B1cCgkcG9wdXAsICRwb3B1cENvbnRhaW5lciwgcGFyZW50UG9zaXRpb24pO1xuICAkcG9wdXAuYWRkQ2xhc3MoJ2g1cC1hbmltYXRlJyk7XG4gICRwb3B1cENvbnRhaW5lci5jc3Moe1xuICAgICd2aXNpYmlsaXR5JzogJycsXG4gIH0pLmFkZENsYXNzKCdoNXAtYW5pbWF0ZScpO1xuXG4gIGlmICgkcG9wdXAucGFyZW50KCkubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gSGF2aW5nIG5vIHBhcmVudCBtZWFucyB0aGUgcG9wdXAgaGFzIG5vdCB5ZXQgYmVlbiBhZGRlZCB0byB0aGUgRE9NXG4gICAgJHBvcHVwLnByZXBlbmRUbyh0aGlzLiR3cmFwcGVyKTtcbiAgfVxuICBlbHNlIHtcbiAgICAkcG9wdXAuc2hvdygpO1xuICB9XG5cbiAgLy8gSW5zZXJ0IHBvcHVwIHJlYWR5IGZvciB1c2VcbiAgJHBvcHVwXG4gICAgLmZvY3VzKClcbiAgICAucmVtb3ZlQ2xhc3MoJ2g1cC1hbmltYXRlJylcbiAgICAuY2xpY2soY2xvc2UpXG4gICAgLmZpbmQoJy5oNXAtcG9wdXAtY29udGFpbmVyJylcbiAgICAucmVtb3ZlQ2xhc3MoJ2g1cC1hbmltYXRlJylcbiAgICAuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgZG9Ob3RDbG9zZSA9IHRydWU7XG4gICAgfSlcbiAgICAua2V5ZG93bihmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC53aGljaCA9PT0ga2V5Q29kZS5FU0MpIHtcbiAgICAgICAgY2xvc2UoZXZlbnQpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmVuZCgpO1xuXG4gIGFkZENsaWNrQW5kS2V5Ym9hcmRMaXN0ZW5lcnMoJHBvcHVwLmZpbmQoJy5oNXAtY2xvc2UtcG9wdXAnKSwgZXZlbnQgPT4gY2xvc2UoZXZlbnQpKTtcblxuICByZXR1cm4gJHBvcHVwO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYW4gZWxlbWVudCBoYXMgYSBzb2x1dGlvblxuICpcbiAqIEBwYXJhbSB7SDVQIGxpYnJhcnkgaW5zdGFuY2V9IGVsZW1lbnRJbnN0YW5jZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiAgdHJ1ZSBpZiB0aGUgZWxlbWVudCBoYXMgYSBzb2x1dGlvblxuICogIGZhbHNlIG90aGVyd2lzZVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmNoZWNrRm9yU29sdXRpb25zID0gZnVuY3Rpb24gKGVsZW1lbnRJbnN0YW5jZSkge1xuICByZXR1cm4gKGVsZW1lbnRJbnN0YW5jZS5zaG93U29sdXRpb25zICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICBlbGVtZW50SW5zdGFuY2Uuc2hvd0NQQ29tbWVudHMgIT09IHVuZGVmaW5lZCk7XG59O1xuXG5cbi8qKlxuICogSW5pdGlhbGl6ZSBrZXkgcHJlc3MgZXZlbnRzLlxuICpcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9IE5vdGhpbmcuXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuaW5pdEtleUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMua2V5ZG93biAhPT0gdW5kZWZpbmVkIHx8IHRoaXMuYWN0aXZlU3VyZmFjZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIHdhaXQgPSBmYWxzZTtcblxuICB0aGlzLmtleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAod2FpdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIExlZnRcbiAgICBpZiAoKGV2ZW50LmtleUNvZGUgPT09IDM3IHx8IGV2ZW50LmtleUNvZGUgPT09IDMzKSAmJiB0aGF0LnByZXZpb3VzU2xpZGUodW5kZWZpbmVkLCBmYWxzZSkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB3YWl0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBSaWdodFxuICAgIGVsc2UgaWYgKChldmVudC5rZXlDb2RlID09PSAzOSB8fCBldmVudC5rZXlDb2RlID09PSAzNCkgJiYgdGhhdC5uZXh0U2xpZGUodW5kZWZpbmVkLCBmYWxzZSkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB3YWl0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAod2FpdCkge1xuICAgICAgLy8gTWFrZSBzdXJlIHdlIG9ubHkgY2hhbmdlIHNsaWRlIGV2ZXJ5IDMwMG1zLlxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdhaXQgPSBmYWxzZTtcbiAgICAgIH0sIDMwMCk7XG4gICAgfVxuICB9O1xuXG4gIEg1UC5qUXVlcnkoJ2JvZHknKS5rZXlkb3duKHRoaXMua2V5ZG93bik7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgdG91Y2ggZXZlbnRzXG4gKlxuICogQHJldHVybnMge3VuZGVmaW5lZH0gTm90aGluZy5cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5pbml0VG91Y2hFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIHN0YXJ0WCwgc3RhcnRZLCBsYXN0WCwgcHJldlgsIG5leHRYLCBzY3JvbGw7XG4gIHZhciB0b3VjaFN0YXJ0ZWQgPSBmYWxzZTtcbiAgLy8gdmFyIGNvbnRhaW5lcldpZHRoID0gdGhpcy4kc2xpZGVzV3JhcHBlci53aWR0aCgpO1xuICAvLyB2YXIgY29udGFpbmVyUGVyY2VudGFnZUZvclNjcm9sbGluZyA9IDAuNjsgLy8gNjAlIG9mIGNvbnRhaW5lciB3aWR0aCB1c2VkIHRvIHJlYWNoIGVuZHBvaW50cyB3aXRoIHRvdWNoXG4gIC8vIHZhciBzbGlkZXNOdW1iZXJzID0gdGhpcy5zbGlkZXMubGVuZ3RoO1xuICAvLyB2YXIgcGl4ZWxzUGVyU2xpZGUgPSAoY29udGFpbmVyV2lkdGggKiBjb250YWluZXJQZXJjZW50YWdlRm9yU2Nyb2xsaW5nKSAvIHNsaWRlc051bWJlcnM7XG4gIC8vIHZhciBzdGFydFRpbWU7XG4gIC8vIHZhciBjdXJyZW50VGltZTtcbiAgLy8gdmFyIG5hdmlnYXRlVGltZXIgPSA1MDA7IC8vIDUwMG1zIGJlZm9yZSBuYXZpZ2F0aW9uIHBvcHVwIHN0YXJ0cy5cbiAgdmFyIGlzVG91Y2hKdW1wID0gZmFsc2U7XG4gIC8vIHZhciBuZXh0U2xpZGU7XG4gIHZhciB0cmFuc2Zvcm0gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogdmFsdWUsXG4gICAgICAnLW1vei10cmFuc2Zvcm0nOiB2YWx1ZSxcbiAgICAgICctbXMtdHJhbnNmb3JtJzogdmFsdWUsXG4gICAgICAndHJhbnNmb3JtJzogdmFsdWVcbiAgICB9O1xuICB9O1xuICB2YXIgcmVzZXQgPSB0cmFuc2Zvcm0oJycpO1xuXG4gIHRoaXMuJHNsaWRlc1dyYXBwZXIuYmluZCgndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlzVG91Y2hKdW1wID0gZmFsc2U7XG4gICAgLy8gU2V0IHN0YXJ0IHBvc2l0aW9uc1xuICAgIGxhc3RYID0gc3RhcnRYID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgIHN0YXJ0WSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWTtcbiAgICBjb25zdCBzbGlkZVdpZHRoID0gdGhhdC4kc2xpZGVzV3JhcHBlci53aWR0aCgpO1xuXG4gICAgLy8gU2V0IGNsYXNzZXMgZm9yIHNsaWRlIG1vdmVtZW50IGFuZCByZW1lbWJlciBob3cgbXVjaCB0aGV5IG1vdmVcbiAgICBwcmV2WCA9ICh0aGF0LmN1cnJlbnRTbGlkZUluZGV4ID09PSAwID8gMCA6IC0gc2xpZGVXaWR0aCk7XG4gICAgbmV4dFggPSAodGhhdC5jdXJyZW50U2xpZGVJbmRleCArIDEgPj0gdGhhdC5zbGlkZXMubGVuZ3RoID8gMCA6IHNsaWRlV2lkdGgpXG5cbiAgICAvLyBjb250YWluZXJXaWR0aCA9IEg1UC5qUXVlcnkodGhpcykud2lkdGgoKTtcbiAgICAvLyBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgIHNjcm9sbCA9IG51bGw7XG4gICAgdG91Y2hTdGFydGVkID0gdHJ1ZTtcblxuICB9KS5iaW5kKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgdG91Y2hlcyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcztcblxuICAgIGlmICh0b3VjaFN0YXJ0ZWQpIHtcbiAgICAgIHRoYXQuJGN1cnJlbnQucHJldigpLmFkZENsYXNzKCdoNXAtdG91Y2gtbW92ZScpO1xuICAgICAgdGhhdC4kY3VycmVudC5uZXh0KCkuYWRkQ2xhc3MoJ2g1cC10b3VjaC1tb3ZlJyk7XG4gICAgICB0b3VjaFN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgaG9yaXpvbnRhbCBtb3ZlbWVudFxuICAgIGxhc3RYID0gdG91Y2hlc1swXS5wYWdlWDtcbiAgICB2YXIgbW92ZWRYID0gc3RhcnRYIC0gbGFzdFg7XG5cbiAgICBpZiAoc2Nyb2xsID09PSBudWxsKSB7XG4gICAgICAvLyBEZXRlbWluZSBpZiB3ZSdyZSBzY3JvbGxpbmcgaG9yaXpvbnRhbGx5IG9yIGNoYW5naW5nIHNsaWRlXG4gICAgICBzY3JvbGwgPSBNYXRoLmFicyhzdGFydFkgLSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpID4gTWF0aC5hYnMobW92ZWRYKTtcbiAgICB9XG4gICAgaWYgKHRvdWNoZXMubGVuZ3RoICE9PSAxIHx8IHNjcm9sbCkge1xuICAgICAgLy8gRG8gbm90aGluZyBpZiB3ZSdyZSBzY3JvbGxpbmcsIHpvb21pbmcgZXRjLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERpc2FibGUgaG9yaXpvbnRhbCBzY3JvbGxpbmcgd2hlbiBjaGFuZ2luZyBzbGlkZVxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBDcmVhdGUgcG9wdXAgbG9uZ2VyIHRpbWUgdGhhbiBuYXZpZ2F0ZVRpbWVyIGhhcyBwYXNzZWRcbiAgICBpZiAoIWlzVG91Y2hKdW1wKSB7XG4gICAgICAvKmN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICB2YXIgdGltZUxhcHNlZCA9IGN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgaWYgKHRpbWVMYXBzZWQgPiBuYXZpZ2F0ZVRpbWVyKSB7XG4gICAgICAgIGlzVG91Y2hKdW1wID0gdHJ1ZTtcbiAgICAgIH0qL1xuXG4gICAgICAvLyBGYXN0IHN3aXBlIHRvIG5leHQgc2xpZGVcbiAgICAgIGlmIChtb3ZlZFggPCAwKSB7XG4gICAgICAgIC8vIE1vdmUgcHJldmlvdXMgc2xpZGVcbiAgICAgICAgdGhhdC4kY3VycmVudC5wcmV2KCkuY3NzKHRyYW5zZm9ybSgndHJhbnNsYXRlWCgnICsgKHByZXZYIC0gbW92ZWRYKSArICdweCcpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBNb3ZlIG5leHQgc2xpZGVcbiAgICAgICAgdGhhdC4kY3VycmVudC5uZXh0KCkuY3NzKHRyYW5zZm9ybSgndHJhbnNsYXRlWCgnICsgKG5leHRYIC0gbW92ZWRYKSArICdweCknKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE1vdmUgY3VycmVudCBzbGlkZVxuICAgICAgdGhhdC4kY3VycmVudC5jc3ModHJhbnNmb3JtKCd0cmFuc2xhdGVYKCcgKyAoLW1vdmVkWCkgKyAncHgpJykpO1xuICAgIH1cbiAgICAvLyBUT0RPOiBKdW1waW5nIG92ZXIgbXVsdGlwbGUgc2xpZGVzIGRpc2FibGVkIHVudGlsIHJlZGVzaWduZWQuXG5cbiAgICAvKiBlbHNlIHtcbiAgICAgIHRoYXQuJGN1cnJlbnQuY3NzKHJlc2V0KTtcbiAgICAgIC8vIFVwZGF0ZSBzbGlkZXIgcG9wdXAuXG4gICAgICBuZXh0U2xpZGUgPSBwYXJzZUludCh0aGF0LmN1cnJlbnRTbGlkZUluZGV4ICsgKG1vdmVkWCAvIHBpeGVsc1BlclNsaWRlKSwgMTApO1xuICAgICAgaWYgKG5leHRTbGlkZSA+PSB0aGF0LnNsaWRlcy5sZW5ndGggLTEpIHtcbiAgICAgICAgbmV4dFNsaWRlID0gdGhhdC5zbGlkZXMubGVuZ3RoIC0xO1xuICAgICAgfSBlbHNlIGlmIChuZXh0U2xpZGUgPCAwKSB7XG4gICAgICAgIG5leHRTbGlkZSA9IDA7XG4gICAgICB9XG4gICAgICAvLyBDcmVhdGUgcG9wdXAgYXQgaW5pdGlhbCB0b3VjaCBwb2ludFxuICAgICAgdGhhdC51cGRhdGVUb3VjaFBvcHVwKHRoYXQuJHNsaWRlc1dyYXBwZXIsIG5leHRTbGlkZSwgc3RhcnRYLCBzdGFydFkpO1xuICAgIH0qL1xuXG4gIH0pLmJpbmQoJ3RvdWNoZW5kJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICghc2Nyb2xsKSB7XG4gICAgICAvKmlmIChpc1RvdWNoSnVtcCkge1xuICAgICAgICB0aGF0Lmp1bXBUb1NsaWRlKG5leHRTbGlkZSk7XG4gICAgICAgIHRoYXQudXBkYXRlVG91Y2hQb3B1cCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9Ki9cblxuICAgICAgLy8gSWYgd2UncmUgbm90IHNjcm9sbGluZyBkZXRlbWluZSBpZiB3ZSdyZSBjaGFuZ2luZyBzbGlkZVxuICAgICAgdmFyIG1vdmVkID0gc3RhcnRYIC0gbGFzdFg7XG4gICAgICBpZiAobW92ZWQgPiB0aGF0LnN3aXBlVGhyZXNob2xkICYmIHRoYXQubmV4dFNsaWRlKHVuZGVmaW5lZCwgZmFsc2UpIHx8IG1vdmVkIDwgLXRoYXQuc3dpcGVUaHJlc2hvbGQgJiYgdGhhdC5wcmV2aW91c1NsaWRlKHVuZGVmaW5lZCwgZmFsc2UpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVzZXQuXG4gICAgdGhhdC4kc2xpZGVzV3JhcHBlci5jaGlsZHJlbigpLmNzcyhyZXNldCkucmVtb3ZlQ2xhc3MoJ2g1cC10b3VjaC1tb3ZlJyk7XG4gIH0pO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtICRjb250YWluZXJcbiAqIEBwYXJhbSBzbGlkZU51bWJlclxuICogQHBhcmFtIHhQb3NcbiAqIEBwYXJhbSB5UG9zXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUudXBkYXRlVG91Y2hQb3B1cCA9IGZ1bmN0aW9uICgkY29udGFpbmVyLCBzbGlkZU51bWJlciwgeFBvcywgeVBvcykge1xuICAvLyBSZW1vdmUgcG9wdXAgb24gbm8gYXJndW1lbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDApIHtcbiAgICBpZiAodGhpcy50b3VjaFBvcHVwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudG91Y2hQb3B1cC5yZW1vdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGtleXdvcmQgPSAnJztcbiAgdmFyIHlQb3NBZGp1c3RtZW50ID0gMC4xNTsgLy8gQWRqdXN0IHktcG9zaXRpb24gMTUlIGhpZ2hlciBmb3IgdmlzaWJpbGl0eVxuXG4gIGlmICgodGhpcy4ka2V5d29yZHMgIT09IHVuZGVmaW5lZCkgJiYgKHRoaXMuJGtleXdvcmRzLmNoaWxkcmVuKCc6ZXEoJyArIHNsaWRlTnVtYmVyICsgJyknKS5maW5kKCdzcGFuJykuaHRtbCgpICE9PSB1bmRlZmluZWQpKSB7XG4gICAga2V5d29yZCArPSB0aGlzLiRrZXl3b3Jkcy5jaGlsZHJlbignOmVxKCcgKyBzbGlkZU51bWJlciArICcpJykuZmluZCgnc3BhbicpLmh0bWwoKTtcbiAgfVxuICBlbHNlIHtcbiAgICB2YXIgc2xpZGVJbmRleFRvTnVtYmVyID0gc2xpZGVOdW1iZXIrMTtcbiAgICBrZXl3b3JkICs9IHRoaXMubDEwbi5zbGlkZSArICcgJyArIHNsaWRlSW5kZXhUb051bWJlcjtcbiAgfVxuXG4gIC8vIFN1bW1hcnkgc2xpZGUga2V5d29yZFxuICBpZiAodGhpcy5lZGl0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChzbGlkZU51bWJlciA+PSB0aGlzLnNsaWRlcy5sZW5ndGggLSAxKSB7XG4gICAgICBrZXl3b3JkID0gdGhpcy5sMTBuLnNob3dTb2x1dGlvbnM7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMudG91Y2hQb3B1cCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy50b3VjaFBvcHVwID0gSDVQLmpRdWVyeSgnPGRpdi8+Jywge1xuICAgICAgJ2NsYXNzJzogJ2g1cC10b3VjaC1wb3B1cCdcbiAgICB9KS5pbnNlcnRBZnRlcigkY29udGFpbmVyKTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLnRvdWNoUG9wdXAuaW5zZXJ0QWZ0ZXIoJGNvbnRhaW5lcik7XG4gIH1cblxuICAvLyBBZGp1c3QgeVBvcyBhYm92ZSBmaW5nZXIuXG4gIGlmICgoeVBvcyAtICgkY29udGFpbmVyLnBhcmVudCgpLmhlaWdodCgpICogeVBvc0FkanVzdG1lbnQpKSA8IDApIHtcbiAgICB5UG9zID0gMDtcbiAgfVxuICBlbHNlIHtcbiAgICB5UG9zIC09ICgkY29udGFpbmVyLnBhcmVudCgpLmhlaWdodCgpICogeVBvc0FkanVzdG1lbnQpO1xuICB9XG5cbiAgdGhpcy50b3VjaFBvcHVwLmNzcyh7XG4gICAgJ21heC13aWR0aCc6ICRjb250YWluZXIud2lkdGgoKSAtIHhQb3MsXG4gICAgJ2xlZnQnOiB4UG9zLFxuICAgICd0b3AnOiB5UG9zXG4gIH0pO1xuICB0aGlzLnRvdWNoUG9wdXAuaHRtbChrZXl3b3JkKTtcbn07XG5cbi8qKlxuICogU3dpdGNoIHRvIHByZXZpb3VzIHNsaWRlXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBbbm9TY3JvbGxdIFNraXAgVUkgc2Nyb2xsaW5nLlxuICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyBpZiB0aGUgbW92ZSB3YXMgbWFkZS5cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5wcmV2aW91c1NsaWRlID0gZnVuY3Rpb24gKG5vU2Nyb2xsLCBvbGQgPSB0cnVlKSB7XG4gIHZhciAkcHJldiA9IHRoaXMuJGN1cnJlbnQucHJldigpO1xuICBpZiAoISRwcmV2Lmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChvbGQpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9jZXNzSnVtcFRvU2xpZGUoJHByZXYuaW5kZXgoKSwgbm9TY3JvbGwsIGZhbHNlKTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5qdW1wVG9TbGlkZSgkcHJldi5pbmRleCgpLCBub1Njcm9sbCwgbnVsbCwgZmFsc2UpO1xuICB9XG59O1xuXG4vKipcbiAqIFN3aXRjaCB0byBuZXh0IHNsaWRlLlxuICpcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbm9TY3JvbGwgU2tpcCBVSSBzY3JvbGxpbmcuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIGlmIHRoZSBtb3ZlIHdhcyBtYWRlLlxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLm5leHRTbGlkZSA9IGZ1bmN0aW9uIChub1Njcm9sbCwgb2xkID0gdHJ1ZSkge1xuICB2YXIgJG5leHQgPSB0aGlzLiRjdXJyZW50Lm5leHQoKTtcbiAgaWYgKCEkbmV4dC5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAob2xkKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvY2Vzc0p1bXBUb1NsaWRlKCRuZXh0LmluZGV4KCksIG5vU2Nyb2xsLCBmYWxzZSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMuanVtcFRvU2xpZGUoJG5leHQuaW5kZXgoKSwgbm9TY3JvbGwsIG51bGwsIGZhbHNlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgd2hlbiB0aGUgZWxlbWVudCBpcyB0aGUgY3VycmVudCBzbGlkZVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5pc0N1cnJlbnRTbGlkZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICByZXR1cm4gdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9PT0gaW5kZXg7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgc2xpZGUgaW5kZXhcbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuZ2V0Q3VycmVudFNsaWRlSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmN1cnJlbnRTbGlkZUluZGV4O1xufTtcblxuLyoqXG4gKiBMb2FkcyBhbGwgc2xpZGVzIChOZWVkZWQgYnkgcHJpbnQpXG4gKiBAbWV0aG9kIGF0dGFjaEFsbEVsZW1lbnRzXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuYXR0YWNoQWxsRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkc2xpZGVzID0gdGhpcy4kc2xpZGVzV3JhcHBlci5jaGlsZHJlbigpO1xuXG4gIGZvciAodmFyIGk9MDsgaTx0aGlzLnNsaWRlcy5sZW5ndGg7IGkrKykge1xuICAgIHRoaXMuYXR0YWNoRWxlbWVudHMoJHNsaWRlcy5lcShpKSwgaSk7XG4gIH1cblxuICAvLyBOZWVkIHRvIGZvcmNlIHVwZGF0aW5nIHN1bW1hcnkgc2xpZGUhIFRoaXMgaXMgbm9ybWFsbHkgZG9uZVxuICAvLyBvbmx5IHdoZW4gc3VtbWFyeSBzbGlkZSBpcyBhYm91dCB0byBiZSB2aWV3ZWRcbiAgaWYgKHRoaXMuc3VtbWFyeVNsaWRlT2JqZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnN1bW1hcnlTbGlkZU9iamVjdC51cGRhdGVTdW1tYXJ5U2xpZGUodGhpcy5zbGlkZXMubGVuZ3RoLTEsIHRydWUpO1xuICB9XG59O1xuXG4vKipcbiAqIFByb2Nlc3MgdGhlIGp1bXAgdG8gc2xpZGUuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHNsaWRlTnVtYmVyIFRoZSBzbGlkZSBudW1iZXIgdG8ganVtcCB0by5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW25vU2Nyb2xsXSBTa2lwIFVJIHNjcm9sbGluZy5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBBbHdheXMgdHJ1ZS5cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5wcm9jZXNzSnVtcFRvU2xpZGUgPSBmdW5jdGlvbiAoc2xpZGVOdW1iZXIsIG5vU2Nyb2xsLCBoYW5kbGVGb2N1cykge1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGlmICh0aGlzLmVkaXRvciA9PT0gdW5kZWZpbmVkICYmIHRoaXMuY29udGVudElkKSB7IC8vIENvbnRlbnQgSUQgYXZvaWRzIGNyYXNoIHdoZW4gcHJldmlld2luZyBpbiBlZGl0b3IgYmVmb3JlIHNhdmluZ1xuICAgIHZhciBwcm9ncmVzc2VkRXZlbnQgPSB0aGlzLmNyZWF0ZVhBUElFdmVudFRlbXBsYXRlKCdwcm9ncmVzc2VkJyk7XG4gICAgcHJvZ3Jlc3NlZEV2ZW50LmRhdGEuc3RhdGVtZW50Lm9iamVjdC5kZWZpbml0aW9uLmV4dGVuc2lvbnNbJ2h0dHA6Ly9pZC50aW5jYW5hcGkuY29tL2V4dGVuc2lvbi9lbmRpbmctcG9pbnQnXSA9IHNsaWRlTnVtYmVyICsgMTtcbiAgICB0aGlzLnRyaWdnZXIocHJvZ3Jlc3NlZEV2ZW50KTtcbiAgfVxuXG4gIGlmICh0aGlzLiRjdXJyZW50Lmhhc0NsYXNzKCdoNXAtYW5pbWF0ZScpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSnVtcCB0byBnaXZlbiBzbGlkZSBhbmQgZW5hYmxlIGFuaW1hdGlvbi5cbiAgdmFyICRvbGQgPSB0aGlzLiRjdXJyZW50LmFkZENsYXNzKCdoNXAtYW5pbWF0ZScpO1xuICB2YXIgJHNsaWRlcyA9IHRoYXQuJHNsaWRlc1dyYXBwZXIuY2hpbGRyZW4oKTtcbiAgdmFyICRwcmV2cyA9ICRzbGlkZXMuZmlsdGVyKCc6bHQoJyArIHNsaWRlTnVtYmVyICsgJyknKTtcbiAgdGhpcy4kY3VycmVudCA9ICRzbGlkZXMuZXEoc2xpZGVOdW1iZXIpLmFkZENsYXNzKCdoNXAtYW5pbWF0ZScpO1xuICB2YXIgcHJldmlvdXNTbGlkZUluZGV4ID0gdGhpcy5jdXJyZW50U2xpZGVJbmRleDtcbiAgdGhpcy5jdXJyZW50U2xpZGVJbmRleCA9IHNsaWRlTnVtYmVyO1xuXG4gIC8vIEF0dGFjaCBlbGVtZW50cyBmb3IgdGhpcyBzbGlkZVxuICB0aGlzLmF0dGFjaEVsZW1lbnRzKHRoaXMuJGN1cnJlbnQsIHNsaWRlTnVtYmVyKTtcblxuICAvLyBBdHRhY2ggZWxlbWVudHMgZm9yIG5leHQgc2xpZGVcbiAgdmFyICRuZXh0U2xpZGUgPSB0aGlzLiRjdXJyZW50Lm5leHQoKTtcbiAgaWYgKCRuZXh0U2xpZGUubGVuZ3RoKSB7XG4gICAgdGhpcy5hdHRhY2hFbGVtZW50cygkbmV4dFNsaWRlLCBzbGlkZU51bWJlciArIDEpO1xuICB9XG5cbiAgLy8gRm9yIG5ldyBzbGlkZVxuICB0aGlzLnNldE92ZXJmbG93VGFiSW5kZXgoKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBQbGF5IGFuaW1hdGlvbnNcbiAgICAkb2xkLnJlbW92ZUNsYXNzKCdoNXAtY3VycmVudCcpO1xuICAgICRvbGQuZmluZCgnLmg1cC1lbGVtZW50LWlubmVyJykuYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAkc2xpZGVzLmNzcyh7XG4gICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAnJyxcbiAgICAgICctbW96LXRyYW5zZm9ybSc6ICcnLFxuICAgICAgJy1tcy10cmFuc2Zvcm0nOiAnJyxcbiAgICAgICd0cmFuc2Zvcm0nOiAnJ1xuICAgIH0pLnJlbW92ZUNsYXNzKCdoNXAtdG91Y2gtbW92ZScpLnJlbW92ZUNsYXNzKCdoNXAtcHJldmlvdXMnKTtcbiAgICAkcHJldnMuYWRkQ2xhc3MoJ2g1cC1wcmV2aW91cycpO1xuICAgIHRoYXQuJGN1cnJlbnQuYWRkQ2xhc3MoJ2g1cC1jdXJyZW50Jyk7XG5cbiAgICAvLyBTZXQgdGFiaW5kZXggZm9yIGJldHRlciBhY2Nlc3NpYmlsaXR5IGlmIHRoZXJlIGFyZSBubyBpbnRlcmFjdGlvbnNcbiAgICBpZiAodHlwZW9mIHRoYXQuc2xpZGVzV2l0aFNvbHV0aW9uc1t0aGF0LmdldEN1cnJlbnRTbGlkZUluZGV4KCldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhhdC4kY3VycmVudC5maW5kKCcuaDVwLWVsZW1lbnQtaW5uZXInKS5hdHRyKCd0YWJpbmRleCcsICcwJyk7XG4gICAgfVxuXG4gICAgdGhhdC50cmlnZ2VyKCdjaGFuZ2VkU2xpZGUnLCB0aGF0LiRjdXJyZW50LmluZGV4KCkpO1xuXG4gICAgLy8gdHJpZ2dlciBjb25zdW1lZCBldmVudCBmb3IgcmVhZCBvbmx5IGxpYnJhcmllcyB0byByZWNvcmQgeGFwaSBpbiB0aGF0IGxpYnJhcnlcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGF0LiRjdXJyZW50LmluZGV4KCk7XG4gICAgdGhhdC5oYW5kbGVDb25zdW1lZEV2ZW50Rm9yUmVhZE9ubHkoY3VycmVudEluZGV4KTtcblxuICB9LCAxKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBEb25lIGFuaW1hdGluZ1xuICAgIHRoYXQuJHNsaWRlc1dyYXBwZXIuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnaDVwLWFuaW1hdGUnKTtcblxuICAgIGlmICh0aGF0LmVkaXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2V0IGFjdGl2aXR5IHN0YXJ0ZWRcbiAgICB2YXIgaW5zdGFuY2VzID0gdGhhdC5lbGVtZW50SW5zdGFuY2VzW3RoYXQuY3VycmVudFNsaWRlSW5kZXhdO1xuICAgIHZhciBpbnN0YW5jZVBhcmFtcyA9IHRoYXQuc2xpZGVzW3RoYXQuY3VycmVudFNsaWRlSW5kZXhdLmVsZW1lbnRzO1xuICAgIGlmIChpbnN0YW5jZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFpbnN0YW5jZVBhcmFtc1tpXS5kaXNwbGF5QXNCdXR0b24gJiYgdHlwZW9mIGluc3RhbmNlc1tpXS5zZXRBY3Rpdml0eVN0YXJ0ZWQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGluc3RhbmNlc1tpXS5nZXRTY29yZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGluc3RhbmNlc1tpXS5zZXRBY3Rpdml0eVN0YXJ0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgMjUwKTtcblxuICAvLyBKdW1wIGtleXdvcmRzXG4gIGlmICh0aGlzLiRrZXl3b3JkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5rZXl3b3JkTWVudS5zZXRDdXJyZW50U2xpZGVJbmRleChzbGlkZU51bWJlcik7XG4gICAgdGhpcy4kY3VycmVudEtleXdvcmQgPSB0aGlzLiRrZXl3b3Jkcy5maW5kKCcuaDVwLWN1cnJlbnQnKTtcblxuICAgIGlmICghbm9TY3JvbGwpIHtcbiAgICAgIHRoaXMua2V5d29yZE1lbnUuc2Nyb2xsVG9LZXl3b3JkcyhzbGlkZU51bWJlcik7XG4gICAgfVxuICB9XG5cbiAgLy8gU2hvdyBrZXl3b3JkcyBpZiB0aGV5IHNob3VsZCBhbHdheXMgc2hvd1xuICBpZiAodGhhdC5wcmVzZW50YXRpb24ua2V5d29yZExpc3RFbmFibGVkICYmIHRoYXQucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0QWx3YXlzU2hvdykge1xuICAgIHRoYXQuc2hvd0tleXdvcmRzKCk7XG4gIH1cblxuICBpZiAodGhhdC5uYXZpZ2F0aW9uTGluZSkge1xuICAgIC8vIFVwZGF0ZSBwcm9ncmVzcyBiYXJcbiAgICB0aGF0Lm5hdmlnYXRpb25MaW5lLnVwZGF0ZVByb2dyZXNzQmFyKHNsaWRlTnVtYmVyLCBwcmV2aW91c1NsaWRlSW5kZXgsIHRoaXMuaXNTb2x1dGlvbk1vZGUpO1xuXG4gICAgLy8gVXBkYXRlIGZvb3RlclxuICAgIHRoYXQubmF2aWdhdGlvbkxpbmUudXBkYXRlRm9vdGVyKHNsaWRlTnVtYmVyKTtcblxuICAgIC8vIEFubm91bmNlIHNsaWRlIGNoYW5nZVxuICAgIHRoaXMuc2V0U2xpZGVOdW1iZXJBbm5vdW5jZXIoc2xpZGVOdW1iZXIsIGhhbmRsZUZvY3VzKTtcbiAgfVxuXG4gIGlmICh0aGF0LnN1bW1hcnlTbGlkZU9iamVjdCkge1xuICAgIC8vIFVwZGF0ZSBzdW1tYXJ5IHNsaWRlIGlmIG9uIGxhc3Qgc2xpZGUsIGRvIG5vdCBqdW1wXG4gICAgdGhhdC5zdW1tYXJ5U2xpZGVPYmplY3QudXBkYXRlU3VtbWFyeVNsaWRlKHNsaWRlTnVtYmVyLCB0cnVlKTtcbiAgfVxuXG4gIC8vIEVkaXRvciBzcGVjaWZpYyBzZXR0aW5nc1xuICBpZiAodGhpcy5lZGl0b3IgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmVkaXRvci5kbmIgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIFVwZGF0ZSBkcmFnIGFuZCBkcm9wIG1lbnUgYmFyIGNvbnRhaW5lclxuICAgIHRoaXMuZWRpdG9yLmRuYi5zZXRDb250YWluZXIodGhpcy4kY3VycmVudCk7XG4gICAgdGhpcy5lZGl0b3IuZG5iLmJsdXJBbGwoKTtcbiAgfVxuXG4gIHRoaXMudHJpZ2dlcigncmVzaXplJyk7IC8vIFRyaWdnZXJlZCB0byByZXNpemUgZWxlbWVudHMuXG4gIHRoaXMuZml0Q1QoKTtcblxuICBpZiAodGhpcy5oaWRlU3VtbWFyeVNsaWRlICYmIHNsaWRlTnVtYmVyID09PSB0aGlzLnNsaWRlcy5sZW5ndGgtMSkge1xuICAgIHRoaXMudHJpZ2dlckNvbXBsZXRlKCk7XG4gIH1cbiAgXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmhhbmRsZUNvbnN1bWVkRXZlbnRGb3JSZWFkT25seSA9IGZ1bmN0aW9uKGN1cnJlbnRJbmRleCkge1xuICAgIGNvbnN0IHNsaWRlID0gdGhpcy5zbGlkZXNbY3VycmVudEluZGV4XTtcbiAgICBjb25zdCBpbnN0YW5jZXMgPSB0aGlzLmVsZW1lbnRJbnN0YW5jZXNbY3VycmVudEluZGV4XTtcbiAgICBpZiAoaW5zdGFuY2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghc2xpZGUuZWxlbWVudHNbaV0uZGlzcGxheUFzQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHNsaWRlLmVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc0xpYnJhcnkgPSBlbGVtZW50LmFjdGlvbiAmJiBlbGVtZW50LmFjdGlvbi5saWJyYXJ5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpYk5hbWUgPSBoYXNMaWJyYXJ5ID8gdGhpcy5nZXRMaWJyYXJ5TmFtZShlbGVtZW50LmFjdGlvbi5saWJyYXJ5KSA6ICdvdGhlcic7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ29uc3VtZWRFdmVudEZvclJlYWRPbmx5KGxpYk5hbWUsIGluc3RhbmNlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEp1bXAgdG8gdGhlIGdpdmVuIHNsaWRlLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBzbGlkZU51bWJlciBUaGUgc2xpZGUgbnVtYmVyIHRvIGp1bXAgdG8uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtub1Njcm9sbF0gU2tpcCBVSSBzY3JvbGxpbmcuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufG51bGx9IFtjYWxsYmFja10gQ2FsbGJhY2sgdG8gZXhlY3V0ZSBvbiBzdWNjZXNzZnVsbCBuYXZpZ2F0aW9uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtpZ25vcmVDb25maXJtYXRpb25EaWFsb2ddIFdpbGwgbm90IHNob3cgY29uZmlybWF0aW9uIGRpYWxvZyBmb3Igc3VtbWFyeSBzbGlkZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuanVtcFRvU2xpZGUgPSBmdW5jdGlvbiAoc2xpZGVOdW1iZXIsIG5vU2Nyb2xsID0gZmFsc2UsIGNhbGxiYWNrID0gbnVsbCwgaGFuZGxlRm9jdXMgPSBmYWxzZSwgaWdub3JlQ29uZmlybWF0aW9uRGlhbG9nID0gZmFsc2UpIHtcbiAgaWYgKHRoaXMuc3RhbmRhbG9uZVxuICAgICYmIHRoaXMuc2hvd1N1bW1hcnlTbGlkZVxuICAgICYmIHNsaWRlTnVtYmVyID09PSB0aGlzLnNsaWRlcy5sZW5ndGggLSAxXG4gICAgJiYgIXRoaXMuaXNTb2x1dGlvbk1vZGVcbiAgICAmJiB0aGlzLmlzUmVwb3J0aW5nRW5hYmxlZFxuICAgICYmICFpZ25vcmVDb25maXJtYXRpb25EaWFsb2dcbiAgKSB7XG5cbiAgICAvLyBDdXJyZW50bHkgaW4gdGhlIHN1bW1hcnkgc2xpZGVcbiAgICBpZiAodGhpcy5jdXJyZW50U2xpZGVJbmRleCA9PT0gdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbmZpcm1hdGlvbkRpYWxvZyA9IENvbmZpcm1hdGlvbkRpYWxvZyh7XG4gICAgICBoZWFkZXJUZXh0OiB0aGlzLmwxMG4uY29uZmlybURpYWxvZ0hlYWRlcixcbiAgICAgIGRpYWxvZ1RleHQ6IHRoaXMubDEwbi5jb25maXJtRGlhbG9nVGV4dCxcbiAgICAgIGNvbmZpcm1UZXh0OiB0aGlzLmwxMG4uY29uZmlybURpYWxvZ0NvbmZpcm1hdGlvblRleHQsXG4gICAgfSk7XG5cbiAgICBjb25maXJtYXRpb25EaWFsb2cub24oJ2NhbmNlbGVkJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIGNvbmZpcm1hdGlvbkRpYWxvZy5vbignY29uZmlybWVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5wcm9jZXNzSnVtcFRvU2xpZGUoc2xpZGVOdW1iZXIsIG5vU2Nyb2xsLCBoYW5kbGVGb2N1cyk7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLnByb2Nlc3NKdW1wVG9TbGlkZShzbGlkZU51bWJlciwgbm9TY3JvbGwsIGhhbmRsZUZvY3VzKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNldCB0YWIgaW5kZXggZm9yIHRleHQgY29udGFpbmVycyB0aGF0IG92ZXJmbG93IHdpdGggYSBzY3JvbGxiYXJcbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5zZXRPdmVyZmxvd1RhYkluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAvLyBPbiByZXN1bWUsIHRoaXMgaXMgbm90IHNldCB5ZXQsIGJ1dCBpdCB3aWxsIGJlIGlvdm9rZWQgbGF0ZXJcbiAgaWYgKHRoaXMuJGN1cnJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuJGN1cnJlbnQuZmluZCgnLmg1cC1lbGVtZW50LWlubmVyJykuZWFjaCggZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0ICRpbm5lciA9ICQodGhpcyk7XG5cbiAgICAvLyBDdXJyZW50bHksIHRoaXMgcnVsZSBpcyBmb3IgdGFibGVzIG9ubHlcbiAgICBsZXQgaW5uZXJIZWlnaHQ7XG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdoNXAtdGFibGUnKSkge1xuICAgICAgaW5uZXJIZWlnaHQgPSAkaW5uZXIuZmluZCgnLmg1cC10YWJsZScpLm91dGVySGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRhYmluZGV4IGlmIHRoZXJlJ3MgYW4gb3ZlcmZsb3cgKHNjcm9sbGJhciBkZXBlbmRpbmcgb24gQ1NTKVxuICAgIGNvbnN0IG91dGVySGVpZ2h0ID0gJGlubmVyLmNsb3Nlc3QoJy5oNXAtZWxlbWVudC1vdXRlcicpLmlubmVySGVpZ2h0KCk7XG4gICAgaWYgKGlubmVySGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgb3V0ZXJIZWlnaHQgIT09IG51bGwgJiYgaW5uZXJIZWlnaHQgPiBvdXRlckhlaWdodCkge1xuICAgICAgJGlubmVyLmF0dHIoJ3RhYmluZGV4JywgMCk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogU2V0IHNsaWRlIG51bWJlciBzbyBpdCBjYW4gYmUgYW5ub3VuY2VkIHRvIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBzbGlkZU51bWJlciBJbmRleCBvZiBzbGlkZSB0aGF0IHNob3VsZCBoYXZlIGl0cycgdGl0bGUgYW5ub3VuY2VkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtoYW5kbGVGb2N1cz1mYWxzZV0gTW92ZXMgZm9jdXMgdG8gdGhlIHRvcCBvZiB0aGUgc2xpZGVcbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5zZXRTbGlkZU51bWJlckFubm91bmNlciA9IGZ1bmN0aW9uIChzbGlkZU51bWJlciwgaGFuZGxlRm9jdXMgPSBmYWxzZSkge1xuICBsZXQgc2xpZGVUaXRsZSA9ICcnO1xuXG4gIGlmICghdGhpcy5uYXZpZ2F0aW9uTGluZSkge1xuICAgIHJldHVybiBzbGlkZVRpdGxlO1xuICB9XG5cbiAgLy8gQWRkIHNsaWRlIG51bWJlclxuICBjb25zdCBzbGlkZSA9IHRoaXMuc2xpZGVzW3NsaWRlTnVtYmVyXTtcbiAgY29uc3QgaGFzS2V5d29yZHMgPSBzbGlkZS5rZXl3b3JkcyAmJiBzbGlkZS5rZXl3b3Jkcy5sZW5ndGggPiAwO1xuICBpZiAoaGFzS2V5d29yZHMgJiYgIXRoaXMubmF2aWdhdGlvbkxpbmUuaXNTdW1tYXJ5U2xpZGUoc2xpZGVOdW1iZXIpKSB7XG4gICAgc2xpZGVUaXRsZSArPSB0aGlzLmwxMG4uc2xpZGUgKyAnICcgKyAoc2xpZGVOdW1iZXIgKyAxKSArICc6ICc7XG4gIH1cblxuICBzbGlkZVRpdGxlICs9IHRoaXMubmF2aWdhdGlvbkxpbmUuY3JlYXRlU2xpZGVUaXRsZShzbGlkZU51bWJlcik7XG4gIHRoaXMuJHNsaWRlQW5ub3VuY2VyLmh0bWwoc2xpZGVUaXRsZSk7XG4gIGlmIChoYW5kbGVGb2N1cykge1xuICAgIHRoaXMuJHNsaWRlVG9wLmZvY3VzKCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVzZXQgdGhlIGNvbnRlbnQgZm9yIGFsbCBzbGlkZXMuXG4gKiBAcHVibGljXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUucmVzZXRUYXNrID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnN1bW1hcnlTbGlkZU9iamVjdC50b2dnbGVTb2x1dGlvbk1vZGUoZmFsc2UpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0aGlzLnNsaWRlc1dpdGhTb2x1dGlvbnNbaV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnNsaWRlc1dpdGhTb2x1dGlvbnNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIGVsZW1lbnRJbnN0YW5jZSA9IHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9uc1tpXVtqXTtcbiAgICAgICAgaWYgKGVsZW1lbnRJbnN0YW5jZS5yZXNldFRhc2spIHtcbiAgICAgICAgICBlbGVtZW50SW5zdGFuY2UucmVzZXRUYXNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9INVAualF1ZXJ5KCcuaDVwLXNob3ctc29sdXRpb25zJykuc2hvdygpOyBcblx0XHQgICAgLy9INVAualF1ZXJ5KFwiLmg1cC1zdW1tYXJ5LWZvb3RlclwiKS5yZW1vdmVDbGFzcyhcImg1cC1jdXN0b20tc3VtbWFyeS1tc2dcIik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHRoaXMubmF2aWdhdGlvbkxpbmUudXBkYXRlUHJvZ3Jlc3NCYXIoMCk7XG4gIHRoaXMuanVtcFRvU2xpZGUoMCwgZmFsc2UpO1xuICB0aGlzLiRjb250YWluZXIuZmluZCgnLmg1cC1wb3B1cC1vdmVybGF5JykucmVtb3ZlKCk7XG59O1xuXG4vKipcbiAqIFNob3cgc29sdXRpb25zIGZvciBhbGwgc2xpZGVzIHRoYXQgaGF2ZSBzb2x1dGlvbnNcbiAqXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnNob3dTb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBqdW1wZWRUb0ZpcnN0ID0gZmFsc2U7XG4gIHZhciBzbGlkZVNjb3JlcyA9IFtdO1xuICB2YXIgaGFzU2NvcmVzID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXNXaXRoU29sdXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9uc1tpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMuZWxlbWVudHNBdHRhY2hlZFtpXSkge1xuICAgICAgICAvLyBBdHRhY2ggZWxlbWVudHMgYmVmb3JlIHNob3dpbmcgc29sdXRpb25zXG4gICAgICAgIHRoaXMuYXR0YWNoRWxlbWVudHModGhpcy4kc2xpZGVzV3JhcHBlci5jaGlsZHJlbignOmVxKCcgKyBpICsgJyknKSwgaSk7XG4gICAgICB9XG4gICAgICBpZiAoIWp1bXBlZFRvRmlyc3QpIHtcbiAgICAgICAgdGhpcy5qdW1wVG9TbGlkZShpLCBmYWxzZSk7XG4gICAgICAgIGp1bXBlZFRvRmlyc3QgPSB0cnVlOyAvLyBUT0RPOiBFeHBsYWluIHdoYXQgdGhpcyByZWFsbHkgZG9lcy5cbiAgICAgIH1cbiAgICAgIHZhciBzbGlkZVNjb3JlID0gMDtcbiAgICAgIHZhciBzbGlkZU1heFNjb3JlID0gMDtcbiAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9uc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZWxlbWVudEluc3RhbmNlID0gdGhpcy5zbGlkZXNXaXRoU29sdXRpb25zW2ldW2pdO1xuICAgICAgICBpZiAoZWxlbWVudEluc3RhbmNlLmFkZFNvbHV0aW9uQnV0dG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBlbGVtZW50SW5zdGFuY2UuYWRkU29sdXRpb25CdXR0b24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudEluc3RhbmNlLnNob3dTb2x1dGlvbnMpIHtcbiAgICAgICAgICBlbGVtZW50SW5zdGFuY2Uuc2hvd1NvbHV0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50SW5zdGFuY2Uuc2hvd0NQQ29tbWVudHMpIHtcbiAgICAgICAgICBlbGVtZW50SW5zdGFuY2Uuc2hvd0NQQ29tbWVudHMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudEluc3RhbmNlLmdldE1heFNjb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzbGlkZU1heFNjb3JlICs9IGVsZW1lbnRJbnN0YW5jZS5nZXRNYXhTY29yZSgpO1xuICAgICAgICAgIHNsaWRlU2NvcmUgKz0gZWxlbWVudEluc3RhbmNlLmdldFNjb3JlKCk7XG4gICAgICAgICAgaGFzU2NvcmVzID0gdHJ1ZTtcbiAgICAgICAgICBpbmRleGVzLnB1c2goZWxlbWVudEluc3RhbmNlLmNvdXJzZVByZXNlbnRhdGlvbkluZGV4T25TbGlkZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNsaWRlU2NvcmVzLnB1c2goe1xuICAgICAgICBpbmRleGVzOiBpbmRleGVzLFxuICAgICAgICBzbGlkZTogKGkgKyAxKSxcbiAgICAgICAgc2NvcmU6IHNsaWRlU2NvcmUsXG4gICAgICAgIG1heFNjb3JlOiBzbGlkZU1heFNjb3JlXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gU2hvdyBjb21tZW50cyBvZiBub24gZ3JhZGVkIGNvbnRlbnRzXG4gICAgaWYgKHRoaXMuc2hvd0NvbW1lbnRzQWZ0ZXJTb2x1dGlvbltpXSkge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnNob3dDb21tZW50c0FmdGVyU29sdXRpb25baV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNob3dDb21tZW50c0FmdGVyU29sdXRpb25baV1bal0uc2hvd0NQQ29tbWVudHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLnNob3dDb21tZW50c0FmdGVyU29sdXRpb25baV1bal0uc2hvd0NQQ29tbWVudHMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaGFzU2NvcmVzKSB7XG4gICAgcmV0dXJuIHNsaWRlU2NvcmVzO1xuICB9XG59O1xuXG4vKipcbiAqIEdldHMgc2xpZGVzIHNjb3JlcyBmb3Igd2hvbGUgY3BcbiAqIEByZXR1cm5zIHtBcnJheX0gc2xpZGVTY29yZXMgQXJyYXkgY29udGFpbmluZyBzY29yZXMgZm9yIGFsbCBzbGlkZXMuXG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuZ2V0U2xpZGVTY29yZXMgPSBmdW5jdGlvbiAobm9KdW1wKSB7XG4gIHZhciBqdW1wZWRUb0ZpcnN0ID0gKG5vSnVtcCA9PT0gdHJ1ZSk7XG4gIHZhciBzbGlkZVNjb3JlcyA9IFtdO1xuICB2YXIgaGFzU2NvcmVzID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXNXaXRoU29sdXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9uc1tpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMuZWxlbWVudHNBdHRhY2hlZFtpXSkge1xuICAgICAgICAvLyBBdHRhY2ggZWxlbWVudHMgYmVmb3JlIHNob3dpbmcgc29sdXRpb25zXG4gICAgICAgIHRoaXMuYXR0YWNoRWxlbWVudHModGhpcy4kc2xpZGVzV3JhcHBlci5jaGlsZHJlbignOmVxKCcgKyBpICsgJyknKSwgaSk7XG4gICAgICB9XG4gICAgICBpZiAoIWp1bXBlZFRvRmlyc3QpIHtcbiAgICAgICAgdGhpcy5qdW1wVG9TbGlkZShpLCBmYWxzZSk7XG4gICAgICAgIGp1bXBlZFRvRmlyc3QgPSB0cnVlOyAvLyBUT0RPOiBFeHBsYWluIHdoYXQgdGhpcyByZWFsbHkgZG9lcy5cbiAgICAgIH1cbiAgICAgIHZhciBzbGlkZVNjb3JlID0gMDtcbiAgICAgIHZhciBzbGlkZU1heFNjb3JlID0gMDtcbiAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc2xpZGVzV2l0aFNvbHV0aW9uc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZWxlbWVudEluc3RhbmNlID0gdGhpcy5zbGlkZXNXaXRoU29sdXRpb25zW2ldW2pdO1xuICAgICAgIFxuICAgICAgICBpZiAoZWxlbWVudEluc3RhbmNlLmdldE1heFNjb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlbGVtZW50SW5zdGFuY2UpO1xuICAgICAgICAgIHNsaWRlTWF4U2NvcmUgKz0gZWxlbWVudEluc3RhbmNlLmdldE1heFNjb3JlKCk7XG4gICAgICAgICAgc2xpZGVTY29yZSArPSBlbGVtZW50SW5zdGFuY2UuZ2V0U2NvcmUoKTtcbiAgICAgICAgICBoYXNTY29yZXMgPSB0cnVlO1xuICAgICAgICAgIGluZGV4ZXMucHVzaChlbGVtZW50SW5zdGFuY2UuY291cnNlUHJlc2VudGF0aW9uSW5kZXhPblNsaWRlKTtcbiAgICAgICAgICAvLy8vY3VzdG9taXphdGlvblxuICAgICAgICAgLy8gY29uc29sZS5sb2coZWxlbWVudEluc3RhbmNlLmdldE1heFNjb3JlKCkpO1xuICAgICAgICAgIGlmKHRoaXMucHJldmlvdXNTdGF0ZSAmJiB0aGlzLnByZXZpb3VzU3RhdGUgIT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMucHJldmlvdXNTdGF0ZS5hbnN3ZXJzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvL2NvbnN0IHNjb3Jlc19saXN0ID0gdGhpcy5wcmV2aW91c1N0YXRlLmFuc3dlcnM7XG4gICAgICAgICAgICAgIC8vZm9yICh2YXIgayA9IDA7IGsgPCBzY29yZXNfbGlzdC5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMucHJldmlvdXNTdGF0ZS5hbnN3ZXJzW2ldWzBdICE9IHVuZGVmaW5lZCAmJiBzbGlkZVNjb3JlID09IDAgJiYgdGhpcy5wcmV2aW91c1N0YXRlLmFuc3dlcnNbaV1bMF1bJ3Njb3JlJ10pXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCAgdGhpcy5wcmV2aW91c1N0YXRlLmFuc3dlcnNbaV1bMF1bJ3Njb3JlJ10ubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnByZXZpb3VzU3RhdGUuYW5zd2Vycyk7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlU2NvcmUgKz0gdGhpcy5wcmV2aW91c1N0YXRlLmFuc3dlcnNbaV1bMF1bJ3Njb3JlJ11bbF07XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlTWF4U2NvcmUgKz0gdGhpcy5wcmV2aW91c1N0YXRlLmFuc3dlcnNbaV1bMF1bJ21heFNjb3JlJ11bbF07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSAgXG4gICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8vLy8vLy8vXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhzbGlkZU1heFNjb3JlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2xpZGVTY29yZXMucHVzaCh7XG4gICAgICAgIGluZGV4ZXM6IGluZGV4ZXMsXG4gICAgICAgIHNsaWRlOiAoaSArIDEpLFxuICAgICAgICBzY29yZTogc2xpZGVTY29yZSxcbiAgICAgICAgbWF4U2NvcmU6IHNsaWRlTWF4U2NvcmVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAoaGFzU2NvcmVzKSB7XG4gICAgY29uc29sZS5sb2coc2xpZGVTY29yZXMpO1xuICAgIHJldHVybiBzbGlkZVNjb3JlcztcbiAgfVxufTtcblxuLyoqXG4gKiBHYXRoZXIgY29weXJpZ2h0IGluZm9ybWF0aW9uIGZvciB0aGUgY3VycmVudCBjb250ZW50LlxuICpcbiAqIEByZXR1cm5zIHtINVAuQ29udGVudENvcHlyaWdodHN9XG4gKi9cbkNvdXJzZVByZXNlbnRhdGlvbi5wcm90b3R5cGUuZ2V0Q29weXJpZ2h0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGluZm8gPSBuZXcgSDVQLkNvbnRlbnRDb3B5cmlnaHRzKCk7XG4gIHZhciBlbGVtZW50Q29weXJpZ2h0cztcblxuICAvLyBDaGVjayBmb3IgYSBjb21tb24gYmFja2dyb3VuZCBpbWFnZSBzaGFyZWQgYnkgYWxsIHNsaWRlc1xuICBpZiAodGhpcy5wcmVzZW50YXRpb24gJiYgdGhpcy5wcmVzZW50YXRpb24uZ2xvYmFsQmFja2dyb3VuZFNlbGVjdG9yICYmXG4gICAgICB0aGlzLnByZXNlbnRhdGlvbi5nbG9iYWxCYWNrZ3JvdW5kU2VsZWN0b3IuaW1hZ2VHbG9iYWxCYWNrZ3JvdW5kKSB7XG5cbiAgICAvLyBBZGQgaW1hZ2UgY29weXJpZ2h0cyB0byB0aGUgcHJlc2VudGF0aW9uIHNjb3BlXG4gICAgdmFyIGdsb2JhbEJhY2tncm91bmRJbWFnZVBhcmFtcyA9IHRoaXMucHJlc2VudGF0aW9uLmdsb2JhbEJhY2tncm91bmRTZWxlY3Rvci5pbWFnZUdsb2JhbEJhY2tncm91bmQ7XG4gICAgdmFyIGdsb2JhbEJhY2tncm91bmRJbWFnZUNvcHlyaWdodCA9IG5ldyBINVAuTWVkaWFDb3B5cmlnaHQoZ2xvYmFsQmFja2dyb3VuZEltYWdlUGFyYW1zLmNvcHlyaWdodCk7XG4gICAgZ2xvYmFsQmFja2dyb3VuZEltYWdlQ29weXJpZ2h0LnNldFRodW1ibmFpbChuZXcgSDVQLlRodW1ibmFpbChINVAuZ2V0UGF0aChnbG9iYWxCYWNrZ3JvdW5kSW1hZ2VQYXJhbXMucGF0aCwgdGhpcy5jb250ZW50SWQpLCBnbG9iYWxCYWNrZ3JvdW5kSW1hZ2VQYXJhbXMud2lkdGgsIGdsb2JhbEJhY2tncm91bmRJbWFnZVBhcmFtcy5oZWlnaHQpKTtcbiAgICBpbmZvLmFkZE1lZGlhKGdsb2JhbEJhY2tncm91bmRJbWFnZUNvcHlyaWdodCk7XG4gIH1cblxuICBmb3IgKHZhciBzbGlkZSA9IDA7IHNsaWRlIDwgdGhpcy5zbGlkZXMubGVuZ3RoOyBzbGlkZSsrKSB7XG4gICAgdmFyIHNsaWRlSW5mbyA9IG5ldyBINVAuQ29udGVudENvcHlyaWdodHMoKTtcbiAgICBzbGlkZUluZm8uc2V0TGFiZWwodGhpcy5sMTBuLnNsaWRlICsgJyAnICsgKHNsaWRlICsgMSkpO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGEgc2xpZGUgc3BlY2lmaWMgYmFja2dyb3VuZCBpbWFnZVxuICAgIGlmICh0aGlzLnNsaWRlc1tzbGlkZV0gJiYgdGhpcy5zbGlkZXNbc2xpZGVdLnNsaWRlQmFja2dyb3VuZFNlbGVjdG9yICYmXG4gICAgICAgIHRoaXMuc2xpZGVzW3NsaWRlXS5zbGlkZUJhY2tncm91bmRTZWxlY3Rvci5pbWFnZVNsaWRlQmFja2dyb3VuZCkge1xuXG4gICAgICAvLyBBZGQgaW1hZ2UgY29weXJpZ2h0cyB0byB0aGUgc2xpZGUgc2NvcGVcbiAgICAgIHZhciBzbGlkZUJhY2tncm91bmRJbWFnZVBhcmFtcyA9IHRoaXMuc2xpZGVzW3NsaWRlXS5zbGlkZUJhY2tncm91bmRTZWxlY3Rvci5pbWFnZVNsaWRlQmFja2dyb3VuZDtcbiAgICAgIHZhciBzbGlkZUJhY2tncm91bmRJbWFnZUNvcHlyaWdodCA9IG5ldyBINVAuTWVkaWFDb3B5cmlnaHQoc2xpZGVCYWNrZ3JvdW5kSW1hZ2VQYXJhbXMuY29weXJpZ2h0KTtcbiAgICAgIHNsaWRlQmFja2dyb3VuZEltYWdlQ29weXJpZ2h0LnNldFRodW1ibmFpbChuZXcgSDVQLlRodW1ibmFpbChINVAuZ2V0UGF0aChzbGlkZUJhY2tncm91bmRJbWFnZVBhcmFtcy5wYXRoLCB0aGlzLmNvbnRlbnRJZCksIHNsaWRlQmFja2dyb3VuZEltYWdlUGFyYW1zLndpZHRoLCBzbGlkZUJhY2tncm91bmRJbWFnZVBhcmFtcy5oZWlnaHQpKTtcbiAgICAgIHNsaWRlSW5mby5hZGRNZWRpYShzbGlkZUJhY2tncm91bmRJbWFnZUNvcHlyaWdodCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNsaWRlIGhhcyBlbGVtZW50cywgYWRkIHRoZSBvbmVzIHdpdGggY29weXJpZ2h0IGluZm8gdG8gdGhpcyBzbGlkZXMgY29weXJpZ2h0XG4gICAgaWYgKHRoaXMuZWxlbWVudEluc3RhbmNlc1tzbGlkZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yICh2YXIgZWxlbWVudCA9IDA7IGVsZW1lbnQgPCB0aGlzLmVsZW1lbnRJbnN0YW5jZXNbc2xpZGVdLmxlbmd0aDsgZWxlbWVudCsrKSB7XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZWxlbWVudEluc3RhbmNlc1tzbGlkZV1bZWxlbWVudF07XG5cbiAgICAgICAgaWYgKCF0aGlzLnNsaWRlc1tzbGlkZV0uZWxlbWVudHNbZWxlbWVudF0uYWN0aW9uKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5zbGlkZXNbc2xpZGVdLmVsZW1lbnRzW2VsZW1lbnRdLmFjdGlvbi5wYXJhbXM7XG4gICAgICAgIHZhciBtZXRhZGF0YSA9IHRoaXMuc2xpZGVzW3NsaWRlXS5lbGVtZW50c1tlbGVtZW50XS5hY3Rpb24ubWV0YWRhdGE7XG5cbiAgICAgICAgZWxlbWVudENvcHlyaWdodHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChpbnN0YW5jZS5nZXRDb3B5cmlnaHRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBVc2UgdGhlIGluc3RhbmNlJ3Mgb3duIGNvcHlyaWdodCBnZW5lcmF0b3JcbiAgICAgICAgICBlbGVtZW50Q29weXJpZ2h0cyA9IGluc3RhbmNlLmdldENvcHlyaWdodHMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudENvcHlyaWdodHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGdlbmVyaWMgZmxhdCBjb3B5cmlnaHQgbGlzdFxuICAgICAgICAgIGVsZW1lbnRDb3B5cmlnaHRzID0gbmV3IEg1UC5Db250ZW50Q29weXJpZ2h0cygpO1xuICAgICAgICAgIC8vIEluIG1ldGFkYXRhIGFsb25lIHRoZXJlJ3Mgbm8gd2F5IG9mIGtub3dpbmcgd2hhdCB0aGUgbWFjaGluZU5hbWUgaXMuXG4gICAgICAgICAgSDVQLmZpbmRDb3B5cmlnaHRzKGVsZW1lbnRDb3B5cmlnaHRzLCBwYXJhbXMsIHRoaXMuY29udGVudElkLCB7bWV0YWRhdGE6IG1ldGFkYXRhLCBtYWNoaW5lTmFtZTogaW5zdGFuY2UubGlicmFyeUluZm8ubWFjaGluZU5hbWV9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGFiZWwgPSAoZWxlbWVudCArIDEpO1xuICAgICAgICBpZiAocGFyYW1zLmNvbnRlbnROYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsYWJlbCArPSAnOiAnICsgcGFyYW1zLmNvbnRlbnROYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLmdldFRpdGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsYWJlbCArPSAnOiAnICsgaW5zdGFuY2UuZ2V0VGl0bGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbXMubDEwbiAmJiBwYXJhbXMubDEwbi5uYW1lKSB7XG4gICAgICAgICAgbGFiZWwgKz0gJzogJyArIHBhcmFtcy5sMTBuLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudENvcHlyaWdodHMuc2V0TGFiZWwobGFiZWwpO1xuXG4gICAgICAgIHNsaWRlSW5mby5hZGRDb250ZW50KGVsZW1lbnRDb3B5cmlnaHRzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaW5mby5hZGRDb250ZW50KHNsaWRlSW5mbyk7XG4gIH1cblxuICByZXR1cm4gaW5mbztcbn07XG5cbi8qKlxuICogR2V0IHhBUEkgZGF0YS5cbiAqIENvbnRyYWN0IHVzZWQgYnkgcmVwb3J0IHJlbmRlcmluZyBlbmdpbmUuXG4gKlxuICogQHNlZSBjb250cmFjdCBhdCB7QGxpbmsgaHR0cHM6Ly9oNXAub3JnL2RvY3VtZW50YXRpb24vZGV2ZWxvcGVycy9jb250cmFjdHMjZ3VpZGVzLWhlYWRlci02fVxuICovXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLmdldFhBUElEYXRhID0gZnVuY3Rpb24gKCkge1xuICB2YXIgeEFQSUV2ZW50ID0gdGhpcy5jcmVhdGVYQVBJRXZlbnRUZW1wbGF0ZSgnYW5zd2VyZWQnKTtcbiAgLy8gY29uc29sZS5sb2coXCJkYWJjIGFiY1wiKTtcbiAgLy8gRXh0ZW5kIGRlZmluaXRpb25cbiAgdmFyIGRlZmluaXRpb24gPSB4QVBJRXZlbnQuZ2V0VmVyaWZpZWRTdGF0ZW1lbnRWYWx1ZShbJ29iamVjdCcsICdkZWZpbml0aW9uJ10pO1xuICBINVAualF1ZXJ5LmV4dGVuZChkZWZpbml0aW9uLCB7XG4gICAgaW50ZXJhY3Rpb25UeXBlOiAnY29tcG91bmQnLFxuICAgIHR5cGU6ICdodHRwOi8vYWRsbmV0Lmdvdi9leHBhcGkvYWN0aXZpdGllcy9jbWkuaW50ZXJhY3Rpb24nXG4gIH0pO1xuXG4gIHZhciBzY29yZSA9IHRoaXMuZ2V0U2NvcmUoKTtcbiAgdmFyIG1heFNjb3JlID0gdGhpcy5nZXRNYXhTY29yZSgpO1xuICB4QVBJRXZlbnQuc2V0U2NvcmVkUmVzdWx0KHNjb3JlLCBtYXhTY29yZSwgdGhpcywgdHJ1ZSwgc2NvcmUgPT09IG1heFNjb3JlKTtcblxuICB2YXIgY2hpbGRyZW5YQVBJRGF0YSA9IGZsYXR0ZW5BcnJheSh0aGlzLnNsaWRlc1dpdGhTb2x1dGlvbnMpLm1hcCgoY2hpbGQpID0+IHtcbiAgICBpZiAoY2hpbGQgJiYgY2hpbGQuZ2V0WEFQSURhdGEpIHtcbiAgICAgIHJldHVybiBjaGlsZC5nZXRYQVBJRGF0YSgpO1xuICAgIH1cbiAgfSkuZmlsdGVyKGRhdGEgPT4gISFkYXRhKTtcblxuICByZXR1cm4ge1xuICAgIHN0YXRlbWVudDogeEFQSUV2ZW50LmRhdGEuc3RhdGVtZW50LFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlblhBUElEYXRhXG4gIH07XG59O1xuXG4vKipcbiAqIFRyaWdnZXIgY29tcGxldGVkIHN0YXRlbWVudCBmb3IgdGhlIHByZXNlbnRhdGlvblxuICovXG4gQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS50cmlnZ2VyQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBzY29yZXMgPSB0aGlzLmdldFNsaWRlU2NvcmVzKCk7XG4gIGxldCB0b3RhbFNjb3JlID0gMDtcbiAgbGV0IHRvdGFsTWF4U2NvcmUgPSAwO1xuXG4gIGlmIChzY29yZXMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjb3Jlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgdG90YWxTY29yZSArPSBzY29yZXNbaV0uc2NvcmU7XG4gICAgICB0b3RhbE1heFNjb3JlICs9IHNjb3Jlc1tpXS5tYXhTY29yZTtcbiAgICB9XG4gIH1cbiAgXG4gIHRoaXMudHJpZ2dlclhBUElDb21wbGV0ZWQodG90YWxTY29yZSwgdG90YWxNYXhTY29yZSk7XG59O1xuXG5Db3Vyc2VQcmVzZW50YXRpb24ucHJvdG90eXBlLnRyaWdnZXJDb25zdW1lZEV2ZW50Rm9yUmVhZE9ubHkgPSBmdW5jdGlvbiAobGlicmFyeSwgaW5zdGFuY2UpIHtcbiAgY29uc3QgcmVhZE9ubHlMaWJyYXJpZXMgPSBbJ0g1UC5BZHZhbmNlZFRleHQnLCAnSDVQLkltYWdlJywgJ0g1UC5TaGFwZScsICdINVAuVGFibGUnLCAnSDVQLlZpZGVvJywnSDVQLkNvbnRpbnVvdXNUZXh0JywnSDVQLkV4cG9ydGFibGVUZXh0QXJlYScsICdINVAuVHdpdHRlclVzZXJGZWVkJ107XG4gIGlmKHRoaXMuZWRpdG9yID09PSB1bmRlZmluZWQgJiYgcmVhZE9ubHlMaWJyYXJpZXMuaW5jbHVkZXMobGlicmFyeSkpIHtcbiAgICBpbnN0YW5jZS50cmlnZ2VyKCd0cmlnZ2VyLWNvbnN1bWVkJyk7XG4gIH1cbn07XG4vKipcbiAqIEdldCBjb250ZXh0IGRhdGEuXG4gKiBDb250cmFjdCB1c2VkIGZvciBjb25mdXNpb24gcmVwb3J0LlxuICovXG4gQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgLy8gR2V0IGN1cnJlbnQgc2xpZGUgbnVtYmVyIGhlcmUgaXQgc3RhcnRzIHdpdGggemVyb1xuICBjb25zdCBzbGlkZSA9IChzZWxmLmN1cnJlbnRTbGlkZUluZGV4ICsgMSk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ3NsaWRlJyxcbiAgICB2YWx1ZTogc2xpZGVcbiAgfTtcbn07XG5cbi8qKlxuICogR2V0IHRpdGxlLCBlLmcuIGZvciB4QVBJXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaXRsZS5cbiAqL1xuQ291cnNlUHJlc2VudGF0aW9uLnByb3RvdHlwZS5nZXRUaXRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIEg1UC5jcmVhdGVUaXRsZSh0aGlzLnRpdGxlKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvdXJzZVByZXNlbnRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/cp.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/element.js":
    /*!********************************!*\
      !*** ./src/scripts/element.js ***!
      \********************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _go_to_slide__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./go-to-slide */ \"./src/scripts/go-to-slide.js\");\n\n/**\n * @class\n */\n\nfunction Element(parameters) {\n  var self = this;\n\n  if (parameters.action === undefined) {\n    // goToSlide, internal element\n    self.instance = new _go_to_slide__WEBPACK_IMPORTED_MODULE_0__[\"default\"](parameters, {\n      l10n: self.parent.parent.l10n,\n      currentIndex: self.parent.index,\n      parent: self.parent\n    });\n\n    if (!self.parent.parent.isEditor()) {\n      self.instance.on('navigate', function (event) {\n        var index = event.data;\n        self.parent.parent.jumpToSlide(index);\n      });\n    }\n  } else {\n    // H5P library\n    var library;\n\n    if (self.parent.parent.isEditor()) {\n      // Clone the whole tree to avoid libraries accidentally changing params while running.\n      library = H5P.jQuery.extend(true, {}, parameters.action, self.parent.parent.elementsOverride);\n    } else {\n      // Add defaults\n      library = H5P.jQuery.extend(true, parameters.action, self.parent.parent.elementsOverride);\n    }\n\n    var internalSlideId = self.parent.parent.elementInstances[self.parent.index] ? self.parent.parent.elementInstances[self.parent.index].length : 0;\n\n    if (self.parent.parent.previousState && self.parent.parent.previousState.answers && self.parent.parent.previousState.answers[self.parent.index] && self.parent.parent.previousState.answers[self.parent.index][internalSlideId]) {\n      // Restore previous state\n      library.userDatas = {\n        state: self.parent.parent.previousState.answers[self.parent.index][internalSlideId]\n      };\n    } // Override child settings\n\n\n    library.params = library.params || {};\n    self.instance = H5P.newRunnable(library, self.parent.parent.contentId, undefined, true, {\n      parent: self.parent.parent\n    });\n\n    if (self.instance.preventResize !== undefined) {\n      self.instance.preventResize = true;\n    }\n  }\n\n  if (self.parent.parent.elementInstances[self.parent.index] === undefined) {\n    self.parent.parent.elementInstances[self.parent.index] = [self.instance];\n  } else {\n    self.parent.parent.elementInstances[self.parent.index].push(self.instance);\n  }\n\n  if (self.instance.showCPComments !== undefined || self.instance.isTask || self.instance.isTask === undefined && self.instance.showSolutions !== undefined) {\n    // Mark slide as task in CP navigation bar\n    self.instance.coursePresentationIndexOnSlide = self.parent.parent.elementInstances[self.parent.index].length - 1;\n\n    if (self.parent.parent.slidesWithSolutions[self.parent.index] === undefined) {\n      self.parent.parent.slidesWithSolutions[self.parent.index] = [];\n    }\n\n    self.parent.parent.slidesWithSolutions[self.parent.index].push(self.instance);\n  } // Check for comments to show after solution button is pressed\n  else if (parameters.solution) {\n    if (self.parent.parent.showCommentsAfterSolution[self.parent.index] === undefined) {\n      self.parent.parent.showCommentsAfterSolution[self.parent.index] = [];\n    }\n\n    self.parent.parent.showCommentsAfterSolution[self.parent.index].push(self.instance);\n  } // Check if this is an Exportable Text Area\n\n\n  if (self.instance.exportAnswers !== undefined && self.instance.exportAnswers) {\n    self.parent.parent.hasAnswerElements = true;\n  }\n\n  if (!self.parent.parent.isTask && !self.parent.parent.hideSummarySlide) {\n    // CP is not a task by default, but it will be if one of the elements is task or have a solution\n    if (self.instance.isTask || self.instance.isTask === undefined && self.instance.showSolutions !== undefined) {\n      self.parent.parent.isTask = true; // (checking for showSolutions will not work for compound content types, which is why we added isTask instead.)\n    }\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Element);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9lbGVtZW50LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFHQTtBQUNBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3NjcmlwdHMvZWxlbWVudC5qcz9iYjk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHb1RvU2xpZGUgZnJvbSAnLi9nby10by1zbGlkZSc7XG5cbi8qKlxuICogQGNsYXNzXG4gKi9cbmZ1bmN0aW9uIEVsZW1lbnQocGFyYW1ldGVycykge1xuICBjb25zdCBzZWxmID0gdGhpcztcblxuICBpZiAocGFyYW1ldGVycy5hY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIGdvVG9TbGlkZSwgaW50ZXJuYWwgZWxlbWVudFxuICAgIHNlbGYuaW5zdGFuY2UgPSBuZXcgR29Ub1NsaWRlKHBhcmFtZXRlcnMsIHtcbiAgICAgIGwxMG46IHNlbGYucGFyZW50LnBhcmVudC5sMTBuLFxuICAgICAgY3VycmVudEluZGV4OiBzZWxmLnBhcmVudC5pbmRleCxcbiAgICAgIHBhcmVudDogc2VsZi5wYXJlbnRcbiAgICB9KTtcblxuICAgIGlmICghc2VsZi5wYXJlbnQucGFyZW50LmlzRWRpdG9yKCkpIHtcbiAgICAgIHNlbGYuaW5zdGFuY2Uub24oJ25hdmlnYXRlJywgZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCBpbmRleCA9IGV2ZW50LmRhdGE7XG4gICAgICAgIHNlbGYucGFyZW50LnBhcmVudC5qdW1wVG9TbGlkZShpbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gSDVQIGxpYnJhcnlcbiAgICB2YXIgbGlicmFyeTtcbiAgICBpZiAoc2VsZi5wYXJlbnQucGFyZW50LmlzRWRpdG9yKCkpIHtcbiAgICAgIC8vIENsb25lIHRoZSB3aG9sZSB0cmVlIHRvIGF2b2lkIGxpYnJhcmllcyBhY2NpZGVudGFsbHkgY2hhbmdpbmcgcGFyYW1zIHdoaWxlIHJ1bm5pbmcuXG4gICAgICBsaWJyYXJ5ID0gSDVQLmpRdWVyeS5leHRlbmQodHJ1ZSwge30sIHBhcmFtZXRlcnMuYWN0aW9uLCBzZWxmLnBhcmVudC5wYXJlbnQuZWxlbWVudHNPdmVycmlkZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gQWRkIGRlZmF1bHRzXG4gICAgICBsaWJyYXJ5ID0gSDVQLmpRdWVyeS5leHRlbmQodHJ1ZSwgcGFyYW1ldGVycy5hY3Rpb24sIHNlbGYucGFyZW50LnBhcmVudC5lbGVtZW50c092ZXJyaWRlKTtcbiAgICB9XG5cbiAgICB2YXIgaW50ZXJuYWxTbGlkZUlkID0gc2VsZi5wYXJlbnQucGFyZW50LmVsZW1lbnRJbnN0YW5jZXNbc2VsZi5wYXJlbnQuaW5kZXhdID8gc2VsZi5wYXJlbnQucGFyZW50LmVsZW1lbnRJbnN0YW5jZXNbc2VsZi5wYXJlbnQuaW5kZXhdLmxlbmd0aCA6IDA7XG4gICAgaWYgKHNlbGYucGFyZW50LnBhcmVudC5wcmV2aW91c1N0YXRlICYmIHNlbGYucGFyZW50LnBhcmVudC5wcmV2aW91c1N0YXRlLmFuc3dlcnMgJiYgc2VsZi5wYXJlbnQucGFyZW50LnByZXZpb3VzU3RhdGUuYW5zd2Vyc1tzZWxmLnBhcmVudC5pbmRleF0gJiYgc2VsZi5wYXJlbnQucGFyZW50LnByZXZpb3VzU3RhdGUuYW5zd2Vyc1tzZWxmLnBhcmVudC5pbmRleF1baW50ZXJuYWxTbGlkZUlkXSkge1xuICAgICAgLy8gUmVzdG9yZSBwcmV2aW91cyBzdGF0ZVxuICAgICAgbGlicmFyeS51c2VyRGF0YXMgPSB7XG4gICAgICAgIHN0YXRlOiBzZWxmLnBhcmVudC5wYXJlbnQucHJldmlvdXNTdGF0ZS5hbnN3ZXJzW3NlbGYucGFyZW50LmluZGV4XVtpbnRlcm5hbFNsaWRlSWRdXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIGNoaWxkIHNldHRpbmdzXG4gICAgbGlicmFyeS5wYXJhbXMgPSBsaWJyYXJ5LnBhcmFtcyB8fCB7fTtcbiAgICBzZWxmLmluc3RhbmNlID0gSDVQLm5ld1J1bm5hYmxlKGxpYnJhcnksIHNlbGYucGFyZW50LnBhcmVudC5jb250ZW50SWQsIHVuZGVmaW5lZCwgdHJ1ZSwge3BhcmVudDogc2VsZi5wYXJlbnQucGFyZW50fSk7XG4gICAgaWYgKHNlbGYuaW5zdGFuY2UucHJldmVudFJlc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZWxmLmluc3RhbmNlLnByZXZlbnRSZXNpemUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzZWxmLnBhcmVudC5wYXJlbnQuZWxlbWVudEluc3RhbmNlc1tzZWxmLnBhcmVudC5pbmRleF0gPT09IHVuZGVmaW5lZCkge1xuICAgIHNlbGYucGFyZW50LnBhcmVudC5lbGVtZW50SW5zdGFuY2VzW3NlbGYucGFyZW50LmluZGV4XSA9IFtzZWxmLmluc3RhbmNlXTtcbiAgfVxuICBlbHNlIHtcbiAgICBzZWxmLnBhcmVudC5wYXJlbnQuZWxlbWVudEluc3RhbmNlc1tzZWxmLnBhcmVudC5pbmRleF0ucHVzaChzZWxmLmluc3RhbmNlKTtcbiAgfVxuXG4gIGlmIChzZWxmLmluc3RhbmNlLnNob3dDUENvbW1lbnRzICE9PSB1bmRlZmluZWQgfHwgc2VsZi5pbnN0YW5jZS5pc1Rhc2sgfHwgKHNlbGYuaW5zdGFuY2UuaXNUYXNrID09PSB1bmRlZmluZWQgJiYgc2VsZi5pbnN0YW5jZS5zaG93U29sdXRpb25zICE9PSB1bmRlZmluZWQpKSB7XG4gICAgLy8gTWFyayBzbGlkZSBhcyB0YXNrIGluIENQIG5hdmlnYXRpb24gYmFyXG4gICAgc2VsZi5pbnN0YW5jZS5jb3Vyc2VQcmVzZW50YXRpb25JbmRleE9uU2xpZGUgPSBzZWxmLnBhcmVudC5wYXJlbnQuZWxlbWVudEluc3RhbmNlc1tzZWxmLnBhcmVudC5pbmRleF0ubGVuZ3RoIC0gMTtcbiAgICBpZiAoc2VsZi5wYXJlbnQucGFyZW50LnNsaWRlc1dpdGhTb2x1dGlvbnNbc2VsZi5wYXJlbnQuaW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHNlbGYucGFyZW50LnBhcmVudC5zbGlkZXNXaXRoU29sdXRpb25zW3NlbGYucGFyZW50LmluZGV4XSA9IFtdO1xuICAgIH1cbiAgICBzZWxmLnBhcmVudC5wYXJlbnQuc2xpZGVzV2l0aFNvbHV0aW9uc1tzZWxmLnBhcmVudC5pbmRleF0ucHVzaChzZWxmLmluc3RhbmNlKTtcbiAgfVxuICAvLyBDaGVjayBmb3IgY29tbWVudHMgdG8gc2hvdyBhZnRlciBzb2x1dGlvbiBidXR0b24gaXMgcHJlc3NlZFxuICBlbHNlIGlmIChwYXJhbWV0ZXJzLnNvbHV0aW9uKSB7XG4gICAgaWYgKHNlbGYucGFyZW50LnBhcmVudC5zaG93Q29tbWVudHNBZnRlclNvbHV0aW9uW3NlbGYucGFyZW50LmluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZWxmLnBhcmVudC5wYXJlbnQuc2hvd0NvbW1lbnRzQWZ0ZXJTb2x1dGlvbltzZWxmLnBhcmVudC5pbmRleF0gPSBbXTtcbiAgICB9XG4gICAgc2VsZi5wYXJlbnQucGFyZW50LnNob3dDb21tZW50c0FmdGVyU29sdXRpb25bc2VsZi5wYXJlbnQuaW5kZXhdLnB1c2goc2VsZi5pbnN0YW5jZSk7XG4gIH1cblxuICAvLyBDaGVjayBpZiB0aGlzIGlzIGFuIEV4cG9ydGFibGUgVGV4dCBBcmVhXG4gIGlmIChzZWxmLmluc3RhbmNlLmV4cG9ydEFuc3dlcnMgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmluc3RhbmNlLmV4cG9ydEFuc3dlcnMpIHtcbiAgICBzZWxmLnBhcmVudC5wYXJlbnQuaGFzQW5zd2VyRWxlbWVudHMgPSB0cnVlO1xuICB9XG5cbiAgaWYgKCFzZWxmLnBhcmVudC5wYXJlbnQuaXNUYXNrICYmICFzZWxmLnBhcmVudC5wYXJlbnQuaGlkZVN1bW1hcnlTbGlkZSkge1xuICAgIC8vIENQIGlzIG5vdCBhIHRhc2sgYnkgZGVmYXVsdCwgYnV0IGl0IHdpbGwgYmUgaWYgb25lIG9mIHRoZSBlbGVtZW50cyBpcyB0YXNrIG9yIGhhdmUgYSBzb2x1dGlvblxuICAgIGlmIChzZWxmLmluc3RhbmNlLmlzVGFzayB8fCAoc2VsZi5pbnN0YW5jZS5pc1Rhc2sgPT09IHVuZGVmaW5lZCAmJiBzZWxmLmluc3RhbmNlLnNob3dTb2x1dGlvbnMgIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIHNlbGYucGFyZW50LnBhcmVudC5pc1Rhc2sgPSB0cnVlOyAvLyAoY2hlY2tpbmcgZm9yIHNob3dTb2x1dGlvbnMgd2lsbCBub3Qgd29yayBmb3IgY29tcG91bmQgY29udGVudCB0eXBlcywgd2hpY2ggaXMgd2h5IHdlIGFkZGVkIGlzVGFzayBpbnN0ZWFkLilcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRWxlbWVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/element.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/globals.js":
    /*!********************************!*\
      !*** ./src/scripts/globals.js ***!
      \********************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventDispatcher\": () => (/* binding */ EventDispatcher),\n/* harmony export */   \"JoubelUI\": () => (/* binding */ JoubelUI),\n/* harmony export */   \"jQuery\": () => (/* binding */ jQuery)\n/* harmony export */ });\nvar jQuery = H5P.jQuery;\nvar EventDispatcher = H5P.EventDispatcher;\nvar JoubelUI = H5P.JoubelUI;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9nbG9iYWxzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3NjcmlwdHMvZ2xvYmFscy5qcz83ZmUwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBqUXVlcnkgPSBINVAualF1ZXJ5O1xuZXhwb3J0IGNvbnN0IEV2ZW50RGlzcGF0Y2hlciA9IEg1UC5FdmVudERpc3BhdGNoZXI7XG5leHBvcnQgY29uc3QgSm91YmVsVUkgPSBINVAuSm91YmVsVUk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/globals.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/go-to-slide.js":
    /*!************************************!*\
      !*** ./src/scripts/go-to-slide.js ***!
      \************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GoToSlide)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/scripts/utils.js\");\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals */ \"./src/scripts/globals.js\");\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n/**\n * Enum containing possible navigation types\n * @readonly\n * @enum {string}\n */\n\nvar navigationType = {\n  SPECIFIED: 'specified',\n  NEXT: 'next',\n  PREVIOUS: 'previous'\n};\n/**\n * @class\n */\n\nvar GoToSlide = /*#__PURE__*/function () {\n  /**\n   * Element for linking between slides in presentations.\n   *\n   * @constructor\n   * @param {string} title\n   * @param {number} goToSlide\n   * @param {boolean} invisible\n   * @param {string} goToSlideType\n   * @param {object} l10n\n   * @param {number} currentIndex\n   * @param {object} parent\n   */\n  function GoToSlide(_ref, _ref2) {\n    var _this = this;\n\n    var title = _ref.title,\n        _ref$goToSlide = _ref.goToSlide,\n        goToSlide = _ref$goToSlide === void 0 ? 1 : _ref$goToSlide,\n        invisible = _ref.invisible,\n        _ref$goToSlideType = _ref.goToSlideType,\n        goToSlideType = _ref$goToSlideType === void 0 ? navigationType.SPECIFIED : _ref$goToSlideType;\n    var l10n = _ref2.l10n,\n        currentIndex = _ref2.currentIndex,\n        parent = _ref2.parent;\n    this.eventDispatcher = new _globals__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher();\n    var classes = 'h5p-press-to-go';\n    var tabindex = 0;\n\n    if (invisible) {\n      title = undefined;\n      tabindex = -1;\n    } else {\n      if (!title) {\n        // No title so use the slide number, prev, or next.\n        switch (goToSlideType) {\n          case navigationType.SPECIFIED:\n            title = l10n.goToSlide.replace(':num', goToSlide.toString());\n            break;\n\n          case navigationType.NEXT:\n            title = l10n.goToSlide.replace(':num', l10n.nextSlide);\n            break;\n\n          case navigationType.PREVIOUS:\n            title = l10n.goToSlide.replace(':num', l10n.prevSlide);\n            break;\n        }\n      }\n\n      classes += ' h5p-visible';\n    } // Default goes to the set number\n\n\n    var goTo = goToSlide - 1; // Check if previous or next is selected.\n\n    if (goToSlideType === navigationType.NEXT) {\n      goTo = currentIndex + 1;\n    } else if (goToSlideType === navigationType.PREVIOUS) {\n      goTo = currentIndex - 1;\n    } // Create button that leads to another slide\n\n\n    this.$element = (0,_globals__WEBPACK_IMPORTED_MODULE_1__.jQuery)('<a/>', {\n      href: '#',\n      'class': classes,\n      tabindex: tabindex,\n      title: title\n    });\n    (0,_utils__WEBPACK_IMPORTED_MODULE_0__.addClickAndKeyboardListeners)(this.$element, function (event) {\n      _this.triggerXAPIConsumed(title, parent);\n\n      _this.eventDispatcher.trigger('navigate', goTo);\n\n      event.preventDefault();\n    });\n  }\n  /**\n   * Attach element to the given container.\n   *\n   * @public\n   * @param {jQuery} $container\n   */\n\n\n  var _proto = GoToSlide.prototype;\n\n  _proto.attach = function attach($container) {\n    $container.html('').addClass('h5p-go-to-slide').append(this.$element);\n  }\n  /**\n   * Register an event listener\n   *\n   * @param {string} name\n   * @param {function} callback\n   */\n  ;\n\n  _proto.on = function on(name, callback) {\n    this.eventDispatcher.on(name, callback);\n  }\n  /**\n   * Trigger the 'consumed' xAPI event\n   *\n   */\n  ;\n\n  _proto.triggerXAPIConsumed = function triggerXAPIConsumed(title, parent) {\n    var xAPIEvent = parent.parent.createXAPIEventTemplate({\n      id: 'http://activitystrea.ms/schema/1.0/consume',\n      display: {\n        'en-US': 'consumed'\n      }\n    }, {\n      result: {\n        completion: true\n      }\n    });\n\n    _extends(xAPIEvent.data.statement.object.definition, {\n      name: {\n        'en-US': title || 'Go To slide'\n      }\n    });\n\n    parent.parent.trigger(xAPIEvent);\n  };\n\n  return GoToSlide;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9nby10by1zbGlkZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTs7QUFDQTtBQUNBOzs7QUFHQTs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFEQTtBQURBOztBQU1BO0FBQ0E7QUFDQTtBQURBO0FBREE7O0FBTUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3NjcmlwdHMvZ28tdG8tc2xpZGUuanM/ZWQ4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhZGRDbGlja0FuZEtleWJvYXJkTGlzdGVuZXJzIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBqUXVlcnkgYXMgJCwgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSAnLi9nbG9iYWxzJztcblxuLyoqXG4gKiBFbnVtIGNvbnRhaW5pbmcgcG9zc2libGUgbmF2aWdhdGlvbiB0eXBlc1xuICogQHJlYWRvbmx5XG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBuYXZpZ2F0aW9uVHlwZSA9IHtcbiAgU1BFQ0lGSUVEOiAnc3BlY2lmaWVkJyxcbiAgTkVYVDogJ25leHQnLFxuICBQUkVWSU9VUzogJ3ByZXZpb3VzJ1xufTtcblxuLyoqXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR29Ub1NsaWRlIHtcbiAgLyoqXG4gICAqIEVsZW1lbnQgZm9yIGxpbmtpbmcgYmV0d2VlbiBzbGlkZXMgaW4gcHJlc2VudGF0aW9ucy5cbiAgICpcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gZ29Ub1NsaWRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW52aXNpYmxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBnb1RvU2xpZGVUeXBlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBsMTBuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50SW5kZXhcbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoeyB0aXRsZSwgZ29Ub1NsaWRlID0gMSwgaW52aXNpYmxlLCBnb1RvU2xpZGVUeXBlICA9IG5hdmlnYXRpb25UeXBlLlNQRUNJRklFRCB9LCB7IGwxMG4sIGN1cnJlbnRJbmRleCwgcGFyZW50IH0pIHtcbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIoKTtcbiAgICBsZXQgY2xhc3NlcyA9ICdoNXAtcHJlc3MtdG8tZ28nO1xuICAgIGxldCB0YWJpbmRleCA9IDA7XG5cbiAgICBpZiAoaW52aXNpYmxlKSB7XG4gICAgICB0aXRsZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRhYmluZGV4ID0gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICAvLyBObyB0aXRsZSBzbyB1c2UgdGhlIHNsaWRlIG51bWJlciwgcHJldiwgb3IgbmV4dC5cbiAgICAgICAgc3dpdGNoIChnb1RvU2xpZGVUeXBlKSB7XG4gICAgICAgICAgY2FzZSBuYXZpZ2F0aW9uVHlwZS5TUEVDSUZJRUQ6XG4gICAgICAgICAgICB0aXRsZSA9IGwxMG4uZ29Ub1NsaWRlLnJlcGxhY2UoJzpudW0nLCBnb1RvU2xpZGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIG5hdmlnYXRpb25UeXBlLk5FWFQ6XG4gICAgICAgICAgICB0aXRsZSA9IGwxMG4uZ29Ub1NsaWRlLnJlcGxhY2UoJzpudW0nLCBsMTBuLm5leHRTbGlkZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIG5hdmlnYXRpb25UeXBlLlBSRVZJT1VTOlxuICAgICAgICAgICAgdGl0bGUgPSBsMTBuLmdvVG9TbGlkZS5yZXBsYWNlKCc6bnVtJywgbDEwbi5wcmV2U2xpZGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNsYXNzZXMgKz0gJyBoNXAtdmlzaWJsZSc7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCBnb2VzIHRvIHRoZSBzZXQgbnVtYmVyXG4gICAgbGV0IGdvVG8gPSBnb1RvU2xpZGUgLSAxO1xuXG4gICAgLy8gQ2hlY2sgaWYgcHJldmlvdXMgb3IgbmV4dCBpcyBzZWxlY3RlZC5cbiAgICBpZiAoZ29Ub1NsaWRlVHlwZSA9PT0gbmF2aWdhdGlvblR5cGUuTkVYVCkge1xuICAgICAgZ29UbyA9IGN1cnJlbnRJbmRleCArIDE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGdvVG9TbGlkZVR5cGUgPT09IG5hdmlnYXRpb25UeXBlLlBSRVZJT1VTKSB7XG4gICAgICBnb1RvID0gY3VycmVudEluZGV4IC0gMTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYnV0dG9uIHRoYXQgbGVhZHMgdG8gYW5vdGhlciBzbGlkZVxuICAgIHRoaXMuJGVsZW1lbnQgPSAkKCc8YS8+Jywge1xuICAgICAgaHJlZjogJyMnLFxuICAgICAgJ2NsYXNzJzogY2xhc3NlcyxcbiAgICAgIHRhYmluZGV4OiB0YWJpbmRleCxcbiAgICAgIHRpdGxlOiB0aXRsZVxuICAgIH0pO1xuXG4gICAgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycyh0aGlzLiRlbGVtZW50LCBldmVudCA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXJYQVBJQ29uc3VtZWQodGl0bGUsIHBhcmVudCk7XG4gICAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci50cmlnZ2VyKCduYXZpZ2F0ZScsIGdvVG8pO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2ggZWxlbWVudCB0byB0aGUgZ2l2ZW4gY29udGFpbmVyLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkY29udGFpbmVyXG4gICAqL1xuICBhdHRhY2goJGNvbnRhaW5lcikge1xuICAgICRjb250YWluZXIuaHRtbCgnJykuYWRkQ2xhc3MoJ2g1cC1nby10by1zbGlkZScpLmFwcGVuZCh0aGlzLiRlbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbiBldmVudCBsaXN0ZW5lclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb24obmFtZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5vbihuYW1lLCBjYWxsYmFjayk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIHRoZSAnY29uc3VtZWQnIHhBUEkgZXZlbnRcbiAgICpcbiAgICovXG4gIHRyaWdnZXJYQVBJQ29uc3VtZWQodGl0bGUsIHBhcmVudCkge1xuICAgIHZhciB4QVBJRXZlbnQgPSBwYXJlbnQucGFyZW50LmNyZWF0ZVhBUElFdmVudFRlbXBsYXRlKHtcbiAgICAgIGlkOiAnaHR0cDovL2FjdGl2aXR5c3RyZWEubXMvc2NoZW1hLzEuMC9jb25zdW1lJyxcbiAgICAgIGRpc3BsYXk6IHtcbiAgICAgICAgJ2VuLVVTJzogJ2NvbnN1bWVkJ1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHJlc3VsdDoge1xuICAgICAgICBjb21wbGV0aW9uOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuYXNzaWduKHhBUElFdmVudC5kYXRhLnN0YXRlbWVudC5vYmplY3QuZGVmaW5pdGlvbiwge1xuICAgICAgbmFtZToge1xuICAgICAgICAnZW4tVVMnOiB0aXRsZSB8fCAnR28gVG8gc2xpZGUnXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBwYXJlbnQucGFyZW50LnRyaWdnZXIoeEFQSUV2ZW50KTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/go-to-slide.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/keyword-menu.js":
    /*!*************************************!*\
      !*** ./src/scripts/keyword-menu.js ***!
      \*************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ KeywordMenu)\n/* harmony export */ });\n/* harmony import */ var h5p_lib_controls_src_scripts_controls__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! h5p-lib-controls/src/scripts/controls */ \"./node_modules/h5p-lib-controls/src/scripts/controls.js\");\n/* harmony import */ var h5p_lib_controls_src_scripts_ui_keyboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! h5p-lib-controls/src/scripts/ui/keyboard */ \"./node_modules/h5p-lib-controls/src/scripts/ui/keyboard.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/scripts/utils.js\");\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./globals */ \"./src/scripts/globals.js\");\n\n\n\n\n/**\n * Select event.\n * @event KeywordMenu#select\n * @type {object}\n * @property {number} index The index of the selected menuitem\n */\n\n/**\n * @typedef {object} KeywordMenuItemConfig\n * @property {string} title\n * @property {string} subtitle\n * @property {number} index\n */\n\n/**\n * @typedef {object} KeywordMenuState\n * @property {number} currentIndex\n */\n\n/**\n * Returns the index stored in a elements dataset\n *\n * @param {Element|EventTarget} element\n * @return {number}\n */\n\nvar getElementsDatasetIndex = function getElementsDatasetIndex(element) {\n  return parseInt(element.dataset.index);\n};\n/**\n * @class\n */\n\n\nvar KeywordMenu = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {object} l10n\n   * @param {number} currentIndex\n   */\n  function KeywordMenu(_ref) {\n    var _this = this;\n\n    var l10n = _ref.l10n,\n        currentIndex = _ref.currentIndex;\n    this.l10n = l10n;\n    /**\n     * @type {KeywordMenuState}\n     */\n\n    this.state = {\n      currentIndex: (0,_utils__WEBPACK_IMPORTED_MODULE_2__.defaultValue)(currentIndex, 0)\n    };\n    this.eventDispatcher = new _globals__WEBPACK_IMPORTED_MODULE_3__.EventDispatcher();\n    this.controls = new h5p_lib_controls_src_scripts_controls__WEBPACK_IMPORTED_MODULE_0__[\"default\"]([new h5p_lib_controls_src_scripts_ui_keyboard__WEBPACK_IMPORTED_MODULE_1__[\"default\"]()]); // on keyboard select\n\n    this.controls.on('select', function (event) {\n      _this.onMenuItemSelect(getElementsDatasetIndex(event.element));\n    }); // propagate ESC event\n\n    this.controls.on('close', function () {\n      return _this.eventDispatcher.trigger('close');\n    });\n    this.menuElement = this.createMenuElement();\n    this.currentSlideMarkerElement = this.createCurrentSlideMarkerElement();\n  }\n  /**\n   * Initializes the config\n   *\n   * @param {KeywordMenuItemConfig[]} keywordConfigs\n   * @returns {Element[]}\n   */\n\n\n  var _proto = KeywordMenu.prototype;\n\n  _proto.init = function init(keywordConfigs) {\n    var _this2 = this;\n\n    this.menuItemElements = keywordConfigs.map(function (config) {\n      return _this2.createMenuItemElement(config);\n    });\n    this.menuItemElements.forEach(function (element) {\n      return _this2.menuElement.appendChild(element);\n    });\n    this.menuItemElements.forEach(function (element) {\n      return _this2.controls.addElement(element);\n    });\n    this.setCurrentSlideIndex(this.state.currentIndex);\n    return this.menuItemElements;\n  }\n  /**\n   * Register an event listener\n   *\n   * @param {string} name\n   * @param {function} callback\n   */\n  ;\n\n  _proto.on = function on(name, callback) {\n    this.eventDispatcher.on(name, callback);\n  }\n  /**\n   * Returns the menu element\n   *\n   * @return {Element}\n   */\n  ;\n\n  _proto.getElement = function getElement() {\n    return this.menuElement;\n  }\n  /**\n   * Removes all menu items\n   */\n  ;\n\n  _proto.removeAllMenuItemElements = function removeAllMenuItemElements() {\n    var _this3 = this;\n\n    this.menuItemElements.forEach(function (element) {\n      _this3.controls.removeElement(element);\n\n      _this3.menuElement.removeChild(element);\n    });\n    this.menuItemElements = [];\n  }\n  /**\n   * Creates a menu element\n   * @return {Element}\n   */\n  ;\n\n  _proto.createMenuElement = function createMenuElement() {\n    var element = this.menuElement = document.createElement('ol');\n    element.setAttribute('role', 'menu');\n    element.classList.add('list-unstyled');\n    return element;\n  }\n  /**\n   * Creates a menuitem\n   *\n   * @param {KeywordMenuItemConfig} config\n   * @return {Element}\n   */\n  ;\n\n  _proto.createMenuItemElement = function createMenuItemElement(config) {\n    var _this4 = this;\n\n    var element = document.createElement('li');\n    element.setAttribute('role', 'menuitem');\n    element.addEventListener('click', function (event) {\n      _this4.onMenuItemSelect(getElementsDatasetIndex(event.currentTarget));\n    });\n    this.applyConfigToMenuItemElement(element, config);\n    return element;\n  }\n  /**\n   * Applies a config to a menu item element\n   *\n   * @param {Element} element\n   * @param {KeywordMenuItemConfig} config\n   */\n  ;\n\n  _proto.applyConfigToMenuItemElement = function applyConfigToMenuItemElement(element, config) {\n    element.innerHTML = \"<div class=\\\"h5p-keyword-subtitle\\\">\".concat(config.subtitle, \"</div><span class=\\\"h5p-keyword-title\\\">\").concat(config.title, \"</span>\");\n    element.dataset.index = config.index;\n  }\n  /**\n   * Handles selecting menu item\n   *\n   * @param {number} index\n   * @fires KeywordMenu#select\n   */\n  ;\n\n  _proto.onMenuItemSelect = function onMenuItemSelect(index) {\n    this.setCurrentSlideIndex(index);\n    this.eventDispatcher.trigger('select', {\n      index: index\n    });\n  }\n  /**\n   * Sets the current slide index\n   *\n   * @param {number} index\n   */\n  ;\n\n  _proto.setCurrentSlideIndex = function setCurrentSlideIndex(index) {\n    var selectedElement = this.getElementByIndex(this.menuItemElements, index);\n\n    if (selectedElement) {\n      this.state.currentIndex = index;\n      this.updateCurrentlySelected(this.menuItemElements, this.state);\n      this.controls.setTabbable(selectedElement);\n    }\n  }\n  /**\n   * Updates the h5p-current class on the element list\n   *\n   * @param {Element[]} elements\n   * @param {KeywordMenuState} state\n   */\n  ;\n\n  _proto.updateCurrentlySelected = function updateCurrentlySelected(elements, state) {\n    var _this5 = this;\n\n    elements.forEach(function (element) {\n      var isSelected = state.currentIndex === getElementsDatasetIndex(element);\n      element.classList.toggle('h5p-current', isSelected);\n\n      if (isSelected) {\n        element.appendChild(_this5.currentSlideMarkerElement);\n      }\n    });\n  }\n  /**\n   * Scroll to current keywords.\n   *\n   * @param {number} index\n   */\n  ;\n\n  _proto.scrollToKeywords = function scrollToKeywords(index) {\n    var elementToScrollTo = this.getFirstElementAfter(index);\n\n    if (elementToScrollTo) {\n      var $menu = (0,_globals__WEBPACK_IMPORTED_MODULE_3__.jQuery)(this.menuElement);\n      var move = $menu.scrollTop() + (0,_globals__WEBPACK_IMPORTED_MODULE_3__.jQuery)(elementToScrollTo).position().top - 8;\n\n      if (_utils__WEBPACK_IMPORTED_MODULE_2__.isIPad) {\n        $menu.scrollTop(move);\n      } else {\n        $menu.stop().animate({\n          scrollTop: move\n        }, 250);\n      }\n    }\n  }\n  /**\n   * Returns the first element with an index larger then value\n   *\n   * @param {number} index\n   * @return {Element}\n   */\n  ;\n\n  _proto.getFirstElementAfter = function getFirstElementAfter(index) {\n    return this.menuItemElements.filter(function (element) {\n      return getElementsDatasetIndex(element) >= index;\n    })[0];\n  }\n  /**\n   * Returns the element with a given index\n   *\n   * @param {Element[]} elements\n   * @param {number} index\n   * @return {Element}\n   */\n  ;\n\n  _proto.getElementByIndex = function getElementByIndex(elements, index) {\n    return elements.filter(function (element) {\n      return getElementsDatasetIndex(element) === index;\n    })[0];\n  }\n  /**\n   * Creates a hidden element, that will read \"Current slide\"\n   *\n   * @return {Element}\n   */\n  ;\n\n  _proto.createCurrentSlideMarkerElement = function createCurrentSlideMarkerElement() {\n    var element = document.createElement('div');\n    element.classList.add('hidden-but-read');\n    element.innerHTML = this.l10n.currentSlide;\n    return element;\n  };\n\n  return KeywordMenu;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9rZXl3b3JkLW1lbnUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtY291cnNlLXByZXNlbnRhdGlvbi8uL3NyYy9zY3JpcHRzL2tleXdvcmQtbWVudS5qcz9mMTUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb250cm9scyBmcm9tICdoNXAtbGliLWNvbnRyb2xzL3NyYy9zY3JpcHRzL2NvbnRyb2xzJztcbmltcG9ydCBVSUtleWJvYXJkIGZyb20gJ2g1cC1saWItY29udHJvbHMvc3JjL3NjcmlwdHMvdWkva2V5Ym9hcmQnO1xuaW1wb3J0IHsgaXNJUGFkLCBkZWZhdWx0VmFsdWUgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGpRdWVyeSBhcyAkLCBFdmVudERpc3BhdGNoZXIgfSBmcm9tICcuL2dsb2JhbHMnO1xuXG4vKipcbiAqIFNlbGVjdCBldmVudC5cbiAqIEBldmVudCBLZXl3b3JkTWVudSNzZWxlY3RcbiAqIEB0eXBlIHtvYmplY3R9XG4gKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBzZWxlY3RlZCBtZW51aXRlbVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IEtleXdvcmRNZW51SXRlbUNvbmZpZ1xuICogQHByb3BlcnR5IHtzdHJpbmd9IHRpdGxlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc3VidGl0bGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleFxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IEtleXdvcmRNZW51U3RhdGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBjdXJyZW50SW5kZXhcbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmRleCBzdG9yZWQgaW4gYSBlbGVtZW50cyBkYXRhc2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fEV2ZW50VGFyZ2V0fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmNvbnN0IGdldEVsZW1lbnRzRGF0YXNldEluZGV4ID0gZWxlbWVudCA9PiBwYXJzZUludChlbGVtZW50LmRhdGFzZXQuaW5kZXgpO1xuXG4vKipcbiAqIEBjbGFzc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLZXl3b3JkTWVudSB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtvYmplY3R9IGwxMG5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRJbmRleFxuICAgKi9cbiAgY29uc3RydWN0b3IoeyBsMTBuLCBjdXJyZW50SW5kZXggfSkge1xuICAgIHRoaXMubDEwbiA9IGwxMG47XG4gICAgLyoqXG4gICAgICogQHR5cGUge0tleXdvcmRNZW51U3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGN1cnJlbnRJbmRleDogZGVmYXVsdFZhbHVlKGN1cnJlbnRJbmRleCwgMClcbiAgICB9O1xuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyID0gbmV3IEV2ZW50RGlzcGF0Y2hlcigpO1xuICAgIHRoaXMuY29udHJvbHMgPSBuZXcgQ29udHJvbHMoW25ldyBVSUtleWJvYXJkKCldKTtcblxuICAgIC8vIG9uIGtleWJvYXJkIHNlbGVjdFxuICAgIHRoaXMuY29udHJvbHMub24oJ3NlbGVjdCcsIGV2ZW50ID0+IHtcbiAgICAgIHRoaXMub25NZW51SXRlbVNlbGVjdChnZXRFbGVtZW50c0RhdGFzZXRJbmRleChldmVudC5lbGVtZW50KSk7XG4gICAgfSk7XG5cbiAgICAvLyBwcm9wYWdhdGUgRVNDIGV2ZW50XG4gICAgdGhpcy5jb250cm9scy5vbignY2xvc2UnLCAoKSA9PiB0aGlzLmV2ZW50RGlzcGF0Y2hlci50cmlnZ2VyKCdjbG9zZScpKTtcblxuICAgIHRoaXMubWVudUVsZW1lbnQgPSB0aGlzLmNyZWF0ZU1lbnVFbGVtZW50KCk7XG4gICAgdGhpcy5jdXJyZW50U2xpZGVNYXJrZXJFbGVtZW50ID0gdGhpcy5jcmVhdGVDdXJyZW50U2xpZGVNYXJrZXJFbGVtZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbmZpZ1xuICAgKlxuICAgKiBAcGFyYW0ge0tleXdvcmRNZW51SXRlbUNvbmZpZ1tdfSBrZXl3b3JkQ29uZmlnc1xuICAgKiBAcmV0dXJucyB7RWxlbWVudFtdfVxuICAgKi9cbiAgaW5pdChrZXl3b3JkQ29uZmlncykge1xuICAgIHRoaXMubWVudUl0ZW1FbGVtZW50cyA9IGtleXdvcmRDb25maWdzLm1hcChjb25maWcgPT4gdGhpcy5jcmVhdGVNZW51SXRlbUVsZW1lbnQoY29uZmlnKSk7XG4gICAgdGhpcy5tZW51SXRlbUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB0aGlzLm1lbnVFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpKTtcbiAgICB0aGlzLm1lbnVJdGVtRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHRoaXMuY29udHJvbHMuYWRkRWxlbWVudChlbGVtZW50KSk7XG5cbiAgICB0aGlzLnNldEN1cnJlbnRTbGlkZUluZGV4KHRoaXMuc3RhdGUuY3VycmVudEluZGV4KTtcblxuICAgIHJldHVybiB0aGlzLm1lbnVJdGVtRWxlbWVudHM7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIub24obmFtZSwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1lbnUgZWxlbWVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5tZW51RWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBtZW51IGl0ZW1zXG4gICAqL1xuICByZW1vdmVBbGxNZW51SXRlbUVsZW1lbnRzKCkge1xuICAgIHRoaXMubWVudUl0ZW1FbGVtZW50c1xuICAgICAgLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIHRoaXMuY29udHJvbHMucmVtb3ZlRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgdGhpcy5tZW51RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5tZW51SXRlbUVsZW1lbnRzID0gW107XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG1lbnUgZWxlbWVudFxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKi9cbiAgY3JlYXRlTWVudUVsZW1lbnQoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMubWVudUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvbCcpO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdyb2xlJywgJ21lbnUnKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2xpc3QtdW5zdHlsZWQnKTtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbWVudWl0ZW1cbiAgICpcbiAgICogQHBhcmFtIHtLZXl3b3JkTWVudUl0ZW1Db25maWd9IGNvbmZpZ1xuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKi9cbiAgY3JlYXRlTWVudUl0ZW1FbGVtZW50KGNvbmZpZykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbWVudWl0ZW0nKTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgdGhpcy5vbk1lbnVJdGVtU2VsZWN0KGdldEVsZW1lbnRzRGF0YXNldEluZGV4KGV2ZW50LmN1cnJlbnRUYXJnZXQpKTtcbiAgICB9KTtcbiAgICB0aGlzLmFwcGx5Q29uZmlnVG9NZW51SXRlbUVsZW1lbnQoZWxlbWVudCwgY29uZmlnKTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgYSBjb25maWcgdG8gYSBtZW51IGl0ZW0gZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICogQHBhcmFtIHtLZXl3b3JkTWVudUl0ZW1Db25maWd9IGNvbmZpZ1xuICAgKi9cbiAgYXBwbHlDb25maWdUb01lbnVJdGVtRWxlbWVudChlbGVtZW50LCBjb25maWcpIHtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwiaDVwLWtleXdvcmQtc3VidGl0bGVcIj4ke2NvbmZpZy5zdWJ0aXRsZX08L2Rpdj48c3BhbiBjbGFzcz1cImg1cC1rZXl3b3JkLXRpdGxlXCI+JHtjb25maWcudGl0bGV9PC9zcGFuPmA7XG4gICAgZWxlbWVudC5kYXRhc2V0LmluZGV4ID0gY29uZmlnLmluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgc2VsZWN0aW5nIG1lbnUgaXRlbVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQGZpcmVzIEtleXdvcmRNZW51I3NlbGVjdFxuICAgKi9cbiAgb25NZW51SXRlbVNlbGVjdChpbmRleCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFNsaWRlSW5kZXgoaW5kZXgpO1xuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLnRyaWdnZXIoJ3NlbGVjdCcsIHsgaW5kZXggfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBzbGlkZSBpbmRleFxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICovXG4gIHNldEN1cnJlbnRTbGlkZUluZGV4KGluZGV4KSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50QnlJbmRleCh0aGlzLm1lbnVJdGVtRWxlbWVudHMsIGluZGV4KTtcblxuICAgIGlmIChzZWxlY3RlZEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRseVNlbGVjdGVkKHRoaXMubWVudUl0ZW1FbGVtZW50cywgdGhpcy5zdGF0ZSk7XG4gICAgICB0aGlzLmNvbnRyb2xzLnNldFRhYmJhYmxlKHNlbGVjdGVkRWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGg1cC1jdXJyZW50IGNsYXNzIG9uIHRoZSBlbGVtZW50IGxpc3RcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50W119IGVsZW1lbnRzXG4gICAqIEBwYXJhbSB7S2V5d29yZE1lbnVTdGF0ZX0gc3RhdGVcbiAgICovXG4gIHVwZGF0ZUN1cnJlbnRseVNlbGVjdGVkKGVsZW1lbnRzLCBzdGF0ZSkge1xuICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0gc3RhdGUuY3VycmVudEluZGV4ID09PSBnZXRFbGVtZW50c0RhdGFzZXRJbmRleChlbGVtZW50KTtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnaDVwLWN1cnJlbnQnLCBpc1NlbGVjdGVkKTtcblxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmN1cnJlbnRTbGlkZU1hcmtlckVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byBjdXJyZW50IGtleXdvcmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICovXG4gIHNjcm9sbFRvS2V5d29yZHMoaW5kZXgpIHtcbiAgICBjb25zdCBlbGVtZW50VG9TY3JvbGxUbyA9IHRoaXMuZ2V0Rmlyc3RFbGVtZW50QWZ0ZXIoaW5kZXgpO1xuXG4gICAgaWYgKGVsZW1lbnRUb1Njcm9sbFRvKSB7XG4gICAgICBjb25zdCAkbWVudSA9ICQodGhpcy5tZW51RWxlbWVudCk7XG4gICAgICBjb25zdCBtb3ZlID0gJG1lbnUuc2Nyb2xsVG9wKCkgKyAkKGVsZW1lbnRUb1Njcm9sbFRvKS5wb3NpdGlvbigpLnRvcCAtIDg7XG5cbiAgICAgIGlmIChpc0lQYWQpIHtcbiAgICAgICAgJG1lbnUuc2Nyb2xsVG9wKG1vdmUpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICRtZW51LnN0b3AoKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiBtb3ZlIH0sIDI1MCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgd2l0aCBhbiBpbmRleCBsYXJnZXIgdGhlbiB2YWx1ZVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICovXG4gIGdldEZpcnN0RWxlbWVudEFmdGVyKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMubWVudUl0ZW1FbGVtZW50cy5maWx0ZXIoZWxlbWVudCA9PiBnZXRFbGVtZW50c0RhdGFzZXRJbmRleChlbGVtZW50KSA+PSBpbmRleClbMF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWxlbWVudCB3aXRoIGEgZ2l2ZW4gaW5kZXhcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50W119IGVsZW1lbnRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudEJ5SW5kZXgoZWxlbWVudHMsIGluZGV4KSB7XG4gICAgcmV0dXJuIGVsZW1lbnRzLmZpbHRlcihlbGVtZW50ID0+IGdldEVsZW1lbnRzRGF0YXNldEluZGV4KGVsZW1lbnQpID09PSBpbmRleClbMF07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGhpZGRlbiBlbGVtZW50LCB0aGF0IHdpbGwgcmVhZCBcIkN1cnJlbnQgc2xpZGVcIlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKi9cbiAgY3JlYXRlQ3VycmVudFNsaWRlTWFya2VyRWxlbWVudCgpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4tYnV0LXJlYWQnKTtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHRoaXMubDEwbi5jdXJyZW50U2xpZGU7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/keyword-menu.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/navigation-line.js":
    /*!****************************************!*\
      !*** ./src/scripts/navigation-line.js ***!
      \****************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _printer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./printer */ \"./src/scripts/printer.js\");\n/* harmony import */ var h5p_lib_controls_src_scripts_controls__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! h5p-lib-controls/src/scripts/controls */ \"./node_modules/h5p-lib-controls/src/scripts/controls.js\");\n/* harmony import */ var h5p_lib_controls_src_scripts_ui_keyboard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! h5p-lib-controls/src/scripts/ui/keyboard */ \"./node_modules/h5p-lib-controls/src/scripts/ui/keyboard.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/scripts/utils.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n/**\n * Enum indicating which state a navigation bar part is in\n * @enum {string}\n */\n\nvar answeredState = {\n  NO_INTERACTIONS: 'none',\n  NOT_ANSWERED: 'not-answered',\n  ANSWERED: 'answered',\n  CORRECT: 'has-only-correct',\n  INCORRECT: 'has-incorrect'\n};\n/**\n * @class\n */\n\nvar NavigationLine = function ($) {\n  function NavigationLine(coursePresentation) {\n    var _this$answeredLabels;\n\n    this.cp = coursePresentation;\n    /**\n     * Mapping for labels indicating the answered state of a part\n     * @property {Object.<answeredState, string>} answeredLabels\n     */\n\n    this.answeredLabels = (_this$answeredLabels = {}, _defineProperty(_this$answeredLabels, answeredState.NOT_ANSWERED, this.cp.l10n.containsNotCompleted), _defineProperty(_this$answeredLabels, answeredState.ANSWERED, this.cp.l10n.containsCompleted), _defineProperty(_this$answeredLabels, answeredState.CORRECT, this.cp.l10n.containsOnlyCorrect), _defineProperty(_this$answeredLabels, answeredState.INCORRECT, this.cp.l10n.containsIncorrectAnswers), _defineProperty(_this$answeredLabels, answeredState.NO_INTERACTIONS, '@slideName'), _this$answeredLabels);\n    this.initProgressbar(this.cp.slidesWithSolutions);\n    this.initFooter();\n    this.initTaskAnsweredListener();\n    this.toggleNextAndPreviousButtonDisabled(this.cp.getCurrentSlideIndex());\n  }\n  /**\n   * Initializes xAPI event listener, updates progressbar when a task is changed.\n   */\n\n\n  NavigationLine.prototype.initTaskAnsweredListener = function () {\n    var _this = this;\n\n    this.cp.elementInstances.forEach(function (slide, index) {\n      slide.filter(function (interaction) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_3__.isFunction)(interaction.on);\n      }).forEach(function (interaction) {\n        interaction.on('xAPI', function (event) {\n          var shortVerb = event.getVerb();\n\n          if ((0,_utils__WEBPACK_IMPORTED_MODULE_3__.contains)(['interacted', 'answered', 'attempted'], shortVerb)) {\n            var isAnswered = _this.cp.slideHasAnsweredTask(index);\n\n            _this.setTaskAnswered(index, isAnswered);\n          } else if (shortVerb === 'completed') {\n            event.setVerb('answered');\n          } // handle CP > IV task progress\n\n\n          if (interaction.libraryInfo && interaction.libraryInfo.machineName === 'H5P.InteractiveVideo' && shortVerb === 'completed') {\n            var _isAnswered = _this.cp.slideHasAnsweredTask(index);\n\n            _this.setTaskAnswered(index, _isAnswered);\n          }\n\n          if (event.data.statement.context === undefined) {\n            event.data.statement.context = {};\n          }\n\n          if (event.data.statement.context.extensions === undefined) {\n            event.data.statement.context.extensions = {};\n          }\n\n          event.data.statement.context.extensions['http://id.tincanapi.com/extension/ending-point'] = index + 1;\n        });\n      });\n    });\n  };\n  /**\n   * Initialize progress bar\n   */\n\n\n  NavigationLine.prototype.initProgressbar = function (slidesWithSolutions) {\n    var _this2 = this;\n\n    var that = this;\n    var currentSlideIndex = that.cp.previousState && that.cp.previousState.progress || 0;\n    this.progresbarKeyboardControls = new h5p_lib_controls_src_scripts_controls__WEBPACK_IMPORTED_MODULE_1__[\"default\"]([new h5p_lib_controls_src_scripts_ui_keyboard__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()]);\n    this.progresbarKeyboardControls.negativeTabIndexAllowed = true;\n    this.progresbarKeyboardControls.on('select', function (event) {\n      that.displaySlide($(event.element).data('slideNumber'));\n    }); // if last element, prevent next progression\n\n    this.progresbarKeyboardControls.on('beforeNextElement', function (event) {\n      return event.index !== event.elements.length - 1;\n    }); // if first element, prevent previous progression\n\n    this.progresbarKeyboardControls.on('beforePreviousElement', function (event) {\n      return event.index !== 0;\n    }); // Remove existing progressbar\n\n    if (this.cp.progressbarParts !== undefined && this.cp.progressbarParts) {\n      this.cp.progressbarParts.forEach(function (part) {\n        that.progresbarKeyboardControls.removeElement(part.children('a').get(0));\n        part.remove();\n      });\n    }\n\n    that.cp.progressbarParts = [];\n\n    var clickProgressbar = function clickProgressbar(event) {\n      event.preventDefault();\n      var index = $(this).data('slideNumber');\n      that.progresbarKeyboardControls.setTabbableByIndex(index);\n      that.displaySlide(index);\n      that.cp.focus();\n    };\n\n    for (var i = 0; i < this.cp.slides.length; i += 1) {\n      var slide = this.cp.slides[i];\n      var progressbarPartTitle = this.createSlideTitle(i); // create list item\n\n      var $li = $('<li>', {\n        'class': 'h5p-progressbar-part'\n      }).appendTo(that.cp.$progressbar); // create link\n\n      var $link = $('<a>', {\n        href: '#',\n        html: '<span class=\"h5p-progressbar-part-title hidden-but-read\">' + progressbarPartTitle + '</span>',\n        tabindex: '-1'\n      }).data('slideNumber', i).click(clickProgressbar).appendTo($li);\n      this.progresbarKeyboardControls.addElement($link.get(0)); // Add hover effect if not an ipad or iphone.\n\n      if (!_utils__WEBPACK_IMPORTED_MODULE_3__.isIOS) {\n        (function () {\n          // create popup\n          var $popup = $('<div/>', {\n            'class': 'h5p-progressbar-popup',\n            'html': progressbarPartTitle,\n            'aria-hidden': 'true'\n          }).appendTo($li);\n          $li.mouseenter(function () {\n            return _this2.ensurePopupVisible($popup);\n          });\n        })();\n      }\n\n      if (this.isSummarySlide(i)) {\n        $li.addClass('progressbar-part-summary-slide');\n      }\n\n      if (i === 0) {\n        $li.addClass('h5p-progressbar-part-show');\n      }\n\n      if (i === currentSlideIndex) {\n        $li.addClass('h5p-progressbar-part-selected');\n      }\n\n      that.cp.progressbarParts.push($li);\n      this.updateSlideTitle(i); // Create task indicator if less than 60 slides and not in editor\n\n      if (this.cp.slides.length <= 60 && slide.elements && slide.elements.length > 0) {\n        var hasTask = slidesWithSolutions[i] && slidesWithSolutions[i].length > 0;\n        var isAnswered = !!(that.cp.previousState && that.cp.previousState.answered && that.cp.previousState.answered[i]);\n\n        if (hasTask) {\n          // Add task indicator\n          $('<div>', {\n            'class': 'h5p-progressbar-part-has-task'\n          }).appendTo($link);\n          this.setTaskAnswered(i, isAnswered);\n        }\n      }\n    }\n  };\n  /**\n   * Ensures that all of a popup is visible\n   *\n   * @param {jQuery} $popup\n   */\n\n\n  NavigationLine.prototype.ensurePopupVisible = function ($popup) {\n    var availableWidth = this.cp.$container.width();\n    var popupWidth = $popup.outerWidth();\n    var popupOffsetLeft = $popup.offset().left;\n\n    if (popupOffsetLeft < 0) {\n      $popup.css('left', 0);\n      $popup.css('transform', 'translateX(0)');\n    } else if (popupOffsetLeft + popupWidth > availableWidth) {\n      $popup.css('left', 'auto');\n      $popup.css('right', 0);\n      $popup.css('transform', 'translateX(0)');\n    }\n  };\n  /**\n   * Displays a slide\n   *\n   * @param {number} index\n   */\n\n\n  NavigationLine.prototype.displaySlide = function (index) {\n    var self = this; // navigate to slide\n\n    this.cp.jumpToSlide(index, false, function () {\n      var oldIndex = self.cp.getCurrentSlideIndex(); // update current progress task\n\n      self.updateSlideTitle(index, {\n        isCurrent: true\n      }); // update old progress task\n\n      self.updateSlideTitle(oldIndex, {\n        isCurrent: false\n      }); // toggle next and prev buttons\n\n      self.toggleNextAndPreviousButtonDisabled(index);\n    });\n  };\n  /**\n   * Generate tooltip for progress bar slides\n   *\n   * @param {number} slideNumber\n   * @return {string}\n   */\n\n\n  NavigationLine.prototype.createSlideTitle = function (slideNumber) {\n    var slide = this.cp.slides[slideNumber];\n    var hasKeyWords = slide.keywords && slide.keywords.length > 0;\n\n    if (hasKeyWords) {\n      return slide.keywords[0].main;\n    } else if (this.isSummarySlide(slideNumber)) {\n      return this.cp.l10n.summary;\n    } else {\n      return this.cp.l10n.slide + ' ' + (slideNumber + 1);\n    }\n  };\n  /**\n   *\n   * Returns true if slide with given index is summary slide\n   *\n   * @param {number} index\n   * @return {boolean}\n   */\n\n\n  NavigationLine.prototype.isSummarySlide = function (index) {\n    return !!(this.cp.editor === undefined && index === this.cp.slides.length - 1 && this.cp.showSummarySlide);\n  };\n  /**\n   * Initialize footer.\n   */\n\n\n  NavigationLine.prototype.initFooter = function () {\n    var _this3 = this;\n\n    var that = this;\n    var $footer = this.cp.$footer; // Inner footer adjustment containers\n\n    var $leftFooter = $('<div/>', {\n      'class': 'h5p-footer-left-adjusted'\n    }).appendTo($footer);\n    var $centerFooter = $('<div/>', {\n      'class': 'h5p-footer-center-adjusted'\n    }).appendTo($footer);\n    var $rightFooter = $('<div/>', {\n      'role': 'toolbar',\n      'class': 'h5p-footer-right-adjusted'\n    }).appendTo($footer); // Left footer elements\n    // Toggle keywords menu\n\n    this.cp.$keywordsButton = $('<div/>', {\n      'class': \"h5p-footer-button h5p-footer-toggle-keywords\",\n      'aria-expanded': 'false',\n      'aria-label': this.cp.l10n.showKeywords,\n      'title': this.cp.l10n.showKeywords,\n      'role': 'button',\n      'tabindex': '0',\n      'html': '<span class=\"h5p-icon-menu\"></span><span class=\"current-slide-title\"></span>'\n    }).appendTo($leftFooter);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addClickAndKeyboardListeners)(this.cp.$keywordsButton, function (event) {\n      if (!that.cp.presentation.keywordListAlwaysShow) {\n        that.cp.toggleKeywords();\n        event.stopPropagation();\n      }\n    });\n\n    if (this.cp.presentation.keywordListAlwaysShow || !this.cp.initKeywords) {\n      this.cp.$keywordsButton.hide();\n    }\n\n    if (!this.cp.presentation.keywordListEnabled) {\n      // Hide in editor when disabled.\n      this.cp.$keywordsWrapper.add(this.$keywordsButton).hide();\n    } // Update keyword for first slide.\n\n\n    this.updateFooterKeyword(0); // Center footer elements\n    // Previous slide\n\n    this.cp.$prevSlideButton = $('<div/>', {\n      'class': 'h5p-footer-button h5p-footer-previous-slide',\n      'aria-label': this.cp.l10n.prevSlide,\n      'title': this.cp.l10n.prevSlide,\n      'role': 'button',\n      'tabindex': '-1',\n      'aria-disabled': 'true'\n    }).appendTo($centerFooter);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addClickAndKeyboardListeners)(this.cp.$prevSlideButton, function () {\n      return _this3.cp.previousSlide(undefined, false);\n    });\n    var $slideNumbering = $('<div/>', {\n      'class': 'h5p-footer-slide-count'\n    }).appendTo($centerFooter); // Current slide count\n\n    this.cp.$footerCurrentSlide = $('<div/>', {\n      'html': '1',\n      'class': 'h5p-footer-slide-count-current',\n      'title': this.cp.l10n.currentSlide,\n      'aria-hidden': 'true'\n    }).appendTo($slideNumbering);\n    this.cp.$footerCounter = $('<div/>', {\n      'class': 'hidden-but-read',\n      'html': this.cp.l10n.slideCount.replace('@index', '1').replace('@total', this.cp.slides.length.toString())\n    }).appendTo($centerFooter); // Count delimiter, content configurable in css\n\n    $('<div/>', {\n      'html': '/',\n      'class': 'h5p-footer-slide-count-delimiter',\n      'aria-hidden': 'true'\n    }).appendTo($slideNumbering); // Max slide count\n\n    this.cp.$footerMaxSlide = $('<div/>', {\n      'html': this.cp.slides.length,\n      'class': 'h5p-footer-slide-count-max',\n      'title': this.cp.l10n.lastSlide,\n      'aria-hidden': 'true'\n    }).appendTo($slideNumbering); // Next slide\n\n    this.cp.$nextSlideButton = $('<div/>', {\n      'class': 'h5p-footer-button h5p-footer-next-slide',\n      'aria-label': this.cp.l10n.nextSlide,\n      'title': this.cp.l10n.nextSlide,\n      'role': 'button',\n      'tabindex': '0'\n    }).appendTo($centerFooter);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addClickAndKeyboardListeners)(this.cp.$nextSlideButton, function () {\n      return _this3.cp.nextSlide(undefined, false);\n    }); // *********************\n    // Right footer elements\n    // *********************\n    // Do not add these buttons in editor mode\n\n    if (this.cp.editor === undefined) {\n      // Exit solution mode button\n      this.cp.$exitSolutionModeButton = $('<div/>', {\n        'role': 'button',\n        'class': 'h5p-footer-exit-solution-mode',\n        'aria-label': this.cp.l10n.solutionModeTitle,\n        'title': this.cp.l10n.solutionModeTitle,\n        'tabindex': '0'\n      }).appendTo($rightFooter);\n      (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addClickAndKeyboardListeners)(this.cp.$exitSolutionModeButton, function () {\n        return that.cp.jumpToSlide(that.cp.slides.length - 1);\n      });\n\n      if (this.cp.enablePrintButton && _printer__WEBPACK_IMPORTED_MODULE_0__[\"default\"].supported()) {\n        this.cp.$printButton = $('<div/>', {\n          'class': 'h5p-footer-button h5p-footer-print',\n          'aria-label': this.cp.l10n.printTitle,\n          'title': this.cp.l10n.printTitle,\n          'role': 'button',\n          'tabindex': '0'\n        }).appendTo($rightFooter);\n        (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addClickAndKeyboardListeners)(this.cp.$printButton, function () {\n          return that.openPrintDialog();\n        });\n      }\n\n      if (H5P.fullscreenSupported) {\n        // Toggle full screen button\n        this.cp.$fullScreenButton = $('<div/>', {\n          'class': 'h5p-footer-button h5p-footer-toggle-full-screen',\n          'aria-label': this.cp.l10n.fullscreen,\n          'title': this.cp.l10n.fullscreen,\n          'role': 'button',\n          'tabindex': '0'\n        });\n        (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addClickAndKeyboardListeners)(this.cp.$fullScreenButton, function () {\n          return that.cp.toggleFullScreen();\n        });\n        this.cp.$fullScreenButton.appendTo($rightFooter);\n      }\n    } // Solution mode text\n\n\n    this.cp.$exitSolutionModeText = $('<div/>', {\n      'html': '',\n      'class': 'h5p-footer-exit-solution-mode-text'\n    }).appendTo(this.cp.$exitSolutionModeButton);\n  };\n\n  NavigationLine.prototype.openPrintDialog = function () {\n    var _this4 = this;\n\n    var $h5pWrapper = $('.h5p-wrapper');\n    var $dialog = _printer__WEBPACK_IMPORTED_MODULE_0__[\"default\"].showDialog(this.cp.l10n, $h5pWrapper, function (printAllSlides) {\n      _printer__WEBPACK_IMPORTED_MODULE_0__[\"default\"].print(_this4.cp, $h5pWrapper, printAllSlides);\n    });\n    $dialog.children('[role=\"dialog\"]').focus();\n  };\n  /**\n   * Updates progress bar.\n   */\n\n\n  NavigationLine.prototype.updateProgressBar = function (slideNumber, prevSlideNumber, solutionMode) {\n    var that = this; // Updates progress bar progress (blue line)\n\n    var i;\n\n    for (i = 0; i < that.cp.progressbarParts.length; i += 1) {\n      if (slideNumber + 1 > i) {\n        that.cp.progressbarParts[i].addClass('h5p-progressbar-part-show');\n      } else {\n        that.cp.progressbarParts[i].removeClass('h5p-progressbar-part-show');\n      }\n    }\n\n    that.progresbarKeyboardControls.setTabbableByIndex(slideNumber);\n    that.cp.progressbarParts[slideNumber].addClass(\"h5p-progressbar-part-selected\").siblings().removeClass(\"h5p-progressbar-part-selected\");\n\n    if (prevSlideNumber === undefined) {\n      that.cp.progressbarParts.forEach(function (part, i) {\n        that.setTaskAnswered(i, false);\n      });\n      return;\n    } // Don't mark answers as answered if in solution mode or editor mode.\n\n\n    if (solutionMode || that.cp.editor !== undefined) {\n      return;\n    }\n  };\n  /**\n   * Sets a part to be answered, or un answered\n   *\n   * @param {number} index\n   * @param {boolean} isAnswered\n   */\n\n\n  NavigationLine.prototype.setTaskAnswered = function (index, isAnswered) {\n    var $answeredIndicator = this.cp.progressbarParts[index].find('.h5p-progressbar-part-has-task');\n    $answeredIndicator.toggleClass('h5p-answered', isAnswered);\n    this.updateSlideTitle(index, {\n      state: isAnswered ? answeredState.ANSWERED : answeredState.NOT_ANSWERED\n    });\n  };\n  /**\n   * Updates a slides title with values from state, if overrides are not provided\n   *\n   * @param {number} index\n   * @param {object} [config]\n   * @param {answeredState} [config.state]\n   * @param {boolean} [config.isCurrent]\n   */\n\n\n  NavigationLine.prototype.updateSlideTitle = function (index) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        state = _ref.state,\n        isCurrent = _ref.isCurrent;\n\n    this.setSlideTitle(index, {\n      state: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.defaultValue)(state, this.getAnsweredState(index)),\n      isCurrent: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.defaultValue)(isCurrent, this.cp.isCurrentSlide(index))\n    });\n  };\n  /**\n   * Sets a part to be answered, or un answered\n   *\n   * @param {number} index\n   * @param {answeredState} [state]\n   * @param {boolean} [isCurrent]\n   */\n\n\n  NavigationLine.prototype.setSlideTitle = function (index, _ref2) {\n    var _ref2$state = _ref2.state,\n        state = _ref2$state === void 0 ? answeredState.NO_INTERACTIONS : _ref2$state,\n        _ref2$isCurrent = _ref2.isCurrent,\n        isCurrent = _ref2$isCurrent === void 0 ? false : _ref2$isCurrent;\n    var total = this.cp.slides.length;\n    var $part = this.cp.progressbarParts[index];\n    var $partTitle = $part.find('.h5p-progressbar-part-title');\n    var numberedLabel = this.cp.l10n.slideCount.replace('@index', index + 1).replace('@total', total);\n    var answeredLabel = this.answeredLabels[state].replace('@slideName', this.createSlideTitle(index));\n    var currentSlideLabel = isCurrent ? this.cp.l10n['currentSlide'] : '';\n    $partTitle.html(\"\".concat(numberedLabel, \": \").concat(answeredLabel, \". \").concat(currentSlideLabel));\n  };\n  /**\n   * Returns the answered state of a given slide\n   *\n   * @param {number} index\n   * @return {answeredState}\n   */\n\n\n  NavigationLine.prototype.getAnsweredState = function (index) {\n    var $part = this.cp.progressbarParts[index];\n    var hasTask = this.slideHasInteraction(index);\n    var isAnswered = this.cp.slideHasAnsweredTask(index);\n\n    if (!hasTask) {\n      return answeredState.NO_INTERACTIONS;\n    } else if ($part.find('.h5p-is-correct').length > 0) {\n      return answeredState.CORRECT;\n    } else if ($part.find('.h5p-is-wrong').length > 0) {\n      return answeredState.INCORRECT;\n    } else if (isAnswered) {\n      return answeredState.ANSWERED;\n    } else {\n      return answeredState.NOT_ANSWERED;\n    }\n  };\n  /**\n   * Returns true if a slide was initiated with an interaction\n   *\n   * @param {number} index\n   * @return {boolean}\n   */\n\n\n  NavigationLine.prototype.slideHasInteraction = function (index) {\n    return this.cp.progressbarParts[index].find('.h5p-progressbar-part-has-task').length > 0;\n  };\n  /**\n   * Update footer with current slide data\n   *\n   * @param {Number} slideNumber Current slide number\n   */\n\n\n  NavigationLine.prototype.updateFooter = function (slideNumber) {\n    // Update current slide number in footer\n    this.cp.$footerCurrentSlide.html(slideNumber + 1);\n    this.cp.$footerMaxSlide.html(this.cp.slides.length);\n    this.cp.$footerCounter.html(this.cp.l10n.slideCount.replace('@index', (slideNumber + 1).toString()).replace('@total', this.cp.slides.length.toString())); // Hide exit solution mode button on summary slide\n\n    if (this.cp.isSolutionMode && slideNumber === this.cp.slides.length - 1) {\n      this.cp.$footer.addClass('summary-slide');\n    } else {\n      this.cp.$footer.removeClass('summary-slide');\n    }\n\n    this.toggleNextAndPreviousButtonDisabled(slideNumber); // Update keyword in footer\n\n    this.updateFooterKeyword(slideNumber);\n  };\n  /**\n   * Disables previous button if on the first slide,\n   * and disables the next button if on the last slide\n   *\n   * @param {number} index\n   */\n\n\n  NavigationLine.prototype.toggleNextAndPreviousButtonDisabled = function (index) {\n    var lastSlideIndex = this.cp.slides.length - 1;\n    this.cp.$prevSlideButton.attr('aria-disabled', (index === 0).toString());\n    this.cp.$nextSlideButton.attr('aria-disabled', (index === lastSlideIndex).toString());\n    this.cp.$prevSlideButton.attr('tabindex', index === 0 ? '-1' : '0');\n    this.cp.$nextSlideButton.attr('tabindex', index === lastSlideIndex ? '-1' : '0');\n  };\n  /**\n   * Update keyword in footer with current slide data\n   *\n   * @param {Number} slideNumber Current slide number\n   */\n\n\n  NavigationLine.prototype.updateFooterKeyword = function (slideNumber) {\n    var currentSlide = this.cp.slides[slideNumber];\n    var keywordString = ''; // Get current keyword\n\n    if (currentSlide && currentSlide.keywords && currentSlide.keywords[0]) {\n      keywordString = currentSlide.keywords[0].main;\n    } // Summary slide keyword\n\n\n    if (!this.cp.isEditor() && this.cp.showSummarySlide && slideNumber >= this.cp.slides.length - 1) {\n      keywordString = this.cp.l10n.summary;\n    } // Set footer keyword\n\n\n    this.cp.$keywordsButton.children('.current-slide-title').html((0,_utils__WEBPACK_IMPORTED_MODULE_3__.defaultValue)(keywordString, ''));\n  };\n\n  return NavigationLine;\n}(H5P.jQuery);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NavigationLine);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9uYXZpZ2F0aW9uLWxpbmUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUFBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFHQTtBQUNBOztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQUE7QUFBQTs7QUFHQTtBQUFBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBREE7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBOztBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUFBO0FBQUE7QUFSQTtBQVNBOztBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBRUE7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQUE7QUFBQTs7QUFHQTtBQUFBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQU9BOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBSUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFEQTs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFGQTs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUhBOztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7QUFHQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7QUFHQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBR0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3NjcmlwdHMvbmF2aWdhdGlvbi1saW5lLmpzPzlhNTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByaW50ZXIgZnJvbSAnLi9wcmludGVyJztcbmltcG9ydCBDb250cm9scyBmcm9tICdoNXAtbGliLWNvbnRyb2xzL3NyYy9zY3JpcHRzL2NvbnRyb2xzJztcbmltcG9ydCBVSUtleWJvYXJkIGZyb20gJ2g1cC1saWItY29udHJvbHMvc3JjL3NjcmlwdHMvdWkva2V5Ym9hcmQnO1xuaW1wb3J0IHsgZGVmYXVsdFZhbHVlLCBjb250YWlucywgaXNGdW5jdGlvbiwgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycywgaXNJT1MgfSBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBFbnVtIGluZGljYXRpbmcgd2hpY2ggc3RhdGUgYSBuYXZpZ2F0aW9uIGJhciBwYXJ0IGlzIGluXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBhbnN3ZXJlZFN0YXRlID0ge1xuICBOT19JTlRFUkFDVElPTlM6ICdub25lJyxcbiAgTk9UX0FOU1dFUkVEOiAnbm90LWFuc3dlcmVkJyxcbiAgQU5TV0VSRUQ6ICdhbnN3ZXJlZCcsXG4gIENPUlJFQ1Q6ICdoYXMtb25seS1jb3JyZWN0JyxcbiAgSU5DT1JSRUNUOiAnaGFzLWluY29ycmVjdCdcbn07XG5cbi8qKlxuICogQGNsYXNzXG4gKi9cbmNvbnN0IE5hdmlnYXRpb25MaW5lID0gKGZ1bmN0aW9uICgkKSB7XG4gIGZ1bmN0aW9uIE5hdmlnYXRpb25MaW5lKGNvdXJzZVByZXNlbnRhdGlvbikge1xuICAgIHRoaXMuY3AgPSBjb3Vyc2VQcmVzZW50YXRpb247XG5cbiAgICAvKipcbiAgICAgKiBNYXBwaW5nIGZvciBsYWJlbHMgaW5kaWNhdGluZyB0aGUgYW5zd2VyZWQgc3RhdGUgb2YgYSBwYXJ0XG4gICAgICogQHByb3BlcnR5IHtPYmplY3QuPGFuc3dlcmVkU3RhdGUsIHN0cmluZz59IGFuc3dlcmVkTGFiZWxzXG4gICAgICovXG4gICAgdGhpcy5hbnN3ZXJlZExhYmVscyA9IHtcbiAgICAgIFthbnN3ZXJlZFN0YXRlLk5PVF9BTlNXRVJFRF06IHRoaXMuY3AubDEwbi5jb250YWluc05vdENvbXBsZXRlZCxcbiAgICAgIFthbnN3ZXJlZFN0YXRlLkFOU1dFUkVEXTogdGhpcy5jcC5sMTBuLmNvbnRhaW5zQ29tcGxldGVkLFxuICAgICAgW2Fuc3dlcmVkU3RhdGUuQ09SUkVDVF06IHRoaXMuY3AubDEwbi5jb250YWluc09ubHlDb3JyZWN0LFxuICAgICAgW2Fuc3dlcmVkU3RhdGUuSU5DT1JSRUNUXTogdGhpcy5jcC5sMTBuLmNvbnRhaW5zSW5jb3JyZWN0QW5zd2VycyxcbiAgICAgIFthbnN3ZXJlZFN0YXRlLk5PX0lOVEVSQUNUSU9OU106ICdAc2xpZGVOYW1lJyxcbiAgICB9O1xuXG4gICAgdGhpcy5pbml0UHJvZ3Jlc3NiYXIodGhpcy5jcC5zbGlkZXNXaXRoU29sdXRpb25zKTtcbiAgICB0aGlzLmluaXRGb290ZXIoKTtcbiAgICB0aGlzLmluaXRUYXNrQW5zd2VyZWRMaXN0ZW5lcigpO1xuICAgIHRoaXMudG9nZ2xlTmV4dEFuZFByZXZpb3VzQnV0dG9uRGlzYWJsZWQodGhpcy5jcC5nZXRDdXJyZW50U2xpZGVJbmRleCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB4QVBJIGV2ZW50IGxpc3RlbmVyLCB1cGRhdGVzIHByb2dyZXNzYmFyIHdoZW4gYSB0YXNrIGlzIGNoYW5nZWQuXG4gICAqL1xuICBOYXZpZ2F0aW9uTGluZS5wcm90b3R5cGUuaW5pdFRhc2tBbnN3ZXJlZExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY3AuZWxlbWVudEluc3RhbmNlcy5mb3JFYWNoKChzbGlkZSwgaW5kZXgpID0+IHtcbiAgICAgIHNsaWRlXG4gICAgICAgIC5maWx0ZXIoaW50ZXJhY3Rpb24gPT4gaXNGdW5jdGlvbihpbnRlcmFjdGlvbi5vbikpXG4gICAgICAgIC5mb3JFYWNoKGludGVyYWN0aW9uID0+IHtcbiAgICAgICAgICBpbnRlcmFjdGlvbi5vbigneEFQSScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hvcnRWZXJiID0gZXZlbnQuZ2V0VmVyYigpO1xuXG4gICAgICAgICAgICBpZiAoY29udGFpbnMoWydpbnRlcmFjdGVkJywgJ2Fuc3dlcmVkJywgJ2F0dGVtcHRlZCddLCBzaG9ydFZlcmIpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGlzQW5zd2VyZWQgPSB0aGlzLmNwLnNsaWRlSGFzQW5zd2VyZWRUYXNrKGluZGV4KTtcbiAgICAgICAgICAgICAgdGhpcy5zZXRUYXNrQW5zd2VyZWQoaW5kZXgsIGlzQW5zd2VyZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2hvcnRWZXJiID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICBldmVudC5zZXRWZXJiKCdhbnN3ZXJlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBoYW5kbGUgQ1AgPiBJViB0YXNrIHByb2dyZXNzXG4gICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb24ubGlicmFyeUluZm8gJiYgaW50ZXJhY3Rpb24ubGlicmFyeUluZm8ubWFjaGluZU5hbWUgPT09ICdINVAuSW50ZXJhY3RpdmVWaWRlbycgJiYgc2hvcnRWZXJiID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICBjb25zdCBpc0Fuc3dlcmVkID0gdGhpcy5jcC5zbGlkZUhhc0Fuc3dlcmVkVGFzayhpbmRleCk7XG4gICAgICAgICAgICAgIHRoaXMuc2V0VGFza0Fuc3dlcmVkKGluZGV4LCBpc0Fuc3dlcmVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuc3RhdGVtZW50LmNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBldmVudC5kYXRhLnN0YXRlbWVudC5jb250ZXh0ID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5zdGF0ZW1lbnQuY29udGV4dC5leHRlbnNpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgZXZlbnQuZGF0YS5zdGF0ZW1lbnQuY29udGV4dC5leHRlbnNpb25zID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LmRhdGEuc3RhdGVtZW50LmNvbnRleHQuZXh0ZW5zaW9uc1snaHR0cDovL2lkLnRpbmNhbmFwaS5jb20vZXh0ZW5zaW9uL2VuZGluZy1wb2ludCddID0gaW5kZXggKyAxO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwcm9ncmVzcyBiYXJcbiAgICovXG4gIE5hdmlnYXRpb25MaW5lLnByb3RvdHlwZS5pbml0UHJvZ3Jlc3NiYXIgPSBmdW5jdGlvbiAoc2xpZGVzV2l0aFNvbHV0aW9ucykge1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgIGNvbnN0IGN1cnJlbnRTbGlkZUluZGV4ID0gKHRoYXQuY3AucHJldmlvdXNTdGF0ZSAmJiB0aGF0LmNwLnByZXZpb3VzU3RhdGUucHJvZ3Jlc3MpIHx8IDA7XG5cbiAgICB0aGlzLnByb2dyZXNiYXJLZXlib2FyZENvbnRyb2xzID0gbmV3IENvbnRyb2xzKFtuZXcgVUlLZXlib2FyZCgpXSk7XG4gICAgdGhpcy5wcm9ncmVzYmFyS2V5Ym9hcmRDb250cm9scy5uZWdhdGl2ZVRhYkluZGV4QWxsb3dlZCA9IHRydWU7XG4gICAgdGhpcy5wcm9ncmVzYmFyS2V5Ym9hcmRDb250cm9scy5vbignc2VsZWN0JywgZXZlbnQgPT4ge1xuICAgICAgdGhhdC5kaXNwbGF5U2xpZGUoJChldmVudC5lbGVtZW50KS5kYXRhKCdzbGlkZU51bWJlcicpKTtcbiAgICB9KTtcblxuICAgIC8vIGlmIGxhc3QgZWxlbWVudCwgcHJldmVudCBuZXh0IHByb2dyZXNzaW9uXG4gICAgdGhpcy5wcm9ncmVzYmFyS2V5Ym9hcmRDb250cm9scy5vbignYmVmb3JlTmV4dEVsZW1lbnQnLCBldmVudCA9PiBldmVudC5pbmRleCAhPT0gKGV2ZW50LmVsZW1lbnRzLmxlbmd0aCAtIDEpKTtcblxuICAgIC8vIGlmIGZpcnN0IGVsZW1lbnQsIHByZXZlbnQgcHJldmlvdXMgcHJvZ3Jlc3Npb25cbiAgICB0aGlzLnByb2dyZXNiYXJLZXlib2FyZENvbnRyb2xzLm9uKCdiZWZvcmVQcmV2aW91c0VsZW1lbnQnLCBldmVudCA9PiBldmVudC5pbmRleCAhPT0gMCk7XG5cbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcHJvZ3Jlc3NiYXJcbiAgICBpZiAodGhpcy5jcC5wcm9ncmVzc2JhclBhcnRzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5jcC5wcm9ncmVzc2JhclBhcnRzKSB7XG4gICAgICB0aGlzLmNwLnByb2dyZXNzYmFyUGFydHMuZm9yRWFjaChmdW5jdGlvbiAocGFydCkge1xuICAgICAgICB0aGF0LnByb2dyZXNiYXJLZXlib2FyZENvbnRyb2xzLnJlbW92ZUVsZW1lbnQocGFydC5jaGlsZHJlbignYScpLmdldCgwKSk7XG4gICAgICAgIHBhcnQucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGF0LmNwLnByb2dyZXNzYmFyUGFydHMgPSBbXTtcblxuICAgIGNvbnN0IGNsaWNrUHJvZ3Jlc3NiYXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBpbmRleCA9ICQodGhpcykuZGF0YSgnc2xpZGVOdW1iZXInKTtcbiAgICAgIHRoYXQucHJvZ3Jlc2JhcktleWJvYXJkQ29udHJvbHMuc2V0VGFiYmFibGVCeUluZGV4KGluZGV4KTtcbiAgICAgIHRoYXQuZGlzcGxheVNsaWRlKGluZGV4KTtcbiAgICAgIHRoYXQuY3AuZm9jdXMoKTtcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNwLnNsaWRlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3Qgc2xpZGUgPSB0aGlzLmNwLnNsaWRlc1tpXTtcbiAgICAgIGNvbnN0IHByb2dyZXNzYmFyUGFydFRpdGxlID0gdGhpcy5jcmVhdGVTbGlkZVRpdGxlKGkpO1xuXG4gICAgICAvLyBjcmVhdGUgbGlzdCBpdGVtXG4gICAgICBjb25zdCAkbGkgPSAkKCc8bGk+Jywge1xuICAgICAgICAnY2xhc3MnOiAnaDVwLXByb2dyZXNzYmFyLXBhcnQnXG4gICAgICB9KVxuICAgICAgICAuYXBwZW5kVG8odGhhdC5jcC4kcHJvZ3Jlc3NiYXIpO1xuXG4gICAgICAvLyBjcmVhdGUgbGlua1xuICAgICAgY29uc3QgJGxpbmsgPSAkKCc8YT4nLCB7XG4gICAgICAgIGhyZWY6ICcjJyxcbiAgICAgICAgaHRtbDogJzxzcGFuIGNsYXNzPVwiaDVwLXByb2dyZXNzYmFyLXBhcnQtdGl0bGUgaGlkZGVuLWJ1dC1yZWFkXCI+JyArIHByb2dyZXNzYmFyUGFydFRpdGxlICsgJzwvc3Bhbj4nLFxuICAgICAgICB0YWJpbmRleDogJy0xJ1xuICAgICAgfSkuZGF0YSgnc2xpZGVOdW1iZXInLCBpKVxuICAgICAgICAuY2xpY2soY2xpY2tQcm9ncmVzc2JhcilcbiAgICAgICAgLmFwcGVuZFRvKCRsaSk7XG5cbiAgICAgIHRoaXMucHJvZ3Jlc2JhcktleWJvYXJkQ29udHJvbHMuYWRkRWxlbWVudCgkbGluay5nZXQoMCkpO1xuXG4gICAgICAvLyBBZGQgaG92ZXIgZWZmZWN0IGlmIG5vdCBhbiBpcGFkIG9yIGlwaG9uZS5cbiAgICAgIGlmICghaXNJT1MpIHtcbiAgICAgICAgLy8gY3JlYXRlIHBvcHVwXG4gICAgICAgIGNvbnN0ICRwb3B1cCA9ICQoJzxkaXYvPicsIHtcbiAgICAgICAgICAnY2xhc3MnOiAnaDVwLXByb2dyZXNzYmFyLXBvcHVwJyxcbiAgICAgICAgICAnaHRtbCc6IHByb2dyZXNzYmFyUGFydFRpdGxlLFxuICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgICAgICB9KS5hcHBlbmRUbygkbGkpO1xuXG4gICAgICAgICRsaS5tb3VzZWVudGVyKCgpID0+IHRoaXMuZW5zdXJlUG9wdXBWaXNpYmxlKCRwb3B1cCkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc1N1bW1hcnlTbGlkZShpKSkge1xuICAgICAgICAkbGkuYWRkQ2xhc3MoJ3Byb2dyZXNzYmFyLXBhcnQtc3VtbWFyeS1zbGlkZScpO1xuICAgICAgfVxuXG5cbiAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICRsaS5hZGRDbGFzcygnaDVwLXByb2dyZXNzYmFyLXBhcnQtc2hvdycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaSA9PT0gY3VycmVudFNsaWRlSW5kZXgpIHtcbiAgICAgICAgJGxpLmFkZENsYXNzKCdoNXAtcHJvZ3Jlc3NiYXItcGFydC1zZWxlY3RlZCcpO1xuICAgICAgfVxuXG4gICAgICB0aGF0LmNwLnByb2dyZXNzYmFyUGFydHMucHVzaCgkbGkpO1xuXG4gICAgICB0aGlzLnVwZGF0ZVNsaWRlVGl0bGUoaSk7XG5cbiAgICAgIC8vIENyZWF0ZSB0YXNrIGluZGljYXRvciBpZiBsZXNzIHRoYW4gNjAgc2xpZGVzIGFuZCBub3QgaW4gZWRpdG9yXG4gICAgICBpZiAodGhpcy5jcC5zbGlkZXMubGVuZ3RoIDw9IDYwICYmIHNsaWRlLmVsZW1lbnRzICYmIHNsaWRlLmVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGhhc1Rhc2sgPSBzbGlkZXNXaXRoU29sdXRpb25zW2ldICYmIHNsaWRlc1dpdGhTb2x1dGlvbnNbaV0ubGVuZ3RoID4gMDtcbiAgICAgICAgdmFyIGlzQW5zd2VyZWQgPSAhISh0aGF0LmNwLnByZXZpb3VzU3RhdGUgJiYgdGhhdC5jcC5wcmV2aW91c1N0YXRlLmFuc3dlcmVkICYmIHRoYXQuY3AucHJldmlvdXNTdGF0ZS5hbnN3ZXJlZFtpXSk7XG5cbiAgICAgICAgaWYgKGhhc1Rhc2spIHtcbiAgICAgICAgICAvLyBBZGQgdGFzayBpbmRpY2F0b3JcbiAgICAgICAgICAkKCc8ZGl2PicsIHtcbiAgICAgICAgICAgICdjbGFzcyc6ICdoNXAtcHJvZ3Jlc3NiYXItcGFydC1oYXMtdGFzaydcbiAgICAgICAgICB9KS5hcHBlbmRUbygkbGluayk7XG5cbiAgICAgICAgICB0aGlzLnNldFRhc2tBbnN3ZXJlZChpLCBpc0Fuc3dlcmVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRW5zdXJlcyB0aGF0IGFsbCBvZiBhIHBvcHVwIGlzIHZpc2libGVcbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9ICRwb3B1cFxuICAgKi9cbiAgTmF2aWdhdGlvbkxpbmUucHJvdG90eXBlLmVuc3VyZVBvcHVwVmlzaWJsZSA9IGZ1bmN0aW9uICgkcG9wdXApIHtcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHRoaXMuY3AuJGNvbnRhaW5lci53aWR0aCgpO1xuICAgIGNvbnN0IHBvcHVwV2lkdGggPSAkcG9wdXAub3V0ZXJXaWR0aCgpO1xuICAgIGNvbnN0IHBvcHVwT2Zmc2V0TGVmdCA9ICRwb3B1cC5vZmZzZXQoKS5sZWZ0O1xuXG4gICAgaWYgKHBvcHVwT2Zmc2V0TGVmdCA8IDApIHtcbiAgICAgICRwb3B1cC5jc3MoJ2xlZnQnLCAwKTtcbiAgICAgICRwb3B1cC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKDApJyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChwb3B1cE9mZnNldExlZnQgKyBwb3B1cFdpZHRoKSA+IGF2YWlsYWJsZVdpZHRoKSB7XG4gICAgICAkcG9wdXAuY3NzKCdsZWZ0JywgJ2F1dG8nKTtcbiAgICAgICRwb3B1cC5jc3MoJ3JpZ2h0JywgMCk7XG4gICAgICAkcG9wdXAuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWCgwKScpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGlzcGxheXMgYSBzbGlkZVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICovXG4gIE5hdmlnYXRpb25MaW5lLnByb3RvdHlwZS5kaXNwbGF5U2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIC8vIG5hdmlnYXRlIHRvIHNsaWRlXG4gICAgdGhpcy5jcC5qdW1wVG9TbGlkZShpbmRleCwgZmFsc2UsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9sZEluZGV4ID0gc2VsZi5jcC5nZXRDdXJyZW50U2xpZGVJbmRleCgpO1xuXG4gICAgICAvLyB1cGRhdGUgY3VycmVudCBwcm9ncmVzcyB0YXNrXG4gICAgICBzZWxmLnVwZGF0ZVNsaWRlVGl0bGUoaW5kZXgsIHsgaXNDdXJyZW50OiB0cnVlIH0pO1xuXG4gICAgICAvLyB1cGRhdGUgb2xkIHByb2dyZXNzIHRhc2tcbiAgICAgIHNlbGYudXBkYXRlU2xpZGVUaXRsZShvbGRJbmRleCwgeyBpc0N1cnJlbnQ6IGZhbHNlIH0pO1xuXG4gICAgICAvLyB0b2dnbGUgbmV4dCBhbmQgcHJldiBidXR0b25zXG4gICAgICBzZWxmLnRvZ2dsZU5leHRBbmRQcmV2aW91c0J1dHRvbkRpc2FibGVkKGluZGV4KTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogR2VuZXJhdGUgdG9vbHRpcCBmb3IgcHJvZ3Jlc3MgYmFyIHNsaWRlc1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2xpZGVOdW1iZXJcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgTmF2aWdhdGlvbkxpbmUucHJvdG90eXBlLmNyZWF0ZVNsaWRlVGl0bGUgPSBmdW5jdGlvbiAoc2xpZGVOdW1iZXIpIHtcbiAgICBjb25zdCBzbGlkZSA9IHRoaXMuY3Auc2xpZGVzW3NsaWRlTnVtYmVyXTtcbiAgICBjb25zdCBoYXNLZXlXb3JkcyA9IHNsaWRlLmtleXdvcmRzICYmIHNsaWRlLmtleXdvcmRzLmxlbmd0aCA+IDA7XG5cbiAgICBpZiAoaGFzS2V5V29yZHMpIHtcbiAgICAgIHJldHVybiBzbGlkZS5rZXl3b3Jkc1swXS5tYWluO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmlzU3VtbWFyeVNsaWRlKHNsaWRlTnVtYmVyKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3AubDEwbi5zdW1tYXJ5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNwLmwxMG4uc2xpZGUgKyAnICcgKyAoc2xpZGVOdW1iZXIgKyAxKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBzbGlkZSB3aXRoIGdpdmVuIGluZGV4IGlzIHN1bW1hcnkgc2xpZGVcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBOYXZpZ2F0aW9uTGluZS5wcm90b3R5cGUuaXNTdW1tYXJ5U2xpZGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gISEoKHRoaXMuY3AuZWRpdG9yID09PSB1bmRlZmluZWQpXG4gICAgICAmJiAoaW5kZXggPT09IHRoaXMuY3Auc2xpZGVzLmxlbmd0aCAtIDEpXG4gICAgICAmJiB0aGlzLmNwLnNob3dTdW1tYXJ5U2xpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGZvb3Rlci5cbiAgICovXG4gIE5hdmlnYXRpb25MaW5lLnByb3RvdHlwZS5pbml0Rm9vdGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgJGZvb3RlciA9IHRoaXMuY3AuJGZvb3RlcjtcblxuICAgIC8vIElubmVyIGZvb3RlciBhZGp1c3RtZW50IGNvbnRhaW5lcnNcbiAgICB2YXIgJGxlZnRGb290ZXIgPSAkKCc8ZGl2Lz4nLCB7XG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1sZWZ0LWFkanVzdGVkJ1xuICAgIH0pLmFwcGVuZFRvKCRmb290ZXIpO1xuXG4gICAgdmFyICRjZW50ZXJGb290ZXIgPSAkKCc8ZGl2Lz4nLCB7XG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1jZW50ZXItYWRqdXN0ZWQnXG4gICAgfSkuYXBwZW5kVG8oJGZvb3Rlcik7XG5cbiAgICB2YXIgJHJpZ2h0Rm9vdGVyID0gJCgnPGRpdi8+Jywge1xuICAgICAgJ3JvbGUnOiAndG9vbGJhcicsXG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1yaWdodC1hZGp1c3RlZCdcbiAgICB9KS5hcHBlbmRUbygkZm9vdGVyKTtcblxuICAgIC8vIExlZnQgZm9vdGVyIGVsZW1lbnRzXG5cbiAgICAvLyBUb2dnbGUga2V5d29yZHMgbWVudVxuICAgIHRoaXMuY3AuJGtleXdvcmRzQnV0dG9uID0gJCgnPGRpdi8+Jywge1xuICAgICAgJ2NsYXNzJzogXCJoNXAtZm9vdGVyLWJ1dHRvbiBoNXAtZm9vdGVyLXRvZ2dsZS1rZXl3b3Jkc1wiLFxuICAgICAgJ2FyaWEtZXhwYW5kZWQnOiAnZmFsc2UnLFxuICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmNwLmwxMG4uc2hvd0tleXdvcmRzLFxuICAgICAgJ3RpdGxlJzogdGhpcy5jcC5sMTBuLnNob3dLZXl3b3JkcyxcbiAgICAgICdyb2xlJzogJ2J1dHRvbicsXG4gICAgICAndGFiaW5kZXgnOiAnMCcsXG4gICAgICAnaHRtbCc6ICc8c3BhbiBjbGFzcz1cImg1cC1pY29uLW1lbnVcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJjdXJyZW50LXNsaWRlLXRpdGxlXCI+PC9zcGFuPidcbiAgICB9KS5hcHBlbmRUbygkbGVmdEZvb3Rlcik7XG5cbiAgICBhZGRDbGlja0FuZEtleWJvYXJkTGlzdGVuZXJzKHRoaXMuY3AuJGtleXdvcmRzQnV0dG9uLCBldmVudCA9PiB7XG4gICAgICBpZiAoIXRoYXQuY3AucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0QWx3YXlzU2hvdykge1xuICAgICAgICB0aGF0LmNwLnRvZ2dsZUtleXdvcmRzKCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuY3AucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0QWx3YXlzU2hvdyB8fCAhdGhpcy5jcC5pbml0S2V5d29yZHMpIHtcbiAgICAgIHRoaXMuY3AuJGtleXdvcmRzQnV0dG9uLmhpZGUoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY3AucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0RW5hYmxlZCkge1xuICAgICAgLy8gSGlkZSBpbiBlZGl0b3Igd2hlbiBkaXNhYmxlZC5cbiAgICAgIHRoaXMuY3AuJGtleXdvcmRzV3JhcHBlci5hZGQodGhpcy4ka2V5d29yZHNCdXR0b24pLmhpZGUoKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUga2V5d29yZCBmb3IgZmlyc3Qgc2xpZGUuXG4gICAgdGhpcy51cGRhdGVGb290ZXJLZXl3b3JkKDApO1xuXG4gICAgLy8gQ2VudGVyIGZvb3RlciBlbGVtZW50c1xuXG4gICAgLy8gUHJldmlvdXMgc2xpZGVcbiAgICB0aGlzLmNwLiRwcmV2U2xpZGVCdXR0b24gPSAkKCc8ZGl2Lz4nLCB7XG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1idXR0b24gaDVwLWZvb3Rlci1wcmV2aW91cy1zbGlkZScsXG4gICAgICAnYXJpYS1sYWJlbCc6IHRoaXMuY3AubDEwbi5wcmV2U2xpZGUsXG4gICAgICAndGl0bGUnOiB0aGlzLmNwLmwxMG4ucHJldlNsaWRlLFxuICAgICAgJ3JvbGUnOiAnYnV0dG9uJyxcbiAgICAgICd0YWJpbmRleCc6ICctMScsXG4gICAgICAnYXJpYS1kaXNhYmxlZCc6ICd0cnVlJ1xuICAgIH0pLmFwcGVuZFRvKCRjZW50ZXJGb290ZXIpO1xuXG4gICAgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycyh0aGlzLmNwLiRwcmV2U2xpZGVCdXR0b24sICgpID0+IHRoaXMuY3AucHJldmlvdXNTbGlkZSh1bmRlZmluZWQsIGZhbHNlKSk7XG5cbiAgICBjb25zdCAkc2xpZGVOdW1iZXJpbmcgPSAkKCc8ZGl2Lz4nLCB7XG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1zbGlkZS1jb3VudCdcbiAgICB9KS5hcHBlbmRUbygkY2VudGVyRm9vdGVyKTtcblxuICAgIC8vIEN1cnJlbnQgc2xpZGUgY291bnRcbiAgICB0aGlzLmNwLiRmb290ZXJDdXJyZW50U2xpZGUgPSAkKCc8ZGl2Lz4nLCB7XG4gICAgICAnaHRtbCc6ICcxJyxcbiAgICAgICdjbGFzcyc6ICdoNXAtZm9vdGVyLXNsaWRlLWNvdW50LWN1cnJlbnQnLFxuICAgICAgJ3RpdGxlJzogdGhpcy5jcC5sMTBuLmN1cnJlbnRTbGlkZSxcbiAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgIH0pLmFwcGVuZFRvKCRzbGlkZU51bWJlcmluZyk7XG5cbiAgICB0aGlzLmNwLiRmb290ZXJDb3VudGVyID0gJCgnPGRpdi8+Jywge1xuICAgICAgJ2NsYXNzJzogJ2hpZGRlbi1idXQtcmVhZCcsXG4gICAgICAnaHRtbCc6IHRoaXMuY3AubDEwbi5zbGlkZUNvdW50XG4gICAgICAgIC5yZXBsYWNlKCdAaW5kZXgnLCAnMScpXG4gICAgICAgIC5yZXBsYWNlKCdAdG90YWwnLCB0aGlzLmNwLnNsaWRlcy5sZW5ndGgudG9TdHJpbmcoKSlcbiAgICB9KS5hcHBlbmRUbygkY2VudGVyRm9vdGVyKTtcblxuICAgIC8vIENvdW50IGRlbGltaXRlciwgY29udGVudCBjb25maWd1cmFibGUgaW4gY3NzXG4gICAgJCgnPGRpdi8+Jywge1xuICAgICAgJ2h0bWwnOiAnLycsXG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1zbGlkZS1jb3VudC1kZWxpbWl0ZXInLFxuICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnXG4gICAgfSkuYXBwZW5kVG8oJHNsaWRlTnVtYmVyaW5nKTtcblxuICAgIC8vIE1heCBzbGlkZSBjb3VudFxuICAgIHRoaXMuY3AuJGZvb3Rlck1heFNsaWRlID0gJCgnPGRpdi8+Jywge1xuICAgICAgJ2h0bWwnOiB0aGlzLmNwLnNsaWRlcy5sZW5ndGgsXG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1zbGlkZS1jb3VudC1tYXgnLFxuICAgICAgJ3RpdGxlJzogdGhpcy5jcC5sMTBuLmxhc3RTbGlkZSxcbiAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgIH0pLmFwcGVuZFRvKCRzbGlkZU51bWJlcmluZyk7XG5cbiAgICAvLyBOZXh0IHNsaWRlXG4gICAgdGhpcy5jcC4kbmV4dFNsaWRlQnV0dG9uID0gJCgnPGRpdi8+Jywge1xuICAgICAgJ2NsYXNzJzogJ2g1cC1mb290ZXItYnV0dG9uIGg1cC1mb290ZXItbmV4dC1zbGlkZScsXG4gICAgICAnYXJpYS1sYWJlbCc6IHRoaXMuY3AubDEwbi5uZXh0U2xpZGUsXG4gICAgICAndGl0bGUnOiB0aGlzLmNwLmwxMG4ubmV4dFNsaWRlLFxuICAgICAgJ3JvbGUnOiAnYnV0dG9uJyxcbiAgICAgICd0YWJpbmRleCc6ICcwJ1xuICAgIH0pLmFwcGVuZFRvKCRjZW50ZXJGb290ZXIpO1xuXG4gICAgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycyh0aGlzLmNwLiRuZXh0U2xpZGVCdXR0b24sICgpID0+IHRoaXMuY3AubmV4dFNsaWRlKHVuZGVmaW5lZCwgZmFsc2UpKTtcblxuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKlxuICAgIC8vIFJpZ2h0IGZvb3RlciBlbGVtZW50c1xuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKlxuXG4gICAgLy8gRG8gbm90IGFkZCB0aGVzZSBidXR0b25zIGluIGVkaXRvciBtb2RlXG4gICAgaWYgKHRoaXMuY3AuZWRpdG9yID09PSB1bmRlZmluZWQpIHtcblxuICAgICAgLy8gRXhpdCBzb2x1dGlvbiBtb2RlIGJ1dHRvblxuICAgICAgdGhpcy5jcC4kZXhpdFNvbHV0aW9uTW9kZUJ1dHRvbiA9ICQoJzxkaXYvPicsIHtcbiAgICAgICAgJ3JvbGUnOiAnYnV0dG9uJyxcbiAgICAgICAgJ2NsYXNzJzogJ2g1cC1mb290ZXItZXhpdC1zb2x1dGlvbi1tb2RlJyxcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmNwLmwxMG4uc29sdXRpb25Nb2RlVGl0bGUsXG4gICAgICAgICd0aXRsZSc6IHRoaXMuY3AubDEwbi5zb2x1dGlvbk1vZGVUaXRsZSxcbiAgICAgICAgJ3RhYmluZGV4JzogJzAnXG4gICAgICB9KS5hcHBlbmRUbygkcmlnaHRGb290ZXIpO1xuXG4gICAgICBhZGRDbGlja0FuZEtleWJvYXJkTGlzdGVuZXJzKHRoaXMuY3AuJGV4aXRTb2x1dGlvbk1vZGVCdXR0b24sICgpID0+IHRoYXQuY3AuanVtcFRvU2xpZGUodGhhdC5jcC5zbGlkZXMubGVuZ3RoIC0gMSkpO1xuXG4gICAgICBpZiAodGhpcy5jcC5lbmFibGVQcmludEJ1dHRvbiAmJiBQcmludGVyLnN1cHBvcnRlZCgpKSB7XG4gICAgICAgIHRoaXMuY3AuJHByaW50QnV0dG9uID0gJCgnPGRpdi8+Jywge1xuICAgICAgICAgICdjbGFzcyc6ICdoNXAtZm9vdGVyLWJ1dHRvbiBoNXAtZm9vdGVyLXByaW50JyxcbiAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMuY3AubDEwbi5wcmludFRpdGxlLFxuICAgICAgICAgICd0aXRsZSc6IHRoaXMuY3AubDEwbi5wcmludFRpdGxlLFxuICAgICAgICAgICdyb2xlJzogJ2J1dHRvbicsXG4gICAgICAgICAgJ3RhYmluZGV4JzogJzAnXG4gICAgICAgIH0pLmFwcGVuZFRvKCRyaWdodEZvb3Rlcik7XG5cbiAgICAgICAgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycyh0aGlzLmNwLiRwcmludEJ1dHRvbiwgKCkgPT4gdGhhdC5vcGVuUHJpbnREaWFsb2coKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChINVAuZnVsbHNjcmVlblN1cHBvcnRlZCkge1xuICAgICAgICAvLyBUb2dnbGUgZnVsbCBzY3JlZW4gYnV0dG9uXG4gICAgICAgIHRoaXMuY3AuJGZ1bGxTY3JlZW5CdXR0b24gPSAkKCc8ZGl2Lz4nLCB7XG4gICAgICAgICAgJ2NsYXNzJzogJ2g1cC1mb290ZXItYnV0dG9uIGg1cC1mb290ZXItdG9nZ2xlLWZ1bGwtc2NyZWVuJyxcbiAgICAgICAgICAnYXJpYS1sYWJlbCc6IHRoaXMuY3AubDEwbi5mdWxsc2NyZWVuLFxuICAgICAgICAgICd0aXRsZSc6IHRoaXMuY3AubDEwbi5mdWxsc2NyZWVuLFxuICAgICAgICAgICdyb2xlJzogJ2J1dHRvbicsXG4gICAgICAgICAgJ3RhYmluZGV4JzogJzAnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFkZENsaWNrQW5kS2V5Ym9hcmRMaXN0ZW5lcnModGhpcy5jcC4kZnVsbFNjcmVlbkJ1dHRvbiwgKCkgPT4gdGhhdC5jcC50b2dnbGVGdWxsU2NyZWVuKCkpO1xuXG4gICAgICAgIHRoaXMuY3AuJGZ1bGxTY3JlZW5CdXR0b24uYXBwZW5kVG8oJHJpZ2h0Rm9vdGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTb2x1dGlvbiBtb2RlIHRleHRcbiAgICB0aGlzLmNwLiRleGl0U29sdXRpb25Nb2RlVGV4dCA9ICQoJzxkaXYvPicsIHtcbiAgICAgICdodG1sJzogJycsXG4gICAgICAnY2xhc3MnOiAnaDVwLWZvb3Rlci1leGl0LXNvbHV0aW9uLW1vZGUtdGV4dCdcbiAgICB9KS5hcHBlbmRUbyh0aGlzLmNwLiRleGl0U29sdXRpb25Nb2RlQnV0dG9uKTtcbiAgfTtcblxuXG4gIE5hdmlnYXRpb25MaW5lLnByb3RvdHlwZS5vcGVuUHJpbnREaWFsb2cgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgJGg1cFdyYXBwZXIgPSAkKCcuaDVwLXdyYXBwZXInKTtcbiAgICBjb25zdCAkZGlhbG9nID0gUHJpbnRlci5zaG93RGlhbG9nKHRoaXMuY3AubDEwbiwgJGg1cFdyYXBwZXIsIChwcmludEFsbFNsaWRlcykgPT4ge1xuICAgICAgUHJpbnRlci5wcmludCh0aGlzLmNwLCAkaDVwV3JhcHBlciwgcHJpbnRBbGxTbGlkZXMpO1xuICAgIH0pO1xuXG4gICAgJGRpYWxvZy5jaGlsZHJlbignW3JvbGU9XCJkaWFsb2dcIl0nKS5mb2N1cygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHByb2dyZXNzIGJhci5cbiAgICovXG4gIE5hdmlnYXRpb25MaW5lLnByb3RvdHlwZS51cGRhdGVQcm9ncmVzc0JhciA9IGZ1bmN0aW9uIChzbGlkZU51bWJlciwgcHJldlNsaWRlTnVtYmVyLCBzb2x1dGlvbk1vZGUpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAvLyBVcGRhdGVzIHByb2dyZXNzIGJhciBwcm9ncmVzcyAoYmx1ZSBsaW5lKVxuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0aGF0LmNwLnByb2dyZXNzYmFyUGFydHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmIChzbGlkZU51bWJlciArIDEgPiBpKSB7XG4gICAgICAgIHRoYXQuY3AucHJvZ3Jlc3NiYXJQYXJ0c1tpXS5hZGRDbGFzcygnaDVwLXByb2dyZXNzYmFyLXBhcnQtc2hvdycpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoYXQuY3AucHJvZ3Jlc3NiYXJQYXJ0c1tpXS5yZW1vdmVDbGFzcygnaDVwLXByb2dyZXNzYmFyLXBhcnQtc2hvdycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoYXQucHJvZ3Jlc2JhcktleWJvYXJkQ29udHJvbHMuc2V0VGFiYmFibGVCeUluZGV4KHNsaWRlTnVtYmVyKTtcblxuICAgIHRoYXQuY3AucHJvZ3Jlc3NiYXJQYXJ0c1tzbGlkZU51bWJlcl1cbiAgICAgIC5hZGRDbGFzcyhcImg1cC1wcm9ncmVzc2Jhci1wYXJ0LXNlbGVjdGVkXCIpXG4gICAgICAuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImg1cC1wcm9ncmVzc2Jhci1wYXJ0LXNlbGVjdGVkXCIpO1xuXG4gICAgaWYgKHByZXZTbGlkZU51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGF0LmNwLnByb2dyZXNzYmFyUGFydHMuZm9yRWFjaChmdW5jdGlvbiAocGFydCwgaSkge1xuICAgICAgICB0aGF0LnNldFRhc2tBbnN3ZXJlZChpLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRG9uJ3QgbWFyayBhbnN3ZXJzIGFzIGFuc3dlcmVkIGlmIGluIHNvbHV0aW9uIG1vZGUgb3IgZWRpdG9yIG1vZGUuXG4gICAgaWYgKHNvbHV0aW9uTW9kZSB8fCAodGhhdC5jcC5lZGl0b3IgIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgYSBwYXJ0IHRvIGJlIGFuc3dlcmVkLCBvciB1biBhbnN3ZXJlZFxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtib29sZWFufSBpc0Fuc3dlcmVkXG4gICAqL1xuICBOYXZpZ2F0aW9uTGluZS5wcm90b3R5cGUuc2V0VGFza0Fuc3dlcmVkID0gZnVuY3Rpb24gKGluZGV4LCBpc0Fuc3dlcmVkKSB7XG4gICAgY29uc3QgJGFuc3dlcmVkSW5kaWNhdG9yID0gdGhpcy5jcC5wcm9ncmVzc2JhclBhcnRzW2luZGV4XS5maW5kKCcuaDVwLXByb2dyZXNzYmFyLXBhcnQtaGFzLXRhc2snKTtcblxuICAgICRhbnN3ZXJlZEluZGljYXRvci50b2dnbGVDbGFzcygnaDVwLWFuc3dlcmVkJywgaXNBbnN3ZXJlZCk7XG4gICAgdGhpcy51cGRhdGVTbGlkZVRpdGxlKGluZGV4LCB7IHN0YXRlOiBpc0Fuc3dlcmVkID8gYW5zd2VyZWRTdGF0ZS5BTlNXRVJFRCA6IGFuc3dlcmVkU3RhdGUuTk9UX0FOU1dFUkVEIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgc2xpZGVzIHRpdGxlIHdpdGggdmFsdWVzIGZyb20gc3RhdGUsIGlmIG92ZXJyaWRlcyBhcmUgbm90IHByb3ZpZGVkXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge29iamVjdH0gW2NvbmZpZ11cbiAgICogQHBhcmFtIHthbnN3ZXJlZFN0YXRlfSBbY29uZmlnLnN0YXRlXVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcuaXNDdXJyZW50XVxuICAgKi9cbiAgTmF2aWdhdGlvbkxpbmUucHJvdG90eXBlLnVwZGF0ZVNsaWRlVGl0bGUgPSBmdW5jdGlvbiAoaW5kZXgsIHsgc3RhdGUsIGlzQ3VycmVudCB9ID0ge30pIHtcbiAgICB0aGlzLnNldFNsaWRlVGl0bGUoaW5kZXgsIHtcbiAgICAgIHN0YXRlOiBkZWZhdWx0VmFsdWUoc3RhdGUsIHRoaXMuZ2V0QW5zd2VyZWRTdGF0ZShpbmRleCkpLFxuICAgICAgaXNDdXJyZW50OiBkZWZhdWx0VmFsdWUoaXNDdXJyZW50LCB0aGlzLmNwLmlzQ3VycmVudFNsaWRlKGluZGV4KSlcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyBhIHBhcnQgdG8gYmUgYW5zd2VyZWQsIG9yIHVuIGFuc3dlcmVkXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge2Fuc3dlcmVkU3RhdGV9IFtzdGF0ZV1cbiAgICogQHBhcmFtIHtib29sZWFufSBbaXNDdXJyZW50XVxuICAgKi9cbiAgTmF2aWdhdGlvbkxpbmUucHJvdG90eXBlLnNldFNsaWRlVGl0bGUgPSBmdW5jdGlvbiAoaW5kZXgsIHsgc3RhdGUgPSBhbnN3ZXJlZFN0YXRlLk5PX0lOVEVSQUNUSU9OUywgaXNDdXJyZW50ID0gZmFsc2V9KSB7XG4gICAgY29uc3QgdG90YWwgPSAgdGhpcy5jcC5zbGlkZXMubGVuZ3RoO1xuICAgIGNvbnN0ICRwYXJ0ID0gdGhpcy5jcC5wcm9ncmVzc2JhclBhcnRzW2luZGV4XTtcbiAgICBjb25zdCAkcGFydFRpdGxlID0gJHBhcnQuZmluZCgnLmg1cC1wcm9ncmVzc2Jhci1wYXJ0LXRpdGxlJyk7XG4gICAgY29uc3QgbnVtYmVyZWRMYWJlbCA9IHRoaXMuY3AubDEwbi5zbGlkZUNvdW50LnJlcGxhY2UoJ0BpbmRleCcsIChpbmRleCArIDEpKS5yZXBsYWNlKCdAdG90YWwnLCB0b3RhbCk7XG4gICAgY29uc3QgYW5zd2VyZWRMYWJlbCA9IHRoaXMuYW5zd2VyZWRMYWJlbHNbc3RhdGVdLnJlcGxhY2UoJ0BzbGlkZU5hbWUnLCB0aGlzLmNyZWF0ZVNsaWRlVGl0bGUoaW5kZXgpKTtcbiAgICBjb25zdCBjdXJyZW50U2xpZGVMYWJlbCA9IGlzQ3VycmVudCA/IHRoaXMuY3AubDEwblsnY3VycmVudFNsaWRlJ10gOiAnJztcblxuICAgICRwYXJ0VGl0bGUuaHRtbChgJHtudW1iZXJlZExhYmVsfTogJHthbnN3ZXJlZExhYmVsfS4gJHtjdXJyZW50U2xpZGVMYWJlbH1gKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYW5zd2VyZWQgc3RhdGUgb2YgYSBnaXZlbiBzbGlkZVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHJldHVybiB7YW5zd2VyZWRTdGF0ZX1cbiAgICovXG4gIE5hdmlnYXRpb25MaW5lLnByb3RvdHlwZS5nZXRBbnN3ZXJlZFN0YXRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgY29uc3QgJHBhcnQgPSB0aGlzLmNwLnByb2dyZXNzYmFyUGFydHNbaW5kZXhdO1xuICAgIGNvbnN0IGhhc1Rhc2sgPSB0aGlzLnNsaWRlSGFzSW50ZXJhY3Rpb24oaW5kZXgpO1xuICAgIGNvbnN0IGlzQW5zd2VyZWQgPSB0aGlzLmNwLnNsaWRlSGFzQW5zd2VyZWRUYXNrKGluZGV4KTtcblxuICAgIGlmICghaGFzVGFzaykge1xuICAgICAgcmV0dXJuIGFuc3dlcmVkU3RhdGUuTk9fSU5URVJBQ1RJT05TO1xuICAgIH1cbiAgICBlbHNlIGlmICgkcGFydC5maW5kKCcuaDVwLWlzLWNvcnJlY3QnKS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gYW5zd2VyZWRTdGF0ZS5DT1JSRUNUO1xuICAgIH1cbiAgICBlbHNlIGlmICgkcGFydC5maW5kKCcuaDVwLWlzLXdyb25nJykubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGFuc3dlcmVkU3RhdGUuSU5DT1JSRUNUO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Fuc3dlcmVkKSB7XG4gICAgICByZXR1cm4gYW5zd2VyZWRTdGF0ZS5BTlNXRVJFRDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gYW5zd2VyZWRTdGF0ZS5OT1RfQU5TV0VSRUQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgYSBzbGlkZSB3YXMgaW5pdGlhdGVkIHdpdGggYW4gaW50ZXJhY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBOYXZpZ2F0aW9uTGluZS5wcm90b3R5cGUuc2xpZGVIYXNJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiB0aGlzLmNwLnByb2dyZXNzYmFyUGFydHNbaW5kZXhdLmZpbmQoJy5oNXAtcHJvZ3Jlc3NiYXItcGFydC1oYXMtdGFzaycpLmxlbmd0aCA+IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBmb290ZXIgd2l0aCBjdXJyZW50IHNsaWRlIGRhdGFcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNsaWRlTnVtYmVyIEN1cnJlbnQgc2xpZGUgbnVtYmVyXG4gICAqL1xuICBOYXZpZ2F0aW9uTGluZS5wcm90b3R5cGUudXBkYXRlRm9vdGVyID0gZnVuY3Rpb24gKHNsaWRlTnVtYmVyKSB7XG4gICAgLy8gVXBkYXRlIGN1cnJlbnQgc2xpZGUgbnVtYmVyIGluIGZvb3RlclxuICAgIHRoaXMuY3AuJGZvb3RlckN1cnJlbnRTbGlkZS5odG1sKHNsaWRlTnVtYmVyICsgMSk7XG4gICAgdGhpcy5jcC4kZm9vdGVyTWF4U2xpZGUuaHRtbCh0aGlzLmNwLnNsaWRlcy5sZW5ndGgpO1xuXG4gICAgdGhpcy5jcC4kZm9vdGVyQ291bnRlci5odG1sKHRoaXMuY3AubDEwbi5zbGlkZUNvdW50XG4gICAgICAucmVwbGFjZSgnQGluZGV4JywgKHNsaWRlTnVtYmVyICsgMSkudG9TdHJpbmcoKSlcbiAgICAgIC5yZXBsYWNlKCdAdG90YWwnLCB0aGlzLmNwLnNsaWRlcy5sZW5ndGgudG9TdHJpbmcoKSkpO1xuXG4gICAgLy8gSGlkZSBleGl0IHNvbHV0aW9uIG1vZGUgYnV0dG9uIG9uIHN1bW1hcnkgc2xpZGVcbiAgICBpZiAodGhpcy5jcC5pc1NvbHV0aW9uTW9kZSAmJiBzbGlkZU51bWJlciA9PT0gdGhpcy5jcC5zbGlkZXMubGVuZ3RoIC0gMSkge1xuICAgICAgdGhpcy5jcC4kZm9vdGVyLmFkZENsYXNzKCdzdW1tYXJ5LXNsaWRlJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5jcC4kZm9vdGVyLnJlbW92ZUNsYXNzKCdzdW1tYXJ5LXNsaWRlJyk7XG4gICAgfVxuXG4gICAgdGhpcy50b2dnbGVOZXh0QW5kUHJldmlvdXNCdXR0b25EaXNhYmxlZChzbGlkZU51bWJlcik7XG5cbiAgICAvLyBVcGRhdGUga2V5d29yZCBpbiBmb290ZXJcbiAgICB0aGlzLnVwZGF0ZUZvb3RlcktleXdvcmQoc2xpZGVOdW1iZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNhYmxlcyBwcmV2aW91cyBidXR0b24gaWYgb24gdGhlIGZpcnN0IHNsaWRlLFxuICAgKiBhbmQgZGlzYWJsZXMgdGhlIG5leHQgYnV0dG9uIGlmIG9uIHRoZSBsYXN0IHNsaWRlXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKi9cbiAgTmF2aWdhdGlvbkxpbmUucHJvdG90eXBlLnRvZ2dsZU5leHRBbmRQcmV2aW91c0J1dHRvbkRpc2FibGVkID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgY29uc3QgbGFzdFNsaWRlSW5kZXggPSB0aGlzLmNwLnNsaWRlcy5sZW5ndGggLSAxO1xuXG4gICAgdGhpcy5jcC4kcHJldlNsaWRlQnV0dG9uLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAoaW5kZXggPT09IDApLnRvU3RyaW5nKCkpO1xuICAgIHRoaXMuY3AuJG5leHRTbGlkZUJ1dHRvbi5hdHRyKCdhcmlhLWRpc2FibGVkJywgKGluZGV4ID09PSBsYXN0U2xpZGVJbmRleCkudG9TdHJpbmcoKSk7XG4gICAgdGhpcy5jcC4kcHJldlNsaWRlQnV0dG9uLmF0dHIoJ3RhYmluZGV4JywgKGluZGV4ID09PSAwKSA/ICctMScgOiAnMCcpO1xuICAgIHRoaXMuY3AuJG5leHRTbGlkZUJ1dHRvbi5hdHRyKCd0YWJpbmRleCcsIChpbmRleCA9PT0gbGFzdFNsaWRlSW5kZXgpID8gJy0xJyA6ICcwJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBrZXl3b3JkIGluIGZvb3RlciB3aXRoIGN1cnJlbnQgc2xpZGUgZGF0YVxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gc2xpZGVOdW1iZXIgQ3VycmVudCBzbGlkZSBudW1iZXJcbiAgICovXG4gIE5hdmlnYXRpb25MaW5lLnByb3RvdHlwZS51cGRhdGVGb290ZXJLZXl3b3JkID0gZnVuY3Rpb24gKHNsaWRlTnVtYmVyKSB7XG4gICAgY29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5jcC5zbGlkZXNbc2xpZGVOdW1iZXJdO1xuICAgIGxldCBrZXl3b3JkU3RyaW5nID0gJyc7XG5cbiAgICAvLyBHZXQgY3VycmVudCBrZXl3b3JkXG4gICAgaWYgKGN1cnJlbnRTbGlkZSAmJiBjdXJyZW50U2xpZGUua2V5d29yZHMgJiYgY3VycmVudFNsaWRlLmtleXdvcmRzWzBdKSB7XG4gICAgICBrZXl3b3JkU3RyaW5nID0gY3VycmVudFNsaWRlLmtleXdvcmRzWzBdLm1haW47XG4gICAgfVxuXG4gICAgLy8gU3VtbWFyeSBzbGlkZSBrZXl3b3JkXG4gICAgaWYgKCF0aGlzLmNwLmlzRWRpdG9yKCkgJiYgdGhpcy5jcC5zaG93U3VtbWFyeVNsaWRlICYmIChzbGlkZU51bWJlciA+PSB0aGlzLmNwLnNsaWRlcy5sZW5ndGggLSAxKSkge1xuICAgICAga2V5d29yZFN0cmluZyA9IHRoaXMuY3AubDEwbi5zdW1tYXJ5O1xuICAgIH1cblxuICAgIC8vIFNldCBmb290ZXIga2V5d29yZFxuICAgIHRoaXMuY3AuJGtleXdvcmRzQnV0dG9uXG4gICAgICAuY2hpbGRyZW4oJy5jdXJyZW50LXNsaWRlLXRpdGxlJylcbiAgICAgIC5odG1sKGRlZmF1bHRWYWx1ZShrZXl3b3JkU3RyaW5nLCAnJykpO1xuICB9O1xuXG4gIHJldHVybiBOYXZpZ2F0aW9uTGluZTtcbn0pKEg1UC5qUXVlcnkpO1xuXG5leHBvcnQgZGVmYXVsdCBOYXZpZ2F0aW9uTGluZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/navigation-line.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/printer.js":
    /*!********************************!*\
      !*** ./src/scripts/printer.js ***!
      \********************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/scripts/utils.js\");\n\n\nvar Printer = function ($) {\n  var nextPrinterDialogId = 0;\n  /**\n   * Printer class\n   * @class Printer\n   */\n\n  function Printer() {}\n  /**\n   * Check if printing is supported\n   *\n   * @method supported\n   * @static\n   * @return {boolean} True if supported, else false.\n   */\n\n\n  Printer.supported = function () {\n    // Need window.print to be available\n    return typeof window.print === 'function';\n  };\n  /**\n   * Do the actual printing\n   *\n   * @method print\n   * @static\n   * @param  {H5P.CoursePresentation} cp Reference to cp instance\n   * @param  {H5P.jQuery} $wrapper  The CP dom wrapper\n   * @param  {boolean} allSlides If true, all slides are printed. If false or\n   *                             undefined, the currentSlide is printed.\n   */\n\n\n  Printer.print = function (cp, $wrapper, allSlides) {\n    // Let CP know we are about to print\n    cp.trigger('printing', {\n      finished: false,\n      allSlides: allSlides\n    }); // Find height of a slide:\n\n    var $currentSlide = $('.h5p-slide.h5p-current');\n    var slideHeight = $currentSlide.height();\n    var slideWidth = $currentSlide.width(); // Use 670px as width when printing. We can't use 100% percent, since user can\n    // change between landscape and portrait without us ever knowing about it.\n    // More info: http://stackoverflow.com/a/11084797/2797106\n\n    var ratio = slideWidth / 670;\n    var $slides = $('.h5p-slide');\n    $slides.css({\n      height: slideHeight / ratio + 'px',\n      width: '670px',\n      fontSize: Math.floor(100 / ratio) + '%'\n    });\n    var wrapperHeight = $wrapper.height();\n    $wrapper.css('height', 'auto'); // Let printer css know which slides to print:\n\n    $slides.toggleClass('doprint', allSlides === true);\n    $currentSlide.addClass('doprint'); // Need timeout for some browsers.\n\n    setTimeout(function () {\n      // Do the actual printing of the iframe content\n      window.print(); // Reset CSS\n\n      $slides.css({\n        height: '',\n        width: '',\n        fontSize: ''\n      });\n      $wrapper.css('height', wrapperHeight + 'px'); // Let CP know we are finished printing\n\n      cp.trigger('printing', {\n        finished: true\n      });\n    }, 500);\n  };\n  /**\n   * Show the print dialog. Wanted to use H5P.Dialog, but it does not support getting a jQuery object as the content\n   *\n   * @method showDialog\n   * @param  {object}       texts    Translated texts\n   * @param  {H5P.jQuery}   $element Dom object to insert dialog after\n   * @param  {Function}     callback Function invoked when printing is done.\n   */\n\n\n  Printer.showDialog = function (texts, $element, callback) {\n    var self = this;\n    var instanceId = nextPrinterDialogId++;\n    var dialogTitleId = \"h5p-cp-print-dialog-\".concat(instanceId, \"-title\");\n    var ingressId = \"h5p-cp-print-dialog-\".concat(instanceId, \"-ingress\");\n    var $dialog = $(\"<div class=\\\"h5p-popup-dialog h5p-print-dialog\\\">\\n                      <div role=\\\"dialog\\\" aria-labelledby=\\\"\".concat(dialogTitleId, \"\\\" aria-describedby=\\\"\").concat(ingressId, \"\\\" tabindex=\\\"-1\\\" class=\\\"h5p-inner\\\">\\n                        <h2 id=\\\"\").concat(dialogTitleId, \"\\\">\").concat(texts.printTitle, \"</h2>\\n                        <div class=\\\"h5p-scroll-content\\\"></div>\\n                        <div class=\\\"h5p-close\\\" role=\\\"button\\\" tabindex=\\\"0\\\" title=\\\"\").concat(H5P.t('close'), \"\\\">\\n                      </div>\\n                    </div>\")).insertAfter($element).click(function () {\n      self.close();\n    }) // prevent propagation inside inner\n    .children('.h5p-inner').click(function () {\n      return false;\n    }).end();\n    (0,_utils__WEBPACK_IMPORTED_MODULE_0__.addClickAndKeyboardListeners)($dialog.find('.h5p-close'), function () {\n      return self.close();\n    });\n    var $content = $dialog.find('.h5p-scroll-content');\n    $content.append($('<div>', {\n      'class': 'h5p-cp-print-ingress',\n      id: ingressId,\n      html: texts.printIngress\n    }));\n    H5P.JoubelUI.createButton({\n      html: texts.printAllSlides,\n      'class': 'h5p-cp-print-all-slides',\n      click: function click() {\n        self.close();\n        callback(true);\n      }\n    }).appendTo($content);\n    H5P.JoubelUI.createButton({\n      html: texts.printCurrentSlide,\n      'class': 'h5p-cp-print-current-slide',\n      click: function click() {\n        self.close();\n        callback(false);\n      }\n    }).appendTo($content);\n\n    this.open = function () {\n      setTimeout(function () {\n        $dialog.addClass('h5p-open'); // Fade in\n        // Triggering an event, in case something has to be done after dialog has been opened.\n\n        H5P.jQuery(self).trigger('dialog-opened', [$dialog]);\n      }, 1);\n    };\n\n    this.close = function () {\n      $dialog.removeClass('h5p-open'); // Fade out\n\n      setTimeout(function () {\n        $dialog.remove();\n      }, 200);\n    };\n\n    this.open();\n    return $dialog;\n  };\n\n  return Printer;\n}(H5P.jQuery);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Printer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9wcmludGVyLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOztBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVNBO0FBQ0E7QUFWQTtBQWNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTs7QUFTQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFFQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3NjcmlwdHMvcHJpbnRlci5qcz9kYWZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZENsaWNrQW5kS2V5Ym9hcmRMaXN0ZW5lcnMgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgUHJpbnRlciA9IChmdW5jdGlvbiAoJCkge1xuICBsZXQgbmV4dFByaW50ZXJEaWFsb2dJZCA9IDA7XG5cbiAgLyoqXG4gICAqIFByaW50ZXIgY2xhc3NcbiAgICogQGNsYXNzIFByaW50ZXJcbiAgICovXG4gIGZ1bmN0aW9uIFByaW50ZXIoKSB7fVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBwcmludGluZyBpcyBzdXBwb3J0ZWRcbiAgICpcbiAgICogQG1ldGhvZCBzdXBwb3J0ZWRcbiAgICogQHN0YXRpY1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHN1cHBvcnRlZCwgZWxzZSBmYWxzZS5cbiAgICovXG4gIFByaW50ZXIuc3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIE5lZWQgd2luZG93LnByaW50IHRvIGJlIGF2YWlsYWJsZVxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdy5wcmludCA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERvIHRoZSBhY3R1YWwgcHJpbnRpbmdcbiAgICpcbiAgICogQG1ldGhvZCBwcmludFxuICAgKiBAc3RhdGljXG4gICAqIEBwYXJhbSAge0g1UC5Db3Vyc2VQcmVzZW50YXRpb259IGNwIFJlZmVyZW5jZSB0byBjcCBpbnN0YW5jZVxuICAgKiBAcGFyYW0gIHtINVAualF1ZXJ5fSAkd3JhcHBlciAgVGhlIENQIGRvbSB3cmFwcGVyXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IGFsbFNsaWRlcyBJZiB0cnVlLCBhbGwgc2xpZGVzIGFyZSBwcmludGVkLiBJZiBmYWxzZSBvclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCB0aGUgY3VycmVudFNsaWRlIGlzIHByaW50ZWQuXG4gICAqL1xuICBQcmludGVyLnByaW50ID0gZnVuY3Rpb24gKGNwLCAkd3JhcHBlciwgYWxsU2xpZGVzKSB7XG4gICAgLy8gTGV0IENQIGtub3cgd2UgYXJlIGFib3V0IHRvIHByaW50XG4gICAgY3AudHJpZ2dlcigncHJpbnRpbmcnLCB7ZmluaXNoZWQ6IGZhbHNlLCBhbGxTbGlkZXM6IGFsbFNsaWRlc30pO1xuXG4gICAgLy8gRmluZCBoZWlnaHQgb2YgYSBzbGlkZTpcbiAgICB2YXIgJGN1cnJlbnRTbGlkZSA9ICQoJy5oNXAtc2xpZGUuaDVwLWN1cnJlbnQnKTtcbiAgICB2YXIgc2xpZGVIZWlnaHQgPSAkY3VycmVudFNsaWRlLmhlaWdodCgpO1xuICAgIHZhciBzbGlkZVdpZHRoID0gJGN1cnJlbnRTbGlkZS53aWR0aCgpO1xuXG4gICAgLy8gVXNlIDY3MHB4IGFzIHdpZHRoIHdoZW4gcHJpbnRpbmcuIFdlIGNhbid0IHVzZSAxMDAlIHBlcmNlbnQsIHNpbmNlIHVzZXIgY2FuXG4gICAgLy8gY2hhbmdlIGJldHdlZW4gbGFuZHNjYXBlIGFuZCBwb3J0cmFpdCB3aXRob3V0IHVzIGV2ZXIga25vd2luZyBhYm91dCBpdC5cbiAgICAvLyBNb3JlIGluZm86IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzExMDg0Nzk3LzI3OTcxMDZcbiAgICB2YXIgcmF0aW8gPSBzbGlkZVdpZHRoLzY3MDtcblxuICAgIHZhciAkc2xpZGVzID0gJCgnLmg1cC1zbGlkZScpO1xuXG4gICAgJHNsaWRlcy5jc3Moe1xuICAgICAgaGVpZ2h0OiBzbGlkZUhlaWdodC9yYXRpbyArICdweCcsXG4gICAgICB3aWR0aDogJzY3MHB4JyxcbiAgICAgIGZvbnRTaXplOiBNYXRoLmZsb29yKDEwMC9yYXRpbykgKyAnJSdcbiAgICB9KTtcblxuICAgIHZhciB3cmFwcGVySGVpZ2h0ID0gJHdyYXBwZXIuaGVpZ2h0KCk7XG4gICAgJHdyYXBwZXIuY3NzKCdoZWlnaHQnLCAnYXV0bycpO1xuXG4gICAgLy8gTGV0IHByaW50ZXIgY3NzIGtub3cgd2hpY2ggc2xpZGVzIHRvIHByaW50OlxuICAgICRzbGlkZXMudG9nZ2xlQ2xhc3MoJ2RvcHJpbnQnLCBhbGxTbGlkZXMgPT09IHRydWUpO1xuICAgICRjdXJyZW50U2xpZGUuYWRkQ2xhc3MoJ2RvcHJpbnQnKTtcblxuICAgIC8vIE5lZWQgdGltZW91dCBmb3Igc29tZSBicm93c2Vycy5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIERvIHRoZSBhY3R1YWwgcHJpbnRpbmcgb2YgdGhlIGlmcmFtZSBjb250ZW50XG4gICAgICB3aW5kb3cucHJpbnQoKTtcblxuICAgICAgLy8gUmVzZXQgQ1NTXG4gICAgICAkc2xpZGVzLmNzcyh7XG4gICAgICAgIGhlaWdodDogJycsXG4gICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgZm9udFNpemU6ICcnXG4gICAgICB9KTtcbiAgICAgICR3cmFwcGVyLmNzcygnaGVpZ2h0Jywgd3JhcHBlckhlaWdodCsncHgnKTtcblxuICAgICAgLy8gTGV0IENQIGtub3cgd2UgYXJlIGZpbmlzaGVkIHByaW50aW5nXG4gICAgICBjcC50cmlnZ2VyKCdwcmludGluZycsIHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgIH0sIDUwMCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIHByaW50IGRpYWxvZy4gV2FudGVkIHRvIHVzZSBINVAuRGlhbG9nLCBidXQgaXQgZG9lcyBub3Qgc3VwcG9ydCBnZXR0aW5nIGEgalF1ZXJ5IG9iamVjdCBhcyB0aGUgY29udGVudFxuICAgKlxuICAgKiBAbWV0aG9kIHNob3dEaWFsb2dcbiAgICogQHBhcmFtICB7b2JqZWN0fSAgICAgICB0ZXh0cyAgICBUcmFuc2xhdGVkIHRleHRzXG4gICAqIEBwYXJhbSAge0g1UC5qUXVlcnl9ICAgJGVsZW1lbnQgRG9tIG9iamVjdCB0byBpbnNlcnQgZGlhbG9nIGFmdGVyXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgY2FsbGJhY2sgRnVuY3Rpb24gaW52b2tlZCB3aGVuIHByaW50aW5nIGlzIGRvbmUuXG4gICAqL1xuICBQcmludGVyLnNob3dEaWFsb2cgPSBmdW5jdGlvbiAodGV4dHMsICRlbGVtZW50LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBjb25zdCBpbnN0YW5jZUlkID0gbmV4dFByaW50ZXJEaWFsb2dJZCsrO1xuICAgIGNvbnN0IGRpYWxvZ1RpdGxlSWQgPSBgaDVwLWNwLXByaW50LWRpYWxvZy0ke2luc3RhbmNlSWR9LXRpdGxlYDtcbiAgICBjb25zdCBpbmdyZXNzSWQgPSBgaDVwLWNwLXByaW50LWRpYWxvZy0ke2luc3RhbmNlSWR9LWluZ3Jlc3NgO1xuXG4gICAgdmFyICRkaWFsb2cgPSAkKGA8ZGl2IGNsYXNzPVwiaDVwLXBvcHVwLWRpYWxvZyBoNXAtcHJpbnQtZGlhbG9nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiByb2xlPVwiZGlhbG9nXCIgYXJpYS1sYWJlbGxlZGJ5PVwiJHtkaWFsb2dUaXRsZUlkfVwiIGFyaWEtZGVzY3JpYmVkYnk9XCIke2luZ3Jlc3NJZH1cIiB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJoNXAtaW5uZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBpZD1cIiR7ZGlhbG9nVGl0bGVJZH1cIj4ke3RleHRzLnByaW50VGl0bGV9PC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoNXAtc2Nyb2xsLWNvbnRlbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoNXAtY2xvc2VcIiByb2xlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCIwXCIgdGl0bGU9XCIke0g1UC50KCdjbG9zZScpfVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gKVxuICAgICAgLmluc2VydEFmdGVyKCRlbGVtZW50KVxuICAgICAgLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC8vIHByZXZlbnQgcHJvcGFnYXRpb24gaW5zaWRlIGlubmVyXG4gICAgICAuY2hpbGRyZW4oJy5oNXAtaW5uZXInKVxuICAgICAgLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSlcbiAgICAgIC5lbmQoKTtcblxuICAgIGFkZENsaWNrQW5kS2V5Ym9hcmRMaXN0ZW5lcnMoJGRpYWxvZy5maW5kKCcuaDVwLWNsb3NlJyksICgpID0+IHNlbGYuY2xvc2UoKSk7XG5cbiAgICB2YXIgJGNvbnRlbnQgPSAkZGlhbG9nLmZpbmQoJy5oNXAtc2Nyb2xsLWNvbnRlbnQnKTtcblxuICAgICRjb250ZW50LmFwcGVuZCgkKCc8ZGl2PicsIHtcbiAgICAgICdjbGFzcyc6ICdoNXAtY3AtcHJpbnQtaW5ncmVzcycsXG4gICAgICBpZDogaW5ncmVzc0lkLFxuICAgICAgaHRtbDogdGV4dHMucHJpbnRJbmdyZXNzXG4gICAgfSkpO1xuXG4gICAgSDVQLkpvdWJlbFVJLmNyZWF0ZUJ1dHRvbih7XG4gICAgICBodG1sOiB0ZXh0cy5wcmludEFsbFNsaWRlcyxcbiAgICAgICdjbGFzcyc6ICdoNXAtY3AtcHJpbnQtYWxsLXNsaWRlcycsXG4gICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgfVxuICAgIH0pLmFwcGVuZFRvKCRjb250ZW50KTtcblxuICAgIEg1UC5Kb3ViZWxVSS5jcmVhdGVCdXR0b24oe1xuICAgICAgaHRtbDogdGV4dHMucHJpbnRDdXJyZW50U2xpZGUsXG4gICAgICAnY2xhc3MnOiAnaDVwLWNwLXByaW50LWN1cnJlbnQtc2xpZGUnLFxuICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5jbG9zZSgpO1xuICAgICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgICB9XG4gICAgfSkuYXBwZW5kVG8oJGNvbnRlbnQpO1xuXG4gICAgdGhpcy5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICRkaWFsb2cuYWRkQ2xhc3MoJ2g1cC1vcGVuJyk7IC8vIEZhZGUgaW5cbiAgICAgICAgLy8gVHJpZ2dlcmluZyBhbiBldmVudCwgaW4gY2FzZSBzb21ldGhpbmcgaGFzIHRvIGJlIGRvbmUgYWZ0ZXIgZGlhbG9nIGhhcyBiZWVuIG9wZW5lZC5cbiAgICAgICAgSDVQLmpRdWVyeShzZWxmKS50cmlnZ2VyKCdkaWFsb2ctb3BlbmVkJywgWyRkaWFsb2ddKTtcbiAgICAgIH0sIDEpO1xuICAgIH07XG5cbiAgICB0aGlzLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgJGRpYWxvZy5yZW1vdmVDbGFzcygnaDVwLW9wZW4nKTsgLy8gRmFkZSBvdXRcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkZGlhbG9nLnJlbW92ZSgpO1xuICAgICAgfSwgMjAwKTtcbiAgICB9O1xuXG4gICAgdGhpcy5vcGVuKCk7XG5cbiAgICByZXR1cm4gJGRpYWxvZztcbiAgfTtcblxuICByZXR1cm4gUHJpbnRlcjtcblxufSkoSDVQLmpRdWVyeSk7XG5cbmV4cG9ydCBkZWZhdWx0IFByaW50ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/printer.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/slide-backgrounds.js":
    /*!******************************************!*\
      !*** ./src/scripts/slide-backgrounds.js ***!
      \******************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SlideBackground)\n/* harmony export */ });\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals */ \"./src/scripts/globals.js\");\n\n/**\n * @class\n */\n\nvar SlideBackground =\n/**\n * Create a Slide specific background selector\n *\n * @param {H5P.CoursePresentation} cp Course Presentation instance\n */\nfunction SlideBackground(cp) {\n  var params = cp.presentation; // Extend defaults\n\n  params = _globals__WEBPACK_IMPORTED_MODULE_0__.jQuery.extend(true, {\n    globalBackgroundSelector: {\n      fillGlobalBackground: \"\",\n      imageGlobalBackground: {}\n    },\n    slides: [{\n      slideBackgroundSelector: {\n        fillSlideBackground: \"\",\n        imageSlideBackground: {}\n      }\n    }]\n  }, params);\n  /**\n   * Set global background\n   * @private\n   */\n\n  var setGlobalBackground = function setGlobalBackground() {\n    var globalSettings = params.globalBackgroundSelector;\n    setBackground(globalSettings.fillGlobalBackground, globalSettings.imageGlobalBackground);\n  };\n  /**\n   * Set single slide background\n   * @private\n   */\n\n\n  var setSlideBackgrounds = function setSlideBackgrounds() {\n    params.slides.forEach(function (slideParams, idx) {\n      var bgParams = slideParams.slideBackgroundSelector;\n\n      if (bgParams) {\n        setBackground(bgParams.fillSlideBackground, bgParams.imageSlideBackground, idx);\n      }\n    });\n  };\n  /**\n   * Set background of slide(s)\n   *\n   * @private\n   * @param {Object} fillSettings Background color settings\n   * @param {Object} imageSettings Image background settings\n   * @param {number} [index] Optional target slide index, otherwise all slides.\n   */\n\n\n  var setBackground = function setBackground(fillSettings, imageSettings, index) {\n    var $updateSlides = cp.$slidesWrapper.children().filter(':not(.h5p-summary-slide)');\n\n    if (index !== undefined) {\n      $updateSlides = $updateSlides.eq(index);\n    }\n\n    if (fillSettings && fillSettings !== \"\") {\n      // Fill with background color\n      $updateSlides.addClass('has-background').css('background-image', '').css('background-color', fillSettings);\n    } else if (imageSettings && imageSettings.path) {\n      // Fill with image\n      $updateSlides.addClass('has-background').css('background-color', '').css('background-image', 'url(' + H5P.getPath(imageSettings.path, cp.contentId) + ')');\n    }\n  }; // Set backgrounds\n\n\n  setGlobalBackground();\n  setSlideBackgrounds();\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9zbGlkZS1iYWNrZ3JvdW5kcy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU5BO0FBZUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtY291cnNlLXByZXNlbnRhdGlvbi8uL3NyYy9zY3JpcHRzL3NsaWRlLWJhY2tncm91bmRzLmpzP2EzNmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgalF1ZXJ5IGFzICQgfSBmcm9tICcuL2dsb2JhbHMnO1xuXG4vKipcbiAqIEBjbGFzc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZUJhY2tncm91bmQge1xuICAvKipcbiAgICogQ3JlYXRlIGEgU2xpZGUgc3BlY2lmaWMgYmFja2dyb3VuZCBzZWxlY3RvclxuICAgKlxuICAgKiBAcGFyYW0ge0g1UC5Db3Vyc2VQcmVzZW50YXRpb259IGNwIENvdXJzZSBQcmVzZW50YXRpb24gaW5zdGFuY2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNwKSB7XG4gICAgdmFyIHBhcmFtcyA9IGNwLnByZXNlbnRhdGlvbjtcblxuICAgIC8vIEV4dGVuZCBkZWZhdWx0c1xuICAgIHBhcmFtcyA9ICQuZXh0ZW5kKHRydWUsIHtcbiAgICAgIGdsb2JhbEJhY2tncm91bmRTZWxlY3Rvcjoge1xuICAgICAgICBmaWxsR2xvYmFsQmFja2dyb3VuZDogXCJcIixcbiAgICAgICAgaW1hZ2VHbG9iYWxCYWNrZ3JvdW5kOiB7fVxuICAgICAgfSxcbiAgICAgIHNsaWRlczogW1xuICAgICAgICB7XG4gICAgICAgICAgc2xpZGVCYWNrZ3JvdW5kU2VsZWN0b3I6IHtcbiAgICAgICAgICAgIGZpbGxTbGlkZUJhY2tncm91bmQ6IFwiXCIsXG4gICAgICAgICAgICBpbWFnZVNsaWRlQmFja2dyb3VuZDoge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LCBwYXJhbXMpO1xuXG4gICAgLyoqXG4gICAgICogU2V0IGdsb2JhbCBiYWNrZ3JvdW5kXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB2YXIgc2V0R2xvYmFsQmFja2dyb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBnbG9iYWxTZXR0aW5ncyA9IHBhcmFtcy5nbG9iYWxCYWNrZ3JvdW5kU2VsZWN0b3I7XG4gICAgICBzZXRCYWNrZ3JvdW5kKGdsb2JhbFNldHRpbmdzLmZpbGxHbG9iYWxCYWNrZ3JvdW5kLCBnbG9iYWxTZXR0aW5ncy5pbWFnZUdsb2JhbEJhY2tncm91bmQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgc2luZ2xlIHNsaWRlIGJhY2tncm91bmRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHZhciBzZXRTbGlkZUJhY2tncm91bmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgcGFyYW1zLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzbGlkZVBhcmFtcywgaWR4KSB7XG4gICAgICAgIHZhciBiZ1BhcmFtcyA9IHNsaWRlUGFyYW1zLnNsaWRlQmFja2dyb3VuZFNlbGVjdG9yO1xuICAgICAgICBpZiAoYmdQYXJhbXMpIHtcbiAgICAgICAgICBzZXRCYWNrZ3JvdW5kKGJnUGFyYW1zLmZpbGxTbGlkZUJhY2tncm91bmQsIGJnUGFyYW1zLmltYWdlU2xpZGVCYWNrZ3JvdW5kLCBpZHgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IGJhY2tncm91bmQgb2Ygc2xpZGUocylcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGxTZXR0aW5ncyBCYWNrZ3JvdW5kIGNvbG9yIHNldHRpbmdzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGltYWdlU2V0dGluZ3MgSW1hZ2UgYmFja2dyb3VuZCBzZXR0aW5nc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaW5kZXhdIE9wdGlvbmFsIHRhcmdldCBzbGlkZSBpbmRleCwgb3RoZXJ3aXNlIGFsbCBzbGlkZXMuXG4gICAgICovXG4gICAgdmFyIHNldEJhY2tncm91bmQgPSBmdW5jdGlvbiAoZmlsbFNldHRpbmdzLCBpbWFnZVNldHRpbmdzLCBpbmRleCkge1xuICAgICAgdmFyICR1cGRhdGVTbGlkZXMgPSBjcC4kc2xpZGVzV3JhcHBlci5jaGlsZHJlbigpLmZpbHRlcignOm5vdCguaDVwLXN1bW1hcnktc2xpZGUpJyk7XG5cbiAgICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICR1cGRhdGVTbGlkZXMgPSAkdXBkYXRlU2xpZGVzLmVxKGluZGV4KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpbGxTZXR0aW5ncyAmJiBmaWxsU2V0dGluZ3MgIT09IFwiXCIpIHtcblxuICAgICAgICAvLyBGaWxsIHdpdGggYmFja2dyb3VuZCBjb2xvclxuICAgICAgICAkdXBkYXRlU2xpZGVzLmFkZENsYXNzKCdoYXMtYmFja2dyb3VuZCcpXG4gICAgICAgICAgLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICcnKVxuICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBmaWxsU2V0dGluZ3MpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaW1hZ2VTZXR0aW5ncyAmJiBpbWFnZVNldHRpbmdzLnBhdGgpIHtcblxuICAgICAgICAvLyBGaWxsIHdpdGggaW1hZ2VcbiAgICAgICAgJHVwZGF0ZVNsaWRlcy5hZGRDbGFzcygnaGFzLWJhY2tncm91bmQnKVxuICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAnJylcbiAgICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCgnICsgSDVQLmdldFBhdGgoaW1hZ2VTZXR0aW5ncy5wYXRoLCBjcC5jb250ZW50SWQpICsgJyknKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gU2V0IGJhY2tncm91bmRzXG4gICAgc2V0R2xvYmFsQmFja2dyb3VuZCgpO1xuICAgIHNldFNsaWRlQmFja2dyb3VuZHMoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/slide-backgrounds.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/slide.js":
    /*!******************************!*\
      !*** ./src/scripts/slide.js ***!
      \******************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element.js */ \"./src/scripts/element.js\");\n/* harmony import */ var h5p_parent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! h5p-parent */ \"./node_modules/h5p-parent/src/parent.js\");\n/* harmony import */ var h5p_parent__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(h5p_parent__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/**\n * @class\n */\n\nfunction Slide(parameters) {\n  var self = this;\n  h5p_parent__WEBPACK_IMPORTED_MODULE_1___default().call(self, _element_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"], parameters.elements); // The slide DOM element when attached\n\n  var $wrapper;\n  /**\n   * Create HTML\n   *\n   * @return {jQuery} Element\n   */\n\n  self.getElement = function () {\n    if (!$wrapper) {\n      $wrapper = H5P.jQuery(Slide.createHTML(parameters));\n    }\n\n    return $wrapper;\n  };\n  /**\n   * Make current slide\n   */\n\n\n  self.setCurrent = function () {\n    this.parent.$current = $wrapper.addClass('h5p-current');\n  };\n  /**\n   * Append all of the elements to the slide.\n   */\n\n\n  self.appendElements = function () {\n    for (var i = 0; i < self.children.length; i++) {\n      self.parent.attachElement(parameters.elements[i], self.children[i].instance, $wrapper, self.index);\n    }\n\n    self.parent.elementsAttached[self.index] = true;\n    self.parent.trigger('domChanged', {\n      '$target': $wrapper,\n      'library': 'CoursePresentation',\n      'key': 'newSlide'\n    }, {\n      'bubbles': true,\n      'external': true\n    });\n  };\n}\n/**\n * Creates the HTML for a single slide.\n *\n * @param {Object} params Slide parameters.\n * @returns {string} HTML.\n */\n\n\nSlide.createHTML = function (parameters) {\n  return '<div role=\"document\" class=\"h5p-slide\"' + (parameters.background !== undefined ? ' style=\"background:' + parameters.background + '\"' : '') + '></div>';\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Slide);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9zbGlkZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9zcmMvc2NyaXB0cy9zbGlkZS5qcz9hNTc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFbGVtZW50IGZyb20gJy4vZWxlbWVudC5qcyc7XG5pbXBvcnQgUGFyZW50IGZyb20gJ2g1cC1wYXJlbnQnO1xuXG4vKipcbiAqIEBjbGFzc1xuICovXG5mdW5jdGlvbiBTbGlkZShwYXJhbWV0ZXJzKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuICBQYXJlbnQuY2FsbChzZWxmLCBFbGVtZW50LCBwYXJhbWV0ZXJzLmVsZW1lbnRzKTtcblxuICAvLyBUaGUgc2xpZGUgRE9NIGVsZW1lbnQgd2hlbiBhdHRhY2hlZFxuICBsZXQgJHdyYXBwZXI7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBIVE1MXG4gICAqXG4gICAqIEByZXR1cm4ge2pRdWVyeX0gRWxlbWVudFxuICAgKi9cbiAgc2VsZi5nZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghJHdyYXBwZXIpIHtcbiAgICAgICR3cmFwcGVyID0gSDVQLmpRdWVyeShTbGlkZS5jcmVhdGVIVE1MKHBhcmFtZXRlcnMpKTtcbiAgICB9XG4gICAgcmV0dXJuICR3cmFwcGVyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYWtlIGN1cnJlbnQgc2xpZGVcbiAgICovXG4gIHNlbGYuc2V0Q3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnBhcmVudC4kY3VycmVudCA9ICR3cmFwcGVyLmFkZENsYXNzKCdoNXAtY3VycmVudCcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgYWxsIG9mIHRoZSBlbGVtZW50cyB0byB0aGUgc2xpZGUuXG4gICAqL1xuICBzZWxmLmFwcGVuZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxmLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzZWxmLnBhcmVudC5hdHRhY2hFbGVtZW50KHBhcmFtZXRlcnMuZWxlbWVudHNbaV0sIHNlbGYuY2hpbGRyZW5baV0uaW5zdGFuY2UsICR3cmFwcGVyLCBzZWxmLmluZGV4KTtcbiAgICB9XG5cbiAgICBzZWxmLnBhcmVudC5lbGVtZW50c0F0dGFjaGVkW3NlbGYuaW5kZXhdID0gdHJ1ZTtcbiAgICBzZWxmLnBhcmVudC50cmlnZ2VyKCdkb21DaGFuZ2VkJywge1xuICAgICAgJyR0YXJnZXQnOiAkd3JhcHBlcixcbiAgICAgICdsaWJyYXJ5JzogJ0NvdXJzZVByZXNlbnRhdGlvbicsXG4gICAgICAna2V5JzogJ25ld1NsaWRlJ1xuICAgIH0sIHsnYnViYmxlcyc6IHRydWUsICdleHRlcm5hbCc6IHRydWV9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBIVE1MIGZvciBhIHNpbmdsZSBzbGlkZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIFNsaWRlIHBhcmFtZXRlcnMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBIVE1MLlxuICovXG5TbGlkZS5jcmVhdGVIVE1MID0gZnVuY3Rpb24gKHBhcmFtZXRlcnMpIHtcbiAgcmV0dXJuICc8ZGl2IHJvbGU9XCJkb2N1bWVudFwiIGNsYXNzPVwiaDVwLXNsaWRlXCInICsgKHBhcmFtZXRlcnMuYmFja2dyb3VuZCAhPT0gdW5kZWZpbmVkID8gJyBzdHlsZT1cImJhY2tncm91bmQ6JyArIHBhcmFtZXRlcnMuYmFja2dyb3VuZCArICdcIicgOiAnJykgKyAnPjwvZGl2Pic7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTbGlkZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/slide.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/summary-slide.js":
    /*!**************************************!*\
      !*** ./src/scripts/summary-slide.js ***!
      \**************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals */ \"./src/scripts/globals.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/scripts/utils.js\");\n\n\n\nvar SummarySlide = function () {\n  /**\n   * Constructor for summary slide\n   * @param {H5P.CoursePresentation} coursePresentation Course presentation parent of summary slide\n   * @param {$} $summarySlide Summary slide element\n   * @constructor\n   */\n  function SummarySlide(coursePresentation, $summarySlide) {\n    // Create summary slide if not an editor\n    this.$summarySlide = $summarySlide;\n    this.cp = coursePresentation;\n  }\n  /**\n   * Updates the provided summary slide with current values.\n   *\n   * @param {$} $summarySlide Summary slide that will be updated\n   */\n\n\n  SummarySlide.prototype.updateSummarySlide = function (slideNumber, noJump) {\n    var that = this; // Validate update.\n\n    var isValidUpdate = this.cp.editor === undefined && this.$summarySlide !== undefined && slideNumber >= this.cp.slides.length - 1;\n    var isExportSlide = !this.cp.showSummarySlide && this.cp.hasAnswerElements;\n\n    if (!isValidUpdate) {\n      return;\n    } // Hide keywordlist on summary slide\n\n\n    if (that.cp.presentation.keywordListEnabled && that.cp.presentation.keywordListAlwaysShow) {\n      that.cp.hideKeywords();\n    } // Remove old content\n\n\n    this.$summarySlide.children().remove(); // Get scores and updated html for summary slide\n\n    var slideScores = that.cp.getSlideScores(noJump);\n    var htmlText = that.outputScoreStats(slideScores);\n    (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)(htmlText).appendTo(that.$summarySlide);\n\n    if (!isExportSlide) {\n      // Get total scores and construct progress circle\n      var totalScores = that.totalScores(slideScores);\n\n      if (!isNaN(totalScores.totalPercentage)) {\n        var totalScoreBar = _globals__WEBPACK_IMPORTED_MODULE_0__.JoubelUI.createScoreBar(totalScores.totalMaxScore, \"\", \"\", \"\");\n        totalScoreBar.setScore(totalScores.totalScore);\n        var $totalScore = (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)('.h5p-summary-total-score', that.$summarySlide);\n        totalScoreBar.appendTo($totalScore);\n        setTimeout(function () {\n          // Announce total score\n          $totalScore.append((0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)('<div/>', {\n            'aria-live': 'polite',\n            'class': 'hidden-but-read',\n            'html': that.cp.l10n.summary + '. ' + that.cp.l10n.accessibilityTotalScore.replace('@score', totalScores.totalScore).replace('@maxScore', totalScores.totalMaxScore)\n          }));\n        }, 100);\n      } // Construct twitter share score link\n\n\n      if (that.cp.enableTwitterShare == true) {\n        var $twitterContainer = (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)('.h5p-summary-twitter-message', that.$summarySlide);\n        this.addTwitterScoreLinkTo($twitterContainer, totalScores);\n      } // Construct facebook share score link\n\n\n      if (that.cp.enableFacebookShare == true) {\n        var $facebookContainer = (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)('.h5p-summary-facebook-message', that.$summarySlide);\n        this.addFacebookScoreLinkTo($facebookContainer, totalScores);\n      } // Construct google share score link\n\n\n      if (that.cp.enableGoogleShare == true) {\n        var $googleContainer = (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)('.h5p-summary-google-message', that.$summarySlide);\n        this.addGoogleScoreLinkTo($googleContainer);\n      } // Update slide links\n\n\n      var links = that.$summarySlide.find('.h5p-td > .h5p-slide-link');\n      links.each(function () {\n        var slideLink = (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)(this);\n        slideLink.click(function (event) {\n          that.cp.jumpToSlide(parseInt(slideLink.data('slide'), 10) - 1);\n          event.preventDefault();\n        });\n      });\n    } // Button container ref\n\n\n    var $summaryFooter = (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)('.h5p-summary-footer', that.$summarySlide);\n    _globals__WEBPACK_IMPORTED_MODULE_0__.JoubelUI.createButton({\n      'class': 'h5p-show-solutions',\n      html: that.cp.l10n.submitResult,\n      on: {\n        click: function click() {\n          var customTotalScore = 0;\n          var customTotalMaxScore = 0;\n\n          for (var custom_i = 0; custom_i < slideScores.length; custom_i += 1) {\n            customTotalScore += slideScores[custom_i].score;\n            customTotalMaxScore += slideScores[custom_i].maxScore;\n          }\n\n          if (typeof that.cp.parent == \"undefined\") {\n            that.cp.triggerXAPIScored(customTotalScore, customTotalMaxScore, 'submitted-curriki');\n          }\n\n          that.cp.slidesWithSolutions.forEach(function (e, i) {\n            e.forEach(function (gg, qq) {\n              if (typeof gg.getAnswerGiven === \"function\" && !gg.getAnswerGiven()) {\n                that.cp.triggerXAPIScored(customTotalScore, customTotalMaxScore, 'skipped');\n              } else if (typeof gg.getAnswerGiven == 'undefined') {\n                var flag = 0;\n                gg.interactions.forEach(function (pp, mm) {\n                  console.log(pp.getLastXAPIVerb());\n\n                  if (pp.getLastXAPIVerb() !== undefined) {\n                    flag = 1;\n                  }\n                });\n\n                if (flag == 0) {\n                  that.cp.triggerXAPIScored(customTotalScore, customTotalMaxScore, 'skipped');\n                }\n              }\n            });\n          }); //if ( !$( \"#customMessageDiv\" ).length ) {\n          //H5P.jQuery('.h5p-show-solutions').hide();\n          //H5P.jQuery(this).closest('.h5p-show-solutions').hide();\n\n          H5P.jQuery(this).parent().children('.h5p-show-solutions').hide();\n          var custom_msg = document.createElement(\"div\");\n          custom_msg.setAttribute(\"id\", \"customMessageDiv\");\n          custom_msg.innerHTML = '<p style=\"font-weight: bold; margin: 0;font-size: 0.875rem;color: #0e8275;\">Your answers are submitted for review!</p>';\n          H5P.jQuery(custom_msg).prependTo($summaryFooter);\n          H5P.jQuery(this).parent().addClass(\"h5p-custom-summary-msg\"); //H5P.jQuery(\".h5p-summary-footer\").addClass(\"h5p-custom-summary-msg\");\n          //}\n        }\n      },\n      appendTo: $summaryFooter\n    }); // Show solutions button\n\n    if (this.cp.showSummarySlideSolutionButton) {\n      _globals__WEBPACK_IMPORTED_MODULE_0__.JoubelUI.createButton({\n        'class': 'h5p-show-solutions',\n        html: that.cp.l10n.showSolutions,\n        on: {\n          click: function click() {\n            // Enable solution mode\n            that.toggleSolutionMode(true);\n          }\n        },\n        appendTo: $summaryFooter\n      });\n    } // Show solutions button\n\n\n    if (this.cp.showSummarySlideRetryButton) {\n      _globals__WEBPACK_IMPORTED_MODULE_0__.JoubelUI.createButton({\n        'class': 'h5p-cp-retry-button',\n        html: that.cp.l10n.retry,\n        on: {\n          click: function click() {\n            H5P.jQuery(this).parent().children('.h5p-show-solutions').show();\n            H5P.jQuery(this).parent().removeClass(\"h5p-custom-summary-msg\");\n            that.cp.resetTask(); // event.preventDefault();\n          }\n        },\n        appendTo: $summaryFooter\n      });\n    } // Only make export button if there is an export area in CP\n\n\n    if (that.cp.hasAnswerElements) {\n      _globals__WEBPACK_IMPORTED_MODULE_0__.JoubelUI.createButton({\n        'class': 'h5p-eta-export',\n        html: that.cp.l10n.exportAnswers,\n        on: {\n          click: function click() {\n            H5P.ExportableTextArea.Exporter.run(that.cp.slides, that.cp.elementInstances); // event.preventDefault();\n          }\n        },\n        appendTo: $summaryFooter\n      });\n    }\n  };\n  /**\n   * Gets html for summary slide.\n   *\n   * @param slideScores Scores for all pages\n   * @returns {string} html\n   */\n\n\n  SummarySlide.prototype.outputScoreStats = function (slideScores) {\n    var self = this;\n\n    if (slideScores === undefined) {\n      this.$summarySlide.addClass('h5p-summary-only-export');\n      return '<div class=\"h5p-summary-footer\"></div>';\n    }\n\n    var that = this;\n    var tds = ''; // For saving the main table rows\n\n    var i;\n    var totalScore = 0;\n    var totalMaxScore = 0;\n    var slidePercentageScore = 0;\n    var slideDescription = '';\n\n    for (i = 0; i < slideScores.length; i += 1) {\n      slideDescription = self.getSlideDescription(slideScores[i]); // Get percentage score for slide\n\n      slidePercentageScore = Math.round(slideScores[i].score / slideScores[i].maxScore * 100);\n\n      if (isNaN(slidePercentageScore)) {\n        slidePercentageScore = 0;\n      }\n\n      tds += '<tr>' + '<td class=\"h5p-td h5p-summary-task-title\">' + '<a href=\"#\" class=\"h5p-slide-link\"  aria-label=\" ' + that.cp.l10n.slide + ' ' + slideScores[i].slide + ': ' + slideDescription.replace(/(<([^>]+)>)/ig, \"\") + ' ' + slidePercentageScore + '%' + '\" data-slide=\"' + slideScores[i].slide + '\">' + that.cp.l10n.slide + ' ' + slideScores[i].slide + ': ' + slideDescription.replace(/(<([^>]+)>)/ig, \"\") + '</a>' + '</td>' + '<td class=\"h5p-td h5p-summary-score-bar\">' + '<p class=\"hidden-but-read\">' + slidePercentageScore + '%' + '</p>' + '<p>' + slideScores[i].score + '<span>/</span>' + slideScores[i].maxScore + '</p>' + '</td>' + '</tr>';\n      totalScore += slideScores[i].score;\n      totalMaxScore += slideScores[i].maxScore;\n    }\n\n    if (!this.cp.isSolutionMode) {\n      that.cp.triggerXAPICompleted(totalScore, totalMaxScore);\n    }\n\n    var shareResultContainer = that.cp.enableTwitterShare || that.cp.enableFacebookShare || that.cp.enableGoogleShare ? '<span class=\"h5p-show-results-text\">' + that.cp.l10n.shareResult + '</span>' : '';\n    var twitterContainer = that.cp.enableTwitterShare == true ? '<span class=\"h5p-summary-twitter-message\" aria-label=\"' + that.cp.l10n.shareTwitter + '\"></span>' : '';\n    var facebookContainer = that.cp.enableFacebookShare == true ? '<span class=\"h5p-summary-facebook-message\" aria-label=\"' + that.cp.l10n.shareFacebook + '\"></span>' : '';\n    var googleContainer = that.cp.enableGoogleShare == true ? '<span class=\"h5p-summary-google-message\" aria-label=\"' + that.cp.l10n.shareGoogle + '\"></span>' : '';\n    console.log(that.cp.l10n);\n    console.log(that.cp);\n    var html = '<div class=\"h5p-summary-table-holder\">' + '<div class=\"h5p-summary-table-pages\">' + '<table class=\"h5p-score-table\">' + '<thead><tr>' + '<th class=\"h5p-summary-table-header slide\">' + that.cp.l10n.slide + '</th>' + '<th class=\"h5p-summary-table-header score\">' + that.cp.l10n.score + '<span>/</span>' + that.cp.l10n.total.toLowerCase() + '</th>' + '</tr></thead>' + '<tbody>' + tds + '</tbody>' + '</table>' + '</div>' + '<div class=\"h5p-summary-total-table\">' + '<div class=\"h5p-summary-social\">' + shareResultContainer + facebookContainer + twitterContainer + googleContainer + '</div>' + '<div class=\"h5p-summary-total-score\">' + '<p>' + that.cp.l10n.totalScore + '</p>' + '</div>' + '</div>' + '</div>' + '<div class=\"h5p-summary-footer\">' + '</div>';\n    return html;\n  };\n\n  SummarySlide.prototype.getSlideDescription = function (slideScoresSlide) {\n    var self = this; // Get task description, task name or identify multiple tasks:\n\n    var slideDescription, action;\n    var slideElements = self.cp.slides[slideScoresSlide.slide - 1].elements;\n\n    if (slideScoresSlide.indexes.length > 1) {\n      slideDescription = self.cp.l10n.summaryMultipleTaskText;\n    } else if (slideElements[slideScoresSlide.indexes[0]] !== undefined && slideElements[0]) {\n      action = slideElements[slideScoresSlide.indexes[0]].action;\n\n      if (typeof self.cp.elementInstances[slideScoresSlide.slide - 1][slideScoresSlide.indexes[0]].getTitle === 'function') {\n        slideDescription = self.cp.elementInstances[slideScoresSlide.slide - 1][slideScoresSlide.indexes[0]].getTitle();\n      } else if (action.library !== undefined && action.library) {\n        // Remove major, minor version and h5p prefix, Split on uppercase\n        var humanReadableLibrary = action.library.split(' ')[0].split('.')[1].split(/(?=[A-Z])/);\n        var humanReadableString = ''; // Make library human readable\n\n        humanReadableLibrary.forEach(function (readableWord, index) {\n          // Make sequential words lowercase\n          if (index !== 0) {\n            readableWord = readableWord.toLowerCase();\n          }\n\n          humanReadableString += readableWord; // Add space between words\n\n          if (index <= humanReadableLibrary.length - 1) {\n            humanReadableString += ' ';\n          }\n        });\n        slideDescription = humanReadableString;\n      }\n    }\n\n    return slideDescription;\n  };\n  /**\n   * Adds a link to the given container which will link achieved score to twitter.\n   *\n   * @param {jQuery} $twitterContainer Container that should hold the twitter link.\n   * @param {Object} scores totalScores object to pull data from.\n   */\n\n\n  SummarySlide.prototype.addTwitterScoreLinkTo = function ($twitterContainer, scores) {\n    var that = this; // Get data from the localization object.\n\n    var twitterShareStatement = that.cp.twitterShareStatement || '';\n    var twitterHashtagList = that.cp.twitterShareHashtags || '';\n    var twitterShareUrl = that.cp.twitterShareUrl || ''; // Replace any placeholders with variables.\n\n    twitterShareUrl = twitterShareUrl.replace('@currentpageurl', window.location.href);\n    twitterShareStatement = twitterShareStatement.replace('@score', scores.totalScore).replace('@maxScore', scores.totalMaxScore).replace('@percentage', scores.totalPercentage + '%').replace('@currentpageurl', window.location.href); // Parse data from the localization object.\n\n    twitterHashtagList = twitterHashtagList.trim().replace(' ', ''); // Encode components that may contain breaking characters.\n\n    twitterShareStatement = encodeURIComponent(twitterShareStatement);\n    twitterHashtagList = encodeURIComponent(twitterHashtagList);\n    twitterShareUrl = encodeURIComponent(twitterShareUrl); // Add query strings to the URL based on settings.\n\n    var twitterString = 'https://twitter.com/intent/tweet?';\n    twitterString += twitterShareStatement.length > 0 ? \"text=\" + twitterShareStatement + \"&\" : \"\";\n    twitterString += twitterShareUrl.length > 0 ? \"url=\" + twitterShareUrl + \"&\" : \"\";\n    twitterString += twitterHashtagList.length > 0 ? \"hashtags=\" + twitterHashtagList : \"\";\n    var leftPos = window.innerWidth / 2;\n    var topPos = window.innerHeight / 2;\n    var popupWidth = 800;\n    var popupHeight = 300; // Create the new Twitter window.\n\n    $twitterContainer.attr('tabindex', '0').attr('role', 'button');\n    (0,_utils__WEBPACK_IMPORTED_MODULE_1__.addClickAndKeyboardListeners)($twitterContainer, function () {\n      window.open(twitterString, that.cp.l10n.shareTwitter, 'width=' + popupWidth + ',height=' + popupHeight + ',left=' + leftPos + ',top=' + topPos);\n      return false;\n    });\n  };\n  /**\n   * Adds a link to the given container which will link achieved score to facebook.\n   *\n   * @param {jQuery} $facebookContainer Container that should hold the facebook link.\n   * @param {Object} scores totalScores object to pull data from.\n   */\n\n\n  SummarySlide.prototype.addFacebookScoreLinkTo = function ($facebookContainer, scores) {\n    var that = this; // Get data from the localization object.\n\n    var facebookShareUrl = that.cp.facebookShareUrl || '';\n    var facebookShareQuote = that.cp.facebookShareQuote || ''; // Replace any placeholders with variables.\n\n    facebookShareUrl = facebookShareUrl.replace('@currentpageurl', window.location.href);\n    facebookShareQuote = facebookShareQuote.replace('@currentpageurl', window.location.href).replace(\"@percentage\", scores.totalPercentage + '%').replace('@score', scores.totalScore).replace('@maxScore', scores.totalMaxScore); // Parse data from the localization object.\n\n    facebookShareUrl = encodeURIComponent(facebookShareUrl);\n    facebookShareQuote = encodeURIComponent(facebookShareQuote); // Add query strings to the URL based on settings.\n\n    var facebookUrl = 'https://www.facebook.com/sharer/sharer.php?';\n    facebookUrl += facebookShareUrl.length > 0 ? \"u=\" + facebookShareUrl + \"&\" : \"\";\n    facebookUrl += facebookShareQuote.length > 0 ? \"quote=\" + facebookShareQuote : '';\n    var popupWidth = 800;\n    var popupHeight = 300;\n    var leftPos = window.innerWidth / 2;\n    var topPos = window.innerHeight / 2; // Create the new Facebook window.\n\n    $facebookContainer.attr('tabindex', '0').attr('role', 'button');\n    (0,_utils__WEBPACK_IMPORTED_MODULE_1__.addClickAndKeyboardListeners)($facebookContainer, function () {\n      window.open(facebookUrl, that.cp.l10n.shareFacebook, 'width=' + popupWidth + ',height=' + popupHeight + ',left=' + leftPos + ',top=' + topPos);\n      return false;\n    });\n  };\n  /**\n   * Adds a link to the given container which will link achieved score to google.\n   *\n   * @param {jQuery} $googleContainer Container that should hold the google link.\n   */\n\n\n  SummarySlide.prototype.addGoogleScoreLinkTo = function ($googleContainer) {\n    var that = this; // Get data from the localization object.\n\n    var googleShareUrl = that.cp.googleShareUrl || ''; // Replace any placeholders with variables.\n\n    googleShareUrl = googleShareUrl.replace('@currentpageurl', window.location.href); // Parse data from the localization object.\n\n    googleShareUrl = encodeURIComponent(googleShareUrl); // Add query strings to the URL based on settings.\n\n    var googleUrl = \"https://plus.google.com/share?\";\n    googleUrl += googleShareUrl.length > 0 ? \"url=\" + googleShareUrl + \"\" : \"\";\n    var popupWidth = 401;\n    var popupHeight = 437;\n    var leftPos = window.innerWidth / 2;\n    var topPos = window.innerHeight / 2; // Create the new Google+ window.\n\n    $googleContainer.attr('tabindex', '0').attr('role', 'button');\n    (0,_utils__WEBPACK_IMPORTED_MODULE_1__.addClickAndKeyboardListeners)($googleContainer, function () {\n      window.open(googleUrl, that.cp.l10n.shareGoogle, 'width=' + popupWidth + ',height=' + popupHeight + ',left=' + leftPos + ',top=' + topPos);\n      return false;\n    });\n  };\n  /**\n   * Gets total scores for all slides\n   * @param {Array} slideScores\n   * @returns {{totalScore: number, totalMaxScore: number, totalPercentage: number}} totalScores Total scores object\n   */\n\n\n  SummarySlide.prototype.totalScores = function (slideScores) {\n    if (slideScores === undefined) {\n      return {\n        totalScore: 0,\n        totalMaxScore: 0,\n        totalPercentage: 0\n      };\n    }\n\n    var totalScore = 0;\n    var totalMaxScore = 0;\n    var i;\n\n    for (i = 0; i < slideScores.length; i += 1) {\n      // Get percentage score for slide\n      totalScore += slideScores[i].score;\n      totalMaxScore += slideScores[i].maxScore;\n    }\n\n    var totalPercentage = Math.round(totalScore / totalMaxScore * 100);\n\n    if (isNaN(totalPercentage)) {\n      totalPercentage = 0;\n    }\n\n    return {\n      totalScore: totalScore,\n      totalMaxScore: totalMaxScore,\n      totalPercentage: totalPercentage\n    };\n  };\n  /**\n   * Toggles solution mode on/off.\n   *\n   * @params {Boolean} enableSolutionMode Enable/disable solution mode\n   */\n\n\n  SummarySlide.prototype.toggleSolutionMode = function (enableSolutionMode) {\n    var that = this;\n    this.cp.isSolutionMode = enableSolutionMode;\n\n    if (enableSolutionMode) {\n      // Get scores for summary slide\n      var slideScores = that.cp.showSolutions(); // Update feedback icons in solution mode\n\n      this.cp.setProgressBarFeedback(slideScores);\n      this.cp.$footer.addClass('h5p-footer-solution-mode');\n      this.setFooterSolutionModeText(this.cp.l10n.solutionModeText);\n    } else {\n      this.cp.$footer.removeClass('h5p-footer-solution-mode');\n      this.setFooterSolutionModeText();\n      this.cp.setProgressBarFeedback();\n    }\n  };\n  /**\n   * Sets the solution mode button text in footer.\n   *\n   * @param solutionModeText\n   */\n\n\n  SummarySlide.prototype.setFooterSolutionModeText = function (solutionModeText) {\n    if (solutionModeText !== undefined && solutionModeText) {\n      this.cp.$exitSolutionModeText.html(solutionModeText);\n    } else if (this.cp.$exitSolutionModeText) {\n      this.cp.$exitSolutionModeText.html('');\n    }\n  };\n\n  return SummarySlide;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SummarySlide);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9zdW1tYXJ5LXNsaWRlLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUEvQ0E7QUFpREE7QUFwREE7O0FBeURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFUQTtBQVdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU5BO0FBUUE7QUFYQTtBQWFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFNQTtBQVRBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFHQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFlQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBMEJBO0FBQ0E7O0FBRUE7QUFDQTs7QUFHQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7O0FBT0E7O0FBR0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFHQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFFQTs7QUFNQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBR0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7O0FBR0E7O0FBR0E7O0FBR0E7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBR0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3NjcmlwdHMvc3VtbWFyeS1zbGlkZS5qcz82YjBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpRdWVyeSBhcyAkLCBKb3ViZWxVSSB9IGZyb20gJy4vZ2xvYmFscyc7XG5pbXBvcnQge2FkZENsaWNrQW5kS2V5Ym9hcmRMaXN0ZW5lcnN9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmNvbnN0IFN1bW1hcnlTbGlkZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yIGZvciBzdW1tYXJ5IHNsaWRlXG4gICAqIEBwYXJhbSB7SDVQLkNvdXJzZVByZXNlbnRhdGlvbn0gY291cnNlUHJlc2VudGF0aW9uIENvdXJzZSBwcmVzZW50YXRpb24gcGFyZW50IG9mIHN1bW1hcnkgc2xpZGVcbiAgICogQHBhcmFtIHskfSAkc3VtbWFyeVNsaWRlIFN1bW1hcnkgc2xpZGUgZWxlbWVudFxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIFN1bW1hcnlTbGlkZShjb3Vyc2VQcmVzZW50YXRpb24sICRzdW1tYXJ5U2xpZGUpIHtcbiAgICAvLyBDcmVhdGUgc3VtbWFyeSBzbGlkZSBpZiBub3QgYW4gZWRpdG9yXG4gICAgdGhpcy4kc3VtbWFyeVNsaWRlID0gJHN1bW1hcnlTbGlkZTtcbiAgICB0aGlzLmNwID0gY291cnNlUHJlc2VudGF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHByb3ZpZGVkIHN1bW1hcnkgc2xpZGUgd2l0aCBjdXJyZW50IHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHskfSAkc3VtbWFyeVNsaWRlIFN1bW1hcnkgc2xpZGUgdGhhdCB3aWxsIGJlIHVwZGF0ZWRcbiAgICovXG4gIFN1bW1hcnlTbGlkZS5wcm90b3R5cGUudXBkYXRlU3VtbWFyeVNsaWRlID0gZnVuY3Rpb24gKHNsaWRlTnVtYmVyLCBub0p1bXApIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgLy8gVmFsaWRhdGUgdXBkYXRlLlxuICAgIHZhciBpc1ZhbGlkVXBkYXRlID0gKHRoaXMuY3AuZWRpdG9yID09PSB1bmRlZmluZWQpICYmICh0aGlzLiRzdW1tYXJ5U2xpZGUgIT09IHVuZGVmaW5lZCkgJiYgKHNsaWRlTnVtYmVyID49IHRoaXMuY3Auc2xpZGVzLmxlbmd0aCAtIDEpO1xuICAgIHZhciBpc0V4cG9ydFNsaWRlID0gKCF0aGlzLmNwLnNob3dTdW1tYXJ5U2xpZGUgJiYgdGhpcy5jcC5oYXNBbnN3ZXJFbGVtZW50cyk7XG4gICAgaWYgKCFpc1ZhbGlkVXBkYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSGlkZSBrZXl3b3JkbGlzdCBvbiBzdW1tYXJ5IHNsaWRlXG4gICAgaWYgKHRoYXQuY3AucHJlc2VudGF0aW9uLmtleXdvcmRMaXN0RW5hYmxlZCAmJiB0aGF0LmNwLnByZXNlbnRhdGlvbi5rZXl3b3JkTGlzdEFsd2F5c1Nob3cpIHtcbiAgICAgIHRoYXQuY3AuaGlkZUtleXdvcmRzKCk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIG9sZCBjb250ZW50XG4gICAgdGhpcy4kc3VtbWFyeVNsaWRlLmNoaWxkcmVuKCkucmVtb3ZlKCk7XG5cbiAgICAvLyBHZXQgc2NvcmVzIGFuZCB1cGRhdGVkIGh0bWwgZm9yIHN1bW1hcnkgc2xpZGVcbiAgICB2YXIgc2xpZGVTY29yZXMgPSB0aGF0LmNwLmdldFNsaWRlU2NvcmVzKG5vSnVtcCk7XG4gICAgdmFyIGh0bWxUZXh0ID0gdGhhdC5vdXRwdXRTY29yZVN0YXRzKHNsaWRlU2NvcmVzKTtcbiAgICAkKGh0bWxUZXh0KS5hcHBlbmRUbyh0aGF0LiRzdW1tYXJ5U2xpZGUpO1xuXG4gICAgaWYgKCFpc0V4cG9ydFNsaWRlKSB7XG4gICAgICAvLyBHZXQgdG90YWwgc2NvcmVzIGFuZCBjb25zdHJ1Y3QgcHJvZ3Jlc3MgY2lyY2xlXG4gICAgICB2YXIgdG90YWxTY29yZXMgPSB0aGF0LnRvdGFsU2NvcmVzKHNsaWRlU2NvcmVzKTtcbiAgICAgIGlmICghaXNOYU4odG90YWxTY29yZXMudG90YWxQZXJjZW50YWdlKSkge1xuICAgICAgICB2YXIgdG90YWxTY29yZUJhciA9IEpvdWJlbFVJLmNyZWF0ZVNjb3JlQmFyKHRvdGFsU2NvcmVzLnRvdGFsTWF4U2NvcmUsIFwiXCIsIFwiXCIsIFwiXCIpO1xuICAgICAgICB0b3RhbFNjb3JlQmFyLnNldFNjb3JlKHRvdGFsU2NvcmVzLnRvdGFsU2NvcmUpO1xuICAgICAgICB2YXIgJHRvdGFsU2NvcmUgPSAkKCcuaDVwLXN1bW1hcnktdG90YWwtc2NvcmUnLCB0aGF0LiRzdW1tYXJ5U2xpZGUpO1xuICAgICAgICB0b3RhbFNjb3JlQmFyLmFwcGVuZFRvKCR0b3RhbFNjb3JlKTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAvLyBBbm5vdW5jZSB0b3RhbCBzY29yZVxuICAgICAgICAgICR0b3RhbFNjb3JlLmFwcGVuZCgkKCc8ZGl2Lz4nLCB7XG4gICAgICAgICAgICAnYXJpYS1saXZlJzogJ3BvbGl0ZScsXG4gICAgICAgICAgICAnY2xhc3MnOiAnaGlkZGVuLWJ1dC1yZWFkJyxcbiAgICAgICAgICAgICdodG1sJzogdGhhdC5jcC5sMTBuLnN1bW1hcnkgKyAnLiAnICtcbiAgICAgICAgICAgICAgdGhhdC5jcC5sMTBuLmFjY2Vzc2liaWxpdHlUb3RhbFNjb3JlXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ0BzY29yZScsIHRvdGFsU2NvcmVzLnRvdGFsU2NvcmUpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ0BtYXhTY29yZScsIHRvdGFsU2NvcmVzLnRvdGFsTWF4U2NvcmUpXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuXG4gICAgICAvLyBDb25zdHJ1Y3QgdHdpdHRlciBzaGFyZSBzY29yZSBsaW5rXG4gICAgICBpZiAodGhhdC5jcC5lbmFibGVUd2l0dGVyU2hhcmUgPT0gdHJ1ZSkge1xuICAgICAgICB2YXIgJHR3aXR0ZXJDb250YWluZXIgPSAkKCcuaDVwLXN1bW1hcnktdHdpdHRlci1tZXNzYWdlJywgdGhhdC4kc3VtbWFyeVNsaWRlKTtcbiAgICAgICAgdGhpcy5hZGRUd2l0dGVyU2NvcmVMaW5rVG8oJHR3aXR0ZXJDb250YWluZXIsIHRvdGFsU2NvcmVzKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29uc3RydWN0IGZhY2Vib29rIHNoYXJlIHNjb3JlIGxpbmtcbiAgICAgIGlmICh0aGF0LmNwLmVuYWJsZUZhY2Vib29rU2hhcmUgPT0gdHJ1ZSkge1xuICAgICAgICB2YXIgJGZhY2Vib29rQ29udGFpbmVyID0gJCgnLmg1cC1zdW1tYXJ5LWZhY2Vib29rLW1lc3NhZ2UnLCB0aGF0LiRzdW1tYXJ5U2xpZGUpO1xuICAgICAgICB0aGlzLmFkZEZhY2Vib29rU2NvcmVMaW5rVG8oJGZhY2Vib29rQ29udGFpbmVyLCB0b3RhbFNjb3Jlcyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnN0cnVjdCBnb29nbGUgc2hhcmUgc2NvcmUgbGlua1xuICAgICAgaWYgKHRoYXQuY3AuZW5hYmxlR29vZ2xlU2hhcmUgPT0gdHJ1ZSkge1xuICAgICAgICB2YXIgJGdvb2dsZUNvbnRhaW5lciA9ICQoJy5oNXAtc3VtbWFyeS1nb29nbGUtbWVzc2FnZScsIHRoYXQuJHN1bW1hcnlTbGlkZSk7XG4gICAgICAgIHRoaXMuYWRkR29vZ2xlU2NvcmVMaW5rVG8oJGdvb2dsZUNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBzbGlkZSBsaW5rc1xuICAgICAgdmFyIGxpbmtzID0gdGhhdC4kc3VtbWFyeVNsaWRlLmZpbmQoJy5oNXAtdGQgPiAuaDVwLXNsaWRlLWxpbmsnKTtcbiAgICAgIGxpbmtzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2xpZGVMaW5rID0gJCh0aGlzKTtcbiAgICAgICAgc2xpZGVMaW5rLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHRoYXQuY3AuanVtcFRvU2xpZGUocGFyc2VJbnQoc2xpZGVMaW5rLmRhdGEoJ3NsaWRlJyksIDEwKSAtIDEpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQnV0dG9uIGNvbnRhaW5lciByZWZcbiAgICB2YXIgJHN1bW1hcnlGb290ZXIgPSAkKCcuaDVwLXN1bW1hcnktZm9vdGVyJywgdGhhdC4kc3VtbWFyeVNsaWRlKTtcblxuICAgIEpvdWJlbFVJLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAnY2xhc3MnOiAnaDVwLXNob3ctc29sdXRpb25zJyxcbiAgICAgIGh0bWw6IHRoYXQuY3AubDEwbi5zdWJtaXRSZXN1bHQsXG4gICAgICBvbjoge1xuICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBjdXN0b21Ub3RhbFNjb3JlID0gMDtcbiAgICAgICAgICB2YXIgY3VzdG9tVG90YWxNYXhTY29yZSA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgY3VzdG9tX2kgPSAwOyBjdXN0b21faSA8IHNsaWRlU2NvcmVzLmxlbmd0aDsgY3VzdG9tX2kgKz0gMSkge1xuICAgICAgICAgICAgICBjdXN0b21Ub3RhbFNjb3JlICs9IHNsaWRlU2NvcmVzW2N1c3RvbV9pXS5zY29yZTtcbiAgICAgICAgICAgICAgY3VzdG9tVG90YWxNYXhTY29yZSArPSBzbGlkZVNjb3Jlc1tjdXN0b21faV0ubWF4U2NvcmU7IFxuICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgIGlmKHR5cGVvZiB0aGF0LmNwLnBhcmVudCA9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgICAgICAgIHRoYXQuY3AudHJpZ2dlclhBUElTY29yZWQoY3VzdG9tVG90YWxTY29yZSwgY3VzdG9tVG90YWxNYXhTY29yZSwgJ3N1Ym1pdHRlZC1jdXJyaWtpJyk7XG4gICAgICAgICAgfVxuXHRcdFx0XHRcdFxuICAgICAgICAgIHRoYXQuY3Auc2xpZGVzV2l0aFNvbHV0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChlLGkpIHtcbiAgICAgICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbihnZyxxcSl7XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGdnLmdldEFuc3dlckdpdmVuID09PSBcImZ1bmN0aW9uXCIgJiYgIWdnLmdldEFuc3dlckdpdmVuKCkpIHsgXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuY3AudHJpZ2dlclhBUElTY29yZWQoY3VzdG9tVG90YWxTY29yZSwgY3VzdG9tVG90YWxNYXhTY29yZSwgJ3NraXBwZWQnKTtcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0eXBlb2YgZ2cuZ2V0QW5zd2VyR2l2ZW4gPT0gJ3VuZGVmaW5lZCcgICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmxhZyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGdnLmludGVyYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHBwLG1tKXsgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcC5nZXRMYXN0WEFQSVZlcmIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwcC5nZXRMYXN0WEFQSVZlcmIoKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZihmbGFnID09IDApIHsgIFxuICAgICAgICAgICAgICAgICAgICB0aGF0LmNwLnRyaWdnZXJYQVBJU2NvcmVkKGN1c3RvbVRvdGFsU2NvcmUsIGN1c3RvbVRvdGFsTWF4U2NvcmUsICdza2lwcGVkJyk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAvL2lmICggISQoIFwiI2N1c3RvbU1lc3NhZ2VEaXZcIiApLmxlbmd0aCApIHtcbiAgICAgICAgICAgIC8vSDVQLmpRdWVyeSgnLmg1cC1zaG93LXNvbHV0aW9ucycpLmhpZGUoKTtcbiAgICAgICAgICAgIC8vSDVQLmpRdWVyeSh0aGlzKS5jbG9zZXN0KCcuaDVwLXNob3ctc29sdXRpb25zJykuaGlkZSgpO1xuICAgICAgICAgICAgSDVQLmpRdWVyeSh0aGlzKS5wYXJlbnQoKS5jaGlsZHJlbignLmg1cC1zaG93LXNvbHV0aW9ucycpLmhpZGUoKTtcbiAgICAgICAgICAgIHZhciBjdXN0b21fbXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGN1c3RvbV9tc2cuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjdXN0b21NZXNzYWdlRGl2XCIpO1xuICAgICAgICAgICAgY3VzdG9tX21zZy5pbm5lckhUTUwgPSAgJzxwIHN0eWxlPVwiZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbjogMDtmb250LXNpemU6IDAuODc1cmVtO2NvbG9yOiAjMGU4Mjc1O1wiPllvdXIgYW5zd2VycyBhcmUgc3VibWl0dGVkIGZvciByZXZpZXchPC9wPic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEg1UC5qUXVlcnkoY3VzdG9tX21zZykucHJlcGVuZFRvKCRzdW1tYXJ5Rm9vdGVyKTtcbiAgICAgICAgICAgIEg1UC5qUXVlcnkodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJoNXAtY3VzdG9tLXN1bW1hcnktbXNnXCIpO1xuICAgICAgICAgICAgLy9INVAualF1ZXJ5KFwiLmg1cC1zdW1tYXJ5LWZvb3RlclwiKS5hZGRDbGFzcyhcImg1cC1jdXN0b20tc3VtbWFyeS1tc2dcIik7XG4gICAgICAgICAgLy99XG4gICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhcHBlbmRUbzogJHN1bW1hcnlGb290ZXJcbiAgICB9KTtcblxuICAgIFxuICAgIC8vIFNob3cgc29sdXRpb25zIGJ1dHRvblxuICAgIGlmICh0aGlzLmNwLnNob3dTdW1tYXJ5U2xpZGVTb2x1dGlvbkJ1dHRvbikge1xuICAgICAgSm91YmVsVUkuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgJ2NsYXNzJzogJ2g1cC1zaG93LXNvbHV0aW9ucycsXG4gICAgICAgIGh0bWw6IHRoYXQuY3AubDEwbi5zaG93U29sdXRpb25zLFxuICAgICAgICBvbjoge1xuICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBFbmFibGUgc29sdXRpb24gbW9kZVxuICAgICAgICAgICAgdGhhdC50b2dnbGVTb2x1dGlvbk1vZGUodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhcHBlbmRUbzogJHN1bW1hcnlGb290ZXJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNob3cgc29sdXRpb25zIGJ1dHRvblxuICAgIGlmICh0aGlzLmNwLnNob3dTdW1tYXJ5U2xpZGVSZXRyeUJ1dHRvbikge1xuICAgICAgSm91YmVsVUkuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgJ2NsYXNzJzogJ2g1cC1jcC1yZXRyeS1idXR0b24nLFxuICAgICAgICBodG1sOiB0aGF0LmNwLmwxMG4ucmV0cnksXG4gICAgICAgIG9uOiB7XG4gICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIEg1UC5qUXVlcnkodGhpcykucGFyZW50KCkuY2hpbGRyZW4oJy5oNXAtc2hvdy1zb2x1dGlvbnMnKS5zaG93KCk7XG5cdFx0ICAgICAgICBINVAualF1ZXJ5KHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiaDVwLWN1c3RvbS1zdW1tYXJ5LW1zZ1wiKTtcbiAgICAgICAgICAgIHRoYXQuY3AucmVzZXRUYXNrKCk7XG4gICAgICAgICAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXBwZW5kVG86ICRzdW1tYXJ5Rm9vdGVyXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IG1ha2UgZXhwb3J0IGJ1dHRvbiBpZiB0aGVyZSBpcyBhbiBleHBvcnQgYXJlYSBpbiBDUFxuICAgIGlmICh0aGF0LmNwLmhhc0Fuc3dlckVsZW1lbnRzKSB7XG4gICAgICBKb3ViZWxVSS5jcmVhdGVCdXR0b24oe1xuICAgICAgICAnY2xhc3MnOiAnaDVwLWV0YS1leHBvcnQnLFxuICAgICAgICBodG1sOiB0aGF0LmNwLmwxMG4uZXhwb3J0QW5zd2VycyxcbiAgICAgICAgb246IHtcbiAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgSDVQLkV4cG9ydGFibGVUZXh0QXJlYS5FeHBvcnRlci5ydW4odGhhdC5jcC5zbGlkZXMsIHRoYXQuY3AuZWxlbWVudEluc3RhbmNlcyk7XG4gICAgICAgICAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXBwZW5kVG86ICRzdW1tYXJ5Rm9vdGVyXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHMgaHRtbCBmb3Igc3VtbWFyeSBzbGlkZS5cbiAgICpcbiAgICogQHBhcmFtIHNsaWRlU2NvcmVzIFNjb3JlcyBmb3IgYWxsIHBhZ2VzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGh0bWxcbiAgICovXG4gIFN1bW1hcnlTbGlkZS5wcm90b3R5cGUub3V0cHV0U2NvcmVTdGF0cyA9IGZ1bmN0aW9uIChzbGlkZVNjb3Jlcykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpZiAoc2xpZGVTY29yZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy4kc3VtbWFyeVNsaWRlLmFkZENsYXNzKCdoNXAtc3VtbWFyeS1vbmx5LWV4cG9ydCcpO1xuICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiaDVwLXN1bW1hcnktZm9vdGVyXCI+PC9kaXY+JztcbiAgICB9XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHZhciB0ZHMgPSAnJzsgLy8gRm9yIHNhdmluZyB0aGUgbWFpbiB0YWJsZSByb3dzXG4gICAgdmFyIGk7XG4gICAgdmFyIHRvdGFsU2NvcmUgPSAwO1xuICAgIHZhciB0b3RhbE1heFNjb3JlID0gMDtcbiAgICB2YXIgc2xpZGVQZXJjZW50YWdlU2NvcmUgPSAwO1xuICAgIHZhciBzbGlkZURlc2NyaXB0aW9uID0gJyc7XG4gICAgZm9yIChpID0gMDsgaSA8IHNsaWRlU2NvcmVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBzbGlkZURlc2NyaXB0aW9uID0gc2VsZi5nZXRTbGlkZURlc2NyaXB0aW9uKHNsaWRlU2NvcmVzW2ldKTtcblxuICAgICAgLy8gR2V0IHBlcmNlbnRhZ2Ugc2NvcmUgZm9yIHNsaWRlXG4gICAgICBzbGlkZVBlcmNlbnRhZ2VTY29yZSA9IE1hdGgucm91bmQoKHNsaWRlU2NvcmVzW2ldLnNjb3JlIC8gc2xpZGVTY29yZXNbaV0ubWF4U2NvcmUpICogMTAwKTtcbiAgICAgIGlmIChpc05hTihzbGlkZVBlcmNlbnRhZ2VTY29yZSkpIHtcbiAgICAgICAgc2xpZGVQZXJjZW50YWdlU2NvcmUgPSAwO1xuICAgICAgfVxuICAgICAgdGRzICs9XG4gICAgICAgICc8dHI+JyArXG4gICAgICAgICAgJzx0ZCBjbGFzcz1cImg1cC10ZCBoNXAtc3VtbWFyeS10YXNrLXRpdGxlXCI+JyArXG4gICAgICAgICAgICAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImg1cC1zbGlkZS1saW5rXCIgIGFyaWEtbGFiZWw9XCIgJyArXG4gICAgICAgICAgICAgIHRoYXQuY3AubDEwbi5zbGlkZSArICcgJyArIHNsaWRlU2NvcmVzW2ldLnNsaWRlICsgJzogJyArIChzbGlkZURlc2NyaXB0aW9uLnJlcGxhY2UoLyg8KFtePl0rKT4pL2lnLCBcIlwiKSkgKyAnICcgK1xuICAgICAgICAgICAgICBzbGlkZVBlcmNlbnRhZ2VTY29yZSArICclJyArXG4gICAgICAgICAgICAgICdcIiBkYXRhLXNsaWRlPVwiJyArXG4gICAgICAgICAgICAgIHNsaWRlU2NvcmVzW2ldLnNsaWRlICsgJ1wiPicgKyB0aGF0LmNwLmwxMG4uc2xpZGUgKyAnICcgKyBzbGlkZVNjb3Jlc1tpXS5zbGlkZSArICc6ICcgKyAoc2xpZGVEZXNjcmlwdGlvbi5yZXBsYWNlKC8oPChbXj5dKyk+KS9pZywgXCJcIikpICtcbiAgICAgICAgICAgICc8L2E+JyArXG4gICAgICAgICAgJzwvdGQ+JyArXG4gICAgICAgICAgJzx0ZCBjbGFzcz1cImg1cC10ZCBoNXAtc3VtbWFyeS1zY29yZS1iYXJcIj4nICtcbiAgICAgICAgICAgICc8cCBjbGFzcz1cImhpZGRlbi1idXQtcmVhZFwiPicgKyBzbGlkZVBlcmNlbnRhZ2VTY29yZSArICclJyArICc8L3A+JyArXG4gICAgICAgICAgICAnPHA+JyArIHNsaWRlU2NvcmVzW2ldLnNjb3JlICsgJzxzcGFuPi88L3NwYW4+JyArIHNsaWRlU2NvcmVzW2ldLm1heFNjb3JlICsgJzwvcD4nICtcbiAgICAgICAgICAnPC90ZD4nICtcbiAgICAgICAgJzwvdHI+JztcbiAgICAgICAgdG90YWxTY29yZSArPSBzbGlkZVNjb3Jlc1tpXS5zY29yZTtcbiAgICAgICAgdG90YWxNYXhTY29yZSArPSBzbGlkZVNjb3Jlc1tpXS5tYXhTY29yZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY3AuaXNTb2x1dGlvbk1vZGUpIHtcbiAgICAgICB0aGF0LmNwLnRyaWdnZXJYQVBJQ29tcGxldGVkKHRvdGFsU2NvcmUsIHRvdGFsTWF4U2NvcmUpO1xuICAgIH1cbiAgICB2YXIgc2hhcmVSZXN1bHRDb250YWluZXIgPSAodGhhdC5jcC5lbmFibGVUd2l0dGVyU2hhcmUgfHwgdGhhdC5jcC5lbmFibGVGYWNlYm9va1NoYXJlIHx8IHRoYXQuY3AuZW5hYmxlR29vZ2xlU2hhcmUpID8gJzxzcGFuIGNsYXNzPVwiaDVwLXNob3ctcmVzdWx0cy10ZXh0XCI+JyArIHRoYXQuY3AubDEwbi5zaGFyZVJlc3VsdCArICc8L3NwYW4+JyA6ICcnO1xuICAgIHZhciB0d2l0dGVyQ29udGFpbmVyID0gKHRoYXQuY3AuZW5hYmxlVHdpdHRlclNoYXJlID09IHRydWUpID8gJzxzcGFuIGNsYXNzPVwiaDVwLXN1bW1hcnktdHdpdHRlci1tZXNzYWdlXCIgYXJpYS1sYWJlbD1cIicgKyB0aGF0LmNwLmwxMG4uc2hhcmVUd2l0dGVyICsgJ1wiPjwvc3Bhbj4nOiAnJztcbiAgICB2YXIgZmFjZWJvb2tDb250YWluZXIgPSAodGhhdC5jcC5lbmFibGVGYWNlYm9va1NoYXJlID09IHRydWUpID8gJzxzcGFuIGNsYXNzPVwiaDVwLXN1bW1hcnktZmFjZWJvb2stbWVzc2FnZVwiIGFyaWEtbGFiZWw9XCInICsgdGhhdC5jcC5sMTBuLnNoYXJlRmFjZWJvb2sgKyAnXCI+PC9zcGFuPic6ICcnO1xuICAgIHZhciBnb29nbGVDb250YWluZXIgPSAodGhhdC5jcC5lbmFibGVHb29nbGVTaGFyZSA9PSB0cnVlKSA/ICc8c3BhbiBjbGFzcz1cImg1cC1zdW1tYXJ5LWdvb2dsZS1tZXNzYWdlXCIgYXJpYS1sYWJlbD1cIicgKyB0aGF0LmNwLmwxMG4uc2hhcmVHb29nbGUgKyAnXCI+PC9zcGFuPicgOiAnJztcbiAgXG4gICAgY29uc29sZS5sb2codGhhdC5jcC5sMTBuKTtcbiAgICBjb25zb2xlLmxvZyh0aGF0LmNwKTtcbiAgICB2YXIgaHRtbCA9XG4gICAgICAnPGRpdiBjbGFzcz1cImg1cC1zdW1tYXJ5LXRhYmxlLWhvbGRlclwiPicgK1xuICAgICAgICAnPGRpdiBjbGFzcz1cImg1cC1zdW1tYXJ5LXRhYmxlLXBhZ2VzXCI+JyArXG4gICAgICAgICAgJzx0YWJsZSBjbGFzcz1cImg1cC1zY29yZS10YWJsZVwiPicgK1xuICAgICAgICAgICAgJzx0aGVhZD48dHI+JyArXG4gICAgICAgICAgICAgICc8dGggY2xhc3M9XCJoNXAtc3VtbWFyeS10YWJsZS1oZWFkZXIgc2xpZGVcIj4nICsgdGhhdC5jcC5sMTBuLnNsaWRlICsgJzwvdGg+JyArXG4gICAgICAgICAgICAgICc8dGggY2xhc3M9XCJoNXAtc3VtbWFyeS10YWJsZS1oZWFkZXIgc2NvcmVcIj4nICsgdGhhdC5jcC5sMTBuLnNjb3JlICsgJzxzcGFuPi88L3NwYW4+JyArIHRoYXQuY3AubDEwbi50b3RhbC50b0xvd2VyQ2FzZSgpICsgJzwvdGg+JyArXG4gICAgICAgICAgICAnPC90cj48L3RoZWFkPicgK1xuICAgICAgICAgICAgJzx0Ym9keT4nICsgdGRzICsgJzwvdGJvZHk+JyArXG4gICAgICAgICAgJzwvdGFibGU+JyArXG4gICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJoNXAtc3VtbWFyeS10b3RhbC10YWJsZVwiPicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaDVwLXN1bW1hcnktc29jaWFsXCI+JyArXG4gICAgICAgICAgICBzaGFyZVJlc3VsdENvbnRhaW5lciArXG4gICAgICAgICAgICBmYWNlYm9va0NvbnRhaW5lciArXG4gICAgICAgICAgICB0d2l0dGVyQ29udGFpbmVyICtcbiAgICAgICAgICAgIGdvb2dsZUNvbnRhaW5lciArXG4gICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaDVwLXN1bW1hcnktdG90YWwtc2NvcmVcIj4nICtcbiAgICAgICAgICAgICc8cD4nICsgdGhhdC5jcC5sMTBuLnRvdGFsU2NvcmUgKyAnPC9wPicgK1xuICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgJzwvZGl2PicgK1xuICAgICAgJzwvZGl2PicgK1xuICAgICAgJzxkaXYgY2xhc3M9XCJoNXAtc3VtbWFyeS1mb290ZXJcIj4nICtcbiAgICAgICc8L2Rpdj4nO1xuXG4gICAgcmV0dXJuIGh0bWw7XG4gIH07XG5cbiAgU3VtbWFyeVNsaWRlLnByb3RvdHlwZS5nZXRTbGlkZURlc2NyaXB0aW9uID0gZnVuY3Rpb24gKHNsaWRlU2NvcmVzU2xpZGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBHZXQgdGFzayBkZXNjcmlwdGlvbiwgdGFzayBuYW1lIG9yIGlkZW50aWZ5IG11bHRpcGxlIHRhc2tzOlxuICAgIHZhciBzbGlkZURlc2NyaXB0aW9uLCBhY3Rpb247XG4gICAgdmFyIHNsaWRlRWxlbWVudHMgPSBzZWxmLmNwLnNsaWRlc1tzbGlkZVNjb3Jlc1NsaWRlLnNsaWRlIC0gMV0uZWxlbWVudHM7XG4gICAgaWYgKHNsaWRlU2NvcmVzU2xpZGUuaW5kZXhlcy5sZW5ndGggPiAxKSB7XG4gICAgICBzbGlkZURlc2NyaXB0aW9uID0gc2VsZi5jcC5sMTBuLnN1bW1hcnlNdWx0aXBsZVRhc2tUZXh0O1xuICAgIH1cbiAgICBlbHNlIGlmIChzbGlkZUVsZW1lbnRzW3NsaWRlU2NvcmVzU2xpZGUuaW5kZXhlc1swXV0gIT09IHVuZGVmaW5lZCAmJiBzbGlkZUVsZW1lbnRzWzBdKSB7XG4gICAgICBhY3Rpb24gPSBzbGlkZUVsZW1lbnRzW3NsaWRlU2NvcmVzU2xpZGUuaW5kZXhlc1swXV0uYWN0aW9uO1xuICAgICAgaWYgKHR5cGVvZiBzZWxmLmNwLmVsZW1lbnRJbnN0YW5jZXNbc2xpZGVTY29yZXNTbGlkZS5zbGlkZSAtIDFdW3NsaWRlU2NvcmVzU2xpZGUuaW5kZXhlc1swXV0uZ2V0VGl0bGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc2xpZGVEZXNjcmlwdGlvbiA9IHNlbGYuY3AuZWxlbWVudEluc3RhbmNlc1tzbGlkZVNjb3Jlc1NsaWRlLnNsaWRlIC0gMV1bc2xpZGVTY29yZXNTbGlkZS5pbmRleGVzWzBdXS5nZXRUaXRsZSgpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoYWN0aW9uLmxpYnJhcnkgIT09IHVuZGVmaW5lZCAmJiBhY3Rpb24ubGlicmFyeSkge1xuXG4gICAgICAgIC8vIFJlbW92ZSBtYWpvciwgbWlub3IgdmVyc2lvbiBhbmQgaDVwIHByZWZpeCwgU3BsaXQgb24gdXBwZXJjYXNlXG4gICAgICAgIHZhciBodW1hblJlYWRhYmxlTGlicmFyeSA9IGFjdGlvbi5saWJyYXJ5XG4gICAgICAgICAgLnNwbGl0KCcgJylbMF1cbiAgICAgICAgICAuc3BsaXQoJy4nKVsxXVxuICAgICAgICAgIC5zcGxpdCgvKD89W0EtWl0pLyk7XG4gICAgICAgIHZhciBodW1hblJlYWRhYmxlU3RyaW5nID0gJyc7XG5cbiAgICAgICAgLy8gTWFrZSBsaWJyYXJ5IGh1bWFuIHJlYWRhYmxlXG4gICAgICAgIGh1bWFuUmVhZGFibGVMaWJyYXJ5LmZvckVhY2goZnVuY3Rpb24gKHJlYWRhYmxlV29yZCwgaW5kZXgpIHtcblxuICAgICAgICAgIC8vIE1ha2Ugc2VxdWVudGlhbCB3b3JkcyBsb3dlcmNhc2VcbiAgICAgICAgICBpZiAoaW5kZXggIT09IDApIHtcbiAgICAgICAgICAgIHJlYWRhYmxlV29yZCA9IHJlYWRhYmxlV29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBodW1hblJlYWRhYmxlU3RyaW5nICs9IHJlYWRhYmxlV29yZDtcblxuICAgICAgICAgIC8vIEFkZCBzcGFjZSBiZXR3ZWVuIHdvcmRzXG4gICAgICAgICAgaWYgKGluZGV4IDw9IGh1bWFuUmVhZGFibGVMaWJyYXJ5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGh1bWFuUmVhZGFibGVTdHJpbmcgKz0gJyAnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlRGVzY3JpcHRpb24gPSBodW1hblJlYWRhYmxlU3RyaW5nO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2xpZGVEZXNjcmlwdGlvbjtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhIGxpbmsgdG8gdGhlIGdpdmVuIGNvbnRhaW5lciB3aGljaCB3aWxsIGxpbmsgYWNoaWV2ZWQgc2NvcmUgdG8gdHdpdHRlci5cbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9ICR0d2l0dGVyQ29udGFpbmVyIENvbnRhaW5lciB0aGF0IHNob3VsZCBob2xkIHRoZSB0d2l0dGVyIGxpbmsuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29yZXMgdG90YWxTY29yZXMgb2JqZWN0IHRvIHB1bGwgZGF0YSBmcm9tLlxuICAgKi9cbiAgU3VtbWFyeVNsaWRlLnByb3RvdHlwZS5hZGRUd2l0dGVyU2NvcmVMaW5rVG8gPSBmdW5jdGlvbiAoJHR3aXR0ZXJDb250YWluZXIsIHNjb3Jlcykge1xuICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgIC8vIEdldCBkYXRhIGZyb20gdGhlIGxvY2FsaXphdGlvbiBvYmplY3QuXG4gICAgdmFyIHR3aXR0ZXJTaGFyZVN0YXRlbWVudCA9IHRoYXQuY3AudHdpdHRlclNoYXJlU3RhdGVtZW50IHx8ICcnO1xuICAgIHZhciB0d2l0dGVySGFzaHRhZ0xpc3QgPSB0aGF0LmNwLnR3aXR0ZXJTaGFyZUhhc2h0YWdzIHx8ICcnO1xuICAgIHZhciB0d2l0dGVyU2hhcmVVcmwgPSB0aGF0LmNwLnR3aXR0ZXJTaGFyZVVybCB8fCAnJztcblxuICAgIC8vIFJlcGxhY2UgYW55IHBsYWNlaG9sZGVycyB3aXRoIHZhcmlhYmxlcy5cbiAgICB0d2l0dGVyU2hhcmVVcmwgPSB0d2l0dGVyU2hhcmVVcmwucmVwbGFjZSgnQGN1cnJlbnRwYWdldXJsJywgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIHR3aXR0ZXJTaGFyZVN0YXRlbWVudCA9IHR3aXR0ZXJTaGFyZVN0YXRlbWVudFxuICAgICAgLnJlcGxhY2UoJ0BzY29yZScsIHNjb3Jlcy50b3RhbFNjb3JlKVxuICAgICAgLnJlcGxhY2UoJ0BtYXhTY29yZScsIHNjb3Jlcy50b3RhbE1heFNjb3JlKVxuICAgICAgLnJlcGxhY2UoJ0BwZXJjZW50YWdlJywgc2NvcmVzLnRvdGFsUGVyY2VudGFnZSArICclJylcbiAgICAgIC5yZXBsYWNlKCdAY3VycmVudHBhZ2V1cmwnLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbiAgICAvLyBQYXJzZSBkYXRhIGZyb20gdGhlIGxvY2FsaXphdGlvbiBvYmplY3QuXG4gICAgdHdpdHRlckhhc2h0YWdMaXN0ID0gdHdpdHRlckhhc2h0YWdMaXN0LnRyaW0oKS5yZXBsYWNlKCcgJywgJycpO1xuXG4gICAgLy8gRW5jb2RlIGNvbXBvbmVudHMgdGhhdCBtYXkgY29udGFpbiBicmVha2luZyBjaGFyYWN0ZXJzLlxuICAgIHR3aXR0ZXJTaGFyZVN0YXRlbWVudCA9IGVuY29kZVVSSUNvbXBvbmVudCh0d2l0dGVyU2hhcmVTdGF0ZW1lbnQpO1xuICAgIHR3aXR0ZXJIYXNodGFnTGlzdCA9IGVuY29kZVVSSUNvbXBvbmVudCh0d2l0dGVySGFzaHRhZ0xpc3QpO1xuICAgIHR3aXR0ZXJTaGFyZVVybCA9IGVuY29kZVVSSUNvbXBvbmVudCh0d2l0dGVyU2hhcmVVcmwpO1xuXG4gICAgLy8gQWRkIHF1ZXJ5IHN0cmluZ3MgdG8gdGhlIFVSTCBiYXNlZCBvbiBzZXR0aW5ncy5cbiAgICB2YXIgdHdpdHRlclN0cmluZyA9ICdodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD8nO1xuICAgIHR3aXR0ZXJTdHJpbmcgKz0gKHR3aXR0ZXJTaGFyZVN0YXRlbWVudC5sZW5ndGggPiAwKSA/IFwidGV4dD1cIit0d2l0dGVyU2hhcmVTdGF0ZW1lbnQrXCImXCIgOiBcIlwiO1xuICAgIHR3aXR0ZXJTdHJpbmcgKz0gKHR3aXR0ZXJTaGFyZVVybC5sZW5ndGggPiAwKSA/IFwidXJsPVwiK3R3aXR0ZXJTaGFyZVVybCtcIiZcIiA6IFwiXCI7XG4gICAgdHdpdHRlclN0cmluZyArPSAodHdpdHRlckhhc2h0YWdMaXN0Lmxlbmd0aCA+IDApID8gXCJoYXNodGFncz1cIit0d2l0dGVySGFzaHRhZ0xpc3QgOiBcIlwiO1xuXG4gICAgdmFyIGxlZnRQb3MgPSAod2luZG93LmlubmVyV2lkdGggLyAyKTtcbiAgICB2YXIgdG9wUG9zID0gKHdpbmRvdy5pbm5lckhlaWdodCAvIDIpO1xuICAgIHZhciBwb3B1cFdpZHRoID0gODAwO1xuICAgIHZhciBwb3B1cEhlaWdodCA9IDMwMDtcblxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IFR3aXR0ZXIgd2luZG93LlxuICAgICR0d2l0dGVyQ29udGFpbmVyLmF0dHIoJ3RhYmluZGV4JywgJzAnKVxuICAgICAgLmF0dHIoJ3JvbGUnLCAnYnV0dG9uJyk7XG5cbiAgICBhZGRDbGlja0FuZEtleWJvYXJkTGlzdGVuZXJzKCR0d2l0dGVyQ29udGFpbmVyLCAoKSA9PiB7XG4gICAgICB3aW5kb3cub3Blbih0d2l0dGVyU3RyaW5nLFxuICAgICAgICB0aGF0LmNwLmwxMG4uc2hhcmVUd2l0dGVyLFxuICAgICAgICAnd2lkdGg9JyArIHBvcHVwV2lkdGggK1xuICAgICAgICAnLGhlaWdodD0nICsgcG9wdXBIZWlnaHQgK1xuICAgICAgICAnLGxlZnQ9JyArIGxlZnRQb3MgK1xuICAgICAgICAnLHRvcD0nICsgdG9wUG9zKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhIGxpbmsgdG8gdGhlIGdpdmVuIGNvbnRhaW5lciB3aGljaCB3aWxsIGxpbmsgYWNoaWV2ZWQgc2NvcmUgdG8gZmFjZWJvb2suXG4gICAqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkZmFjZWJvb2tDb250YWluZXIgQ29udGFpbmVyIHRoYXQgc2hvdWxkIGhvbGQgdGhlIGZhY2Vib29rIGxpbmsuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29yZXMgdG90YWxTY29yZXMgb2JqZWN0IHRvIHB1bGwgZGF0YSBmcm9tLlxuICAgKi9cbiAgU3VtbWFyeVNsaWRlLnByb3RvdHlwZS5hZGRGYWNlYm9va1Njb3JlTGlua1RvID0gZnVuY3Rpb24gKCRmYWNlYm9va0NvbnRhaW5lciwgc2NvcmVzKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgLy8gR2V0IGRhdGEgZnJvbSB0aGUgbG9jYWxpemF0aW9uIG9iamVjdC5cbiAgICB2YXIgZmFjZWJvb2tTaGFyZVVybCA9IHRoYXQuY3AuZmFjZWJvb2tTaGFyZVVybCB8fCAnJztcbiAgICB2YXIgZmFjZWJvb2tTaGFyZVF1b3RlID0gdGhhdC5jcC5mYWNlYm9va1NoYXJlUXVvdGUgfHwgJyc7XG5cbiAgICAvLyBSZXBsYWNlIGFueSBwbGFjZWhvbGRlcnMgd2l0aCB2YXJpYWJsZXMuXG4gICAgZmFjZWJvb2tTaGFyZVVybCA9IGZhY2Vib29rU2hhcmVVcmwucmVwbGFjZSgnQGN1cnJlbnRwYWdldXJsJywgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgZmFjZWJvb2tTaGFyZVF1b3RlID0gZmFjZWJvb2tTaGFyZVF1b3RlLnJlcGxhY2UoJ0BjdXJyZW50cGFnZXVybCcsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgLnJlcGxhY2UoXCJAcGVyY2VudGFnZVwiLCBzY29yZXMudG90YWxQZXJjZW50YWdlICsgJyUnKVxuICAgICAgLnJlcGxhY2UoJ0BzY29yZScsIHNjb3Jlcy50b3RhbFNjb3JlKVxuICAgICAgLnJlcGxhY2UoJ0BtYXhTY29yZScsIHNjb3Jlcy50b3RhbE1heFNjb3JlKTtcblxuICAgIC8vIFBhcnNlIGRhdGEgZnJvbSB0aGUgbG9jYWxpemF0aW9uIG9iamVjdC5cbiAgICBmYWNlYm9va1NoYXJlVXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KGZhY2Vib29rU2hhcmVVcmwpO1xuICAgIGZhY2Vib29rU2hhcmVRdW90ZSA9IGVuY29kZVVSSUNvbXBvbmVudChmYWNlYm9va1NoYXJlUXVvdGUpO1xuXG4gICAgLy8gQWRkIHF1ZXJ5IHN0cmluZ3MgdG8gdGhlIFVSTCBiYXNlZCBvbiBzZXR0aW5ncy5cbiAgICB2YXIgZmFjZWJvb2tVcmwgPSAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwPyc7XG4gICAgZmFjZWJvb2tVcmwgKz0gKGZhY2Vib29rU2hhcmVVcmwubGVuZ3RoID4gMCkgPyBcInU9XCIrZmFjZWJvb2tTaGFyZVVybCtcIiZcIiA6IFwiXCI7XG4gICAgZmFjZWJvb2tVcmwgKz0gKGZhY2Vib29rU2hhcmVRdW90ZS5sZW5ndGggPiAwKSA/IFwicXVvdGU9XCIrZmFjZWJvb2tTaGFyZVF1b3RlIDogJyc7XG5cbiAgICB2YXIgcG9wdXBXaWR0aCA9IDgwMDtcbiAgICB2YXIgcG9wdXBIZWlnaHQgPSAzMDA7XG4gICAgdmFyIGxlZnRQb3MgPSAod2luZG93LmlubmVyV2lkdGggLyAyKTtcbiAgICB2YXIgdG9wUG9zID0gKHdpbmRvdy5pbm5lckhlaWdodCAvIDIpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgRmFjZWJvb2sgd2luZG93LlxuICAgICRmYWNlYm9va0NvbnRhaW5lci5hdHRyKCd0YWJpbmRleCcsICcwJylcbiAgICAgIC5hdHRyKCdyb2xlJywgJ2J1dHRvbicpO1xuXG4gICAgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycygkZmFjZWJvb2tDb250YWluZXIsICgpID0+IHtcbiAgICAgIHdpbmRvdy5vcGVuKGZhY2Vib29rVXJsLFxuICAgICAgICB0aGF0LmNwLmwxMG4uc2hhcmVGYWNlYm9vayxcbiAgICAgICAgJ3dpZHRoPScgKyBwb3B1cFdpZHRoICtcbiAgICAgICAgJyxoZWlnaHQ9JyArIHBvcHVwSGVpZ2h0ICtcbiAgICAgICAgJyxsZWZ0PScgKyBsZWZ0UG9zICtcbiAgICAgICAgJyx0b3A9JyArIHRvcFBvcyk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhIGxpbmsgdG8gdGhlIGdpdmVuIGNvbnRhaW5lciB3aGljaCB3aWxsIGxpbmsgYWNoaWV2ZWQgc2NvcmUgdG8gZ29vZ2xlLlxuICAgKlxuICAgKiBAcGFyYW0ge2pRdWVyeX0gJGdvb2dsZUNvbnRhaW5lciBDb250YWluZXIgdGhhdCBzaG91bGQgaG9sZCB0aGUgZ29vZ2xlIGxpbmsuXG4gICAqL1xuICBTdW1tYXJ5U2xpZGUucHJvdG90eXBlLmFkZEdvb2dsZVNjb3JlTGlua1RvID0gZnVuY3Rpb24gKCRnb29nbGVDb250YWluZXIpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAvLyBHZXQgZGF0YSBmcm9tIHRoZSBsb2NhbGl6YXRpb24gb2JqZWN0LlxuICAgIHZhciBnb29nbGVTaGFyZVVybCA9IHRoYXQuY3AuZ29vZ2xlU2hhcmVVcmwgfHwgJyc7XG5cbiAgICAvLyBSZXBsYWNlIGFueSBwbGFjZWhvbGRlcnMgd2l0aCB2YXJpYWJsZXMuXG4gICAgZ29vZ2xlU2hhcmVVcmwgPSBnb29nbGVTaGFyZVVybC5yZXBsYWNlKCdAY3VycmVudHBhZ2V1cmwnLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbiAgICAvLyBQYXJzZSBkYXRhIGZyb20gdGhlIGxvY2FsaXphdGlvbiBvYmplY3QuXG4gICAgZ29vZ2xlU2hhcmVVcmwgPSBlbmNvZGVVUklDb21wb25lbnQoZ29vZ2xlU2hhcmVVcmwpO1xuXG4gICAgLy8gQWRkIHF1ZXJ5IHN0cmluZ3MgdG8gdGhlIFVSTCBiYXNlZCBvbiBzZXR0aW5ncy5cbiAgICB2YXIgZ29vZ2xlVXJsID0gXCJodHRwczovL3BsdXMuZ29vZ2xlLmNvbS9zaGFyZT9cIjtcbiAgICBnb29nbGVVcmwgKz0gKGdvb2dsZVNoYXJlVXJsLmxlbmd0aCA+IDApID8gXCJ1cmw9XCIrZ29vZ2xlU2hhcmVVcmwrXCJcIiA6IFwiXCI7XG5cbiAgICB2YXIgcG9wdXBXaWR0aCA9IDQwMTtcbiAgICB2YXIgcG9wdXBIZWlnaHQgPSA0Mzc7XG4gICAgdmFyIGxlZnRQb3MgPSAod2luZG93LmlubmVyV2lkdGggLyAyKTtcbiAgICB2YXIgdG9wUG9zID0gKHdpbmRvdy5pbm5lckhlaWdodCAvIDIpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgR29vZ2xlKyB3aW5kb3cuXG4gICAgJGdvb2dsZUNvbnRhaW5lci5hdHRyKCd0YWJpbmRleCcsICcwJylcbiAgICAgIC5hdHRyKCdyb2xlJywgJ2J1dHRvbicpO1xuXG4gICAgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycygkZ29vZ2xlQ29udGFpbmVyLCAoKSA9PiB7XG4gICAgICB3aW5kb3cub3Blbihnb29nbGVVcmwsXG4gICAgICAgIHRoYXQuY3AubDEwbi5zaGFyZUdvb2dsZSxcbiAgICAgICAgJ3dpZHRoPScgKyBwb3B1cFdpZHRoICtcbiAgICAgICAgJyxoZWlnaHQ9JyArIHBvcHVwSGVpZ2h0ICtcbiAgICAgICAgJyxsZWZ0PScgKyBsZWZ0UG9zICtcbiAgICAgICAgJyx0b3A9JyArIHRvcFBvcyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHMgdG90YWwgc2NvcmVzIGZvciBhbGwgc2xpZGVzXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNsaWRlU2NvcmVzXG4gICAqIEByZXR1cm5zIHt7dG90YWxTY29yZTogbnVtYmVyLCB0b3RhbE1heFNjb3JlOiBudW1iZXIsIHRvdGFsUGVyY2VudGFnZTogbnVtYmVyfX0gdG90YWxTY29yZXMgVG90YWwgc2NvcmVzIG9iamVjdFxuICAgKi9cbiAgU3VtbWFyeVNsaWRlLnByb3RvdHlwZS50b3RhbFNjb3JlcyA9IGZ1bmN0aW9uIChzbGlkZVNjb3Jlcykge1xuICAgIGlmIChzbGlkZVNjb3JlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbFNjb3JlOiAwLFxuICAgICAgICB0b3RhbE1heFNjb3JlOiAwLFxuICAgICAgICB0b3RhbFBlcmNlbnRhZ2U6IDBcbiAgICAgIH07XG4gICAgfVxuICAgIHZhciB0b3RhbFNjb3JlID0gMDtcbiAgICB2YXIgdG90YWxNYXhTY29yZSA9IDA7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IHNsaWRlU2NvcmVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAvLyBHZXQgcGVyY2VudGFnZSBzY29yZSBmb3Igc2xpZGVcbiAgICAgIHRvdGFsU2NvcmUgKz0gc2xpZGVTY29yZXNbaV0uc2NvcmU7XG4gICAgICB0b3RhbE1heFNjb3JlICs9IHNsaWRlU2NvcmVzW2ldLm1heFNjb3JlO1xuICAgIH1cblxuICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKCh0b3RhbFNjb3JlIC8gdG90YWxNYXhTY29yZSkgKiAxMDApO1xuICAgIGlmIChpc05hTih0b3RhbFBlcmNlbnRhZ2UpKSB7XG4gICAgICB0b3RhbFBlcmNlbnRhZ2UgPSAwO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFNjb3JlOiB0b3RhbFNjb3JlLFxuICAgICAgdG90YWxNYXhTY29yZTogdG90YWxNYXhTY29yZSxcbiAgICAgIHRvdGFsUGVyY2VudGFnZTogdG90YWxQZXJjZW50YWdlXG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogVG9nZ2xlcyBzb2x1dGlvbiBtb2RlIG9uL29mZi5cbiAgICpcbiAgICogQHBhcmFtcyB7Qm9vbGVhbn0gZW5hYmxlU29sdXRpb25Nb2RlIEVuYWJsZS9kaXNhYmxlIHNvbHV0aW9uIG1vZGVcbiAgICovXG4gIFN1bW1hcnlTbGlkZS5wcm90b3R5cGUudG9nZ2xlU29sdXRpb25Nb2RlID0gZnVuY3Rpb24gKGVuYWJsZVNvbHV0aW9uTW9kZSkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgIHRoaXMuY3AuaXNTb2x1dGlvbk1vZGUgPSBlbmFibGVTb2x1dGlvbk1vZGU7XG4gICAgaWYgKGVuYWJsZVNvbHV0aW9uTW9kZSkge1xuICAgICAgLy8gR2V0IHNjb3JlcyBmb3Igc3VtbWFyeSBzbGlkZVxuICAgICAgdmFyIHNsaWRlU2NvcmVzID0gdGhhdC5jcC5zaG93U29sdXRpb25zKCk7XG5cbiAgICAgIC8vIFVwZGF0ZSBmZWVkYmFjayBpY29ucyBpbiBzb2x1dGlvbiBtb2RlXG4gICAgICB0aGlzLmNwLnNldFByb2dyZXNzQmFyRmVlZGJhY2soc2xpZGVTY29yZXMpO1xuICAgICAgdGhpcy5jcC4kZm9vdGVyLmFkZENsYXNzKCdoNXAtZm9vdGVyLXNvbHV0aW9uLW1vZGUnKTtcbiAgICAgIHRoaXMuc2V0Rm9vdGVyU29sdXRpb25Nb2RlVGV4dCh0aGlzLmNwLmwxMG4uc29sdXRpb25Nb2RlVGV4dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5jcC4kZm9vdGVyLnJlbW92ZUNsYXNzKCdoNXAtZm9vdGVyLXNvbHV0aW9uLW1vZGUnKTtcbiAgICAgIHRoaXMuc2V0Rm9vdGVyU29sdXRpb25Nb2RlVGV4dCgpO1xuICAgICAgdGhpcy5jcC5zZXRQcm9ncmVzc0JhckZlZWRiYWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzb2x1dGlvbiBtb2RlIGJ1dHRvbiB0ZXh0IGluIGZvb3Rlci5cbiAgICpcbiAgICogQHBhcmFtIHNvbHV0aW9uTW9kZVRleHRcbiAgICovXG4gIFN1bW1hcnlTbGlkZS5wcm90b3R5cGUuc2V0Rm9vdGVyU29sdXRpb25Nb2RlVGV4dCA9IGZ1bmN0aW9uIChzb2x1dGlvbk1vZGVUZXh0KSB7XG4gICAgaWYgKHNvbHV0aW9uTW9kZVRleHQgIT09IHVuZGVmaW5lZCAmJiBzb2x1dGlvbk1vZGVUZXh0KSB7XG4gICAgICB0aGlzLmNwLiRleGl0U29sdXRpb25Nb2RlVGV4dC5odG1sKHNvbHV0aW9uTW9kZVRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmNwLiRleGl0U29sdXRpb25Nb2RlVGV4dCkge1xuICAgICAgdGhpcy5jcC4kZXhpdFNvbHV0aW9uTW9kZVRleHQuaHRtbCgnJyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTdW1tYXJ5U2xpZGU7XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBTdW1tYXJ5U2xpZGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/summary-slide.js\n");
    
    /***/ }),
    
    /***/ "./src/scripts/utils.js":
    /*!******************************!*\
      !*** ./src/scripts/utils.js ***!
      \******************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addClickAndKeyboardListeners\": () => (/* binding */ addClickAndKeyboardListeners),\n/* harmony export */   \"contains\": () => (/* binding */ contains),\n/* harmony export */   \"defaultValue\": () => (/* binding */ defaultValue),\n/* harmony export */   \"flattenArray\": () => (/* binding */ flattenArray),\n/* harmony export */   \"isFunction\": () => (/* binding */ isFunction),\n/* harmony export */   \"isIOS\": () => (/* binding */ isIOS),\n/* harmony export */   \"isIPad\": () => (/* binding */ isIPad),\n/* harmony export */   \"kebabCase\": () => (/* binding */ kebabCase),\n/* harmony export */   \"keyCode\": () => (/* binding */ keyCode),\n/* harmony export */   \"stripHTML\": () => (/* binding */ stripHTML)\n/* harmony export */ });\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals */ \"./src/scripts/globals.js\");\n\n/**\n * Flattens a nested array\n *\n * Example:\n * [['a'], ['b']].flatten() -> ['a', 'b']\n *\n * @param {Array} arr A nested array\n * @returns {Array} A flattened array\n */\n\nvar flattenArray = function flattenArray(arr) {\n  return arr.concat.apply([], arr);\n};\n/**\n * Returns true if the argument is a function\n *\n * @param {Function|*} f\n */\n\nvar isFunction = function isFunction(f) {\n  return typeof f === 'function';\n};\n/**\n * Makes a string kebab case\n *\n * @param {string} str\n * @return {string}\n */\n\nvar kebabCase = function kebabCase(str) {\n  return str.replace(/[\\W]/g, '-');\n};\n/**\n * Is true if the users device is an ipad\n *\n * @const {boolean}\n */\n\nvar isIPad = navigator.userAgent.match(/iPad/i) !== null;\n/**\n * Is true if the users device is an iOS device\n *\n * @const {boolean}\n */\n\nvar isIOS = navigator.userAgent.match(/iPad|iPod|iPhone/i) !== null;\n/**\n * Returns true if the array contains the value\n *\n * @template T\n * @param {Array.<T>} arr\n * @param {T} val\n * @return {boolean}\n */\n\nvar contains = function contains(arr, val) {\n  return arr.indexOf(val) !== -1;\n};\n/**\n * Returns a default value if provided value is undefined\n *\n * @template T\n * @param {T} value\n * @param {T} fallback\n * @return {T}\n */\n\nvar defaultValue = function defaultValue(value, fallback) {\n  return value !== undefined ? value : fallback;\n};\n/**\n * Enum for keyboard key codes\n * @readonly\n * @enum {number}\n */\n\nvar keyCode = {\n  ENTER: 13,\n  ESC: 27,\n  SPACE: 32\n};\n/**\n * Make a non-button element behave as a button. I.e handle enter and space\n * keydowns as click\n *\n * @param  {H5P.jQuery} $element The \"button\" element\n * @param  {function(Event)} callback\n * @param  {*} [scope]\n */\n\nvar addClickAndKeyboardListeners = function addClickAndKeyboardListeners($element, callback, scope) {\n  $element.click(function (event) {\n    callback.call(scope || this, event);\n  });\n  $element.keydown(function (event) {\n    if (contains([keyCode.ENTER, keyCode.SPACE], event.which)) {\n      event.preventDefault();\n      callback.call(scope || this, event);\n    }\n  });\n};\n/**\n * @const {H5P.jQuery}\n */\n\nvar $STRIP_HTML_HELPER = (0,_globals__WEBPACK_IMPORTED_MODULE_0__.jQuery)('<div>');\n/**\n * Strips the html from a string, using jquery\n *\n * @param {string} str\n * @return {string}\n */\n\nvar stripHTML = function stripHTML(str) {\n  return $STRIP_HTML_HELPER.html(str).text().trim();\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy91dGlscy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtY291cnNlLXByZXNlbnRhdGlvbi8uL3NyYy9zY3JpcHRzL3V0aWxzLmpzP2RiMTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgalF1ZXJ5IGFzICQgfSBmcm9tICcuL2dsb2JhbHMnO1xuXG4vKipcbiAqIEZsYXR0ZW5zIGEgbmVzdGVkIGFycmF5XG4gKlxuICogRXhhbXBsZTpcbiAqIFtbJ2EnXSwgWydiJ11dLmZsYXR0ZW4oKSAtPiBbJ2EnLCAnYiddXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyIEEgbmVzdGVkIGFycmF5XG4gKiBAcmV0dXJucyB7QXJyYXl9IEEgZmxhdHRlbmVkIGFycmF5XG4gKi9cbmV4cG9ydCBjb25zdCBmbGF0dGVuQXJyYXkgPSBhcnIgPT4gYXJyLmNvbmNhdC5hcHBseShbXSwgYXJyKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGFyZ3VtZW50IGlzIGEgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufCp9IGZcbiAqL1xuZXhwb3J0IGNvbnN0IGlzRnVuY3Rpb24gPSBmID0+IHR5cGVvZiBmID09PSAnZnVuY3Rpb24nO1xuXG5cbi8qKlxuICogTWFrZXMgYSBzdHJpbmcga2ViYWIgY2FzZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IGtlYmFiQ2FzZSA9IHN0ciA9PiBzdHIucmVwbGFjZSgvW1xcV10vZywgJy0nKTtcblxuLyoqXG4gKiBJcyB0cnVlIGlmIHRoZSB1c2VycyBkZXZpY2UgaXMgYW4gaXBhZFxuICpcbiAqIEBjb25zdCB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzSVBhZCA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSkgIT09IG51bGw7XG5cblxuLyoqXG4gKiBJcyB0cnVlIGlmIHRoZSB1c2VycyBkZXZpY2UgaXMgYW4gaU9TIGRldmljZVxuICpcbiAqIEBjb25zdCB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzSU9TID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZHxpUG9kfGlQaG9uZS9pKSAhPT0gbnVsbDtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGFycmF5IGNvbnRhaW5zIHRoZSB2YWx1ZVxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5LjxUPn0gYXJyXG4gKiBAcGFyYW0ge1R9IHZhbFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGNvbnRhaW5zID0gKGFyciwgdmFsKSA9PiBhcnIuaW5kZXhPZih2YWwpICE9PSAtMTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgZGVmYXVsdCB2YWx1ZSBpZiBwcm92aWRlZCB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUfSB2YWx1ZVxuICogQHBhcmFtIHtUfSBmYWxsYmFja1xuICogQHJldHVybiB7VH1cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRWYWx1ZSA9ICh2YWx1ZSwgZmFsbGJhY2spID0+ICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSA/IHZhbHVlIDogZmFsbGJhY2s7XG5cbi8qKlxuICogRW51bSBmb3Iga2V5Ym9hcmQga2V5IGNvZGVzXG4gKiBAcmVhZG9ubHlcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlID0ge1xuICBFTlRFUjogMTMsXG4gIEVTQzogMjcsXG4gIFNQQUNFOiAzMlxufTtcblxuLyoqXG4gKiBNYWtlIGEgbm9uLWJ1dHRvbiBlbGVtZW50IGJlaGF2ZSBhcyBhIGJ1dHRvbi4gSS5lIGhhbmRsZSBlbnRlciBhbmQgc3BhY2VcbiAqIGtleWRvd25zIGFzIGNsaWNrXG4gKlxuICogQHBhcmFtICB7SDVQLmpRdWVyeX0gJGVsZW1lbnQgVGhlIFwiYnV0dG9uXCIgZWxlbWVudFxuICogQHBhcmFtICB7ZnVuY3Rpb24oRXZlbnQpfSBjYWxsYmFja1xuICogQHBhcmFtICB7Kn0gW3Njb3BlXVxuICovXG5leHBvcnQgY29uc3QgYWRkQ2xpY2tBbmRLZXlib2FyZExpc3RlbmVycyA9IGZ1bmN0aW9uICgkZWxlbWVudCwgY2FsbGJhY2ssIHNjb3BlKSB7XG4gICRlbGVtZW50LmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNhbGxiYWNrLmNhbGwoc2NvcGUgfHwgdGhpcywgZXZlbnQpO1xuICB9KTtcblxuICAkZWxlbWVudC5rZXlkb3duKGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChjb250YWlucyhba2V5Q29kZS5FTlRFUiwga2V5Q29kZS5TUEFDRV0sIGV2ZW50LndoaWNoKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNhbGxiYWNrLmNhbGwoc2NvcGUgfHwgdGhpcywgZXZlbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIEBjb25zdCB7SDVQLmpRdWVyeX1cbiAqL1xuY29uc3QgJFNUUklQX0hUTUxfSEVMUEVSID0gJCgnPGRpdj4nKTtcblxuLyoqXG4gKiBTdHJpcHMgdGhlIGh0bWwgZnJvbSBhIHN0cmluZywgdXNpbmcganF1ZXJ5XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3Qgc3RyaXBIVE1MID0gc3RyID0+ICRTVFJJUF9IVE1MX0hFTFBFUi5odG1sKHN0cikudGV4dCgpLnRyaW0oKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/utils.js\n");
    
    /***/ }),
    
    /***/ "./node_modules/h5p-lib-controls/src/scripts/controls.js":
    /*!***************************************************************!*\
      !*** ./node_modules/h5p-lib-controls/src/scripts/controls.js ***!
      \***************************************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Controls)\n/* harmony export */ });\n/* harmony import */ var _utils_elements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/elements */ \"./node_modules/h5p-lib-controls/src/scripts/utils/elements.js\");\n/* harmony import */ var _utils_functional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/functional */ \"./node_modules/h5p-lib-controls/src/scripts/utils/functional.js\");\n/* harmony import */ var _mixins_eventful__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mixins/eventful */ \"./node_modules/h5p-lib-controls/src/scripts/mixins/eventful.js\");\n\n\n\n\n/**\n * Controls Event\n * @typedef {Object} ControlsEvent\n * @property {HTMLElement} element\n * @property {number} index\n * @property {HTMLElement[]} elements\n * @property {HTMLElement} oldElement\n */\n/**\n * Add element event\n * @event Controls#addElement\n * @type ControlsEvent\n */\n/**\n * Remove element event\n * @event Controls#removeElement\n * @type ControlsEvent\n */\n/**\n * Previous element event\n * @event Controls#previousElement\n * @type ControlsEvent\n */\n/**\n * Next element event\n * @event Controls#nextElement\n * @type ControlsEvent\n */\n/**\n * Select option event\n * @event Controls#select\n * @type ControlsEvent\n */\n/**\n * Close event\n * @event Controls#close\n * @type ControlsEvent\n */\n/**\n * Drag element event\n * @event Controls#drag\n * @type ControlsEvent\n */\n\n/**\n * @type {function} removeTabIndex\n */\nconst removeTabIndex = (0,_utils_elements__WEBPACK_IMPORTED_MODULE_0__.removeAttribute)('tabindex');\n/**\n * @type {function} removeTabIndexForAll\n */\nconst removeTabIndexForAll = (0,_utils_functional__WEBPACK_IMPORTED_MODULE_1__.forEach)(removeTabIndex);\n/**\n * @type {function} setTabIndexZero\n */\nconst setTabIndexZero = (0,_utils_elements__WEBPACK_IMPORTED_MODULE_0__.setAttribute)('tabindex', '0');\n/**\n * @type {function} setTabIndexMinusOne\n */\nconst setTabIndexMinusOne = (0,_utils_elements__WEBPACK_IMPORTED_MODULE_0__.setAttribute)('tabindex', '-1');\n/**\n * @type {function} hasTabIndex\n */\nconst hasTabIndex = (0,_utils_elements__WEBPACK_IMPORTED_MODULE_0__.hasAttribute)('tabindex');\n\n/**\n * @class\n * @mixes Eventful\n */\nclass Controls {\n  constructor(plugins) {\n    // add event system\n    Object.assign(this, (0,_mixins_eventful__WEBPACK_IMPORTED_MODULE_2__.Eventful)());\n\n    /**\n     *@property {HTMLElement} tabbableElement\n     */\n    /**\n     * @property {object[]} plugins\n     */\n    this.plugins = plugins || [];\n\n    /**\n     * @property {HTMLElement[]} elements\n     */\n    this.elements = [];\n\n    /**\n     * @property {boolean} useNegativeTabIndex\n     */\n    this.negativeTabIndexAllowed = false;\n\n    // move tabindex to next element\n    this.on('nextElement', this.nextElement, this);\n\n    // move tabindex to previous element\n    this.on('previousElement', this.previousElement, this);\n\n    // move tabindex for fist element\n    this.on('firstElement', this.firstElement, this);\n\n    // move tabindex for last element\n    this.on('lastElement', this.lastElement, this);\n\n    // init plugins\n    this.initPlugins();\n  }\n\n  /**\n   * Add controls to an element\n   *\n   * @param {HTMLElement} el\n   *\n   * @fires Controls#addElement\n   * @public\n   */\n  addElement(el) {\n    this.elements.push(el);\n\n    this.firesEvent('addElement', el);\n\n    if (this.elements.length === 1) { // if first\n      this.setTabbable(el);\n    }\n  };\n\n  /**\n   * Add controls to an element\n   *\n   * @param {HTMLElement} el\n   * @param {number} position\n   *\n   * @fires Controls#addElement\n   * @public\n   */\n  insertElementAt(el, position) {\n    this.elements.splice(position, 0, el);\n\n    this.firesEvent('addElement', el);\n\n    if (this.elements.length === 1) { // if first\n      this.setTabbable(el);\n    }\n  }\n\n  /**\n   * Add controls to an element\n   *\n   * @param {HTMLElement} el\n   *\n   * @fires Controls#addElement\n   * @public\n   */\n  removeElement(el) {\n    this.elements = (0,_utils_functional__WEBPACK_IMPORTED_MODULE_1__.without)([el], this.elements);\n\n    // if removed element was selected\n    if(hasTabIndex(el)) {\n      this.setUntabbable(el);\n\n      // set first element selected if exists\n      if(this.elements[0]) {\n        this.setTabbable(this.elements[0]);\n      }\n    }\n\n    this.firesEvent('removeElement', el);\n  };\n\n  /**\n   * Returns the number of elements is controlled by this object\n   *\n   * @return {number}\n   */\n  count() {\n    return this.elements.length;\n  }\n\n  /**\n   * Fire event\n   *\n   * @param {string} type\n   * @param {HTMLElement|EventTarget} el\n   *\n   * @public\n   */\n  firesEvent(type, el) {\n    const index = this.elements.indexOf(el);\n\n    return this.fire(type, {\n      element: el,\n      index: index,\n      elements: this.elements,\n      oldElement: this.tabbableElement\n    });\n  }\n\n  /**\n   * Sets tabindex on an element, remove it from all others\n   *\n   * @param {number} index\n   *\n   * @private\n   */\n  nextElement({index}) {\n    const isLastElement = index === (this.elements.length - 1);\n    const nextEl = this.elements[isLastElement ? 0 : (index + 1)];\n\n    this.setTabbable(nextEl);\n    nextEl.focus();\n  }\n\n  /**\n   * Sets tabindex on the first element, remove it from all others\n   *\n   * @private\n   */\n  firstElement() {\n    const element = this.elements[0];\n    this.setTabbable(element);\n    element.focus();\n  }\n\n  /**\n   * Sets tabindex on the first element, remove it from all others\n   *\n   * @private\n   */\n  lastElement() {\n    const element = this.elements[this.elements.length - 1];\n    this.setTabbable(element);\n    element.focus();\n  }\n\n  /**\n   * Selects the element at a position given by argument\n   *\n   * @param {number} index\n   * @public\n   */\n  setTabbableByIndex(index) {\n    const nextEl = this.elements[index];\n\n    if (nextEl) {\n      this.setTabbable(nextEl);\n    }\n  }\n\n  /**\n   * Sets tabindex on an element, remove it from all others\n   *\n   * @param {HTMLElement} el\n   * @public\n   */\n  setTabbable(el) {\n    (0,_utils_functional__WEBPACK_IMPORTED_MODULE_1__.forEach)(this.setUntabbable.bind(this), this.elements);\n    setTabIndexZero(el);\n    this.tabbableElement = el;\n  }\n\n  /**\n   * Removes tabbability from an element\n   *\n   * @param {HTMLElement} el\n   */\n  setUntabbable(el) {\n    if (el === document.activeElement) {\n      return;\n    }\n\n    if(this.negativeTabIndexAllowed) {\n      setTabIndexMinusOne(el);\n    }\n    else {\n      removeTabIndex(el);\n    }\n  }\n\n  /**\n   * Sets tabindex on an element, remove it from all others\n   *\n   * @param {number} index\n   *\n   * @private\n   */\n  previousElement({index}) {\n    const isFirstElement = index === 0;\n    const prevEl = this.elements[isFirstElement ? (this.elements.length - 1) : (index - 1)];\n\n    this.setTabbable(prevEl);\n    prevEl.focus();\n  }\n\n  /**\n   * Use tabindex=\"-1\" instead of removing tabindex for non-focused elements\n   */\n  useNegativeTabIndex() {\n    this.negativeTabIndexAllowed = true;\n    this.elements.forEach(element => {\n      if(!element.hasAttribute('tabindex')){\n        setTabIndexMinusOne(element);\n      }\n    })\n  }\n\n  /**\n   * Initializes the plugins\n   *\n   * @private\n   */\n  initPlugins() {\n    this.plugins.forEach(function(plugin){\n      if(plugin.init !== undefined){\n        plugin.init(this);\n      }\n    }, this);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy9jb250cm9scy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtY291cnNlLXByZXNlbnRhdGlvbi8uL25vZGVfbW9kdWxlcy9oNXAtbGliLWNvbnRyb2xzL3NyYy9zY3JpcHRzL2NvbnRyb2xzLmpzP2YxODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0QXR0cmlidXRlLCByZW1vdmVBdHRyaWJ1dGUsIGhhc0F0dHJpYnV0ZSB9IGZyb20gJy4vdXRpbHMvZWxlbWVudHMnO1xuaW1wb3J0IHsgZm9yRWFjaCwgd2l0aG91dCB9IGZyb20gJy4vdXRpbHMvZnVuY3Rpb25hbCc7XG5pbXBvcnQgeyBFdmVudGZ1bCB9IGZyb20gJy4vbWl4aW5zL2V2ZW50ZnVsJztcblxuLyoqXG4gKiBDb250cm9scyBFdmVudFxuICogQHR5cGVkZWYge09iamVjdH0gQ29udHJvbHNFdmVudFxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHByb3BlcnR5IHtudW1iZXJ9IGluZGV4XG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50W119IGVsZW1lbnRzXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBvbGRFbGVtZW50XG4gKi9cbi8qKlxuICogQWRkIGVsZW1lbnQgZXZlbnRcbiAqIEBldmVudCBDb250cm9scyNhZGRFbGVtZW50XG4gKiBAdHlwZSBDb250cm9sc0V2ZW50XG4gKi9cbi8qKlxuICogUmVtb3ZlIGVsZW1lbnQgZXZlbnRcbiAqIEBldmVudCBDb250cm9scyNyZW1vdmVFbGVtZW50XG4gKiBAdHlwZSBDb250cm9sc0V2ZW50XG4gKi9cbi8qKlxuICogUHJldmlvdXMgZWxlbWVudCBldmVudFxuICogQGV2ZW50IENvbnRyb2xzI3ByZXZpb3VzRWxlbWVudFxuICogQHR5cGUgQ29udHJvbHNFdmVudFxuICovXG4vKipcbiAqIE5leHQgZWxlbWVudCBldmVudFxuICogQGV2ZW50IENvbnRyb2xzI25leHRFbGVtZW50XG4gKiBAdHlwZSBDb250cm9sc0V2ZW50XG4gKi9cbi8qKlxuICogU2VsZWN0IG9wdGlvbiBldmVudFxuICogQGV2ZW50IENvbnRyb2xzI3NlbGVjdFxuICogQHR5cGUgQ29udHJvbHNFdmVudFxuICovXG4vKipcbiAqIENsb3NlIGV2ZW50XG4gKiBAZXZlbnQgQ29udHJvbHMjY2xvc2VcbiAqIEB0eXBlIENvbnRyb2xzRXZlbnRcbiAqL1xuLyoqXG4gKiBEcmFnIGVsZW1lbnQgZXZlbnRcbiAqIEBldmVudCBDb250cm9scyNkcmFnXG4gKiBAdHlwZSBDb250cm9sc0V2ZW50XG4gKi9cblxuLyoqXG4gKiBAdHlwZSB7ZnVuY3Rpb259IHJlbW92ZVRhYkluZGV4XG4gKi9cbmNvbnN0IHJlbW92ZVRhYkluZGV4ID0gcmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuLyoqXG4gKiBAdHlwZSB7ZnVuY3Rpb259IHJlbW92ZVRhYkluZGV4Rm9yQWxsXG4gKi9cbmNvbnN0IHJlbW92ZVRhYkluZGV4Rm9yQWxsID0gZm9yRWFjaChyZW1vdmVUYWJJbmRleCk7XG4vKipcbiAqIEB0eXBlIHtmdW5jdGlvbn0gc2V0VGFiSW5kZXhaZXJvXG4gKi9cbmNvbnN0IHNldFRhYkluZGV4WmVybyA9IHNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuLyoqXG4gKiBAdHlwZSB7ZnVuY3Rpb259IHNldFRhYkluZGV4TWludXNPbmVcbiAqL1xuY29uc3Qgc2V0VGFiSW5kZXhNaW51c09uZSA9IHNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbi8qKlxuICogQHR5cGUge2Z1bmN0aW9ufSBoYXNUYWJJbmRleFxuICovXG5jb25zdCBoYXNUYWJJbmRleCA9IGhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKTtcblxuLyoqXG4gKiBAY2xhc3NcbiAqIEBtaXhlcyBFdmVudGZ1bFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9scyB7XG4gIGNvbnN0cnVjdG9yKHBsdWdpbnMpIHtcbiAgICAvLyBhZGQgZXZlbnQgc3lzdGVtXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBFdmVudGZ1bCgpKTtcblxuICAgIC8qKlxuICAgICAqQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gdGFiYmFibGVFbGVtZW50XG4gICAgICovXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gcGx1Z2luc1xuICAgICAqL1xuICAgIHRoaXMucGx1Z2lucyA9IHBsdWdpbnMgfHwgW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkge0hUTUxFbGVtZW50W119IGVsZW1lbnRzXG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50cyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSB1c2VOZWdhdGl2ZVRhYkluZGV4XG4gICAgICovXG4gICAgdGhpcy5uZWdhdGl2ZVRhYkluZGV4QWxsb3dlZCA9IGZhbHNlO1xuXG4gICAgLy8gbW92ZSB0YWJpbmRleCB0byBuZXh0IGVsZW1lbnRcbiAgICB0aGlzLm9uKCduZXh0RWxlbWVudCcsIHRoaXMubmV4dEVsZW1lbnQsIHRoaXMpO1xuXG4gICAgLy8gbW92ZSB0YWJpbmRleCB0byBwcmV2aW91cyBlbGVtZW50XG4gICAgdGhpcy5vbigncHJldmlvdXNFbGVtZW50JywgdGhpcy5wcmV2aW91c0VsZW1lbnQsIHRoaXMpO1xuXG4gICAgLy8gbW92ZSB0YWJpbmRleCBmb3IgZmlzdCBlbGVtZW50XG4gICAgdGhpcy5vbignZmlyc3RFbGVtZW50JywgdGhpcy5maXJzdEVsZW1lbnQsIHRoaXMpO1xuXG4gICAgLy8gbW92ZSB0YWJpbmRleCBmb3IgbGFzdCBlbGVtZW50XG4gICAgdGhpcy5vbignbGFzdEVsZW1lbnQnLCB0aGlzLmxhc3RFbGVtZW50LCB0aGlzKTtcblxuICAgIC8vIGluaXQgcGx1Z2luc1xuICAgIHRoaXMuaW5pdFBsdWdpbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgY29udHJvbHMgdG8gYW4gZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICAgKlxuICAgKiBAZmlyZXMgQ29udHJvbHMjYWRkRWxlbWVudFxuICAgKiBAcHVibGljXG4gICAqL1xuICBhZGRFbGVtZW50KGVsKcKge1xuICAgIHRoaXMuZWxlbWVudHMucHVzaChlbCk7XG5cbiAgICB0aGlzLmZpcmVzRXZlbnQoJ2FkZEVsZW1lbnQnLCBlbCk7XG5cbiAgICBpZiAodGhpcy5lbGVtZW50cy5sZW5ndGggPT09IDEpIHsgLy8gaWYgZmlyc3RcbiAgICAgIHRoaXMuc2V0VGFiYmFibGUoZWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQWRkIGNvbnRyb2xzIHRvIGFuIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uXG4gICAqXG4gICAqIEBmaXJlcyBDb250cm9scyNhZGRFbGVtZW50XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGluc2VydEVsZW1lbnRBdChlbCwgcG9zaXRpb24pIHtcbiAgICB0aGlzLmVsZW1lbnRzLnNwbGljZShwb3NpdGlvbiwgMCwgZWwpO1xuXG4gICAgdGhpcy5maXJlc0V2ZW50KCdhZGRFbGVtZW50JywgZWwpO1xuXG4gICAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID09PSAxKSB7IC8vIGlmIGZpcnN0XG4gICAgICB0aGlzLnNldFRhYmJhYmxlKGVsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGNvbnRyb2xzIHRvIGFuIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAgICpcbiAgICogQGZpcmVzIENvbnRyb2xzI2FkZEVsZW1lbnRcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVtb3ZlRWxlbWVudChlbCnCoHtcbiAgICB0aGlzLmVsZW1lbnRzID0gd2l0aG91dChbZWxdLCB0aGlzLmVsZW1lbnRzKTtcblxuICAgIC8vIGlmIHJlbW92ZWQgZWxlbWVudCB3YXMgc2VsZWN0ZWRcbiAgICBpZihoYXNUYWJJbmRleChlbCkpIHtcbiAgICAgIHRoaXMuc2V0VW50YWJiYWJsZShlbCk7XG5cbiAgICAgIC8vIHNldCBmaXJzdCBlbGVtZW50IHNlbGVjdGVkIGlmIGV4aXN0c1xuICAgICAgaWYodGhpcy5lbGVtZW50c1swXSkge1xuICAgICAgICB0aGlzLnNldFRhYmJhYmxlKHRoaXMuZWxlbWVudHNbMF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZmlyZXNFdmVudCgncmVtb3ZlRWxlbWVudCcsIGVsKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGlzIGNvbnRyb2xsZWQgYnkgdGhpcyBvYmplY3RcbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgY291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmUgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxFdmVudFRhcmdldH0gZWxcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZmlyZXNFdmVudCh0eXBlLCBlbCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lbGVtZW50cy5pbmRleE9mKGVsKTtcblxuICAgIHJldHVybiB0aGlzLmZpcmUodHlwZSwge1xuICAgICAgZWxlbWVudDogZWwsXG4gICAgICBpbmRleDogaW5kZXgsXG4gICAgICBlbGVtZW50czogdGhpcy5lbGVtZW50cyxcbiAgICAgIG9sZEVsZW1lbnQ6IHRoaXMudGFiYmFibGVFbGVtZW50XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0YWJpbmRleCBvbiBhbiBlbGVtZW50LCByZW1vdmUgaXQgZnJvbSBhbGwgb3RoZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbmV4dEVsZW1lbnQoe2luZGV4fSkge1xuICAgIGNvbnN0IGlzTGFzdEVsZW1lbnQgPSBpbmRleCA9PT0gKHRoaXMuZWxlbWVudHMubGVuZ3RoIC0gMSk7XG4gICAgY29uc3QgbmV4dEVsID0gdGhpcy5lbGVtZW50c1tpc0xhc3RFbGVtZW50ID8gMCA6IChpbmRleCArIDEpXTtcblxuICAgIHRoaXMuc2V0VGFiYmFibGUobmV4dEVsKTtcbiAgICBuZXh0RWwuZm9jdXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRhYmluZGV4IG9uIHRoZSBmaXJzdCBlbGVtZW50LCByZW1vdmUgaXQgZnJvbSBhbGwgb3RoZXJzXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmaXJzdEVsZW1lbnQoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudHNbMF07XG4gICAgdGhpcy5zZXRUYWJiYWJsZShlbGVtZW50KTtcbiAgICBlbGVtZW50LmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0YWJpbmRleCBvbiB0aGUgZmlyc3QgZWxlbWVudCwgcmVtb3ZlIGl0IGZyb20gYWxsIG90aGVyc1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbGFzdEVsZW1lbnQoKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudHNbdGhpcy5lbGVtZW50cy5sZW5ndGggLSAxXTtcbiAgICB0aGlzLnNldFRhYmJhYmxlKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBlbGVtZW50IGF0IGEgcG9zaXRpb24gZ2l2ZW4gYnkgYXJndW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldFRhYmJhYmxlQnlJbmRleChpbmRleCkge1xuICAgIGNvbnN0IG5leHRFbCA9IHRoaXMuZWxlbWVudHNbaW5kZXhdO1xuXG4gICAgaWYgKG5leHRFbCnCoHtcbiAgICAgIHRoaXMuc2V0VGFiYmFibGUobmV4dEVsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0YWJpbmRleCBvbiBhbiBlbGVtZW50LCByZW1vdmUgaXQgZnJvbSBhbGwgb3RoZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldFRhYmJhYmxlKGVsKSB7XG4gICAgZm9yRWFjaCh0aGlzLnNldFVudGFiYmFibGUuYmluZCh0aGlzKSwgdGhpcy5lbGVtZW50cyk7XG4gICAgc2V0VGFiSW5kZXhaZXJvKGVsKTtcbiAgICB0aGlzLnRhYmJhYmxlRWxlbWVudCA9IGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGFiYmFiaWxpdHkgZnJvbSBhbiBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gICAqL1xuICBzZXRVbnRhYmJhYmxlKGVsKSB7XG4gICAgaWYgKGVsID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYodGhpcy5uZWdhdGl2ZVRhYkluZGV4QWxsb3dlZCkge1xuICAgICAgc2V0VGFiSW5kZXhNaW51c09uZShlbCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmVtb3ZlVGFiSW5kZXgoZWwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRhYmluZGV4IG9uIGFuIGVsZW1lbnQsIHJlbW92ZSBpdCBmcm9tIGFsbCBvdGhlcnNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcmV2aW91c0VsZW1lbnQoe2luZGV4fSkge1xuICAgIGNvbnN0IGlzRmlyc3RFbGVtZW50ID0gaW5kZXggPT09IDA7XG4gICAgY29uc3QgcHJldkVsID0gdGhpcy5lbGVtZW50c1tpc0ZpcnN0RWxlbWVudCA/ICh0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDEpIDogKGluZGV4IC0gMSldO1xuXG4gICAgdGhpcy5zZXRUYWJiYWJsZShwcmV2RWwpO1xuICAgIHByZXZFbC5mb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZSB0YWJpbmRleD1cIi0xXCIgaW5zdGVhZCBvZiByZW1vdmluZyB0YWJpbmRleCBmb3Igbm9uLWZvY3VzZWQgZWxlbWVudHNcbiAgICovXG4gIHVzZU5lZ2F0aXZlVGFiSW5kZXgoKSB7XG4gICAgdGhpcy5uZWdhdGl2ZVRhYkluZGV4QWxsb3dlZCA9IHRydWU7XG4gICAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgaWYoIWVsZW1lbnQuaGFzQXR0cmlidXRlKCd0YWJpbmRleCcpKXtcbiAgICAgICAgc2V0VGFiSW5kZXhNaW51c09uZShlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBwbHVnaW5zXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbml0UGx1Z2lucygpwqB7XG4gICAgdGhpcy5wbHVnaW5zLmZvckVhY2goZnVuY3Rpb24ocGx1Z2luKXtcbiAgICAgIGlmKHBsdWdpbi5pbml0ICE9PSB1bmRlZmluZWQpe1xuICAgICAgICBwbHVnaW4uaW5pdCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/h5p-lib-controls/src/scripts/controls.js\n");
    
    /***/ }),
    
    /***/ "./node_modules/h5p-lib-controls/src/scripts/mixins/eventful.js":
    /*!**********************************************************************!*\
      !*** ./node_modules/h5p-lib-controls/src/scripts/mixins/eventful.js ***!
      \**********************************************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Eventful\": () => (/* binding */ Eventful)\n/* harmony export */ });\n/**\n * @mixin\n */\nconst Eventful = () => ({\n  listeners: {},\n\n  /**\n   * Listen to event\n   *\n   * @param {string} type\n   * @param {function} listener\n   * @param {object} [scope]\n   *\n   * @function\n   * @return {Eventful}\n   */\n  on: function(type, listener, scope) {\n    /**\n     * @typedef {object} Trigger\n     * @property {function} listener\n     * @property {object} scope\n     */\n    const trigger = {\n      'listener': listener,\n      'scope': scope\n    };\n\n    this.listeners[type] = this.listeners[type] || [];\n    this.listeners[type].push(trigger);\n\n    return this;\n  },\n\n  /**\n   * Fire event. If any of the listeners returns false, return false\n   *\n   * @param {string} type\n   * @param {object} [event]\n   *\n   * @function\n   * @return {boolean}\n   */\n  fire: function(type, event) {\n    const triggers = this.listeners[type] || [];\n\n    return triggers.every(function(trigger) {\n      return trigger.listener.call(trigger.scope || this, event) !== false;\n    });\n  },\n\n  /**\n   * Listens for events on another Eventful, and propagate it trough this Eventful\n   *\n   * @param {string[]} types\n   * @param {Eventful} eventful\n   */\n  propagate: function(types, eventful) {\n    let self = this;\n    types.forEach(type => eventful.on(type, event => self.fire(type, event)));\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy9taXhpbnMvZXZlbnRmdWwuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy9taXhpbnMvZXZlbnRmdWwuanM/ODUyMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBtaXhpblxuICovXG5leHBvcnQgY29uc3QgRXZlbnRmdWwgPSAoKSA9PiAoe1xuICBsaXN0ZW5lcnM6IHt9LFxuXG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXJcbiAgICogQHBhcmFtIHtvYmplY3R9IFtzY29wZV1cbiAgICpcbiAgICogQGZ1bmN0aW9uXG4gICAqIEByZXR1cm4ge0V2ZW50ZnVsfVxuICAgKi9cbiAgb246IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyLCBzY29wZSkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtvYmplY3R9IFRyaWdnZXJcbiAgICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBsaXN0ZW5lclxuICAgICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBzY29wZVxuICAgICAqL1xuICAgIGNvbnN0IHRyaWdnZXIgPSB7XG4gICAgICAnbGlzdGVuZXInOiBsaXN0ZW5lcixcbiAgICAgICdzY29wZSc6IHNjb3BlXG4gICAgfTtcblxuICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdID0gdGhpcy5saXN0ZW5lcnNbdHlwZV0gfHwgW107XG4gICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaCh0cmlnZ2VyKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaXJlIGV2ZW50LiBJZiBhbnkgb2YgdGhlIGxpc3RlbmVycyByZXR1cm5zIGZhbHNlLCByZXR1cm4gZmFsc2VcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtvYmplY3R9IFtldmVudF1cbiAgICpcbiAgICogQGZ1bmN0aW9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBmaXJlOiBmdW5jdGlvbih0eXBlLCBldmVudCkge1xuICAgIGNvbnN0IHRyaWdnZXJzID0gdGhpcy5saXN0ZW5lcnNbdHlwZV0gfHwgW107XG5cbiAgICByZXR1cm4gdHJpZ2dlcnMuZXZlcnkoZnVuY3Rpb24odHJpZ2dlcikge1xuICAgICAgcmV0dXJuIHRyaWdnZXIubGlzdGVuZXIuY2FsbCh0cmlnZ2VyLnNjb3BlIHx8IHRoaXMsIGV2ZW50KSAhPT0gZmFsc2U7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExpc3RlbnMgZm9yIGV2ZW50cyBvbiBhbm90aGVyIEV2ZW50ZnVsLCBhbmQgcHJvcGFnYXRlIGl0IHRyb3VnaCB0aGlzIEV2ZW50ZnVsXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHR5cGVzXG4gICAqIEBwYXJhbSB7RXZlbnRmdWx9IGV2ZW50ZnVsXG4gICAqL1xuICBwcm9wYWdhdGU6IGZ1bmN0aW9uKHR5cGVzLCBldmVudGZ1bCkge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4gZXZlbnRmdWwub24odHlwZSwgZXZlbnQgPT4gc2VsZi5maXJlKHR5cGUsIGV2ZW50KSkpO1xuICB9XG59KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/h5p-lib-controls/src/scripts/mixins/eventful.js\n");
    
    /***/ }),
    
    /***/ "./node_modules/h5p-lib-controls/src/scripts/ui/keyboard.js":
    /*!******************************************************************!*\
      !*** ./node_modules/h5p-lib-controls/src/scripts/ui/keyboard.js ***!
      \******************************************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Keyboard)\n/* harmony export */ });\n/**\n * @class\n * @classdesc Keyboard navigation for accessibility support\n */\nclass Keyboard {\n  constructor() {\n    /**\n     * @property {boolean} selectability\n     */\n    this.selectability = true;\n  }\n\n  /**\n   * Inits this class\n   *\n   * @param {Controls} controls\n   */\n  init(controls) {\n    /**\n     * Need to have a common binding of handleKeyDown, so that it can be a\n     * common instance to be used for addEventListener and removeEventListener\n     * @type {function}\n     */\n    this.boundHandleKeyDown = this.handleKeyDown.bind(this);\n\n    /**\n     * @type {Controls}\n     */\n    this.controls = controls;\n    this.controls.on('addElement', this.listenForKeyDown, this);\n    this.controls.on('removeElement', this.removeKeyDownListener, this);\n  };\n\n  /**\n   * Listens for a keyboard press when element is focused\n   *\n   * @param {HTMLElement} element\n   * @private\n   */\n  listenForKeyDown({element}) {\n    element.addEventListener('keydown', this.boundHandleKeyDown);\n  };\n\n  /**\n   * Remove a keyboard press listener\n   *\n   * @param {HTMLElement} element\n   * @private\n   */\n  removeKeyDownListener({element}) {\n    element.removeEventListener('keydown', this.boundHandleKeyDown);\n  };\n\n  /**\n   * Handles key down\n   *\n   * @param {KeyboardEvent} event Keyboard event\n   * @private\n   */\n  handleKeyDown(event) {\n    switch (event.which) {\n      case 27: // Escape\n        this.close(event.target);\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n      case 35: // End\n        this.lastElement(event.target);\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n      case 36: // Home\n        this.firstElement(event.target);\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n      case 13: // Enter\n      case 32: // Space\n        this.select(event.target);\n        event.preventDefault();\n        event.stopPropagation();\n        break;\n      case 37: // Left Arrow\n      case 38: // Up Arrow\n        // ignore with modifiers, so not to interfere with Chromevox\n        if(!this.hasChromevoxModifiers(event)) {\n          this.previousElement(event.target);\n          event.preventDefault();\n          event.stopPropagation();\n        }\n        break;\n      case 39: // Right Arrow\n      case 40: // Down Arrow\n        // ignore with modifiers, so not to interfere with Chromevox\n        if(!this.hasChromevoxModifiers(event)) {\n          this.nextElement(event.target);\n          event.preventDefault();\n          event.stopPropagation();\n        }\n        break;\n    }\n  };\n\n  /**\n   * Checks if the Chromevox modifiers are pressed\n   *\n   * @param {KeyboardEvent} event Keyboard event\n   * @private\n   */\n  hasChromevoxModifiers(event) {\n    return event.shiftKey || event.ctrlKey;\n  }\n\n  /**\n   * Fires the previous element event\n   *\n   * @param {HTMLElement|EventTarget} el\n   * @fires Controls#previousElement\n   */\n  previousElement(el) {\n    if(this.controls.firesEvent('beforePreviousElement', el) !== false) {\n      this.controls.firesEvent('previousElement', el);\n      this.controls.firesEvent('afterPreviousElement', el);\n    }\n  };\n\n  /**\n   * Fire the next element event\n   *\n   * @param {HTMLElement|EventTarget} el\n   * @fires Controls#nextElement\n   */\n  nextElement(el) {\n    if(this.controls.firesEvent('beforeNextElement', el) !== false) {\n      this.controls.firesEvent('nextElement', el);\n      this.controls.firesEvent('afterNextElement', el);\n    }\n  };\n\n  /**\n   * Fires the select event\n   *\n   * @param {EventTarget|HTMLElement} el\n   * @fires Controls#select\n   */\n  select(el){\n    if(this.selectability) {\n      if(this.controls.firesEvent('before-select', el) !== false) {\n        this.controls.firesEvent('select', el);\n        this.controls.firesEvent('after-select', el)\n      }\n    }\n  };\n\n  /**\n   * Fire the next element event\n   *\n   * @param {HTMLElement|EventTarget} el\n   * @fires Controls#nextElement\n   */\n  firstElement(el) {\n    if(this.controls.firesEvent('beforeFirstElement', el) !== false) {\n      this.controls.firesEvent('firstElement', el);\n      this.controls.firesEvent('afterFirstElement', el);\n    }\n  };\n\n  /**\n   * Fire the next element event\n   *\n   * @param {HTMLElement|EventTarget} el\n   * @fires Controls#nextElement\n   */\n  lastElement(el) {\n    if(this.controls.firesEvent('beforeLastElement', el) !== false) {\n      this.controls.firesEvent('lastElement', el);\n      this.controls.firesEvent('afterLastElement', el);\n    }\n  };\n\n  /**\n   * Disable possibility to select a word trough click and space or enter\n   *\n   * @public\n   */\n  disableSelectability() {\n    this.selectability = false;\n  };\n\n  /**\n   * Enable possibility to select a word trough click and space or enter\n   *\n   * @public\n   */\n  enableSelectability() {\n    this.selectability = true;\n  }\n\n  /**\n   * Fires the close event\n   *\n   * @param {HTMLElement|EventTarget} el\n   * @fires Controls#close\n   */\n  close(el) {\n    if(this.controls.firesEvent('before-close', el) !== false) {\n      this.controls.firesEvent('close', el);\n      this.controls.firesEvent('after-close', el)\n    }\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy91aS9rZXlib2FyZC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtY291cnNlLXByZXNlbnRhdGlvbi8uL25vZGVfbW9kdWxlcy9oNXAtbGliLWNvbnRyb2xzL3NyYy9zY3JpcHRzL3VpL2tleWJvYXJkLmpzP2MxM2IiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAY2xhc3NcbiAqIEBjbGFzc2Rlc2MgS2V5Ym9hcmQgbmF2aWdhdGlvbiBmb3IgYWNjZXNzaWJpbGl0eSBzdXBwb3J0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtleWJvYXJkIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBzZWxlY3RhYmlsaXR5XG4gICAgICovXG4gICAgdGhpcy5zZWxlY3RhYmlsaXR5ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0cyB0aGlzIGNsYXNzXG4gICAqXG4gICAqIEBwYXJhbSB7Q29udHJvbHN9IGNvbnRyb2xzXG4gICAqL1xuICBpbml0KGNvbnRyb2xzKcKge1xuICAgIC8qKlxuICAgICAqIE5lZWQgdG8gaGF2ZSBhIGNvbW1vbiBiaW5kaW5nIG9mIGhhbmRsZUtleURvd24sIHNvIHRoYXQgaXQgY2FuIGJlIGFcbiAgICAgKiBjb21tb24gaW5zdGFuY2UgdG8gYmUgdXNlZCBmb3IgYWRkRXZlbnRMaXN0ZW5lciBhbmQgcmVtb3ZlRXZlbnRMaXN0ZW5lclxuICAgICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLmJvdW5kSGFuZGxlS2V5RG93biA9IHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0NvbnRyb2xzfVxuICAgICAqL1xuICAgIHRoaXMuY29udHJvbHMgPSBjb250cm9scztcbiAgICB0aGlzLmNvbnRyb2xzLm9uKCdhZGRFbGVtZW50JywgdGhpcy5saXN0ZW5Gb3JLZXlEb3duLCB0aGlzKTtcbiAgICB0aGlzLmNvbnRyb2xzLm9uKCdyZW1vdmVFbGVtZW50JywgdGhpcy5yZW1vdmVLZXlEb3duTGlzdGVuZXIsIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMaXN0ZW5zIGZvciBhIGtleWJvYXJkIHByZXNzIHdoZW4gZWxlbWVudCBpcyBmb2N1c2VkXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxpc3RlbkZvcktleURvd24oe2VsZW1lbnR9KSB7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5ib3VuZEhhbmRsZUtleURvd24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBrZXlib2FyZCBwcmVzcyBsaXN0ZW5lclxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZW1vdmVLZXlEb3duTGlzdGVuZXIoe2VsZW1lbnR9KSB7XG4gICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5ib3VuZEhhbmRsZUtleURvd24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGtleSBkb3duXG4gICAqXG4gICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnQgS2V5Ym9hcmQgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUtleURvd24oZXZlbnQpIHtcbiAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICBjYXNlIDI3OiAvLyBFc2NhcGVcbiAgICAgICAgdGhpcy5jbG9zZShldmVudC50YXJnZXQpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM1OiAvLyBFbmRcbiAgICAgICAgdGhpcy5sYXN0RWxlbWVudChldmVudC50YXJnZXQpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM2OiAvLyBIb21lXG4gICAgICAgIHRoaXMuZmlyc3RFbGVtZW50KGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTM6IC8vIEVudGVyXG4gICAgICBjYXNlIDMyOiAvLyBTcGFjZVxuICAgICAgICB0aGlzLnNlbGVjdChldmVudC50YXJnZXQpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM3OiAvLyBMZWZ0IEFycm93XG4gICAgICBjYXNlIDM4OiAvLyBVcCBBcnJvd1xuICAgICAgICAvLyBpZ25vcmUgd2l0aCBtb2RpZmllcnMsIHNvIG5vdCB0byBpbnRlcmZlcmUgd2l0aCBDaHJvbWV2b3hcbiAgICAgICAgaWYoIXRoaXMuaGFzQ2hyb21ldm94TW9kaWZpZXJzKGV2ZW50KSkge1xuICAgICAgICAgIHRoaXMucHJldmlvdXNFbGVtZW50KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzk6IC8vIFJpZ2h0IEFycm93XG4gICAgICBjYXNlIDQwOiAvLyBEb3duIEFycm93XG4gICAgICAgIC8vIGlnbm9yZSB3aXRoIG1vZGlmaWVycywgc28gbm90IHRvIGludGVyZmVyZSB3aXRoIENocm9tZXZveFxuICAgICAgICBpZighdGhpcy5oYXNDaHJvbWV2b3hNb2RpZmllcnMoZXZlbnQpKSB7XG4gICAgICAgICAgdGhpcy5uZXh0RWxlbWVudChldmVudC50YXJnZXQpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIENocm9tZXZveCBtb2RpZmllcnMgYXJlIHByZXNzZWRcbiAgICpcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudCBLZXlib2FyZCBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFzQ2hyb21ldm94TW9kaWZpZXJzKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmN0cmxLZXk7XG4gIH1cblxuICAvKipcbiAgICogRmlyZXMgdGhlIHByZXZpb3VzIGVsZW1lbnQgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxFdmVudFRhcmdldH0gZWxcbiAgICogQGZpcmVzIENvbnRyb2xzI3ByZXZpb3VzRWxlbWVudFxuICAgKi9cbiAgcHJldmlvdXNFbGVtZW50KGVsKSB7XG4gICAgaWYodGhpcy5jb250cm9scy5maXJlc0V2ZW50KCdiZWZvcmVQcmV2aW91c0VsZW1lbnQnLCBlbCkgIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLmNvbnRyb2xzLmZpcmVzRXZlbnQoJ3ByZXZpb3VzRWxlbWVudCcsIGVsKTtcbiAgICAgIHRoaXMuY29udHJvbHMuZmlyZXNFdmVudCgnYWZ0ZXJQcmV2aW91c0VsZW1lbnQnLCBlbCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGaXJlIHRoZSBuZXh0IGVsZW1lbnQgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxFdmVudFRhcmdldH0gZWxcbiAgICogQGZpcmVzIENvbnRyb2xzI25leHRFbGVtZW50XG4gICAqL1xuICBuZXh0RWxlbWVudChlbCkge1xuICAgIGlmKHRoaXMuY29udHJvbHMuZmlyZXNFdmVudCgnYmVmb3JlTmV4dEVsZW1lbnQnLCBlbCkgIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLmNvbnRyb2xzLmZpcmVzRXZlbnQoJ25leHRFbGVtZW50JywgZWwpO1xuICAgICAgdGhpcy5jb250cm9scy5maXJlc0V2ZW50KCdhZnRlck5leHRFbGVtZW50JywgZWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRmlyZXMgdGhlIHNlbGVjdCBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fEhUTUxFbGVtZW50fSBlbFxuICAgKiBAZmlyZXMgQ29udHJvbHMjc2VsZWN0XG4gICAqL1xuICBzZWxlY3QoZWwpe1xuICAgIGlmKHRoaXMuc2VsZWN0YWJpbGl0eSkge1xuICAgICAgaWYodGhpcy5jb250cm9scy5maXJlc0V2ZW50KCdiZWZvcmUtc2VsZWN0JywgZWwpICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmNvbnRyb2xzLmZpcmVzRXZlbnQoJ3NlbGVjdCcsIGVsKTtcbiAgICAgICAgdGhpcy5jb250cm9scy5maXJlc0V2ZW50KCdhZnRlci1zZWxlY3QnLCBlbClcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEZpcmUgdGhlIG5leHQgZWxlbWVudCBldmVudFxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fEV2ZW50VGFyZ2V0fSBlbFxuICAgKiBAZmlyZXMgQ29udHJvbHMjbmV4dEVsZW1lbnRcbiAgICovXG4gIGZpcnN0RWxlbWVudChlbCkge1xuICAgIGlmKHRoaXMuY29udHJvbHMuZmlyZXNFdmVudCgnYmVmb3JlRmlyc3RFbGVtZW50JywgZWwpICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5jb250cm9scy5maXJlc0V2ZW50KCdmaXJzdEVsZW1lbnQnLCBlbCk7XG4gICAgICB0aGlzLmNvbnRyb2xzLmZpcmVzRXZlbnQoJ2FmdGVyRmlyc3RFbGVtZW50JywgZWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRmlyZSB0aGUgbmV4dCBlbGVtZW50IGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8RXZlbnRUYXJnZXR9IGVsXG4gICAqIEBmaXJlcyBDb250cm9scyNuZXh0RWxlbWVudFxuICAgKi9cbiAgbGFzdEVsZW1lbnQoZWwpIHtcbiAgICBpZih0aGlzLmNvbnRyb2xzLmZpcmVzRXZlbnQoJ2JlZm9yZUxhc3RFbGVtZW50JywgZWwpICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5jb250cm9scy5maXJlc0V2ZW50KCdsYXN0RWxlbWVudCcsIGVsKTtcbiAgICAgIHRoaXMuY29udHJvbHMuZmlyZXNFdmVudCgnYWZ0ZXJMYXN0RWxlbWVudCcsIGVsKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2FibGUgcG9zc2liaWxpdHkgdG8gc2VsZWN0IGEgd29yZCB0cm91Z2ggY2xpY2sgYW5kIHNwYWNlIG9yIGVudGVyXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGRpc2FibGVTZWxlY3RhYmlsaXR5KCkge1xuICAgIHRoaXMuc2VsZWN0YWJpbGl0eSA9IGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGUgcG9zc2liaWxpdHkgdG8gc2VsZWN0IGEgd29yZCB0cm91Z2ggY2xpY2sgYW5kIHNwYWNlIG9yIGVudGVyXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGVuYWJsZVNlbGVjdGFiaWxpdHkoKSB7XG4gICAgdGhpcy5zZWxlY3RhYmlsaXR5ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB0aGUgY2xvc2UgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxFdmVudFRhcmdldH0gZWxcbiAgICogQGZpcmVzIENvbnRyb2xzI2Nsb3NlXG4gICAqL1xuICBjbG9zZShlbCkge1xuICAgIGlmKHRoaXMuY29udHJvbHMuZmlyZXNFdmVudCgnYmVmb3JlLWNsb3NlJywgZWwpICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5jb250cm9scy5maXJlc0V2ZW50KCdjbG9zZScsIGVsKTtcbiAgICAgIHRoaXMuY29udHJvbHMuZmlyZXNFdmVudCgnYWZ0ZXItY2xvc2UnLCBlbClcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/h5p-lib-controls/src/scripts/ui/keyboard.js\n");
    
    /***/ }),
    
    /***/ "./node_modules/h5p-lib-controls/src/scripts/utils/elements.js":
    /*!*********************************************************************!*\
      !*** ./node_modules/h5p-lib-controls/src/scripts/utils/elements.js ***!
      \*********************************************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addClass\": () => (/* binding */ addClass),\n/* harmony export */   \"appendChild\": () => (/* binding */ appendChild),\n/* harmony export */   \"attributeEquals\": () => (/* binding */ attributeEquals),\n/* harmony export */   \"classListContains\": () => (/* binding */ classListContains),\n/* harmony export */   \"createElement\": () => (/* binding */ createElement),\n/* harmony export */   \"getAttribute\": () => (/* binding */ getAttribute),\n/* harmony export */   \"hasAttribute\": () => (/* binding */ hasAttribute),\n/* harmony export */   \"hide\": () => (/* binding */ hide),\n/* harmony export */   \"nodeListToArray\": () => (/* binding */ nodeListToArray),\n/* harmony export */   \"querySelector\": () => (/* binding */ querySelector),\n/* harmony export */   \"querySelectorAll\": () => (/* binding */ querySelectorAll),\n/* harmony export */   \"removeAttribute\": () => (/* binding */ removeAttribute),\n/* harmony export */   \"removeChild\": () => (/* binding */ removeChild),\n/* harmony export */   \"removeClass\": () => (/* binding */ removeClass),\n/* harmony export */   \"setAttribute\": () => (/* binding */ setAttribute),\n/* harmony export */   \"show\": () => (/* binding */ show),\n/* harmony export */   \"toggleAttribute\": () => (/* binding */ toggleAttribute),\n/* harmony export */   \"toggleClass\": () => (/* binding */ toggleClass),\n/* harmony export */   \"toggleVisibility\": () => (/* binding */ toggleVisibility)\n/* harmony export */ });\n/* harmony import */ var _functional__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functional */ \"./node_modules/h5p-lib-controls/src/scripts/utils/functional.js\");\n\n\n/**\n * Get an attribute value from element\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n * @return {string}\n */\nconst getAttribute = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((name, el) => el.getAttribute(name));\n\n/**\n * Set an attribute on a html element\n *\n * @param {string} name\n * @param {string} value\n * @param {HTMLElement} el\n *\n * @function\n */\nconst setAttribute = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((name, value, el) => el.setAttribute(name, value));\n\n/**\n * Remove attribute from html element\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n */\nconst removeAttribute = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((name, el) => el.removeAttribute(name));\n\n/**\n * Check if element has an attribute\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n * @return {boolean}\n */\nconst hasAttribute = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((name, el) => el.hasAttribute(name));\n\n/**\n * Check if element has an attribute that equals\n *\n * @param {string} name\n * @param {string} value\n * @param {HTMLElement} el\n *\n * @function\n * @return {boolean}\n */\nconst attributeEquals = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((name, value, el) => el.getAttribute(name) === value);\n\n/**\n * Toggles an attribute between 'true' and 'false';\n *\n * @param {string} name\n * @param {HTMLElement} el\n *\n * @function\n */\nconst toggleAttribute = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((name, el) => {\n  const value = getAttribute(name, el);\n  setAttribute(name, (0,_functional__WEBPACK_IMPORTED_MODULE_0__.inverseBooleanString)(value), el);\n});\n\n/**\n * The appendChild() method adds a node to the end of the list of children of a specified parent node.\n *\n * @param {HTMLElement} parent\n * @param {HTMLElement} child\n *\n * @function\n * @return {HTMLElement}\n */\nconst appendChild = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((parent, child) => parent.appendChild(child));\n\n/**\n * Returns the first element that is a descendant of the element on which it is invoked\n * that matches the specified group of selectors.\n *\n * @param {string} selector\n * @param {HTMLElement} el\n *\n * @function\n * @return {HTMLElement}\n */\nconst querySelector = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((selector, el) => el.querySelector(selector));\n\n/**\n * Transforms a NodeList to an Array\n *\n * @param {NodeList} nodeList\n *\n * @return {Node[]}\n */\nconst nodeListToArray = nodeList => Array.prototype.slice.call(nodeList);\n\n/**\n * Returns a non-live NodeList of all elements descended from the element on which it\n * is invoked that matches the specified group of CSS selectors.\n *\n * @param {string} selector\n * @param {HTMLElement} el\n *\n * @function\n * @return {Node[]}\n */\nconst querySelectorAll = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((selector, el) => nodeListToArray(el.querySelectorAll(selector)));\n\n/**\n * The removeChild() method removes a child node from the DOM. Returns removed node.\n *\n * @param {Node} parent\n * @param {Node} oldChild\n *\n * @return {Node}\n */\nconst removeChild = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((parent, oldChild) => parent.removeChild(oldChild));\n\n/**\n * Returns true if a node has a class\n *\n * @param {string} cls\n * @param {HTMLElement} el\n *\n * @function\n */\nconst classListContains = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((cls, el) => el.classList.contains(cls));\n\n/**\n * Adds a css class to an element\n *\n * @param {string} cls\n * @param {Element} element\n *\n * @function\n */\nconst addClass = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((cls, element) => element.classList.add(cls));\n\n/**\n * Removes a css class from an element\n *\n * @param {string} cls\n * @param {Element} element\n *\n * @function\n */\nconst removeClass = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((cls, element) => element.classList.remove(cls));\n\n/**\n * Adds hidden class on an element\n *\n * @param {HTMLElement} element\n * @function\n */\nconst hide = addClass('hidden');\n\n/**\n * Removes hidden class from an element\n * @function\n */\nconst show = removeClass('hidden');\n\n/**\n * Toggles hidden class on an element\n *\n * @param {boolean} visible\n * @param {HTMLElement} element\n */\nconst toggleVisibility = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((visible, element) => (visible ? show : hide)(element));\n\n/**\n * Toggles a class on an element\n *\n * @param {string} cls\n * @param {boolean} add\n * @param {HTMLElement} element\n */\nconst toggleClass = (0,_functional__WEBPACK_IMPORTED_MODULE_0__.curry)((cls, add, element) => {\n  element.classList[add ? 'add' : 'remove'](cls)\n});\n\n/**\n * Helper for creating a DOM element\n *\n * @function\n *\n * @param {string} tag\n * @param {string} [id]\n * @param {string[]} [classes] - array of strings\n * @param {Object} [attributes]\n *\n * @return {HTMLElement}\n */\nconst createElement = ({tag, id, classes, attributes}) => {\n  let element = document.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n  if (classes) {\n    classes.forEach(clazz => {element.classList.add(clazz)});\n  }\n  if (attributes) {\n    Object.keys(attributes).forEach(key => {element.setAttribute(key, attributes[key])})\n  }\n\n  return element;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy91dGlscy9lbGVtZW50cy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy91dGlscy9lbGVtZW50cy5qcz9hZjUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Y3VycnksIGludmVyc2VCb29sZWFuU3RyaW5nfSBmcm9tICcuL2Z1bmN0aW9uYWwnXG5cbi8qKlxuICogR2V0IGFuIGF0dHJpYnV0ZSB2YWx1ZSBmcm9tIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEF0dHJpYnV0ZSA9IGN1cnJ5KChuYW1lLCBlbCkgPT4gZWwuZ2V0QXR0cmlidXRlKG5hbWUpKTtcblxuLyoqXG4gKiBTZXQgYW4gYXR0cmlidXRlIG9uIGEgaHRtbCBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqXG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHNldEF0dHJpYnV0ZSA9IGN1cnJ5KChuYW1lLCB2YWx1ZSwgZWwpID0+IGVsLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkpO1xuXG4vKipcbiAqIFJlbW92ZSBhdHRyaWJ1dGUgZnJvbSBodG1sIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqXG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZUF0dHJpYnV0ZSA9IGN1cnJ5KChuYW1lLCBlbCkgPT4gZWwucmVtb3ZlQXR0cmlidXRlKG5hbWUpKTtcblxuLyoqXG4gKiBDaGVjayBpZiBlbGVtZW50IGhhcyBhbiBhdHRyaWJ1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBoYXNBdHRyaWJ1dGUgPSBjdXJyeSgobmFtZSwgZWwpID0+IGVsLmhhc0F0dHJpYnV0ZShuYW1lKSk7XG5cbi8qKlxuICogQ2hlY2sgaWYgZWxlbWVudCBoYXMgYW4gYXR0cmlidXRlIHRoYXQgZXF1YWxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBhdHRyaWJ1dGVFcXVhbHMgPSBjdXJyeSgobmFtZSwgdmFsdWUsIGVsKSA9PiBlbC5nZXRBdHRyaWJ1dGUobmFtZSkgPT09IHZhbHVlKTtcblxuLyoqXG4gKiBUb2dnbGVzIGFuIGF0dHJpYnV0ZSBiZXR3ZWVuICd0cnVlJyBhbmQgJ2ZhbHNlJztcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqXG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHRvZ2dsZUF0dHJpYnV0ZSA9IGN1cnJ5KChuYW1lLCBlbCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGdldEF0dHJpYnV0ZShuYW1lLCBlbCk7XG4gIHNldEF0dHJpYnV0ZShuYW1lLCBpbnZlcnNlQm9vbGVhblN0cmluZyh2YWx1ZSksIGVsKTtcbn0pO1xuXG4vKipcbiAqIFRoZSBhcHBlbmRDaGlsZCgpIG1ldGhvZCBhZGRzIGEgbm9kZSB0byB0aGUgZW5kIG9mIHRoZSBsaXN0IG9mIGNoaWxkcmVuIG9mIGEgc3BlY2lmaWVkIHBhcmVudCBub2RlLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2hpbGRcbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge0hUTUxFbGVtZW50fVxuICovXG5leHBvcnQgY29uc3QgYXBwZW5kQ2hpbGQgPSBjdXJyeSgocGFyZW50LCBjaGlsZCkgPT4gcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKSk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIGEgZGVzY2VuZGFudCBvZiB0aGUgZWxlbWVudCBvbiB3aGljaCBpdCBpcyBpbnZva2VkXG4gKiB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBncm91cCBvZiBzZWxlY3RvcnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICpcbiAqIEBmdW5jdGlvblxuICogQHJldHVybiB7SFRNTEVsZW1lbnR9XG4gKi9cbmV4cG9ydCBjb25zdCBxdWVyeVNlbGVjdG9yID0gY3VycnkoKHNlbGVjdG9yLCBlbCkgPT4gZWwucXVlcnlTZWxlY3RvcihzZWxlY3RvcikpO1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgYSBOb2RlTGlzdCB0byBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG4gKlxuICogQHJldHVybiB7Tm9kZVtdfVxuICovXG5leHBvcnQgY29uc3Qgbm9kZUxpc3RUb0FycmF5ID0gbm9kZUxpc3QgPT4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobm9kZUxpc3QpO1xuXG4vKipcbiAqIFJldHVybnMgYSBub24tbGl2ZSBOb2RlTGlzdCBvZiBhbGwgZWxlbWVudHMgZGVzY2VuZGVkIGZyb20gdGhlIGVsZW1lbnQgb24gd2hpY2ggaXRcbiAqIGlzIGludm9rZWQgdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgZ3JvdXAgb2YgQ1NTIHNlbGVjdG9ycy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtOb2RlW119XG4gKi9cbmV4cG9ydCBjb25zdCBxdWVyeVNlbGVjdG9yQWxsID0gY3VycnkoKHNlbGVjdG9yLCBlbCkgPT4gbm9kZUxpc3RUb0FycmF5KGVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XG5cbi8qKlxuICogVGhlIHJlbW92ZUNoaWxkKCkgbWV0aG9kIHJlbW92ZXMgYSBjaGlsZCBub2RlIGZyb20gdGhlIERPTS4gUmV0dXJucyByZW1vdmVkIG5vZGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBwYXJlbnRcbiAqIEBwYXJhbSB7Tm9kZX0gb2xkQ2hpbGRcbiAqXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5leHBvcnQgY29uc3QgcmVtb3ZlQ2hpbGQgPSBjdXJyeSgocGFyZW50LCBvbGRDaGlsZCkgPT4gcGFyZW50LnJlbW92ZUNoaWxkKG9sZENoaWxkKSk7XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgbm9kZSBoYXMgYSBjbGFzc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbHNcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsXG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBjbGFzc0xpc3RDb250YWlucyA9IGN1cnJ5KChjbHMsIGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xzKSk7XG5cbi8qKlxuICogQWRkcyBhIGNzcyBjbGFzcyB0byBhbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNsc1xuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBhZGRDbGFzcyA9IGN1cnJ5KChjbHMsIGVsZW1lbnQpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbHMpKTtcblxuLyoqXG4gKiBSZW1vdmVzIGEgY3NzIGNsYXNzIGZyb20gYW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbHNcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICpcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgcmVtb3ZlQ2xhc3MgPSBjdXJyeSgoY2xzLCBlbGVtZW50KSA9PiBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xzKSk7XG5cbi8qKlxuICogQWRkcyBoaWRkZW4gY2xhc3Mgb24gYW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgaGlkZSA9IGFkZENsYXNzKCdoaWRkZW4nKTtcblxuLyoqXG4gKiBSZW1vdmVzIGhpZGRlbiBjbGFzcyBmcm9tIGFuIGVsZW1lbnRcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3Qgc2hvdyA9IHJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuLyoqXG4gKiBUb2dnbGVzIGhpZGRlbiBjbGFzcyBvbiBhbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBjb25zdCB0b2dnbGVWaXNpYmlsaXR5ID0gY3VycnkoKHZpc2libGUsIGVsZW1lbnQpID0+ICh2aXNpYmxlID8gc2hvdyA6IGhpZGUpKGVsZW1lbnQpKTtcblxuLyoqXG4gKiBUb2dnbGVzIGEgY2xhc3Mgb24gYW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbHNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gYWRkXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBjb25zdCB0b2dnbGVDbGFzcyA9IGN1cnJ5KChjbHMsIGFkZCwgZWxlbWVudCkgPT4ge1xuICBlbGVtZW50LmNsYXNzTGlzdFthZGQgPyAnYWRkJyA6ICdyZW1vdmUnXShjbHMpXG59KTtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGNyZWF0aW5nIGEgRE9NIGVsZW1lbnRcbiAqXG4gKiBAZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gKiBAcGFyYW0ge3N0cmluZ30gW2lkXVxuICogQHBhcmFtIHtzdHJpbmdbXX0gW2NsYXNzZXNdIC0gYXJyYXkgb2Ygc3RyaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFthdHRyaWJ1dGVzXVxuICpcbiAqIEByZXR1cm4ge0hUTUxFbGVtZW50fVxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudCA9ICh7dGFnLCBpZCwgY2xhc3NlcywgYXR0cmlidXRlc30pID0+IHtcbiAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG5cbiAgaWYgKGlkKSB7XG4gICAgZWxlbWVudC5pZCA9IGlkO1xuICB9XG4gIGlmIChjbGFzc2VzKSB7XG4gICAgY2xhc3Nlcy5mb3JFYWNoKGNsYXp6ID0+IHtlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhenopfSk7XG4gIH1cbiAgaWYgKGF0dHJpYnV0ZXMpIHtcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGtleSA9PiB7ZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pfSlcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/h5p-lib-controls/src/scripts/utils/elements.js\n");
    
    /***/ }),
    
    /***/ "./node_modules/h5p-lib-controls/src/scripts/utils/functional.js":
    /*!***********************************************************************!*\
      !*** ./node_modules/h5p-lib-controls/src/scripts/utils/functional.js ***!
      \***********************************************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"compose\": () => (/* binding */ compose),\n/* harmony export */   \"contains\": () => (/* binding */ contains),\n/* harmony export */   \"curry\": () => (/* binding */ curry),\n/* harmony export */   \"filter\": () => (/* binding */ filter),\n/* harmony export */   \"forEach\": () => (/* binding */ forEach),\n/* harmony export */   \"inverseBooleanString\": () => (/* binding */ inverseBooleanString),\n/* harmony export */   \"map\": () => (/* binding */ map),\n/* harmony export */   \"some\": () => (/* binding */ some),\n/* harmony export */   \"without\": () => (/* binding */ without)\n/* harmony export */ });\n/**\n * Returns a curried version of a function\n *\n * @param {function} fn\n *\n * @public\n *\n * @return {function}\n */\nconst curry = function(fn) {\n  const arity = fn.length;\n\n  return function f1() {\n    const args = Array.prototype.slice.call(arguments, 0);\n    if (args.length >= arity) {\n      return fn.apply(null, args);\n    }\n    else {\n      return function f2() {\n        const args2 = Array.prototype.slice.call(arguments, 0);\n        return f1.apply(null, args.concat(args2));\n      }\n    }\n  };\n};\n\n/**\n * Compose functions together, executing from right to left\n *\n * @param {function...} fns\n *\n * @function\n * @public\n *\n * @return {function}\n */\nconst compose = (...fns) => fns.reduce((f, g) => (...args) => f(g(...args)));\n\n/**\n * Applies a function to each element in an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nconst forEach = curry(function (fn, arr) {\n  arr.forEach(fn);\n});\n\n/**\n * Maps a function to an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nconst map = curry(function (fn, arr) {\n  return arr.map(fn);\n});\n\n/**\n * Applies a filter to an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nconst filter = curry(function (fn, arr) {\n  return arr.filter(fn);\n});\n\n/**\n * Applies a some to an array\n *\n * @param {function} fn\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nconst some = curry(function (fn, arr) {\n  return arr.some(fn);\n});\n\n/**\n * Returns true if an array contains a value\n *\n * @param {*} value\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nconst contains = curry(function (value, arr) {\n  return arr.indexOf(value) != -1;\n});\n\n/**\n * Returns an array without the supplied values\n *\n * @param {Array} values\n * @param {Array} arr\n *\n * @function\n * @public\n *\n * @return {function}\n */\nconst without = curry(function (values, arr) {\n  return filter(value => !contains(value, values), arr)\n});\n\n/**\n * Takes a string that is either 'true' or 'false' and returns the opposite\n *\n * @param {string} bool\n *\n * @public\n * @return {string}\n */\nconst inverseBooleanString = function (bool) {\n  return (bool !== 'true').toString();\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy91dGlscy9mdW5jdGlvbmFsLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9ub2RlX21vZHVsZXMvaDVwLWxpYi1jb250cm9scy9zcmMvc2NyaXB0cy91dGlscy9mdW5jdGlvbmFsLmpzPzU4MmQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXR1cm5zIGEgY3VycmllZCB2ZXJzaW9uIG9mIGEgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmblxuICpcbiAqIEBwdWJsaWNcbiAqXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGN1cnJ5ID0gZnVuY3Rpb24oZm4pIHtcbiAgY29uc3QgYXJpdHkgPSBmbi5sZW5ndGg7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGYxKCkge1xuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+PSBhcml0eSkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBmMigpIHtcbiAgICAgICAgY29uc3QgYXJnczIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICByZXR1cm4gZjEuYXBwbHkobnVsbCwgYXJncy5jb25jYXQoYXJnczIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIENvbXBvc2UgZnVuY3Rpb25zIHRvZ2V0aGVyLCBleGVjdXRpbmcgZnJvbSByaWdodCB0byBsZWZ0XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbi4uLn0gZm5zXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcHVibGljXG4gKlxuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmV4cG9ydCBjb25zdCBjb21wb3NlID0gKC4uLmZucykgPT4gZm5zLnJlZHVjZSgoZiwgZykgPT4gKC4uLmFyZ3MpID0+IGYoZyguLi5hcmdzKSkpO1xuXG4vKipcbiAqIEFwcGxpZXMgYSBmdW5jdGlvbiB0byBlYWNoIGVsZW1lbnQgaW4gYW4gYXJyYXlcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcHVibGljXG4gKlxuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmV4cG9ydCBjb25zdCBmb3JFYWNoID0gY3VycnkoZnVuY3Rpb24gKGZuLCBhcnIpIHtcbiAgYXJyLmZvckVhY2goZm4pO1xufSk7XG5cbi8qKlxuICogTWFwcyBhIGZ1bmN0aW9uIHRvIGFuIGFycmF5XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICpcbiAqIEBmdW5jdGlvblxuICogQHB1YmxpY1xuICpcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICovXG5leHBvcnQgY29uc3QgbWFwID0gY3VycnkoZnVuY3Rpb24gKGZuLCBhcnIpIHtcbiAgcmV0dXJuIGFyci5tYXAoZm4pO1xufSk7XG5cbi8qKlxuICogQXBwbGllcyBhIGZpbHRlciB0byBhbiBhcnJheVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwdWJsaWNcbiAqXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGZpbHRlciA9IGN1cnJ5KGZ1bmN0aW9uIChmbiwgYXJyKSB7XG4gIHJldHVybiBhcnIuZmlsdGVyKGZuKTtcbn0pO1xuXG4vKipcbiAqIEFwcGxpZXMgYSBzb21lIHRvIGFuIGFycmF5XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICpcbiAqIEBmdW5jdGlvblxuICogQHB1YmxpY1xuICpcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICovXG5leHBvcnQgY29uc3Qgc29tZSA9IGN1cnJ5KGZ1bmN0aW9uIChmbiwgYXJyKSB7XG4gIHJldHVybiBhcnIuc29tZShmbik7XG59KTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYW4gYXJyYXkgY29udGFpbnMgYSB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICpcbiAqIEBmdW5jdGlvblxuICogQHB1YmxpY1xuICpcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICovXG5leHBvcnQgY29uc3QgY29udGFpbnMgPSBjdXJyeShmdW5jdGlvbiAodmFsdWUsIGFycikge1xuICByZXR1cm4gYXJyLmluZGV4T2YodmFsdWUpICE9IC0xO1xufSk7XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSB3aXRob3V0IHRoZSBzdXBwbGllZCB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXNcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICpcbiAqIEBmdW5jdGlvblxuICogQHB1YmxpY1xuICpcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICovXG5leHBvcnQgY29uc3Qgd2l0aG91dCA9IGN1cnJ5KGZ1bmN0aW9uICh2YWx1ZXMsIGFycikge1xuICByZXR1cm4gZmlsdGVyKHZhbHVlID0+ICFjb250YWlucyh2YWx1ZSwgdmFsdWVzKSwgYXJyKVxufSk7XG5cbi8qKlxuICogVGFrZXMgYSBzdHJpbmcgdGhhdCBpcyBlaXRoZXIgJ3RydWUnIG9yICdmYWxzZScgYW5kIHJldHVybnMgdGhlIG9wcG9zaXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJvb2xcbiAqXG4gKiBAcHVibGljXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBpbnZlcnNlQm9vbGVhblN0cmluZyA9IGZ1bmN0aW9uIChib29sKSB7XG4gIHJldHVybiAoYm9vbCAhPT0gJ3RydWUnKS50b1N0cmluZygpO1xufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/h5p-lib-controls/src/scripts/utils/functional.js\n");
    
    /***/ }),
    
    /***/ "./node_modules/h5p-parent/src/child.js":
    /*!**********************************************!*\
      !*** ./node_modules/h5p-parent/src/child.js ***!
      \**********************************************/
    /***/ ((module) => {
    
    eval("/**\r\n * @class\r\n */\r\nfunction Child(index, parent) {\r\n  const self = this;\r\n\r\n  self.index = index;\r\n  self.parent = parent;\r\n}\r\n\r\nmodule.exports = Child;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaDVwLXBhcmVudC9zcmMvY2hpbGQuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vbm9kZV9tb2R1bGVzL2g1cC1wYXJlbnQvc3JjL2NoaWxkLmpzPzQ2ZmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBjbGFzc1xyXG4gKi9cclxuZnVuY3Rpb24gQ2hpbGQoaW5kZXgsIHBhcmVudCkge1xyXG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICBzZWxmLmluZGV4ID0gaW5kZXg7XHJcbiAgc2VsZi5wYXJlbnQgPSBwYXJlbnQ7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2hpbGQ7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/h5p-parent/src/child.js\n");
    
    /***/ }),
    
    /***/ "./node_modules/h5p-parent/src/parent.js":
    /*!***********************************************!*\
      !*** ./node_modules/h5p-parent/src/parent.js ***!
      \***********************************************/
    /***/ ((module, __unused_webpack_exports, __webpack_require__) => {
    
    eval("const Child = __webpack_require__(/*! ./child.js */ \"./node_modules/h5p-parent/src/child.js\");\r\nconst EventDispatcher = H5P.EventDispatcher;\r\n\r\n/**\r\n * @class\r\n */\r\nfunction Parent(constructor, parameters) {\r\n  const self = this;\r\n  EventDispatcher.call(self);\r\n\r\n  self.children = [];\r\n\r\n  /**\r\n   * Update the internal indexes of the children.\r\n   *\r\n   * @private\r\n   * @param {number} from Where to start\r\n   */\r\n  var updateIndexes = function (from) {\r\n    for (let i = from; i < self.children.length; i++) {\r\n      self.children[i].index = i;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Give a new child to this parent.\r\n   *\r\n   * @param {*} childParameters Launch parameters\r\n   */\r\n  self.addChild = function (childParameters, index) {\r\n    if (index === undefined) {\r\n      index = self.children.length\r\n    }\r\n\r\n    // Create a new child with the current instance as its parent\r\n    const instance = new Child(index, self);\r\n\r\n    if (index === self.children.length) {\r\n      // Added at the end\r\n      self.children.push(instance);\r\n    }\r\n    else {\r\n      // Inserted at a specific location\r\n      self.children.splice(index, 0, instance);\r\n      updateIndexes(index);\r\n    }\r\n\r\n    // Run original constructor\r\n    constructor.call(instance, childParameters);\r\n\r\n    return instance;\r\n  };\r\n\r\n  /**\r\n   * Remova a new child from its parent.\r\n   *\r\n   * @param {number} index\r\n   */\r\n  self.removeChild = function (index) {\r\n    // Remove from array\r\n    self.children.splice(index, 1);\r\n\r\n    // Update internal indexes\r\n    updateIndexes(index);\r\n  };\r\n\r\n  /**\r\n   * Move the child into a new position\r\n   *\r\n   * @param {number} oldIndex\r\n   * @param {number} newIndex\r\n   */\r\n  self.moveChild = function (oldIndex, newIndex) {\r\n    const child = self.children.splice(oldIndex, 1)[0];\r\n    self.children.splice(newIndex, 0, child);\r\n\r\n    updateIndexes(newIndex < oldIndex ? newIndex : oldIndex);\r\n  };\r\n\r\n  if (parameters) {\r\n    for (let i = 0; i < parameters.length; i++) {\r\n      self.addChild(parameters[i]);\r\n    }\r\n  }\r\n}\r\n\r\nParent.prototype = Object.create(EventDispatcher.prototype);\r\nParent.prototype.constructor = Parent;\r\n\r\nmodule.exports = Parent;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaDVwLXBhcmVudC9zcmMvcGFyZW50LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vbm9kZV9tb2R1bGVzL2g1cC1wYXJlbnQvc3JjL3BhcmVudC5qcz9jYjgyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENoaWxkID0gcmVxdWlyZSgnLi9jaGlsZC5qcycpO1xyXG5jb25zdCBFdmVudERpc3BhdGNoZXIgPSBINVAuRXZlbnREaXNwYXRjaGVyO1xyXG5cclxuLyoqXHJcbiAqIEBjbGFzc1xyXG4gKi9cclxuZnVuY3Rpb24gUGFyZW50KGNvbnN0cnVjdG9yLCBwYXJhbWV0ZXJzKSB7XHJcbiAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgRXZlbnREaXNwYXRjaGVyLmNhbGwoc2VsZik7XHJcblxyXG4gIHNlbGYuY2hpbGRyZW4gPSBbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHRoZSBpbnRlcm5hbCBpbmRleGVzIG9mIHRoZSBjaGlsZHJlbi5cclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGZyb20gV2hlcmUgdG8gc3RhcnRcclxuICAgKi9cclxuICB2YXIgdXBkYXRlSW5kZXhlcyA9IGZ1bmN0aW9uIChmcm9tKSB7XHJcbiAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHNlbGYuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgc2VsZi5jaGlsZHJlbltpXS5pbmRleCA9IGk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogR2l2ZSBhIG5ldyBjaGlsZCB0byB0aGlzIHBhcmVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gY2hpbGRQYXJhbWV0ZXJzIExhdW5jaCBwYXJhbWV0ZXJzXHJcbiAgICovXHJcbiAgc2VsZi5hZGRDaGlsZCA9IGZ1bmN0aW9uIChjaGlsZFBhcmFtZXRlcnMsIGluZGV4KSB7XHJcbiAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBpbmRleCA9IHNlbGYuY2hpbGRyZW4ubGVuZ3RoXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGNoaWxkIHdpdGggdGhlIGN1cnJlbnQgaW5zdGFuY2UgYXMgaXRzIHBhcmVudFxyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgQ2hpbGQoaW5kZXgsIHNlbGYpO1xyXG5cclxuICAgIGlmIChpbmRleCA9PT0gc2VsZi5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgLy8gQWRkZWQgYXQgdGhlIGVuZFxyXG4gICAgICBzZWxmLmNoaWxkcmVuLnB1c2goaW5zdGFuY2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vIEluc2VydGVkIGF0IGEgc3BlY2lmaWMgbG9jYXRpb25cclxuICAgICAgc2VsZi5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIGluc3RhbmNlKTtcclxuICAgICAgdXBkYXRlSW5kZXhlcyhpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUnVuIG9yaWdpbmFsIGNvbnN0cnVjdG9yXHJcbiAgICBjb25zdHJ1Y3Rvci5jYWxsKGluc3RhbmNlLCBjaGlsZFBhcmFtZXRlcnMpO1xyXG5cclxuICAgIHJldHVybiBpbnN0YW5jZTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmEgYSBuZXcgY2hpbGQgZnJvbSBpdHMgcGFyZW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XHJcbiAgICovXHJcbiAgc2VsZi5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgLy8gUmVtb3ZlIGZyb20gYXJyYXlcclxuICAgIHNlbGYuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgaW50ZXJuYWwgaW5kZXhlc1xyXG4gICAgdXBkYXRlSW5kZXhlcyhpbmRleCk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTW92ZSB0aGUgY2hpbGQgaW50byBhIG5ldyBwb3NpdGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9sZEluZGV4XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG5ld0luZGV4XHJcbiAgICovXHJcbiAgc2VsZi5tb3ZlQ2hpbGQgPSBmdW5jdGlvbiAob2xkSW5kZXgsIG5ld0luZGV4KSB7XHJcbiAgICBjb25zdCBjaGlsZCA9IHNlbGYuY2hpbGRyZW4uc3BsaWNlKG9sZEluZGV4LCAxKVswXTtcclxuICAgIHNlbGYuY2hpbGRyZW4uc3BsaWNlKG5ld0luZGV4LCAwLCBjaGlsZCk7XHJcblxyXG4gICAgdXBkYXRlSW5kZXhlcyhuZXdJbmRleCA8IG9sZEluZGV4ID8gbmV3SW5kZXggOiBvbGRJbmRleCk7XHJcbiAgfTtcclxuXHJcbiAgaWYgKHBhcmFtZXRlcnMpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzZWxmLmFkZENoaWxkKHBhcmFtZXRlcnNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuUGFyZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSk7XHJcblBhcmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQYXJlbnQ7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBhcmVudDtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/h5p-parent/src/parent.js\n");
    
    /***/ }),
    
    /***/ "./src/styles/cp.css":
    /*!***************************!*\
      !*** ./src/styles/cp.css ***!
      \***************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL2NwLmNzcy5qcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtY291cnNlLXByZXNlbnRhdGlvbi8uL3NyYy9zdHlsZXMvY3AuY3NzPzdiMGUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/styles/cp.css\n");
    
    /***/ }),
    
    /***/ "./src/styles/go-to-slide.scss":
    /*!*************************************!*\
      !*** ./src/styles/go-to-slide.scss ***!
      \*************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL2dvLXRvLXNsaWRlLnNjc3MuanMiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9zcmMvc3R5bGVzL2dvLXRvLXNsaWRlLnNjc3M/NGJjNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/styles/go-to-slide.scss\n");
    
    /***/ }),
    
    /***/ "./src/styles/keyword-menu.css":
    /*!*************************************!*\
      !*** ./src/styles/keyword-menu.css ***!
      \*************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL2tleXdvcmQtbWVudS5jc3MuanMiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9zcmMvc3R5bGVzL2tleXdvcmQtbWVudS5jc3M/ZDA3OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/styles/keyword-menu.css\n");
    
    /***/ }),
    
    /***/ "./src/styles/navigation-line.css":
    /*!****************************************!*\
      !*** ./src/styles/navigation-line.css ***!
      \****************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL25hdmlnYXRpb24tbGluZS5jc3MuanMiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWNvdXJzZS1wcmVzZW50YXRpb24vLi9zcmMvc3R5bGVzL25hdmlnYXRpb24tbGluZS5jc3M/MjU0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/styles/navigation-line.css\n");
    
    /***/ }),
    
    /***/ "./src/styles/print.css":
    /*!******************************!*\
      !*** ./src/styles/print.css ***!
      \******************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL3ByaW50LmNzcy5qcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtY291cnNlLXByZXNlbnRhdGlvbi8uL3NyYy9zdHlsZXMvcHJpbnQuY3NzPzdjYTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/styles/print.css\n");
    
    /***/ }),
    
    /***/ "./src/styles/slide-background.css":
    /*!*****************************************!*\
      !*** ./src/styles/slide-background.css ***!
      \*****************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL3NsaWRlLWJhY2tncm91bmQuY3NzLmpzIiwibWFwcGluZ3MiOiI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3N0eWxlcy9zbGlkZS1iYWNrZ3JvdW5kLmNzcz8wZThiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/styles/slide-background.css\n");
    
    /***/ }),
    
    /***/ "./src/styles/summary-slide.css":
    /*!**************************************!*\
      !*** ./src/styles/summary-slide.css ***!
      \**************************************/
    /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    
    "use strict";
    eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL3N1bW1hcnktc2xpZGUuY3NzLmpzIiwibWFwcGluZ3MiOiI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2g1cC1jb3Vyc2UtcHJlc2VudGF0aW9uLy4vc3JjL3N0eWxlcy9zdW1tYXJ5LXNsaWRlLmNzcz8zZDYwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/styles/summary-slide.css\n");
    
    /***/ })
    
    /******/ 	});
    /************************************************************************/
    /******/ 	// The module cache
    /******/ 	var __webpack_module_cache__ = {};
    /******/ 	
    /******/ 	// The require function
    /******/ 	function __webpack_require__(moduleId) {
    /******/ 		// Check if module is in cache
    /******/ 		var cachedModule = __webpack_module_cache__[moduleId];
    /******/ 		if (cachedModule !== undefined) {
    /******/ 			return cachedModule.exports;
    /******/ 		}
    /******/ 		// Create a new module (and put it into the cache)
    /******/ 		var module = __webpack_module_cache__[moduleId] = {
    /******/ 			// no module.id needed
    /******/ 			// no module.loaded needed
    /******/ 			exports: {}
    /******/ 		};
    /******/ 	
    /******/ 		// Execute the module function
    /******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
    /******/ 	
    /******/ 		// Return the exports of the module
    /******/ 		return module.exports;
    /******/ 	}
    /******/ 	
    /************************************************************************/
    /******/ 	/* webpack/runtime/compat get default export */
    /******/ 	(() => {
    /******/ 		// getDefaultExport function for compatibility with non-harmony modules
    /******/ 		__webpack_require__.n = (module) => {
    /******/ 			var getter = module && module.__esModule ?
    /******/ 				() => (module['default']) :
    /******/ 				() => (module);
    /******/ 			__webpack_require__.d(getter, { a: getter });
    /******/ 			return getter;
    /******/ 		};
    /******/ 	})();
    /******/ 	
    /******/ 	/* webpack/runtime/define property getters */
    /******/ 	(() => {
    /******/ 		// define getter functions for harmony exports
    /******/ 		__webpack_require__.d = (exports, definition) => {
    /******/ 			for(var key in definition) {
    /******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
    /******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
    /******/ 				}
    /******/ 			}
    /******/ 		};
    /******/ 	})();
    /******/ 	
    /******/ 	/* webpack/runtime/hasOwnProperty shorthand */
    /******/ 	(() => {
    /******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
    /******/ 	})();
    /******/ 	
    /******/ 	/* webpack/runtime/make namespace object */
    /******/ 	(() => {
    /******/ 		// define __esModule on exports
    /******/ 		__webpack_require__.r = (exports) => {
    /******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
    /******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
    /******/ 			}
    /******/ 			Object.defineProperty(exports, '__esModule', { value: true });
    /******/ 		};
    /******/ 	})();
    /******/ 	
    /************************************************************************/
    /******/ 	
    /******/ 	// startup
    /******/ 	// Load entry module and return exports
    /******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
    /******/ 	var __webpack_exports__ = __webpack_require__("./src/entries/dist.js");
    /******/ 	
    /******/ })()
    ;